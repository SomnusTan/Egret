var __reflect=this&&this.__reflect||function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i},__extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);i.prototype=t.prototype,e.prototype=new i},__awaiter=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function s(e){try{h(n.next(e))}catch(t){a(t)}}function r(e){try{h(n["throw"](e))}catch(t){a(t)}}function h(e){e.done?o(e.value):new i(function(t){t(e.value)}).then(s,r)}h((n=n.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function i(e){return function(t){return n([e,t])}}function n(i){if(o)throw new TypeError("Generator is already executing.");for(;h;)try{if(o=1,a&&(s=a[2&i[0]?"return":i[0]?"throw":"next"])&&!(s=s.call(a,i[1])).done)return s;switch(a=0,s&&(i=[0,s.value]),i[0]){case 0:case 1:s=i;break;case 4:return h.label++,{value:i[1],done:!1};case 5:h.label++,a=i[1],i=[0];continue;case 7:i=h.ops.pop(),h.trys.pop();continue;default:if(s=h.trys,!(s=s.length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){h=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){h.label=i[1];break}if(6===i[0]&&h.label<s[1]){h.label=s[1],s=i;break}if(s&&h.label<s[2]){h.label=s[2],h.ops.push(i);break}s[2]&&h.ops.pop(),h.trys.pop();continue}i=t.call(e,h)}catch(n){i=[6,n],a=0}finally{o=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var o,a,s,r,h={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},h5_engine;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t._isDispose=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"isDispose",{get:function(){return this._isDispose},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.remove(),this._isDispose=!0},t.prototype.remove=function(){this.parent&&this.parent.removeChild(this)},t}(egret.Sprite);e.GSprite=t,__reflect(t.prototype,"h5_engine.GSprite",["IDispose"])}(h5_engine||(h5_engine={}));var BasePanel=function(e){function t(){var t=e.call(this)||this;return t.panelName="",t.isShowing=!1,t._dispatcher=new DispatcherRegister,t.init(),t}return __extends(t,e),t.prototype.init=function(){},t.prototype.show=function(e){},t.prototype.hide=function(){this._dispatcher.removeAllListeners(),this._touchEffectBinder&&this._touchEffectBinder.unBindAll()},t.prototype.resize=function(){},t.prototype.needDispose=function(){return!0},t.prototype.dispose=function(){this._dispatcher=null,this._touchEffectBinder=null,e.prototype.dispose.call(this)},t.prototype.closePanel=function(){PanelManager.removePanelByName(this.panelName)},t.prototype.bindEffect=function(e,t){null!=e&&(null==this._touchEffectBinder&&(this._touchEffectBinder=new TouchEffectBinder),this._touchEffectBinder&&this._touchEffectBinder.bind(e,t))},t.prototype.unbindEffect=function(e,t){this._touchEffectBinder&&this._touchEffectBinder.unbind(e)},t}(h5_engine.GSprite);__reflect(BasePanel.prototype,"BasePanel",["IPanelDispose"]);var WindowView=function(e){function t(t,i){var n=e.call(this)||this;return n.setWH(t,i),n.touchEnabled=!1,n}return __extends(t,e),t.prototype.init=function(){this._windowView=new WindowViewUI,this.addChild(this._windowView),this.initView()},t.prototype.initView=function(){},t.prototype.initSkinType=function(){this._skinType=EnumWindowType.TYPE_1},t.prototype.changePanelSkin=function(){},Object.defineProperty(t.prototype,"rightTitle",{set:function(e){this._windowView.groupCenterTitle.visible=!1,this._windowView.groupTopTitle.visible=!1,e?(this._windowView.groupRightTitle.visible=!0,this._windowView.txtRightTitle.text=e):(this._windowView.groupRightTitle.visible=!1,this._windowView.txtRightTitle.text="")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"centerTitle",{set:function(e){this._windowView.groupRightTitle.visible=!1,this._windowView.groupTopTitle.visible=!1,e?(this._windowView.groupCenterTitle.visible=!0,this._windowView.txtCenterTitle.text=e):(this._windowView.groupCenterTitle.visible=!1,this._windowView.txtCenterTitle.text="")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topTitle",{set:function(e){this._windowView.groupRightTitle.visible=!1,this._windowView.groupCenterTitle.visible=!1,e?(this._windowView.groupTopTitle.visible=!0,this._windowView.txtTopTitle.text=e):(this._windowView.groupTopTitle.visible=!1,this._windowView.txtTopTitle.text="")},enumerable:!0,configurable:!0}),t.prototype.onClose=function(e){PanelManager.removePanelByName(this.panelName)},t.prototype.show=function(t){e.prototype.show.call(this,t)},t.prototype.dispose=function(){this._windowView&&(this._windowView.dispose(),this._windowView=void 0),this.removeChildren(),e.prototype.dispose.call(this)},t.prototype.setWH=function(e,t){this._windowView.height=t+140,this._windowView.imgBg.height=t+140,this._windowView.imgBg0.height=t+140,this.resize()},t.prototype.resize=function(){},Object.defineProperty(t.prototype,"width",{get:function(){return this._windowView.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._windowView.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"viewSp",{get:function(){return this._windowView.groupView},enumerable:!0,configurable:!0}),t}(BasePanel);__reflect(WindowView.prototype,"WindowView");var Dispose=function(e){function t(){var t=e.call(this)||this;return t._isDispose=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"isDispose",{get:function(){return this._isDispose},enumerable:!0,configurable:!0}),t.prototype.resetDispose=function(){this._isDispose=!1},t.prototype.dispose=function(){this._isDispose=!0},t}(egret.HashObject);__reflect(Dispose.prototype,"Dispose",["IDispose"]);var BasePhoneBindPanel=function(e){function t(){var t=e.call(this,550,527)||this;return t._canSendCode=!0,t}return __extends(t,e),t.prototype.initView=function(){this._view=new GameHallChangePasswordUI,this._view.y=105,this.viewSp.addChild(this._view)},t.prototype.initSkinType=function(){this._skinType=EnumWindowType.TYPE_3},t.prototype.show=function(t){e.prototype.show.call(this,t),this._canSendCode=!0,this._view.getVerificationCode.label="获取验证码",this._view.telephoneNumber.text="",this._view.verificationCode.text="",this.onGameLoginReset(),this._dispatcher.addEventListener(egret.Event.CHANGE,this.onTxtPhoneNumChange,this,this._view.telephoneNumber),this._dispatcher.addEventListener(egret.Event.CHANGE,this.onTxtCodeChange,this,this._view.verificationCode),InputTextUtil.addNativeInputTextListener(this._view.telephoneNumber),InputTextUtil.addNativeInputTextListener(this._view.verificationCode),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTabcancelEdit,this,this._view.cancelEdit),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTabbindNewNumber,this,this._view.bindNewNumber),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTabgetVerificationCode,this,this._view.getVerificationCode)},t.prototype.onGameLoginReset=function(){this.onTxtPhoneNumChange()},t.prototype.onTabgetVerificationCode=function(e){0==this._type?this.sendGetCodeMsg():(1==this._type||2==this._type)&&(this._phoneText&&11==this._phoneText.length?this.notInCodeValideCd()?this.sendGetCodeMsg():Notice.showBottomCenterMessage("验证码错误次数过多，请稍后再试"):Notice.showBottomCenterMessage("请输入正确的手机号码"))},t.prototype.sendGetCodeMsg=function(){},t.prototype.canGetCode=function(){return!1},t.prototype.canLogin=function(){return!1},t.prototype.onsend_tel_code=function(e){if(ResponseUtil.checkResponseData(e))this.bindSuccess();else if(210==Number(e.code)){this._canSendCode=!1,this._view.verificationCode.text="";var t=this.getKey(),i=Math.floor(.001*(new Date).getTime()+300).toString();App.global.storage.setItem(t,i),this.setGetCodeBtnCd(Number(i),"请稍候"),this.onTxtPhoneNumChange()}},t.prototype.getKey=function(){return""},t.prototype.bindSuccess=function(){PanelManager.removePanelByName(this.panelName),App.dispatcher.dispatchEvent(EventType.BIND_PHONE_SUCCESS)},t.prototype.onTabbindNewNumber=function(e){if(null!=this._phoneText){if(11==this._phoneText.length)if(""!=this._view.verificationCode.text)if(this._view.verificationCode.text.length>5){var t=this._view.verificationCode.text;1==this._type?ProtocolCommon.instance().send_Untied_old_Newphone(this._phoneText,t,new FunctionVO(this.onsend_tel_code,this)):ProtocolCommon.instance().send_tourist_bindphone(this._phoneText,t,new FunctionVO(this.onsend_tel_code,this))}else Notice.showBottomCenterMessage("验证码格式有误");else Notice.showBottomCenterMessage("请输入验证码")}else Notice.showBottomCenterMessage("请输入手机号码！")},t.prototype.onTxtPhoneNumChange=function(e){void 0===e&&(e=null),e&&App.sound.playSoundSwitchClient(EnumSoundId.CLICK),0!=this._type&&(this._phoneText=this._view.telephoneNumber.text),0==this._canSendCode&&(this._canSendCode=this.notInCodeValideCd(),this._canSendCode&&(App.timer.clearTimer(this,this.onGetCodeTime),this._view.getVerificationCode.label="获取验证码",this.onTxtPhoneNumChange())),this.canGetCode()?(this._view.getVerificationCode.filters=null,this._view.getVerificationCode.touchEnabled=!0):(this._view.getVerificationCode.filters=FilterUtil.FILTER_GRAY,this._view.getVerificationCode.touchEnabled=!1),this.onTxtCodeChange()},t.prototype.setGetCodeBtnCd=function(e,t){void 0===t&&(t="--"),App.timer.serverTimeEnd(this,this.onGetCodeTime,Math.floor(e),[t])},t.prototype.onGetCodeBack=function(e){GameLog.log("验证码："+e.data),ResponseUtil.checkResponseData(e)&&(this._canSendCode=!1,App.global.storage.setItem(EnumStorageType.GETCODE_CD_TIME+this._type,Math.floor(.001*(new Date).getTime()+60).toString()),this.setGetCodeBtnCd(ServerTime.serverTime+60,"已发送"),this._view.getVerificationCode.filters=FilterUtil.FILTER_GRAY,this._view.getVerificationCode.touchEnabled=!1)},t.prototype.notInCodeValideCd=function(){var e=!0,t=this.getKey(),i=App.global.storage.getItem(t);if(i){var n=Math.floor(.001*(new Date).getTime()-Number(i));0>n&&(this.setGetCodeBtnCd(Number(i),"请稍候"),this._canSendCode=!1,e=!1)}else i=App.global.storage.getItem(EnumStorageType.GETCODE_CD_TIME+this._type),i&&(n=Math.floor(.001*(new Date).getTime()-Number(i)),0>n&&(this.setGetCodeBtnCd(Number(i),"请稍候"),this._canSendCode=!1,e=!1));return e},t.prototype.onGetCodeTime=function(e,t){if(void 0===t&&(t="--"),e.spuleTime<=0)this._view.getVerificationCode.label="获取验证码",this._canSendCode=!0,this.onTxtPhoneNumChange(),App.timer.clearTimer(this,this.onGetCodeTime);else{var i=e.spuleTime;if(i>60){var n=Math.ceil(i/60);this._view.getVerificationCode.label=t+"("+n+"分)"}else this._view.getVerificationCode.label=t+"("+i+"秒)"}},t.prototype.hide=function(){e.prototype.hide.call(this),InputTextUtil.removeNativeInputTextListener(this._view.telephoneNumber),InputTextUtil.removeNativeInputTextListener(this._view.verificationCode),App.timer.clearTimer(this,this.onGetCodeTime)},t.prototype.onTxtCodeChange=function(e){void 0===e&&(e=null),e&&App.sound.playSoundSwitchClient(EnumSoundId.CLICK),this.canLogin()?(this._view.bindNewNumber.filters=null,this._view.bindNewNumber.touchEnabled=!0):(this._view.bindNewNumber.filters=FilterUtil.FILTER_GRAY,this._view.bindNewNumber.touchEnabled=!1)},t.prototype.onTabcancelEdit=function(){App.sound.playSoundSwitchClient(EnumSoundId.CLICK),PanelManager.removePanelByName(this.panelName)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._view&&(this._view.dispose(),this._view=null)},t}(WindowView);__reflect(BasePhoneBindPanel.prototype,"BasePhoneBindPanel");var WindowView2=function(e){function t(t,i){var n=e.call(this)||this;return n.setWH(t,i),n.touchEnabled=!1,n}return __extends(t,e),t.prototype.init=function(){this._windowView=new WindowView2UI,this.addChild(this._windowView),this.initView()},t.prototype.initView=function(){},t.prototype.onClose=function(e){PanelManager.removePanelByName(this.panelName)},t.prototype.show=function(t){e.prototype.show.call(this,t)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._windowView&&(this._windowView.dispose(),this._windowView=void 0),this.removeChildren()},t.prototype.setWH=function(e,t){this._windowView.width=e+60,this._windowView.height=t+60,this.resize()},t.prototype.resize=function(){},Object.defineProperty(t.prototype,"width",{get:function(){return this._windowView.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._windowView.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"viewSp",{get:function(){return this._windowView.groupView},enumerable:!0,configurable:!0}),t}(BasePanel);__reflect(WindowView2.prototype,"WindowView2");var BaseUI=function(e){function t(t){var i=e.call(this)||this;return i._euiSkinName="",i._hasCreated=!1,i.isDispose=!1,i.isCreate=!1,i.touchEnabled=!1,t&&(i.euiSkinName=t),i}return __extends(t,e),Object.defineProperty(t.prototype,"euiSkinName",{get:function(){return this._euiSkinName},set:function(e){this._hasCreated||(this._hasCreated=!0,this._euiSkinName=e,this.createView())},enumerable:!0,configurable:!0}),t.prototype.createView=function(){this.addEventListener(egret.Event.COMPLETE,this.createComplete,this),this.skinName=this.euiSkinName},t.prototype.createComplete=function(){this.removeEventListener(egret.Event.COMPLETE,this.createComplete,this),this.isCreate=!0},t.prototype.remove=function(){this.parent&&this.parent.removeChild(this)},t.prototype.dispose=function(){this.remove(),this._hasCreated=!1,this.isDispose=!0},t}(eui.Component);__reflect(BaseUI.prototype,"BaseUI",["IDispose"]);var h5_engine;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t._isDispose=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"isDispose",{get:function(){return this._isDispose},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._isDispose=!0},t.prototype.remove=function(){this.parent&&this.parent.removeChild(this)},t}(egret.DisplayObjectContainer);e.GDisplayObjectContainer=t,__reflect(t.prototype,"h5_engine.GDisplayObjectContainer",["IDispose"])}(h5_engine||(h5_engine={}));var HashMap=function(e){function t(){var t=e.call(this)||this;return t._length=0,t._keyArray=null,t._valueArray=null,t._keyArray=new Array,t._valueArray=new Array,t}return __extends(t,e),Object.defineProperty(t.prototype,"keys",{get:function(){return this._keyArray.concat()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"values",{get:function(){return this._valueArray.concat()},enumerable:!0,configurable:!0}),t.prototype.put=function(e,t){var i=this._keyArray.indexOf(e);return i>=0?void(this._valueArray[i]=t):(this._keyArray[this._length]=e,this._valueArray[this._length]=t,void this._length++)},t.prototype.get=function(e){var t=this._keyArray.indexOf(e);return t>=0?this._valueArray[t]:null},t.prototype.has=function(e){return this._keyArray.indexOf(e)>=0?!0:!1},t.prototype.del=function(e){this.remove(e)},t.prototype.remove=function(e){var t=this._keyArray.indexOf(e);return t>=0?(t!=this._length-1?(this._keyArray[t]=this._keyArray.pop(),this._valueArray[t]=this._valueArray.pop()):(this._keyArray.pop(),this._valueArray.pop()),this._length--,!0):!1},Object.defineProperty(t.prototype,"size",{get:function(){return this._length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),t.prototype.foEach=function(e,t,i){void 0===i&&(i=null);var n=[null,null];i&&(n=n.concat(i));for(var o=0;o<this._length;o++){n[0]=this._keyArray[o],n[1]=this._valueArray[o];var a=e.apply(t,n);if(a)break}},t.prototype.forInKeyByFunctionName=function(e){for(var t=this._keyArray,i=t.length,n=0;i>n;n++){var o=t[n];o[e]()}},t.prototype.forInValueExcetureFunctionName=function(e){for(var t=this._valueArray,i=t.length,n=0;i>n;n++){var o=t[n];o[e]()}},t.prototype.clear=function(){this._keyArray.length=0,this._valueArray.length=0,this._length=0},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._valueArray=null,this._keyArray=null},t}(Dispose);__reflect(HashMap.prototype,"HashMap");var SoEasySdk=function(){function e(){this._soEasySrc="https://cn.soeasysdk.com/soeasysr/zm_engine_v2.js",this._loginUrl="/user/login/soeasy/",this._payOrderUrl="/shop/gift/buy/"}return e.isCurChannel=function(e){var t=ZmSdk.getInstance().getUserInfo();return e==t.common.sdkindx?!0:!1},e.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.getLoginUrl=function(){return ProtocolHttpUrlGame2.url+this._loginUrl},e.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return GameLog.log("SoEasySdk >> start init"),loadSingleScript(this._soEasySrc,function(){GameLog.log("SoEasySdk >> init complete")}),[2]})})},e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return GameLog.log("SoEasySdk >> login start"),[2]})})},e.prototype.payOrder=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(i){return t=JSON.stringify({gid:e,Authorization:App.data.game2Center.DataCenter.skey,channel:"soeasy"}),Http.post(ProtocolHttpUrlGame2.url+this._payOrderUrl,t,this.payOrderHandler,this),[2]})})},e.prototype.payOrderHandler=function(e){var t=e.currentTarget,i=JSON.parse(t.response);GameLog.log("SoEasySdk >> payOrderHandler:",i);i.data;200==i.code?platform.pay(i.data):Notice.showBottomCenterMessage(i.info)},e.prototype.pay=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(i){return t={feeid:e.feeid,fee:e.fee,feename:e.feename,extradata:e.extradata,check:e.check},this.order_id=e.extradata,GameLog.log("SoEasySdk >> pay:",t),ZmSdk.getInstance().pay(t,function(e){GameLog.log("SoEasySdk >> easysdk payback:",e.retcode),"0"===e.retcode||"1"===e.retcode||"2"===e.retcode||"3"===e.retcode}),this.getBuy(),[2]})})},e.prototype.getBuy=function(){ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.payStatusH5,{order_id:this.order_id},new FunctionVO(this.payBack,this))},e.prototype.payBack=function(e){200==e.code?(Notice.showBottomCenterMessage("支付成功"),App.dispatcher.dispatchEvent(EventConst.REQ_GAME_INFO),App.data.game2Center.LoadingLock.unlock()):(this.t=0,this._needSendBuy=!0,App.timer.clearTimer(this,this.onTimer),App.timer.doTimeLoop(this,3e3,this.onTimer))},e.prototype.onTimer=function(){return this.t+=3,this.t>=600?(GameLog.log("-------------10分钟内支付失败"),void App.timer.clearTimer(this,this.onTimer)):void(this._needSendBuy&&(this._needSendBuy=!1,ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.payStatusH5,{order_id:this.order_id},new FunctionVO(this.onPaySuccess,this,!0))))},e.prototype.onPaySuccess=function(e){200==e.code?(Notice.showBottomCenterMessage("支付成功"),App.dispatcher.dispatchEvent(EventConst.REQ_GAME_INFO),App.timer.clearTimer(this,this.onTimer),App.data.game2Center.LoadingLock.unlock()):(GameLog.log("-------------未支付，继续检测----------"),this._needSendBuy=!0)},e.shieldChannel=function(){for(var t=ZmSdk.getInstance().getUserInfo(),i=e.hideChannelList.length,n=0;i>n;n++)if(e.hideChannelList[n]==t.common.sdkindx)return!0;return!1},e.reportRoleInfoH5=function(){var e={datatype:"2",serverid:"1",servername:"1",roleid:App.data.game2Center.DataCenter.UserInfo.id,rolename:App.data.game2Center.DataCenter.UserInfo.nickName,rolelevel:"1",fightvalue:"1"};ZmSdk.getInstance().isSupportMethod("reportRoleStatus")&&ZmSdk.getInstance().reportRoleStatus(e)},e.hideChannelList=["10382","10217","10425","379","10528"],e.channelList={h5_9g:"10382",qingFeng:"10448",h5_3500:"10217",baidu:"10425",lehaihai:"379",h5_15cmgame:"10528",h5_37117:"37117",h5_4177:"10215",h5_1758:"303"},e.shareData={title:"心动女生",content:"恋爱养成游戏，一段怦然心动的恋爱旅程等待着你。",imgurl:"http://xdns-h5.oss-cn-beijing.aliyuncs.com/soeasy/1.0.10/share.png"},e}();__reflect(SoEasySdk.prototype,"SoEasySdk",["Platform"]),window.zmInitSucc||(window.zmInitSucc=function(){GameLog.log("SoEasySdk >>cp start work"),ZmSdk.getInstance().init(zmInitBack)});var dispatcherReqUpgradeStatus=function(){App.dispatcher.dispatchEvent(G2_GameSceneEvent.REQ_UPGRADE_STATUS)},onSoeasyLogin=function(e,t){var i=ZmSdk.getInstance().getUserInfo(),n={uid:i.userdata.uid,t:i.userdata.t,sign:i.userdata.sign,common:i.common},o=JSON.stringify(n);GameLog.log("SoEasySdk >> send",o),0==e?ProtocolCommon.instance().sendLoginSoeasy(n,t):Http.post(platform.getLoginUrl(),o,t.fun,this)},zmInitBack=function(e){if("0"===e.retcode){GameLog.log("SoEasySdk >> SoEasy初始化成功");var t=ZmSdk.getInstance().getUserInfo();GameLog.log("SoEasySdk >> 用户信息:",t),ZmSdk.getInstance().isSupportMethod("setShareInfo")&&ZmSdk.getInstance().setShareInfo(SoEasySdk.shareData,function(e){GameLog.log("分享结果:",e)})}else"1"===e.retcode},loadSingleScript=function(e,t){var i=document.createElement("script");i.async=!1,i.src=e,i.addEventListener("load",function(){i.parentNode.removeChild(i),t()},!1),document.body.appendChild(i)},ResManager=function(){function e(){this._callBackHash=new HashMap,this._progressHash=new HashMap,this.STOP_LOAD_COUNT=0,this.RES_LOAD_DELAY=1e4,this._needCheckFailed=!1,this.DEFAULT_LOAD_THREAD=4}return e.prototype.createGroup=function(e,t){e&&t&&t.length>0&&RES.createGroup(e,t)},e.prototype.loadGroup=function(e,t,i,n,o){void 0===o&&(o=!1),e&&e.length>0?(this._currentGroupName=this.comboGroup(e),0==this._callBackHash.length&&t&&this.addEvents(),i&&this._progressHash.put(this._currentGroupName,i),this._callBackHash.put(this._currentGroupName,t),this._needCheckFailed=o,this._needCheckFailed&&(this.RES_LOAD_DELAY=Config.isRelease?2e4:3e3,this.addCheckFailed()),RES.loadGroup(this._currentGroupName,n)):t.exec()},e.prototype.destoryGroup=function(e){if(e&&e.length>0){var t=this.comboGroup(e);RES.destroyRes(t)}},e.prototype.isGroupLoaded=function(e){return RES.isGroupLoaded(e)},e.prototype.comboGroup=function(e){if(e.length>1){e.sort();var t=e.join("+");return RES.createGroup(t,e),t}return e[0]},e.prototype.addCheckFailed=function(){App.timer.doTimeOnce(this,this.RES_LOAD_DELAY,this.checkResLoadFailed)},e.prototype.checkResLoadFailed=function(){this.STOP_LOAD_COUNT++,GameLog.log("资源加载时间过长,判定为加载失败","\n当前占用加载线程"+this.STOP_LOAD_COUNT,"\n重新加载",GameLog.RED),RES.loadGroup(this._currentGroupName)},e.prototype.addEvents=function(){RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onLoadAllComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onLoadError,this)},e.prototype.removeEvents=function(){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onLoadAllComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onLoadError,this)},e.prototype.onLoadError=function(e){this.execCallBack(e.groupName,!1),GameLog.logWarn("Url:"+e.resItem.url+" has failed to load")},e.prototype.onResourceProgress=function(e){var t=this._progressHash.get(e.groupName);t&&t.exec(e),this._needCheckFailed&&this.addCheckFailed()},e.prototype.onLoadAllComplete=function(e){this._needCheckFailed&&App.timer.clearTimer(this,this.checkResLoadFailed),this._currentGroupName=null,this.execCallBack(e.groupName)},e.prototype.onResourceLoadError=function(e){this.execCallBack(e.groupName,!1),GameLog.logWarn("Group:"+e.groupName+" has failed to load")},e.prototype.execCallBack=function(e,t){if(void 0===t&&(t=!0),t){var i=this._callBackHash.get(e);i&&i.exec(e)}this.removeGroup(e)},e.prototype.setMaxLoadingThread=function(e){isNaN(this.STOP_LOAD_COUNT)&&(this.STOP_LOAD_COUNT=0),RES.setMaxLoadingThread(e+this.STOP_LOAD_COUNT)},e.prototype.removeGroup=function(e){this._callBackHash.remove(e),this._progressHash.remove(e),0==this._callBackHash.length&&this.removeEvents()},Object.defineProperty(e.prototype,"currentGroupName",{get:function(){return this._currentGroupName},enumerable:!0,configurable:!0}),e}();__reflect(ResManager.prototype,"ResManager");var Alert2Panel=function(e){function t(){return e.call(this,565,370)||this}return __extends(t,e),t.prototype.initView=function(){this._view=new Alert2UI,this.viewSp.addChild(this._view)},t.prototype.show=function(t){if(e.prototype.show.call(this,t),this._view.txtDesc.textFlow=null,this._view.txtDesc.text="",t.hasOwnProperty("txt")?t.isHtml?this._view.txtDesc.textFlow=HtmlUtil.getHtmlStr(t.txt):this._view.txtDesc.text=t.txt:this._view.txtDesc.text="",t.hasOwnProperty("btnLabels")&&t.btnLabels){var i=t.btnLabels,n=i.split("|");n.length>1?(this._view.btnCancel.visible=!0,this._view.btnConfirm.horizontalCenter=127):(this._view.btnConfirm.horizontalCenter=0,this._view.btnCancel.visible=!1)}this._view.txtTitle.text=t.title,this._closeHandler=t.closeHandler,this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this,this._view.btnConfirm),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this,this._view.btnCancel)},t.prototype.onClose=function(t){var i;switch(t.currentTarget){case this._view.btnConfirm:i=Alert.OK;break;case this._view.btnCancel:App.sound.needSkip=!0,i=Alert.CANCEL}this._closeHandler&&(this._closeHandler.param=[{type:i}],this._closeHandler.exec()),e.prototype.onClose.call(this,t)},t.prototype.hide=function(){e.prototype.hide.call(this),this._closeHandler=void 0},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._view&&(this._view.dispose(),this._view=void 0)},t}(WindowView2);__reflect(Alert2Panel.prototype,"Alert2Panel");var AlertPanel=function(e){function t(){return e.call(this,400,355)||this}return __extends(t,e),t.prototype.initView=function(){this._view=new AlertUI,this.viewSp.addChild(this._view)},t.prototype.show=function(t){if(e.prototype.show.call(this,t),t.hasOwnProperty("txt")?this._view.txtDesc.textFlow=HtmlUtil.getHtmlStr(t.txt):this._view.txtDesc.text="",t.hasOwnProperty("btnLabels")){var i=t.btnLabels,n=i.split("|");n.length>1?(this._view.btnConfirm.label=n[0],this._view.btnCancel.label=n[1],this._view.btnCancel.visible=!0,this._view.btnConfirm.horizontalCenter=-134):(this._view.btnConfirm.label=n[0],this._view.btnConfirm.horizontalCenter=0,this._view.btnCancel.visible=!1)}else this._view.btnConfirm.label="确定",this._view.btnCancel.label="取消";this.topTitle=t.title||"提示",this._closeHandler=t.closeHandler,this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this,this._view.btnConfirm),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this,this._view.btnCancel)},t.prototype.onClose=function(t){var i;switch(t.currentTarget){case this._view.btnConfirm:i=Alert.OK;break;case this._view.btnCancel:App.sound.needSkip=!0,i=Alert.CANCEL}this._closeHandler&&(this._closeHandler.param=[{type:i}],this._closeHandler.exec()),e.prototype.onClose.call(this,t)},t.prototype.hide=function(){e.prototype.hide.call(this),this._closeHandler=void 0},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._view&&(this._view.dispose(),this._view=null)},t}(WindowView);__reflect(AlertPanel.prototype,"AlertPanel");var FullScreenImagePanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this._view=new eui.Image,this._view.verticalCenter=0,this._view.horizontalCenter=0,this.addChild(this._view)},t.prototype.hide=function(){e.prototype.hide.call(this),this._view.source&&(RES.destroyRes(this._view.source.toString()),this._view.source=void 0),App.timer.clearTimer(this,this.openGameShare),PanelOpenManager.removePanel(EnumPanelID.GAME_SHARE)},t.prototype.show=function(t){e.prototype.show.call(this,t),this._openPanelId=0,this._delay=0,this._view.source=t.url,this._openPanelId?this._delay?App.timer.doTimeOnce(this,1e3,this.openGameShare):this.openGameShare():this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this,this)},t.prototype.openGameShare=function(){PanelOpenManager.openPanel(EnumPanelID.GAME_SHARE,{imgUrl:this._view.source}),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this,this)},t.prototype.onClick=function(e){App.sound.playSoundSwitchClient(EnumSoundId.PANEL_CLOSE),this.closePanel()},t.prototype.onLoadCom=function(e){this._view.source=e},t.prototype.dispose=function(){this._view&&(this._view.parent&&this._view.parent.removeChild(this._view),this._view.texture=void 0,this._view=void 0),e.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"width",{get:function(){return Config.MAIN_WIDTH},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return Config.MAIN_HEIGHT},enumerable:!0,configurable:!0}),t}(BasePanel);__reflect(FullScreenImagePanel.prototype,"FullScreenImagePanel");var GameShare2Panel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this._view=new GameShare2UI,this.addChild(this._view)},t.prototype.show=function(t){var i=this;if(e.prototype.show.call(this,t),this._data=t,this._view.bg.source=this._data.url,this._view.bg.alpha=0,this._view.groupShare.y=this.height,this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this,this._view.groupShareWx),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this,this._view.groupShareWxquan),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this,this._view.groupShareWb),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this,this._view.groupShareQQ),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this,this._view.groupShareQZone),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBegin,this,this._view.groupShareWx),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_END,this.onEnd,this,this._view.groupShareWx),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onEnd,this,this._view.groupShareWx),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBegin,this,this._view.groupShareWxquan),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_END,this.onEnd,this,this._view.groupShareWxquan),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onEnd,this,this._view.groupShareWxquan),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBegin,this,this._view.groupShareWb),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_END,this.onEnd,this,this._view.groupShareWb),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onEnd,this,this._view.groupShareWb),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBegin,this,this._view.groupShareQQ),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_END,this.onEnd,this,this._view.groupShareQQ),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onEnd,this,this._view.groupShareQQ),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBegin,this,this._view.groupShareQZone),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_END,this.onEnd,this,this._view.groupShareQZone),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onEnd,this,this._view.groupShareQZone),this._data.effect){this._view.imgWhite.x=0,this._view.imgWhite.y=0,this._view.imgWhite.width=Config.MAIN_WIDTH,this._view.imgWhite.height=Config.MAIN_HEIGHT;var n=BitmapDataUtil.createTextureByClass(GameManager.currentGame.getView(),new egret.Rectangle(0,0,Config.MAIN_WIDTH,Config.MAIN_HEIGHT));this._curBmp||(this._curBmp=new egret.Bitmap),this._curBmp.alpha=1,this._view.imgWhite.alpha=1,this._curBmp.texture=n,this._curBmp.x=10,this._curBmp.y=10;
var o=700/720,a=.984375;this._curBmp.scaleX=o,this._curBmp.scaleY=a,this._view.imgWhite.scaleX=1,this._view.imgWhite.scaleY=1;var s={x:0,y:Config.SCREEN_HEIGHT,scaleX:.01,scaleY:.01};egret.Tween.get(this._view.imgWhite).wait(250).call(function(){i._view.addChild(i._curBmp)},this).wait(250).to(s,500),egret.Tween.get(this._curBmp).wait(500).to(s,500).call(this.photoOver,this)}else this.photoOver()},t.prototype.photoOver=function(){var e=this;this._curBmp&&(this._curBmp.alpha=0,egret.Tween.removeTweens(this._curBmp),this._curBmp.parent&&this._curBmp.parent.removeChild(this._curBmp)),this._view.imgWhite.alpha=0,egret.Tween.removeTweens(this._view.imgWhite),egret.Tween.get(this._view.bg).to({alpha:1},300).call(function(){egret.Tween.removeTweens(e._view.bg)},this),App.timer.doTimeOnce(this,500,this.onShowShare)},t.prototype.hide=function(){e.prototype.hide.call(this),this._view.bg.source&&(RES.destroyRes(this._view.bg.source.toString()),this._view.bg.source=void 0),this._curBmp&&(this._curBmp.texture&&(this._curBmp.texture.dispose(),this._curBmp.texture=void 0),egret.Tween.removeTweens(this._curBmp)),egret.Tween.removeTweens(this._view.imgWhite),App.timer.clearTimer(this,this.onShowShare),this._data=void 0},t.prototype.onShowShare=function(){App.timer.clearTimer(this,this.onShowShare),egret.Tween.get(this._view.groupShare).to({y:this.height-this._view.groupShare.height},300).call(this.onCallBack,this)},t.prototype.onCallBack=function(){this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePanel,this,this._view.bg)},t.prototype.onClick=function(e){var t,i,n="",o="",a="",s=this._data.url,r="http://xdns.dmgame.com",h="心动女生",p="http://xdns.dmgame.com",l=2;switch(e.currentTarget){case this._view.groupShareWx:t=1,i=1;break;case this._view.groupShareWxquan:t=1,i=2;break;case this._view.groupShareQQ:t=2,i=4;break;case this._view.groupShareQZone:t=2,i=5;break;case this._view.groupShareWb:t=3,i=6}App.nativeBridge.share(n,o,a,s,r,h,p,t,l,i)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._curBmp&&(this._curBmp.parent&&this._curBmp.parent.removeChild(this._curBmp),this._curBmp.texture&&(this._curBmp.texture.dispose(),this._curBmp.texture=void 0),this._curBmp=null),this._view&&(this._view.dispose(),this._view=null)},Object.defineProperty(t.prototype,"width",{get:function(){return Config.MAIN_WIDTH},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return Config.MAIN_HEIGHT},enumerable:!0,configurable:!0}),t.prototype.onBegin=function(e){e.currentTarget.filters=[new egret.GlowFilter(15790320,1,5,5,10,10,!1,!1)]},t.prototype.onEnd=function(e){e.currentTarget.filters=null},t}(BasePanel);__reflect(GameShare2Panel.prototype,"GameShare2Panel");var GameSharePanel=function(e){function t(){return e.call(this,553,387)||this}return __extends(t,e),t.prototype.initView=function(){this._view=new GameShareUI,this._view.y=-15,this.viewSp.addChild(this._view),this.topTitle="一键分享"},t.prototype.initSkinType=function(){this._skinType=EnumWindowType.TYPE_4},t.prototype.show=function(t){e.prototype.show.call(this,t),this._data=t,this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this,this._view.groupShareWx),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this,this._view.groupShareWxquan),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this,this._view.groupShareWb),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this,this._view.groupShareQQ),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this,this._view.groupShareQZone)},t.prototype.onClick=function(e){var t,i,n="",o="",a="",s=this._data.imgUrl,r="",h="",p="",l=2;switch(e.currentTarget){case this._view.groupShareWx:n="微信标题+内容",t=1,i=1;break;case this._view.groupShareWxquan:n="朋友圈标题+内容",t=1,i=2;break;case this._view.groupShareQQ:n="QQ标题+内容",t=2,i=4;break;case this._view.groupShareQZone:n="QZone标题+内容",t=2,i=5;break;case this._view.groupShareWb:n="微博标题+内容",t=3,i=6}App.nativeBridge.share(n,o,a,s,r,h,p,t,l,i)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._view&&(this._view.dispose(),this._view=null)},t}(WindowView);__reflect(GameSharePanel.prototype,"GameSharePanel");var RetryConnectPanel=function(e){function t(){return e.call(this,400,250)||this}return __extends(t,e),t.prototype.initView=function(){e.prototype.initView.call(this),this._view=new RetryConnectUI,this.viewSp.addChild(this._view),this._view.btnRetry.labelDisplay.size=24,this.centerTitle="提示"},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._view&&(this._view.dispose(),this._view=null),this._data=null},t.prototype.show=function(t){e.prototype.show.call(this,t),this._data=t,this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this,this._view.btnRetry),this._view.btnRetry.touchEnabled=!0,this._view.btnRetry.filters=null},t.prototype.hide=function(){e.prototype.hide.call(this),this._data=null},t.prototype.onTouch=function(e){this._data&&(ProtocolCommon.sendBack(this._data.url,JSON.parse(this._data.data),this._data.callBack,this._data.notice,this._data.baseURL,this._data.needAddToken),this._view.btnRetry.touchEnabled=!1,this._view.btnRetry.filters=FilterUtil.FILTER_GRAY)},t}(WindowView);__reflect(RetryConnectPanel.prototype,"RetryConnectPanel");var EndingPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this._view=new EndingViewUI,this.addChild(this._view)},t.prototype.show=function(t){e.prototype.show.call(this,t),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this,this._view.groupHome),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this,this._view.groupMore),this._view.groupEndWord.alpha=0,this._view.groupBtns.alpha=0,this._view.groupShare.visible=App.global.canShare,this._view.groupShare.visible?(this._view.groupHome.y=0,this._view.groupMore.y=100,this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this,this._view.groupShare)):(this._view.groupHome.y=100,this._view.groupMore.y=200),this.showEnding()},t.prototype.hide=function(){e.prototype.hide.call(this),App.timer.clearTimer(this,this.showEndWord)},t.prototype.dispose=function(){this._view&&(this._view.dispose(),this._view=void 0),e.prototype.dispose.call(this)},t.prototype.showEnding=function(){var e=App.data.gameFangDongCenter;this._view.bg.source=e.imageEffectInfo.bgURL,this._view.txtEndZw.text=e.endTitle,App.timer.doTimeOnce(this,1e3,this.showEndWord)},t.prototype.showEndWord=function(){App.timer.clearTimer(this,this.showEndWord),egret.Tween.get(this._view.groupEndWord).to({alpha:1},500).wait(1e3).call(this.showButtons,this)},t.prototype.showButtons=function(){App.global.guide.showView(this._view.btnShare,EnumGuideType.END_SHARE,this.panelName),egret.Tween.get(this._view.groupBtns).to({alpha:1},500)},t.prototype.onClick=function(e){switch(e.currentTarget){case this._view.groupHome:this.closePanel(),GameManager.exitGame(),PanelOpenManager.openPanel(EnumPanelID.HEROINES_DETAIL,App.data.gameHallCenter.getHeroniesData(App.data.gameFangDongCenter.gameId));break;case this._view.groupMore:PanelOpenManager.openPanel(EnumPanelID.RECORD,{uid:App.data.gameFangDongCenter.gameId,type:EnumRecordType.READ,panelName:this.panelName});break;case this._view.groupShare:ProtocolCommon.instance().send_share_link(App.data.gameFangDongCenter.gameId,App.data.gameFangDongCenter.id,new FunctionVO(this.onCallBack,this))}},t.prototype.onCallBack=function(e){"200"==e.code&&PanelOpenManager.openPanel(EnumPanelID.GAME_SHARE2,{url:e.data.collect_image})},Object.defineProperty(t.prototype,"width",{get:function(){return Config.MAIN_WIDTH},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return Config.MAIN_HEIGHT},enumerable:!0,configurable:!0}),t}(BasePanel);__reflect(EndingPanel.prototype,"EndingPanel");var GameFangDongBenamePanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),this._view=new GameFangDongBeNameUI,this.addChild(this._view)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._view&&(this._view.dispose(),this._view=null)},t.prototype.show=function(t){e.prototype.show.call(this,t),this._view.txtName.textTemp.textColor=16777215,this._view.btnName.img_down.source=this._view.btnName.img_up.source=App.data.gameResourceCenter.getRes(EnumGameRes1.MENU_BASE_BUTTON),this._view.btnRandom.img_down.source=this._view.btnRandom.img_up.source=App.data.gameResourceCenter.getRes(EnumGameRes1.RANDOM_BUTTON),this._view.imgBg.source=App.data.gameResourceCenter.getRes(EnumGameRes1.INPUT_BG),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchRandomName,this,this._view.btnRandom),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchBename,this,this._view.btnName),this._dispatcher.addEventListener(GameEvent.GAME_RANDOM_NAME,this.onGetRandomName,this),InputTextUtil.addNativeInputTextListener(this._view.txtName)},t.prototype.hide=function(){e.prototype.hide.call(this),InputTextUtil.removeNativeInputTextListener(this._view.txtName)},t.prototype.onTouchRandomName=function(e){ProtocolFangDong.instance().send_random_name()},t.prototype.onGetRandomName=function(e){this._view.txtName.text=e},t.prototype.onTouchBename=function(e){var t=this._view.txtName.text;return""==t?void Notice.showBottomCenterMessage("名字不能为空"):t.length<2?void Notice.showBottomCenterMessage("名字长度至少2个字"):t.length>12?void Notice.showBottomCenterMessage("名字长度不能超过12个字"):void ProtocolFangDong.instance().send_bename(t,App.data.gameFangDongCenter.gameId)},Object.defineProperty(t.prototype,"width",{get:function(){return 536},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return 270},enumerable:!0,configurable:!0}),t}(BasePanel);__reflect(GameFangDongBenamePanel.prototype,"GameFangDongBenamePanel");var GameFangDongBuyPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),this._view=new GameFangDongBuyUI,this.addChild(this._view)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._view&&(this._view.dispose(),this._view=null)},t.prototype.show=function(t){e.prototype.show.call(this,t),this._data=t,this.onTouchRelease(),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this,this._view.btn_unlock),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchRelease,this,this._view.btn_unlock),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this,this._view.btn_unlock),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onQuitClick,this,this._view.btn_quit),this._dispatcher.addEventListener(EventType.BUY_SUCCESS,this.onBuySuccess,this),this._dispatcher.addEventListener(EventType.SHOP_IS_SHOP,this.onCheckShop,this),this._view.txt_price.text="￥"+this._data.money,this._uid=this._data.id,DeviceUtil.IsWeb&&DeviceUtil.isMobile&&0==Config.soEasy&&null==H5_360_Sdk.getInstance().config360&&(DeviceUtil.isWeiBoBrowser||DeviceUtil.isWeiXinBrowser||DeviceUtil.isQQInBrowser||DeviceUtil.isSogouBrowser)&&Notice.showBottomCenterMessage("因内嵌浏览器无法弹出支付窗口,请使用\n谷歌浏览器支付体验"),this.addButtonTween(),this.showActPrice()},t.prototype.hide=function(){e.prototype.hide.call(this),egret.Tween.removeTweens(this._view.boxButton),this.clearTimer(),App.timer.clearTimer(this,this.onActTimer),this._data=null,this.onTouchBegin(),this._tempWin=null},t.prototype.addButtonTween=function(){egret.Tween.get(this._view.boxButton,{loop:!0}).to({scaleX:1.3,scaleY:1.3},80).to({scaleX:1,scaleY:1},800,egret.Ease.elasticOut).wait(100)},t.prototype.showActPrice=function(){var e=this._data.originalMoney;e?(this._view.group_old.x=140,this._view.txt_oldprice.text="￥"+e,this._view.groupTime.visible=!0,this._view.group_old.visible=!0,App.timer.serverTimeEnd(this,this.onActTimer,this._data.endTime)):(this._view.group_old.x=0,this._view.groupTime.visible=!1,this._view.group_old.visible=!1)},t.prototype.onActTimer=function(e){e.spuleTime>0?this._view.txt_actTime.text="优惠时间剩余 "+StringUtil.formatLeftTimeDHM(e.spuleTime):App.timer.clearTimer(this,this.onActTimer)},t.prototype.onBuySuccess=function(e,t){e==this._uid&&this.onHttpShopPayBack(t)},t.prototype.onTouchBegin=function(e){this._view.imgLight.visible=!0},t.prototype.onTouchRelease=function(e){this._view.imgLight.visible=!1},t.prototype.onClick=function(e){DeviceUtil.IsWeb?Config.soEasy?ProtocolCommon.instance().send_shop_please_pay(1,this._uid,new FunctionVO(this.onHttpShopPayOtherBack,this)):H5_360_Sdk.getInstance().config360?ProtocolCommon.instance().send_shop_please_pay(1,this._uid,new FunctionVO(this.onHttpShopPayOtherBack,this)):Config.isRelease?(this._tempWin=WebParams.openWindow(WebParams.defaultURL),ProtocolCommon.instance().send_shop_please_pay(1,this._uid,new FunctionVO(this.onHttpShopPayBack1,this))):ProtocolCommon.instance().send_shop_please_pay(1,this._uid,new FunctionVO(this.onHttpShopPayBack,this)):DeviceUtil.IsAndroid&&DeviceUtil.IsNative?App.nativeBridge.sendU8PayNew(1,{productId:this._uid,buyNum:1,price:this._data.money,productName:this._data.title,productDesc:"解锁《"+this._data.title+"》后续内容",ratio:"",serverID:"",serverName:this._data.title}):DeviceUtil.IsIos&&DeviceUtil.IsNative&&App.nativeBridge.sendIOSPayNew(1,this._uid),this.onTouchRelease(e)},t.prototype.onHttpShopPayOtherBack=function(e){if(200==e.code)if(this._orderId=e.data.order_id,Config.soEasy){var t={check:e.data.code,feeid:e.data.order_id,fee:String(100*Number(e.data.price)),feename:e.data.productName,extradata:e.data.order_id,serverid:"1",servername:e.data.ServerName};GameLog.log("------------请求支付房东----------------payinfojson--,",t),ZmSdk.getInstance().pay(t,function(e){GameLog.log("------------请求支付房东---------payBack:data,",e),"0"===e.retcode?App.dispatcher.dispatchEvent(EventType.SHOP_IS_SHOP):"1"===e.retcode||"2"===e.retcode||"3"===e.retcode})}else H5_360_Sdk.getInstance().config360&&(H5_360_Sdk.getInstance().pay360Param=e.data.code,H5_360_Sdk.getInstance().order_id=e.data.order_id,H5_360_Sdk.getInstance().paySdk(),App.dispatcher.dispatchEvent(EventType.SHOP_IS_SHOP),GameLog.log("360支付订单号：",this._orderId))},t.prototype.onHttpShopPayBack1=function(e){200==e.code&&(this._orderId=e.data.order_id,this._waitTimes=0,this._needSendBuy=!0,ProtocolCommon.instance().send_alipay_switch(e.data.code,this._tempWin,new FunctionVO(this.onHttpShopPayBack,this)),this.clearTimer(),App.timer.doTimeLoop(this,3e3,this.checkBuySuccess))},t.prototype.checkBuySuccess=function(){return this._waitTimes+=3,this._waitTimes>=300?(this.clearTimer(),void Notice.showBottomCenterMessage("支付失败")):void(this._needSendBuy&&(this._needSendBuy=!1,ProtocolCommon.sendBack(ProtocolHttpUrl.shop_is_shop,{order_id:this._orderId},new FunctionVO(this.onShopBack,this))))},t.prototype.onCheckShop=function(){this._waitTimes=0,this._needSendBuy=!0,this.clearTimer(),this.checkBuySuccess(),App.timer.doTimeLoop(this,3e3,this.checkBuySuccess)},t.prototype.onShopBack=function(e){200==e.code&&(e.data.type?(this.clearTimer(),this.onHttpShopPayBack(e)):this._needSendBuy=!0)},t.prototype.clearTimer=function(){App.timer.clearTimer(this,this.checkBuySuccess)},t.prototype.onHttpShopPayBack=function(e){if(200==e.code){this.closePanel(),App.data.gameHallCenter.updateHeroniesProps(this._uid,{is_shop:!0});var t=App.data.gameHallCenter.getHeroniesData(this._uid);Notice.showBottomCenterMessage("购买"+t.title+"成功"),t.forceToPhoneBind()||App.dispatcher.dispatchEvent(GameEvent.GAME_UNLOCK_SUCCESS,this._uid)}},t.prototype.onQuitClick=function(e){GameManager.isPlaying&&(GameManager.exitGame(),App.global.guide.changeGuideTo_stateN(EnumGuideType.DETAIL_READ),PanelOpenManager.openPanel(EnumPanelID.HEROINES_DETAIL,App.data.gameHallCenter.getHeroniesData(this._uid))),this.closePanel()},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t}(BasePanel);__reflect(GameFangDongBuyPanel.prototype,"GameFangDongBuyPanel");var GameFangDongMenuPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),this._view=new GameFangDongMenuUI,this.addChild(this._view),this._view.width=Config.MAIN_WIDTH,this._view.height=Config.MAIN_HEIGHT},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._view&&(this._view.dispose(),this._view=null)},t.prototype.show=function(t){e.prototype.show.call(this,t),this._view.btnSave.icon=App.data.gameResourceCenter.getRes(EnumGameRes1.SAVE_ICON),this._view.btnRead.icon=App.data.gameResourceCenter.getRes(EnumGameRes1.READ_ICON),this._view.btnContinue.icon=App.data.gameResourceCenter.getRes(EnumGameRes1.CONTINUE_ICON),this._view.btnSave.getChildAt(0).source=App.data.gameResourceCenter.getRes(EnumGameRes1.MENU_BASE_BUTTON),this._view.btnRead.getChildAt(0).source=App.data.gameResourceCenter.getRes(EnumGameRes1.MENU_BASE_BUTTON),this._view.btnContinue.getChildAt(0).source=App.data.gameResourceCenter.getRes(EnumGameRes1.MENU_BASE_BUTTON),this._view.btnBack.img_down.source=this._view.btnBack.img_up.source=App.data.gameResourceCenter.getRes(EnumGameRes1.BACK_BUTTON),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchBtn,this,this._view.btnSave),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchBtn,this,this._view.btnRead),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchBtn,this,this._view.btnContinue),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchBtn,this,this._view.btnBack),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchBtn,this,this._view.btnSetting),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchBtn,this,this._view.btnGm),this._view.btnGm.visible=App.data.gameFangDongCenter.isShowGmBtn,App.global.guide.showView(this._view.btnSave,EnumGuideType.AVG_MENU_SAVE,this.panelName,!0),App.global.guide.showView(this._view.btnRead,EnumGuideType.AVG_MENU_READ,this.panelName,!0)},t.prototype.onTouchBtn=function(e){e.currentTarget==this._view.btnContinue?App.dispatcher.dispatchEvent(GameEvent.GAME_CONTINE):e.currentTarget==this._view.btnSave?PanelOpenManager.openPanel(EnumPanelID.RECORD,{uid:App.data.gameFangDongCenter.gameId,type:EnumRecordType.SAVE}):e.currentTarget==this._view.btnRead?PanelOpenManager.openPanel(EnumPanelID.RECORD,{uid:App.data.gameFangDongCenter.gameId,type:EnumRecordType.READ}):e.currentTarget==this._view.btnBack?(GameManager.exitGame(),Config.isLandscape&&App.setOrientation(egret.OrientationMode.LANDSCAPE),PanelOpenManager.openPanel(EnumPanelID.GAME_HALL)):e.currentTarget==this._view.btnSetting?PanelOpenManager.openPanel(EnumPanelID.HERONIES_SETTING,{id:App.data.gameFangDongCenter.gameId,panelName:this.panelName}):e.currentTarget==this._view.btnGm&&PanelOpenManager.openPanel(EnumPanelID.GM,{id:App.data.gameFangDongCenter.gameId}),PanelManager.removePanelByName(this.panelName)},t.prototype.hide=function(){e.prototype.hide.call(this)},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t}(BasePanel);__reflect(GameFangDongMenuPanel.prototype,"GameFangDongMenuPanel");var GameFangDongReviewPanel=function(e){function t(){var t=e.call(this)||this;return t._maxPage=0,t._curPage=1,t.TXT_WIDTH=570,t}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),this._view=new GameFangDongReviewUI,this.addChild(this._view),this._labelPool=[],this._scroll=new eui.Scroller,this._scroll.width=this.TXT_WIDTH,this._scroll.height=710,this._scroll.x=this._view.boxTxt.x,this._scroll.y=this._view.boxTxt.y,this._scroll.viewport=this._view.boxTxt,this._view.addChild(this._scroll)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._scroll&&(this._scroll.parent&&this._scroll.parent.removeChild(this._scroll),this._scroll.viewport=null,this._scroll=null),this._labelPool&&(this._labelPool.length=0,this._labelPool=null),this._view&&(this._view.dispose(),this._view=null)},t.prototype.show=function(t){e.prototype.show.call(this,t),this._needGet=!1,this._dispatcher.addEventListener(GameEvent.GAME_REVIEW_DATA,this.onUpdateReview,this),this._dispatcher.addEventListener(eui.UIEvent.CHANGE,this.onMoveScroll,this,this._scroll),this._dispatcher.addEventListener(eui.UIEvent.CHANGE_END,this.onMoveScrollEnd,this,this._scroll),ProtocolFangDong.instance().send_chat_review(App.data.gameFangDongCenter.gameId)},t.prototype.hide=function(){e.prototype.hide.call(this),App.dispatcher.dispatchEvent(GameEvent.GAME_CONTINE);for(var t;this._view.boxTxt.numChildren;)t=this._view.boxTxt.removeChildAt(0),t.text="",this._labelPool.push(t);this._maxPage=0,this._curPage=1},t.prototype.onMoveScroll=function(e){this._view.boxTxt.scrollV<-150&&(this._needGet=!0)},t.prototype.onMoveScrollEnd=function(e){this._needGet&&(this._needGet=!1,this._curPage<this._maxPage&&ProtocolFangDong.instance().send_chat_review(App.data.gameFangDongCenter.gameId,this._curPage+1))},t.prototype.onUpdateReview=function(e){this._curPage=e.current,this._maxPage=e.sun_page;var t=this.getLabel();t.textFlow=this.getTextFlow(e.info),t.y=5;for(var i,n=5+t.height,o=this._view.boxTxt.numChildren-1;o>=0;o--)i=this._view.boxTxt.getChildAt(o),i.y=n,n+=i.height;this._view.boxTxt.addChild(t);var a;1==this._curPage?(a=t.height-this._scroll.height,0>a&&(a=0),this._view.boxTxt.scrollV=a):(a=t.height,this._view.boxTxt.scrollV=a,a-=200,0>=a&&(a=0),egret.Tween.get(this._view.boxTxt).to({scrollV:a},200))},t.prototype.getTextFlow=function(e){for(var t,i="",n=/<(\/?br.*?\/)>|\\n/g,o=e.length-1;o>=0;o--)t=e[o],t.is_option_text&&(i+="<font color='#999999'>——"+t.is_option_text+"——</font>\n\n"),i+="<font color='"+t.color+"'>"+(""!=t.name?t.name+"\n":"")+t.depict.replace(n,"\n")+"</font>"+(0!=o?"\n\n":"\n ");return HtmlUtil.getHtmlStr(i)},t.prototype.getLabel=function(){if(this._labelPool.length>0)return this._labelPool.shift();var e=new eui.Label;return e.size=28,e.multiline=!0,e.wordWrap=!0,e.lineSpacing=5,e.width=this.TXT_WIDTH,e},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t}(BasePanel);__reflect(GameFangDongReviewPanel.prototype,"GameFangDongReviewPanel");var GameFangDongSelectPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),this._view=new GameFangDongSelectViewUI,this.addChild(this._view),this._pool=[]},t.prototype.dispose=function(){if(e.prototype.dispose.call(this),this._pool){for(;this._pool.length;)this._pool.shift().dispose();this._pool=null}this._view&&(this._view.dispose(),this._view=null)},t.prototype.show=function(t){e.prototype.show.call(this,t);var i=App.data.gameFangDongCenter.options;if(i&&i.length){var n,o,a=i.length,s=102,r=a*s;o=3>=a?this._view.boxBtn.height-r>>1:this._view.boxBtn.height-r;for(var h=0,a=i.length;a>h;h++)n=this.getButton(),n.y=o+102*h,n.data=h+1,this._view.boxBtn.addChild(n),n.label=i[h].title,n.touchEnabled=!0,n.show(),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchSelect,this,n)}},t.prototype.onTouchSelect=function(e){var t=e.currentTarget;App.timer.doTimeOnce(ProtocolFangDong.instance(),2e3,ProtocolFangDong.instance().send_chat_select,[App.data.gameFangDongCenter.gameId,t.data]);for(var t,i=0,n=this._view.boxBtn.numChildren;n>i;i++)t=this._view.boxBtn.getChildAt(i),t.hide(t==e.currentTarget?1500:0),t.touchEnabled=!1;App.dispatcher.dispatchEvent(GameEvent.SELECTED_OPTION)},t.prototype.getButton=function(){return this._pool.length>0?this._pool.shift():new FangDongSelectButton},t.prototype.hide=function(){e.prototype.hide.call(this);for(var t;this._view.boxBtn.numChildren>0;)t=this._view.boxBtn.removeChildAt(0),this._pool.push(t)},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t}(BasePanel);__reflect(GameFangDongSelectPanel.prototype,"GameFangDongSelectPanel");var GameHallPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),this._view=new GameHallUI,Config.isLandscape?(this._view.height=Config.MAIN_WIDTH,this._view.width=Config.MAIN_HEIGHT,this._view.imgBg.source="skyblue_bg1_jpg"):this._view.imgBg.source="skyblue_bg_jpg",this.addChild(this._view);var t=Config.isLandscape?1240:700;this._heroinesPanel=new LayoutContainer(GameHallItem,t,545,Config.isLandscape?20:1,new FunctionVO(this.itemUpdate,this)),this._scrollPanel=new eui.Scroller,this._scrollPanel.x=this.width-t>>1,this._scrollPanel.y=156,this._scrollPanel.width=t,this._scrollPanel.height=Config.SCREEN_HEIGHT-this._scrollPanel.y,this._view.addChild(this._scrollPanel),App.global.guide.initState()},t.prototype.itemUpdate=function(e,t,i){e.setData(t,i)},t.prototype.onClickItem=function(){this.touchEnabled=!1,this.touchChildren=!1},t.prototype.show=function(t){e.prototype.show.call(this,t),this.touchEnabled=!0,this.touchChildren=!0,Config.hasEnterGame=!0;var i=App.global.storage.getItem(EnumStorageType.HALL_MUSIC_SETTING);"0"==i?App.sound.isCloseBgm=!0:(App.sound.isCloseBgm=!1,App.sound.playBgm(ResPathUtil.getBgmPath(EnumSoundId.BGM),2e3,!1,!0)),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onImgShezhi,this,this._view.img_shezhi),this._dispatcher.addEventListener(EventType.BIND_PHONE_SUCCESS,this.onBindSuccess,this),this._dispatcher.addEventListener(EventType.GAMEHALL_ITEM_CLICK,this.onClickItem,this),ProtocolCommon.instance().send_heroineslist(new FunctionVO(this.onListBack,this));var n=App.global.storage.getItem(EnumStorageType.PHONE);Config.U8Login||Config.soEasy||H5_360_Sdk.getInstance().config360||RedDisplay.setRedByDisPlayer(this._view.img_shezhi.parent,n?!1:!0,2,this._view.img_shezhi.x+30,this._view.img_shezhi.y-30)},t.prototype.onBindSuccess=function(){RedDisplay.setRedImage(this._view.img_shezhi.parent)},t.prototype.onImgShezhi=function(e){egret.Tween.pauseTweens(this._view.img_shezhi),this._view.img_shezhi.rotation=19,egret.Tween.get(this._view.img_shezhi).to({rotation:619},1e3,egret.Ease.sineOut),PanelOpenManager.openPanel(EnumPanelID.GAMEHALL_SETTING)},t.prototype.onListBack=function(e){var t,i=e.data,n=App.global.userInfo.uid,o=App.global.storage.getItem(EnumStorageType.HERONIES_VERSION+n);t=o?JSON.parse(o):{},App.data.gameHallCenter.heroinesDataList=new HashMap;for(var a,s=0;s<i.length;s++)a=App.data.gameHallCenter.getHeroniesData(Number(i[s].id)),null==a&&(a=new HeroinesData),a.type=Number(i[s].type),a.name=i[s].name,a.title=i[s].title,a.depict=i[s].depict,a.id=Number(i[s].id),a.version=i[s].version,a.is_new=t[a.id]&&t[a.id]!=a.version,t[a.id]=a.version,App.data.gameHallCenter.setHeroniesData(a);App.global.storage.setItem(EnumStorageType.HERONIES_VERSION+n,JSON.stringify(t)),1==i.length?(this._heroinesPanel.dataProvider=void 0,this._heroniesSingleItem||(this._heroniesSingleItem=new GameHallItem,this._scrollPanel.addChild(this._heroniesSingleItem)),this._heroniesSingleItem.setData(a,0,!0)):(this._heroniesSingleItem&&(this._heroniesSingleItem.dispose(),this._heroniesSingleItem=void 0),this._heroinesPanel.dataProvider=App.data.gameHallCenter.heroinesDataList.values,this._scrollPanel.viewport=this._heroinesPanel,this._scrollPanel.viewport&&(this._scrollPanel.viewport.scrollV=0),ScrollerCenter.hideVerticalScrollBar(this._scrollPanel))},t.prototype.hide=function(){e.prototype.hide.call(this),this._scrollPanel.removeChildren(),this._heroinesPanel.clear(),this._heroniesSingleItem&&(this._heroniesSingleItem.dispose(),this._heroniesSingleItem=void 0),RedDisplay.setRedImage(this._view.img_shezhi.parent)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._view&&(this._view.dispose(),this._view=null),this._scrollPanel=void 0,this._heroinesPanel=void 0},Object.defineProperty(t.prototype,"width",{get:function(){return Config.isLandscape?Config.MAIN_HEIGHT:Config.MAIN_WIDTH},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return Config.isLandscape?Config.MAIN_WIDTH:Config.MAIN_HEIGHT},enumerable:!0,configurable:!0}),t}(BasePanel);__reflect(GameHallPanel.prototype,"GameHallPanel");var GameHallSettingPanel=function(e){function t(){var t=e.call(this,550,543)||this;return t.Music_keyValue_pair=null,t.sound_keyValue_pair=null,t.phone_keyValue_pair=null,t}return __extends(t,e),t.prototype.initView=function(){this._view=new GameHallSettingUI,this.viewSp.addChild(this._view),this.rightTitle="设置"},t.prototype.hide=function(){e.prototype.hide.call(this),RedDisplay.setRedImage(this._view.signOut.parent),this._openPanelID>0&&(PanelOpenManager.openPanel(this._openPanelID),this._openPanelID=0)},t.prototype.show=function(t){if(e.prototype.show.call(this,t),this._view.txtVersion.text="版本号："+Config.version,this.Music_keyValue_pair=App.global.storage.getItem(EnumStorageType.HALL_MUSIC_SETTING),this.sound_keyValue_pair=App.global.storage.getItem(EnumStorageType.HALL_SOUND_SETTING),this.phone_keyValue_pair=App.global.storage.getItem(EnumStorageType.PHONE),Config.U8Login&&App.global.userInfo.channelId!=EnumChannel.C_DEFAULT||Config.soEasy||H5_360_Sdk.getInstance().config360)this._view.TouristAccount.visible=!1,this._view.modifyPhone.visible=!1,0==App.global.needHideExit?(this._view.signOut.visible=!0,this._view.signOut.label="退出登录"):(this._view.signOut.visible=!1,this._view.UserAgreement_btn.horizontalCenter=0);else if(this._view.TouristAccount.visible=!0,this._view.signOut.visible=!0,this._view.UserAgreement_btn.horizontalCenter=150,GameLog.log("玩家的手机号码",this.phone_keyValue_pair),this.phone_keyValue_pair){var i=this.phone_keyValue_pair;i=i.concat().substr(0,3)+"*****"+i.concat().substr(i.length-3,i.length),this._view.TouristAccount.text="手机号:"+i,this._view.modifyPhone.visible=!0,this._view.signOut.label="退出登录"}else this._view.TouristAccount.text="游客账号",this._view.modifyPhone.visible=!1,this._view.signOut.label="绑定手机";"绑定手机"==this._view.signOut.label&&this._view.signOut.visible&&RedDisplay.setRedByDisPlayer(this._view.signOut.parent,this.phone_keyValue_pair?!1:!0,2,this._view.signOut.x+this._view.signOut.width,this._view.signOut.y),this._view.UserId.text=String(App.global.userInfo.uid),this.Music_keyValue_pair||(App.global.storage.setItem(EnumStorageType.HALL_MUSIC_SETTING,"1"),this.Music_keyValue_pair="1"),this.sound_keyValue_pair||(App.global.storage.setItem(EnumStorageType.HALL_SOUND_SETTING,"1"),this.sound_keyValue_pair="1"),this._view.Music_btn.selected="1"==this.Music_keyValue_pair,this._view.SoundEffect.selected="1"==this.sound_keyValue_pair,this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTabUserAgreement_btn,this,this._view.UserAgreement_btn),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTabmodifyPhone,this,this._view.modifyPhone),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTabsignOut,this,this._view.signOut),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTabMusic_btn,this,this._view.Music_btn),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTabSoundEffect,this,this._view.SoundEffect)},t.prototype.onTabMusic_btn=function(e){this._view.Music_btn.selected?(App.sound.isCloseBgm=!1,App.sound.playBgm(ResPathUtil.getBgmPath(EnumSoundId.BGM)),App.global.storage.setItem(EnumStorageType.HALL_MUSIC_SETTING,"1")):(App.sound.isCloseBgm=!0,App.global.storage.setItem(EnumStorageType.HALL_MUSIC_SETTING,"0"))
},t.prototype.onTabSoundEffect=function(e){this._view.SoundEffect.selected?(App.sound.isCloseSound=!1,App.global.storage.setItem(EnumStorageType.HALL_SOUND_SETTING,"1")):(App.sound.isCloseSound=!0,App.global.storage.setItem(EnumStorageType.HALL_SOUND_SETTING,"0"))},t.prototype.onTabUserAgreement_btn=function(){PanelOpenManager.openPanel(EnumPanelID.USER_AGREEMENT)},t.prototype.onTabmodifyPhone=function(){App.sound.needSkip=!0,this.closePanel(),this._openPanelID=EnumPanelID.UNBIND_PHONE},t.prototype.onTabsignOut=function(){this.phone_keyValue_pair?(App.sound.needSkip=!0,ProtocolCommon.instance().send_login_out(new FunctionVO(this.onLoginOut,this))):Config.U8Login?App.nativeBridge.sendLogOut():(this.closePanel(),this._openPanelID=EnumPanelID.TOURIST_BIND_PHONE)},t.prototype.onLoginOut=function(e){ResponseUtil.checkResponseData(e)&&(App.global.clearRoleData(),PanelManager.removePanelByName(PanelRegister.GAME_HALL),this.closePanel(),this._openPanelID=EnumPanelID.LOGIN)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._view&&(this._view.dispose(),this._view=null)},t}(WindowView);__reflect(GameHallSettingPanel.prototype,"GameHallSettingPanel");var GmPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this._view=new GmUI,this.addChild(this._view)},t.prototype.show=function(t){e.prototype.show.call(this,t),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this,this._view.btnClose),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this,this._view.btnGo),this._dispatcher.addEventListener(GmCenter.INIT_GM_DATA,this.setData,this),this._dispatcher.addEventListener(GmCenter.SELECT_CHAPTER,this.onSelectChapter,this),GmCenter.instance().getVariable(t.id)},t.prototype.setData=function(){var e=GmCenter.instance().chapterList;this._view.comboxChapter.show({data:e,type:0}),this.clearConditions(),this._conditions=[];for(var t,i=GmCenter.instance().conditionNameList,n=GmCenter.instance().conditionValueList,o=0;o<i.length;o++)t=new GmAvgAttriView,t.setData(i[o],n[o]),t.y=50*o,this._view.groupAttri.addChild(t),this._conditions.push(t)},t.prototype.onSelectChapter=function(e){var t=GmCenter.instance().getSectionByChapter(e);this._view.comboxSection.show({data:t,type:1})},t.prototype.onClick=function(e){switch(e.currentTarget){case this._view.btnClose:PanelOpenManager.removePanel(EnumPanelID.GM);break;case this._view.btnGo:if(!this._view.txtChatId.text&&this._view.comboxChapter.selectNum<0)Notice.showBottomCenterMessage("请选择章");else if(!this._view.txtChatId.text&&this._view.comboxSection.selectNum<0)Notice.showBottomCenterMessage("请选择节");else{var t;t=this._view.txtChatId.text?Number(this._view.txtChatId.text):GmCenter.instance().getChatIdByCS(this._view.comboxChapter.selectNum+"-"+this._view.comboxSection.selectNum),GmCenter.instance().goToChar(App.data.gameFangDongCenter.gameId,t,this.getAllConditions()),PanelOpenManager.removePanel(EnumPanelID.GM)}}},t.prototype.getAllConditions=function(){var e,t={};if(!this._conditions)return t;for(var i=0;i<this._conditions.length;i++)t[this._conditions[i].getKey()]=this._conditions[i].getValue();return e=JSON.stringify(t)},t.prototype.clearConditions=function(){if(this._conditions){for(var e=0;e<this._conditions.length;e++)this._conditions[e]&&this._conditions[e].remove();this._conditions=void 0}},t.prototype.hide=function(){e.prototype.hide.call(this),this.clearConditions()},t.prototype.dispose=function(){this._view&&(this._view.dispose(),this._view=void 0),e.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"width",{get:function(){return Config.MAIN_WIDTH},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return Config.MAIN_HEIGHT},enumerable:!0,configurable:!0}),t}(BasePanel);__reflect(GmPanel.prototype,"GmPanel");var BaseGame=function(e){function t(){var t=e.call(this)||this;return t._isFirst=!0,t._isPlaying=!1,t.init(),t}return __extends(t,e),t.prototype.init=function(){this._dispatcher=new DispatcherRegister},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._dispatcher=null,this._isFirst=!0},t.prototype.show=function(e){e&&(this.gameId=e.id),this._isFirst?(this._isFirst=!1,this.playStartVideo()):this.startGame(),this._isPlaying=!0},t.prototype.hide=function(){this._dispatcher.removeAllListeners(),this._isPlaying=!1},t.prototype.startGame=function(){},t.prototype.playStartVideo=function(){},t.prototype.getView=function(){return this},t.prototype.getRes=function(e){return App.data.gameResourceCenter.getRes(e)},t}(h5_engine.GDisplayObjectContainer);__reflect(BaseGame.prototype,"BaseGame",["IGame"]);var MemoryPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.getMemoryItem=function(){return this._memoryPool.length>0?this._memoryPool.pop():new MemoryItem},t.prototype.init=function(){this._view=new MemoryViewUI,this.addChild(this._view),this._view.viewStack.height=Config.MAIN_HEIGHT-260,this._titleTxtArr=["动态壁纸","回忆视频","心跳结局"],this._group=new eui.Group,this._scrollPanel=new eui.Scroller,this._scrollPanel.scrollPolicyH=eui.ScrollPolicy.OFF,this._scrollPanel.width=this._view.viewStack.width,this._scrollPanel.height=this._view.viewStack.height,this._memoryItems=[]},t.prototype.show=function(t){e.prototype.show.call(this,t),this._heroniesData=t,this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this,this._view.btnBack),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this,this._view.btnBizhi),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this,this._view.btnShipin),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this,this._view.btnJieju),this._lastIndex=-1,this.setViewStackData(0)},t.prototype.onClick=function(e){switch(e.currentTarget){case this._view.btnBack:App.sound.playSoundSwitchClient(EnumSoundId.CLICK),PanelOpenManager.removePanel(EnumPanelID.MEMORY),PanelOpenManager.openPanel(EnumPanelID.HEROINES_DETAIL,this._heroniesData);break;case this._view.btnBizhi:this.setViewStackData(0);break;case this._view.btnShipin:this.setViewStackData(1);break;case this._view.btnJieju:this.setViewStackData(2)}},t.prototype.setViewStackData=function(e){this._lastIndex!=e&&ProtocolCommon.instance().send_user_favorite_list(e+1,this._heroniesData.id,1,new FunctionVO(this.onListBack,this,e))},t.prototype.onListBack=function(e,i){if(this._view.viewStack.selectedIndex=i,this._view.txtTitle.text=this._titleTxtArr[i],-1!=this._lastIndex){this.onBmpOver();var n=this._view.viewStack.getChildAt(this._lastIndex),o=BitmapDataUtil.createTextureByClass(n);this._curBmp=new egret.Bitmap(o)}this.clearMemoryItems(),e.data.hasOwnProperty("obtained")&&e.data.hasOwnProperty("total")?(this._view.txtNumber.visible=!0,this._view.txtNumber.text="（"+e.data.obtained+"/"+e.data.total+"）"):(this._view.txtNumber.visible=!1,this._view.txtNumber.text=""),App.nativeBridge.log("设置的进度值是:"+this._view.txtNumber.text);var a,s=this._view.viewStack.getChildAt(i),r=e.data.data;if(r&&0!=r.length){this._endNullImg&&(this._endNullImg.visible=!1);for(var h=0;h<r.length;h++)a=t.getMemoryItem(),a.collectType=i+1,a.uid=this._heroniesData.id,a.x=9+h%2*351,a.y=366*Math.floor(h/2),a.showNetImg(r[h]),this._group.addChild(a),this._memoryItems.push(a);this._scrollPanel.viewport=this._group,this._scrollPanel.viewport&&(this._scrollPanel.viewport.scrollV=0),s.addChild(this._scrollPanel),ScrollerCenter.hideVerticalScrollBar(this._scrollPanel)}else void 0==this._endNullImg&&(this._endNullImg=new eui.Image(ResPathUtil.getCommonImageRes("memory_end_null")),this._endNullImg.x=106,this._endNullImg.y=252),this._endNullImg.visible=!0,s.addChild(this._endNullImg);if(this._view.btnChange.getChildAt(0).source="memory_json.memory_btn"+i+"_png",this._view.btnChange.x=0==i?this._view.btnBizhi.x:1==i?this._view.btnShipin.x:this._view.btnJieju.x,this._curBmp){this._curBmp.y=this._view.viewStack.y,this._view.addChild(this._curBmp);var p=i>this._lastIndex?-720:720;this._view.viewStack.x=i>this._lastIndex?720:-720,egret.Tween.get(this._curBmp).to({x:p},300).call(this.onBmpOver,this),egret.Tween.get(this._view.viewStack).to({x:0},300)}this._lastIndex=i},t.prototype.onBmpOver=function(){this.removeBmp()},t.prototype.removeBmp=function(){this._curBmp&&(egret.Tween.removeTweens(this._curBmp),egret.Tween.removeTweens(this._view.viewStack),this._curBmp.parent&&this._curBmp.parent.removeChild(this._curBmp),this._curBmp.texture&&(this._curBmp.texture.dispose(),this._curBmp.texture=void 0)),this._curBmp=void 0},t.prototype.clearMemoryItems=function(){for(var e=0;e<this._memoryItems.length;e++)this._memoryItems[e].remove(),t._memoryPool.push(this._memoryItems[e]);this._memoryItems=[]},t.prototype.hide=function(){e.prototype.hide.call(this),this.clearMemoryItems(),App.dispatcher.dispatchEvent(VideoEvent.REPLAYVIDEO),ProtocolCommon.instance().send_user_close_favorite(this._heroniesData.id)},t.prototype.dispose=function(){if(e.prototype.dispose.call(this),this._scrollPanel.removeChildren(),this._scrollPanel=void 0,this._endNullImg&&(this._endNullImg.parent&&this._endNullImg.parent.removeChild(this._endNullImg),this._endNullImg=void 0),this._memoryItems)for(var t=0;t<this._memoryItems.length;t++)this._memoryItems[t]&&(this._memoryItems[t].dispose(),this._memoryItems[t]=null);this._memoryItems=void 0,this.removeBmp(),this._group=void 0,this._titleTxtArr=void 0},Object.defineProperty(t.prototype,"width",{get:function(){return Config.MAIN_WIDTH},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return Config.MAIN_HEIGHT},enumerable:!0,configurable:!0}),t._memoryPool=[],t}(BasePanel);__reflect(MemoryPanel.prototype,"MemoryPanel");var BaseView=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.createComplete=function(){this._dispatcher=new DispatcherRegister,e.prototype.createComplete.call(this),this.show()},t.prototype.show=function(e){},t.prototype.hide=function(){this._dispatcher.removeAllListeners()},t.prototype.dispose=function(){this.hide(),this._dispatcher=void 0,e.prototype.dispose.call(this)},t}(BaseUI);__reflect(BaseView.prototype,"BaseView");var ForcePhoneBindPanel=function(e){function t(){var t=e.call(this)||this;return t._type=2,t}return __extends(t,e),t.prototype.initView=function(){e.prototype.initView.call(this),this._view.cancelEdit.visible=!1},t.prototype.show=function(t){e.prototype.show.call(this,t),this.rightTitle="绑定手机",this._uid=t},t.prototype.onGameLoginReset=function(){this._view.telephoneNumber.enabled=!0,this._view.telephoneNumber.prompt="请输入手机号",this._view.telephoneNumber.visible=!0,this._view.bindNewNumber.label="绑定手机",this._view.cancelEdit.text="取消绑定",this._phoneText=this._view.telephoneNumber.text,e.prototype.onGameLoginReset.call(this)},t.prototype.sendGetCodeMsg=function(){ProtocolCommon.instance().send_tourist_bindphone_code(this._phoneText,new FunctionVO(this.onGetCodeBack,this))},t.prototype.canGetCode=function(){var e=this.notInCodeValideCd();return e&&this._canSendCode&&11==this._phoneText.length},t.prototype.canLogin=function(){return 11==this._phoneText.length&&6==this._view.verificationCode.text.length},t.prototype.getKey=function(){return EnumStorageType.BIND_GETCODE_TIME+this._phoneText},t.prototype.bindSuccess=function(){if(e.prototype.bindSuccess.call(this),App.global.storage.setItem(EnumStorageType.PHONE,this._view.telephoneNumber.text),App.global.storage.setItem(EnumStorageType.TOKEN,App.global.userInfo.skey),App.global.storage.setItem(EnumStorageType.UID,String(App.global.userInfo.uid)),App.global.storage.removeItem(EnumStorageType.IS_TOURIST),GameManager.isPlaying)App.dispatcher.dispatchEvent(GameEvent.GAME_UNLOCK_SUCCESS,this._uid);else{var t=App.data.gameHallCenter.getHeroniesData(this._uid);ProtocolCommon.instance().send_heroine_version(this._uid,1==t.record_type?0:7)}},t.prototype.hide=function(){e.prototype.hide.call(this);var t=App.global.storage.getItem(EnumStorageType.PHONE);if(!t){var i=App.data.gameHallCenter.getHeroniesData(this._uid);i.setPlayerNotBind("1")}},t}(BasePhoneBindPanel);__reflect(ForcePhoneBindPanel.prototype,"ForcePhoneBindPanel");var ToBindNewPhonePanel=function(e){function t(){var t=e.call(this)||this;return t._type=1,t}return __extends(t,e),t.prototype.onGameLoginReset=function(){this.rightTitle="绑定手机",this._view.telephoneNumber.enabled=!0,this._view.telephoneNumber.prompt="请输入手机号",this._view.telephoneNumber.visible=!0,this._view.bindNewNumber.label="绑定新号码",this._view.cancelEdit.text="取消绑定",this._phoneText=this._view.telephoneNumber.text,e.prototype.onGameLoginReset.call(this)},t.prototype.hide=function(){e.prototype.hide.call(this),Config.hasEnterGame&&PanelOpenManager.openPanel(EnumPanelID.GAMEHALL_SETTING)},t.prototype.sendGetCodeMsg=function(){ProtocolCommon.instance().send_Untied_new_code(this._phoneText,new FunctionVO(this.onGetCodeBack,this))},t.prototype.canGetCode=function(){var e=this.notInCodeValideCd();return e&&this._canSendCode&&11==this._phoneText.length},t.prototype.canLogin=function(){return 11==this._phoneText.length&&6==this._view.verificationCode.text.length},t.prototype.getKey=function(){return EnumStorageType.BIND_GETCODE_TIME+this._phoneText},t.prototype.bindSuccess=function(){App.global.storage.setItem(EnumStorageType.PHONE,this._phoneText),e.prototype.bindSuccess.call(this)},t}(BasePhoneBindPanel);__reflect(ToBindNewPhonePanel.prototype,"ToBindNewPhonePanel");var TouristBindPhonePanel=function(e){function t(){var t=e.call(this)||this;return t._type=2,t}return __extends(t,e),t.prototype.onGameLoginReset=function(){this.rightTitle="绑定手机",this._view.telephoneNumber.enabled=!0,this._view.telephoneNumber.prompt="请输入手机号",this._view.telephoneNumber.visible=!0,this._view.bindNewNumber.label="绑定手机",this._view.cancelEdit.text="取消绑定",this._phoneText=this._view.telephoneNumber.text,e.prototype.onGameLoginReset.call(this)},t.prototype.hide=function(){e.prototype.hide.call(this),Config.hasEnterGame&&PanelOpenManager.openPanel(EnumPanelID.GAMEHALL_SETTING)},t.prototype.sendGetCodeMsg=function(){ProtocolCommon.instance().send_tourist_bindphone_code(this._phoneText,new FunctionVO(this.onGetCodeBack,this))},t.prototype.canGetCode=function(){var e=this.notInCodeValideCd();return e&&this._canSendCode&&11==this._phoneText.length},t.prototype.canLogin=function(){return 11==this._phoneText.length&&6==this._view.verificationCode.text.length},t.prototype.getKey=function(){return EnumStorageType.BIND_GETCODE_TIME+this._phoneText},t.prototype.bindSuccess=function(){App.global.storage.setItem(EnumStorageType.PHONE,this._view.telephoneNumber.text),App.global.storage.setItem(EnumStorageType.TOKEN,App.global.userInfo.skey),App.global.storage.setItem(EnumStorageType.UID,String(App.global.userInfo.uid)),App.global.storage.removeItem(EnumStorageType.IS_TOURIST),e.prototype.bindSuccess.call(this)},t}(BasePhoneBindPanel);__reflect(TouristBindPhonePanel.prototype,"TouristBindPhonePanel");var UnBindPhonePanel=function(e){function t(){var t=e.call(this)||this;return t._type=0,t}return __extends(t,e),t.prototype.onGameLoginReset=function(){this.rightTitle="修改手机",this._view.telephoneNumber.enabled=!1;var t=App.global.storage.getItem(EnumStorageType.PHONE);this._phoneText=t,t=t.concat().substr(0,3)+"*****"+t.concat().substr(t.length-3,t.length),this._view.telephoneNumber.prompt=t,this._view.bindNewNumber.label="确定修改",this._view.cancelEdit.text="取消修改",e.prototype.onGameLoginReset.call(this)},t.prototype.show=function(t){this._needShowGameHallSetting=!0,e.prototype.show.call(this,t)},t.prototype.hide=function(){e.prototype.hide.call(this),this._needShowGameHallSetting&&Config.hasEnterGame&&PanelOpenManager.openPanel(EnumPanelID.GAMEHALL_SETTING)},t.prototype.sendGetCodeMsg=function(){ProtocolCommon.instance().send_Untied_old_phone(null,new FunctionVO(this.onGetCodeBack,this))},t.prototype.canGetCode=function(){var e=this.notInCodeValideCd();return e&&this._canSendCode},t.prototype.canLogin=function(){return 6==this._view.verificationCode.text.length},t.prototype.getKey=function(){return EnumStorageType.UNBIND_GETCODE_TIME+this._phoneText},t.prototype.bindSuccess=function(){this._needShowGameHallSetting=!1,e.prototype.bindSuccess.call(this),PanelOpenManager.openPanel(EnumPanelID.BIND_NEW_PHONE)},t.prototype.onTabbindNewNumber=function(e){this._view.verificationCode.text.length>5?ProtocolCommon.instance().send_Untied_old_phone(this._view.verificationCode.text,new FunctionVO(this.onsend_tel_code,this)):Notice.showBottomCenterMessage("验证码格式有误")},t}(BasePhoneBindPanel);__reflect(UnBindPhonePanel.prototype,"UnBindPhonePanel");var RecordPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this._view=new RecordUI,this.addChild(this._view),this._itemGroup=new eui.Group,this._scrollPanel=new eui.Scroller,this._scrollPanel.scrollPolicyH=eui.ScrollPolicy.OFF,this._scrollPanel.width=this._view.groupItem.width,this._scrollPanel.height=this._view.groupItem.height,this._view.groupItem.addChild(this._scrollPanel),this._itemArr=[];for(var e,t=0;6>t;t++)e=new RecordItem(t),e.x=9+t%2*351,e.y=606*Math.floor(t/2),this._itemGroup.addChild(e),this._itemArr.push(e)},t.prototype.show=function(t){e.prototype.show.call(this,t),this._uid=t.uid,this._type=t.type,this._panelName=t.hasOwnProperty("panelName")?t.panelName:"",this._view.btnReplay.visible=this._type==EnumRecordType.READ,this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this,this._view.btnBack),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this,this._view.btnReplay),this._dispatcher.addEventListener(RecordEvent.RECORD_LIST,this.onRecordList,this),ProtocolCommon.instance().send_heroine_archive_list(this._uid),this._scrollPanel.viewport=this._itemGroup,this._scrollPanel.viewport&&(this._scrollPanel.viewport.scrollV=0)},t.prototype.onRecordList=function(e){this.clearItems();for(var t=e.data,i=0;i<this._itemArr.length;i++)this._itemArr[i].show(this._uid,this._type,t[i]);ScrollerCenter.hideVerticalScrollBar(this._scrollPanel)},t.prototype.onClick=function(e){switch(e.currentTarget){case this._view.btnBack:if(App.sound.playSoundSwitchClient(EnumSoundId.CLICK),this.closePanel(),this._panelName==PanelRegister.ENDING)return;if(GameManager.isPlaying&&PanelOpenManager.openPanel(EnumPanelID.GAME_FANG_DONG_MENU),this._panelName){var t=void 0;this._panelName==PanelRegister.HEROINES_DETAIL&&(t=App.data.gameHallCenter.getHeroniesData(this._uid)),PanelManager.openPanel(this._panelName,t)}break;case this._view.btnReplay:App.sound.playSoundSwitchClient(EnumSoundId.BUBBLE),Alert.show(EnumAlertContent.RESTART_AVG_KOUYA,"确定|取消",new FunctionVO(this.onCloseHandler,this))}},t.prototype.onCloseHandler=function(e){e.type==Alert.OK&&(this.closePanel(),PanelOpenManager.removePanel(EnumPanelID.ENDING),0==GameManager.isPlaying?ProtocolCommon.instance().send_heroine_version(this._uid,7):GameManager.startGame(this._uid,{id:this._uid,saveId:7,isInGame:!0}),App.global.guide.changeGuideTo_stateN(EnumGuideType.PRESS_JUMPREAD))},t.prototype.clearItems=function(){for(var e=0;e<this._itemArr.length;e++)this._itemArr[e].hide()},t.prototype.hide=function(){e.prototype.hide.call(this),this.clearItems(),App.dispatcher.dispatchEvent(VideoEvent.REPLAYVIDEO)},t.prototype.dispose=function(){e.prototype.dispose.call(this);for(var t=0;t<this._itemArr.length;t++)this._itemArr[t]&&(this._itemArr[t].dispose(),this._itemArr[t]=void 0);this._itemArr=void 0},Object.defineProperty(t.prototype,"width",{get:function(){return Config.MAIN_WIDTH},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return Config.MAIN_HEIGHT},enumerable:!0,configurable:!0}),t}(BasePanel);__reflect(RecordPanel.prototype,"RecordPanel");var HeroinesDetailPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this._view=new HeroinesDetailUI,this.addChild(this._view),this._view.groupJuese.visible=!1,this._groupNewX=this._view.groupNew.x,this._groupHuiyiX=this._view.groupHuiyi.x,this._groupDuquX=this._view.groupDuqu.x,this._startEffect=new GMovieClip,this._startEffect.init("startgame_json","startgame_png","startgame"),this._startEffect.x=this._view.groupNew.x,this._startEffect.y=this._view.groupNew.y,this._startEffect.play(-1)},t.prototype.show=function(t){if(e.prototype.show.call(this,t),0==App.sound.isBgmPlaying){var i=App.global.storage.getItem(EnumStorageType.HALL_MUSIC_SETTING);"0"==i?App.sound.isCloseBgm=!0:(App.sound.isCloseBgm=!1,App.sound.playBgm(ResPathUtil.getBgmPath(EnumSoundId.BGM),2e3,!1,!0))}this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBack,this,this._view.btnBack),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGroup,this,this._view.groupJuese),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGroup,this,this._view.groupNew),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGroup,this,this._view.groupDuqu),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGroup,this,this._view.groupHuiyi),this._dispatcher.addEventListener(VideoEvent.REPLAYVIDEO,this.onReplayVideo,this),this.resetChildrenTouch(),this.bindEffect(this._view.groupNew,EnumTouchEffect.ADD_SCALE),this._heroniesData=t,ProtocolCommon.instance().send_heroinesDetail(this._heroniesData.id,new FunctionVO(this.onHttpBack,this)),this._view.groupHuiyi.visible=!1,this._view.groupDuqu.visible=!1,this._view.txtHeroniesName.text=this._heroniesData.title,this._view.txtDesc.text=this._heroniesData.depict,this._view.groupNew.x=Config.MAIN_WIDTH+this._view.groupNew.anchorOffsetX,egret.Tween.get(this._view.groupNew).to({x:this._groupNewX},300,egret.Ease.backInOut).call(this.tweenBack,this)},t.prototype.tweenBack=function(){this._startEffect.play(),this._view.addChild(this._startEffect)},t.prototype.onReplayVideo=function(){Video.instance().init(this._heroniesData.videoUrl,!0,!0,null,Video.BOTTOM,null,Config.isLandscape)},t.prototype.onHttpBack=function(e){var t=this;if(this._heroniesData){if(this.removeLabelViews(),e.data.label){for(var i=e.data.label,n="",o=0;o<i.length;o++)n+=i[o],o<i.length-1&&(n+=" | ");this._view.txtHeroniesLabel.text=n}this._heroniesData.videoUrl=e.data.video,this.onReplayVideo(),this._heroniesData.money=e.data.money,this._heroniesData.is_toll=e.data.is_toll,this._heroniesData.is_shop=e.data.is_shop,this._heroniesData.is_new_collect=e.data.is_new_collect;var a=e.data.record_type;this._heroniesData.record_type=a;var s=a>0;this._view.txtStory.text=1==a?"继续陪伴":2==a?"新的故事":"邂逅她",this._view.groupDuqu.visible=s,this._view.groupHuiyi.visible=s,s&&(this._view.groupDuqu.x=Config.MAIN_WIDTH,egret.Tween.get(this._view.groupDuqu).wait(100).to({x:this._groupDuquX},300,egret.Ease.backInOut).call(function(){App.global.guide.showView(t._view.btnDuqu,EnumGuideType.DETAIL_READ,t.panelName),egret.Tween.removeTweens(t._view.groupDuqu)},this),this._view.groupHuiyi.x=Config.MAIN_WIDTH,egret.Tween.get(this._view.groupHuiyi).wait(300).to({x:this._groupHuiyiX},300,egret.Ease.backInOut).call(function(){t._heroniesData&&t._heroniesData.is_new_collect&&App.global.guide.showView(t._view.btnHuiyi,EnumGuideType.DETAIL_MEMORY,t.panelName),egret.Tween.removeTweens(t._view.groupHuiyi)},this)),this._heroniesData.is_shop||this._heroniesData.is_toll&&(this._view.txtStory.text="继续陪伴"),App.data.gameHallCenter.setHeroniesData(this._heroniesData),this.showHuiyiRed(),this._heroniesData.forceToPhoneBind()}},t.prototype.showHuiyiRed=function(){RedDisplay.setRedByDisPlayer(this._view.groupHuiyi,this._heroniesData.is_new_collect,1,150)},t.prototype.onClickGroup=function(e){switch(e.currentTarget){case this._view.groupNew:App.sound.playSoundSwitchClient(EnumSoundId.CLICK),App.sound.playSoundSwitchClient(EnumSoundId.HEART),App.sound.needSkip=!0,ProtocolCommon.instance().send_heroine_version(this._heroniesData.id,1==this._heroniesData.record_type?0:7),2==this._heroniesData.record_type&&App.global.guide.changeGuideTo_stateN(EnumGuideType.PRESS_JUMPREAD),this.touchChildren=!1,App.timer.doTimeOnce(this,1e3,this.resetChildrenTouch);break;case this._view.groupDuqu:PanelOpenManager.openPanel(EnumPanelID.RECORD,{uid:this._heroniesData.id,type:EnumRecordType.READ,panelName:this.panelName}),this.closePanel();break;case this._view.groupHuiyi:RedDisplay.setRedImage(this._view.groupHuiyi),PanelOpenManager.openPanel(EnumPanelID.MEMORY,this._heroniesData),this.closePanel();break;case this._view.groupJuese:}},t.prototype.resetChildrenTouch=function(){this.touchChildren=!0},t.prototype.onUnlockSuccess=function(e){var t=App.data.gameHallCenter.getHeroniesData(e);ProtocolCommon.instance().send_heroine_version(e,1==t.record_type?0:7)},t.prototype.onBack=function(e){App.sound.playSoundSwitchClient(EnumSoundId.CLICK),Config.isLandscape&&App.setOrientation(egret.OrientationMode.LANDSCAPE),PanelOpenManager.openPanel(EnumPanelID.GAME_HALL),PanelOpenManager.removePanel(EnumPanelID.HEROINES_DETAIL)},t.prototype.hide=function(){e.prototype.hide.call(this),this._startEffect&&(this._startEffect.stop(),this._startEffect.remove()),App.timer.clearTimer(this,this.resetChildrenTouch),RedDisplay.setRedImage(this._view.groupHuiyi),Video.instance().dispose(!0),this.removeLabelViews(),this._heroniesData=void 0,App.global.guide.removeExistGuide()},t.prototype.removeLabelViews=function(){},t.prototype.dispose=function(){this._startEffect&&(this._startEffect.dispose(),this._startEffect=void 0),this._view&&(this._view.dispose(),this._view=void 0),e.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"width",{get:function(){return Config.MAIN_WIDTH},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return Config.MAIN_HEIGHT},enumerable:!0,configurable:!0}),t}(BasePanel);__reflect(HeroinesDetailPanel.prototype,"HeroinesDetailPanel");var HeroniesBuyPanel=function(e){function t(){return e.call(this,400,240)||this}return __extends(t,e),t.prototype.initView=function(){this._view=new HeroniesBuyUI,this.viewSp.addChild(this._view)},t.prototype.show=function(t){e.prototype.show.call(this,t),this._data=t,this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this,this._view.btn_unlock),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLockClick,this,this._view.txt_locking);var i="是否花费￥"+t.money+"元,解锁故事《"+t.title+"》后续内容?";this._view.txt_desc.textFlow=HtmlUtil.getHtmlStr(i),this._uid=t.id},t.prototype.hide=function(){e.prototype.hide.call(this),this._data=null},t.prototype.onClick=function(e){DeviceUtil.IsWeb?ProtocolCommon.instance().send_shop_please_pay(1,this._uid,new FunctionVO(this.onHttpShopPayBack,this)):App.nativeBridge.sendU8PayNew(1,{productId:this._uid,buyNum:1,price:this._data.money,productDesc:"解锁《"+this._data.title+"》后续内容",productName:this._data.title,ratio:"",serverID:"",serverName:""})},t.prototype.onHttpShopPayBack=function(e){if(200==e.code){PanelOpenManager.removePanel(EnumPanelID.HERONIES_BUY),App.data.gameHallCenter.updateHeroniesProps(this._uid,{is_shop:!0});var t=App.data.gameHallCenter.getHeroniesData(this._uid);Notice.showBottomCenterMessage("购买"+t.title+"成功"),t.forceToPhoneBind()||App.dispatcher.dispatchEvent(GameEvent.GAME_UNLOCK_SUCCESS,this._uid)}},t.prototype.onLockClick=function(e){GameManager.isPlaying&&(GameManager.exitGame(),PanelOpenManager.openPanel(EnumPanelID.HEROINES_DETAIL,App.data.gameHallCenter.getHeroniesData(this._uid))),PanelOpenManager.removePanel(EnumPanelID.HERONIES_BUY)},t.prototype.dispose=function(){this._view&&(this._view.dispose(),this._view=void 0),e.prototype.dispose.call(this)},t}(WindowView);__reflect(HeroniesBuyPanel.prototype,"HeroniesBuyPanel");var HeroniesSettingPanel=function(e){function t(){return e.call(this,450,496)||this}return __extends(t,e),t.prototype.initView=function(){this._view=new HeroniesSettingUI,this._view.y=75,this.viewSp.addChild(this._view),this.rightTitle="设置",this._posx1=0,this._posx2=147,this._posx3=293,this._normalColor=6710886,this._selectColor=16745403},t.prototype.initSkinType=function(){this._skinType=EnumWindowType.TYPE_2},t.prototype.show=function(t){e.prototype.show.call(this,t),this._uid=App.global.userInfo.uid,this._heronieId=t.id,this._needShowName=t.panelName,this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this,this._view.btn_bgm),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this,this._view.btn_effect),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this,this._view.btn_rolesound),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this,this._view.btn_autoplay),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this,this._view.btn_sure),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onDragSlider,this,this._view.imgSlide),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_END,this.onDragOverSlider,this,this._view.imgSlide),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onReleaseOut,this,this._view.imgSlide),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onDragSlider,this,this._view.imgSlideBg),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_END,this.onDragOverSlider,this,this._view.imgSlideBg),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onReleaseOut,this,this._view.imgSlideBg);var i=App.global.storage.getItem(EnumStorageType.HERONIES_SETTING_BGM+this._uid+"_"+this._heronieId),n=App.global.storage.getItem(EnumStorageType.HERONIES_SETTING_EFFECT+this._uid+"_"+this._heronieId),o=App.global.storage.getItem(EnumStorageType.HERONIES_SETTING_ROLESOUND+this._uid+"_"+this._heronieId);this._view.btn_bgm.selected=i?!1:!0,this._view.btn_effect.selected=n?!1:!0,this._view.btn_rolesound.selected=o?!1:!0,this._view.btn_autoplay.selected=App.global.storage.getItem(EnumStorageType.HERONIES_SETTING_AUTOPLAY+this._uid+"_"+this._heronieId)?!0:!1;var a=App.global.storage.getItem(EnumStorageType.HERONIES_SETTING_WORDSPEED+this._uid+"_"+this._heronieId);this._view.imgSlide.x="1"==a?0:"3"==a?this._posx3:this._posx2,this._view.txtSpeed1.textColor=this._view.txtSpeed2.textColor=this._view.txtSpeed3.textColor=this._normalColor,a?this._view["txtSpeed"+a].textColor=this._selectColor:this._view.txtSpeed2.textColor=this._selectColor},t.prototype.hide=function(){e.prototype.hide.call(this),this._needShowName&&Config.hasEnterGame&&PanelManager.openPanel(this._needShowName),this._needShowName=null},t.prototype.onDragSlider=function(e){App.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMoveSlider,this),this.onMoveSlider(e)},t.prototype.onReleaseOut=function(e){this.onDragOverSlider(e)},t.prototype.onMoveSlider=function(e){var t=this._view.imgSlide.parent.globalToLocal(e.stageX,0).x-.5*this._view.imgSlide.width,i=0>t?0:t>this._posx3?this._posx3:t;this._view.imgSlide.x=i},t.prototype.onDragOverSlider=function(e){App.sound.playSoundSwitchClient(EnumSoundId.CLICK);var t=Math.abs(this._view.imgSlide.x-this._posx1),i=Math.abs(this._view.imgSlide.x-this._posx2),n=Math.abs(this._view.imgSlide.x-this._posx3),o=Math.min(t,i,n);this._view.imgSlide.x=o==t?0:o==i?this._posx2:this._posx3;var a=o==t?"1":o==i?"2":"3";this._view.txtSpeed1.textColor=this._view.txtSpeed2.textColor=this._view.txtSpeed3.textColor=this._normalColor,this._view["txtSpeed"+a].textColor=this._selectColor,App.global.storage.setItem(EnumStorageType.HERONIES_SETTING_WORDSPEED+this._uid+"_"+this._heronieId,a),App.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMoveSlider,this),App.data.gameFangDongCenter.gameId&&App.data.gameFangDongCenter.updateSetting()},t.prototype.onClick=function(e){switch(e.currentTarget){case this._view.btn_bgm:App.global.storage.setItem(EnumStorageType.HERONIES_SETTING_BGM+this._uid+"_"+this._heronieId,this._view.btn_bgm.selected?"":"1"),this._view.btn_bgm.selected?App.sound.isCloseBgm=!1:App.sound.isCloseBgm=!0;
break;case this._view.btn_effect:App.global.storage.setItem(EnumStorageType.HERONIES_SETTING_EFFECT+this._uid+"_"+this._heronieId,this._view.btn_effect.selected?"":"1"),App.sound.isCloseSound=!this._view.btn_effect.selected;break;case this._view.btn_rolesound:App.global.storage.setItem(EnumStorageType.HERONIES_SETTING_ROLESOUND+this._uid+"_"+this._heronieId,this._view.btn_rolesound.selected?"":"1"),App.sound.isCloseVoice=!this._view.btn_rolesound.selected;break;case this._view.btn_autoplay:App.global.storage.setItem(EnumStorageType.HERONIES_SETTING_AUTOPLAY+this._uid+"_"+this._heronieId,this._view.btn_autoplay.selected?"1":""),App.data.gameFangDongCenter.gameId&&App.data.gameFangDongCenter.updateSetting();break;case this._view.btn_sure:PanelOpenManager.removePanel(EnumPanelID.HERONIES_SETTING)}},t.prototype.dispose=function(){this._view&&(this._view.dispose(),this._view=void 0),e.prototype.dispose.call(this)},t}(WindowView);__reflect(HeroniesSettingPanel.prototype,"HeroniesSettingPanel");var LoadingResView=function(e){function t(){var t=e.call(this)||this;return t._showFalseProNum=0,t._boyOffsetX=30,t}return __extends(t,e),t.prototype.init=function(){this._view=new LoadingResUI,this.addChild(this._view);var e=RES.getRes("jindutiao2_ske_json"),t=RES.getRes("jindutiao2_tex_json"),i=RES.getRes("jindutiao2_tex_png");this._dragonbonesFactory=new dragonBones.EgretFactory,this._dragonbonesFactory.parseDragonBonesData(e),this._dragonbonesFactory.parseTextureAtlasData(t,i),this._boy_armature=this._dragonbonesFactory.buildArmatureDisplay("armatureName"),this._girl_armature=this._dragonbonesFactory.buildArmatureDisplay("armatureName"),this.addChild(this._boy_armature),this.addChild(this._girl_armature),this._boyOffsetX=30,this._boy_armature.x=this._boyOffsetX,this._boy_armature.y=1147,this._girl_armature.x=670,this._girl_armature.y=1147,this._scrollRect=new egret.Rectangle,this._scrollRect.height=50,this._isLoading=!1},t.prototype.show=function(t){e.prototype.show.call(this,t),this._isLoading||(App.sound.closeBgm(!0,!0),this._data=t,null==this._listenEffect&&(this._listenEffect=new ListenEffect),this.addChild(this._listenEffect),this._listenEffect.x=Config.MAIN_WIDTH>>1,this._listenEffect.y=580,this._listenEffect.play(),this._boy_armature.animation.gotoAndPlayByFrame("nanpao",1,0),this._girl_armature.animation.gotoAndPlayByFrame("nvhai",1,0),this._progress=0,this.updateProgress("资源加载中",0),this.loadResource(),this._isLoading=!0)},t.prototype.hide=function(){e.prototype.hide.call(this),this._loadList=null,this._boy_armature.animation.stop(),this._girl_armature.animation.stop(),this._listenEffect&&this._listenEffect.stop(),this._isLoading=!1},t.prototype.loadResource=function(){App.data.gameResourceCenter.disposeFreeChapter(this._data.chapter),this._loadList=App.data.gameResourceCenter.getChapterGroupName(this._data.chapter),this._length=this._loadList.length,this.loadNextGroup(null)},t.prototype.loadNextGroup=function(e){if(0!=GameManager.isPlaying){var t=0;e&&(GameLog.log("加载完资源组:"+e+"("+App.res.isGroupLoaded(this._currentGroupName)+")"),t=this._loadList.indexOf(e),t++),t<this._length?(this._currentGroupName=this._loadList[t],App.res.setMaxLoadingThread(-1!=this._currentGroupName.indexOf(App.data.gameResourceCenter.SOUND_SUFFIX)?1:App.res.DEFAULT_LOAD_THREAD),App.res.loadGroup([this._currentGroupName],new FunctionVO(this.loadNextGroup,this),new FunctionVO(this.onResourceProgress,this))):(App.res.setMaxLoadingThread(App.res.DEFAULT_LOAD_THREAD),this.onLoadAllComplete(e))}},t.prototype.startGame=function(){PanelOpenManager.removePanel(EnumPanelID.LOADING_RESVIEW),GameManager.isPlaying&&App.dispatcher.dispatchEvent(this._data.completeEvent)},t.prototype.onResourceProgress=function(e){0==Config.isRelease&&GameLog.log("资源已加载:"+e.groupName+" ["+e.resItem.name+":"+e.itemsLoaded+"/"+e.itemsTotal+"]");var t=this._loadList.indexOf(e.groupName)+1;this.updateProgress("",(t-1)/this._length+e.itemsLoaded/e.itemsTotal/this._length)},t.prototype.onLoadAllComplete=function(e){this._boy_armature.animation.gotoAndPlayByFrame("nanzhanli",1,1),this._boy_armature.armature.proxy.addDBEventListener(dragonBones.EgretEvent.COMPLETE,this.onBoyComplete,this)},t.prototype.onBoyComplete=function(e){this._boy_armature.armature.proxy.removeDBEventListener(dragonBones.EgretEvent.COMPLETE,this.onBoyComplete,this),this._girl_armature.animation.gotoAndPlayByFrame("nvhaiwendao",1,1),this._girl_armature.armature.proxy.addDBEventListener(dragonBones.EgretEvent.COMPLETE,this.onGirlComplete,this)},t.prototype.onGirlComplete=function(e){this._girl_armature.armature.proxy.removeDBEventListener(dragonBones.EgretEvent.COMPLETE,this.onBoyComplete,this),App.data.gameResourceCenter.setLoadedResourceChapter(this._data.chapter),this.startGame()},t.prototype.onLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load"),App.nativeBridge.log("load "+e.resItem.url+" failed")},t.prototype.updateProgress=function(e,t){this._progress<t&&(this._progress=t),this._scrollRect.width=669*this._progress,this._view.imgProgress.scrollRect=this._scrollRect,e=this._progress<=1/3?"正在偷瞄女孩":this._progress<=2/3?"正在整理形象":"正在翻看恋爱秘籍",this._view.txtLabel.text=e+" "+Math.floor(100*this._progress)+"%",GameLog.log("加载到:"+this._view.txtLabel.text);var i=this._boyOffsetX+this._scrollRect.width;540>=i?this._boy_armature.x=i:540!=this._boy_armature.x&&(this._boy_armature.x=540)},t.prototype.dispose=function(){this._boy_armature&&(this._boy_armature.animation.stop(),this._boy_armature.parent&&this._boy_armature.parent.removeChild(this._boy_armature),this._boy_armature.dispose(),this._boy_armature=null),this._girl_armature&&(this._girl_armature.animation.stop(),this._girl_armature.parent&&this._girl_armature.parent.removeChild(this._girl_armature),this._girl_armature.dispose(),this._girl_armature=null),this._listenEffect&&(this._listenEffect.dispose(),this._listenEffect=null),this._data=null,this._view.imgProgress.scrollRect=null,this._scrollRect=null,this._view&&(this._view.dispose(),this._view=void 0),this._dragonbonesFactory&&(this._dragonbonesFactory.clear(!0),this._dragonbonesFactory=null),e.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"width",{get:function(){return Config.MAIN_WIDTH},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return Config.MAIN_HEIGHT},enumerable:!0,configurable:!0}),t.LOAD_LOCAL_PROGRESS="LoadingResView.LOAD_LOCAL_PROGRESS",t.LOAD_LOCAL_SUCCESS="LoadingResView.LOAD_LOCAL_SUCCESS",t}(BasePanel);__reflect(LoadingResView.prototype,"LoadingResView");var BaseButton=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t.prototype.dispose=function(){this.data=null},t}(eui.Button);__reflect(BaseButton.prototype,"BaseButton");var ItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoveStage,t),t.addEventListener(eui.UIEvent.COMPLETE,t.onInitComplete,t),t._dispatcher=new DispatcherRegister,t}return __extends(t,e),t.prototype.createChildren=function(){},t.prototype.onAddStage=function(e){},t.prototype.onRemoveStage=function(e){this._dispatcher.removeAllListeners()},t.prototype.onInitComplete=function(e){this.removeEventListener(eui.UIEvent.COMPLETE,this.onInitComplete,this)},t.prototype.dataChanged=function(){},t.prototype.dispose=function(){},t.prototype.showSelected=function(e){void 0===e&&(e=!1)},t}(eui.ItemRenderer);__reflect(ItemRenderer.prototype,"ItemRenderer");var GameLogin=function(e){function t(){var t=e.call(this)||this;return t._phoneRegExp=new RegExp(EnumRegExp.PHONE_REGULAR_EXPRESSION),t._codeRegExp=/^\d{6}$/,t._lastGetCodeTime=0,t._canSendCode=!0,t}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),this._view=new LoginUI,this.addChild(this._view)},t.prototype.dispose=function(){this._view&&(this._view.dispose(),this._view=null),this._phoneRegExp=null,e.prototype.dispose.call(this)},t.prototype.show=function(t){e.prototype.show.call(this,t),this._view.groupYk.visible=!(DeviceUtil.IsNative&&DeviceUtil.IsAndroid),App.sound.isCloseBgm=!0,this.onShowVideo(),this._view.panelLogin.y=Config.SCREEN_HEIGHT,egret.Tween.get(this._view.panelLogin).to({y:Config.SCREEN_HEIGHT-this._view.panelLogin.height-10},600,egret.Ease.sineOut),this._canSendCode=!0,this._view.txtCode.text="";var i=App.global.storage.getItem(EnumStorageType.PHONE);i?this._view.txtPhoneNum.text=i:(i=App.global.storage.getItem(EnumStorageType.PHONE2),i&&(this._view.txtPhoneNum.text=i)),this.onGameLoginReset(Number(t)),this._dispatcher.addEventListener(egret.Event.CHANGE,this.onTxtPhoneNumChange,this,this._view.txtPhoneNum),this._dispatcher.addEventListener(egret.Event.CHANGE,this.onTxtCodeChange,this,this._view.txtCode),InputTextUtil.addNativeInputTextListener(this._view.txtPhoneNum),InputTextUtil.addNativeInputTextListener(this._view.txtCode),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTxtUserAgreementTouch,this,this._view.txtUserAgreement),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCheckBoxTouch,this,this._view.checkBoxUserAgreement),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnLoginTouch,this,this._view.btnLogin),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnGetCodeTouch,this,this._view.btnGetCode),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ontxtTouristloginTouch,this,this._view.txtTouristlogin),this._dispatcher.addEventListener(LoginEvent.GAME_LOGIN_RESET,this.onGameLoginReset,this),this._dispatcher.addEventListener(EventConst.U8LOGIN,this.onAndroidLogin,this),this._dispatcher.addEventListener(LoginEvent.GET_DEVICE_CODE_BACK,this.onAndroidLoginRequest,this)},t.prototype.onShowVideo=function(){Video.instance().init(App.global.userInfo.loginVideo,!0,!0,null,Video.BOTTOM,null,Config.isLandscape)},t.prototype.onGameLoginReset=function(e,t){void 0===e&&(e=0),void 0===t&&(t=!0),0==e?(this._view.btnLogin.label="快速登录",this._view.txtTouristlogin.text="游客登录",this._view.boxCheckBox.visible=!0):1==e&&(this._view.btnLogin.label="立即绑定",this._view.txtTouristlogin.text="暂不绑定",this._view.boxCheckBox.visible=!1),t&&egret.Tween.get(this._view.panelLogin).to({y:Config.SCREEN_HEIGHT-this._view.panelLogin.height-10},600,egret.Ease.sineIn),this.onTxtPhoneNumChange()},t.prototype.hide=function(){e.prototype.hide.call(this),Video.instance().dispose(!0),App.timer.clearTimer(this,this.onGetCodeTime),this._canSendCode=!0,this._view.btnGetCode.label="获取验证码",this._view.btnGetCode.filters=null,this._view.btnGetCode.touchEnabled=!0,this._view.txtCode.text="",InputTextUtil.removeNativeInputTextListener(this._view.txtPhoneNum),InputTextUtil.removeNativeInputTextListener(this._view.txtCode)},t.prototype.onCheckBoxTouch=function(e){this.onTxtPhoneNumChange(),0==this._view.checkBoxUserAgreement.selected?(this._view.txtTouristlogin.filters=null,this._view.txtTouristlogin.touchEnabled=!0):(this._view.txtTouristlogin.filters=FilterUtil.FILTER_GRAY,this._view.txtTouristlogin.touchEnabled=!1)},t.prototype.onTxtCodeChange=function(e){void 0===e&&(e=null),e&&App.sound.playSoundSwitchClient(EnumSoundId.CLICK),this.canLogin()?(this._view.btnLogin.filters=null,this._view.btnLogin.touchEnabled=!0):(this._view.btnLogin.filters=FilterUtil.FILTER_GRAY,this._view.btnLogin.touchEnabled=!1)},t.prototype.onTxtPhoneNumChange=function(e){void 0===e&&(e=null),e&&App.sound.playSoundSwitchClient(EnumSoundId.CLICK),0==this._canSendCode&&(this._canSendCode=this.notInCodeValideCd(),this._canSendCode&&(App.timer.clearTimer(this,this.onGetCodeTime),this._view.btnGetCode.label="获取验证码",this.onTxtPhoneNumChange())),this.canGetCode()?(this._view.btnGetCode.filters=null,this._view.btnGetCode.touchEnabled=!0):(this._view.btnGetCode.filters=FilterUtil.FILTER_GRAY,this._view.btnGetCode.touchEnabled=!1),this.onTxtCodeChange()},t.prototype.canLogin=function(){return 0==this._view.checkBoxUserAgreement.selected&&11==this._view.txtPhoneNum.text.length&&6==this._view.txtCode.text.length},t.prototype.canGetCode=function(){var e=this.notInCodeValideCd();return e&&this._canSendCode&&0==this._view.checkBoxUserAgreement.selected&&11==this._view.txtPhoneNum.text.length},t.prototype.onTxtUserAgreementTouch=function(e){egret.Tween.get(this._view.panelLogin).to({y:Config.SCREEN_HEIGHT},600,egret.Ease.backInOut).call(function(){PanelOpenManager.openPanel(EnumPanelID.USER_AGREEMENT)},this)},t.prototype.onBtnLoginTouch=function(e){DeviceUtil.IsAndroid&&DeviceUtil.IsNative&&Config.U8Login?this.getDeviceCode():DeviceUtil.IsIos&&DeviceUtil.IsNative?this.iosLogin():this.requestLogin()},t.prototype.getDeviceCode=function(){App.global.userInfo.deviceCode?App.nativeBridge.sendU8Login(""):App.nativeBridge.getDeviceCode()},t.prototype.iosLogin=function(){if(this.checkLogin()){var e=this._view.txtPhoneNum.text,t=this._view.txtCode.text;ProtocolCommon.instance().send_ios_login({tel:e,code:t,user_name:IOSConfig.iosID},new FunctionVO(this.onLoginBack,this))}},t.prototype.onAndroidLoginRequest=function(){App.nativeBridge.sendU8Login("")},t.prototype.onAndroidLogin=function(e){App.nativeBridge.log("request login to server: "+e);var t=JSON.parse(e),i=this._view.txtPhoneNum.text,n=this._view.txtCode.text;ProtocolCommon.instance().send_android_login({userID:t.userID,sdkUserID:t.sdkUserID,token:t.token,DeviceNo:App.global.userInfo.deviceCode,tel:i,code:n,channel_id:Number(App.global.userInfo.channelId)},new FunctionVO(this.onLoginBack,this))},t.prototype.requestLogin=function(){if(this.checkLogin()){var e=this._view.txtPhoneNum.text,t=this._view.txtCode.text;"快速登录"==this._view.btnLogin.label?ProtocolCommon.instance().send_tel_login(e,t,Number(App.global.userInfo.channelId),new FunctionVO(this.onLoginBack,this)):ProtocolCommon.instance().send_tourist_bindphone(e,t,new FunctionVO(this.onLoginBack,this))}},t.prototype.checkLogin=function(){var e=this._view.txtPhoneNum.text,t=this._view.txtCode.text;if(0==this._view.checkBoxUserAgreement.selected)if(""!=e&&11==e.length)if(""!=t){if(/^\d{6}$/.exec(t))return!0;Notice.showBottomCenterMessage("验证码格式有误")}else Notice.showBottomCenterMessage("请输入验证码");else Notice.showBottomCenterMessage("请输入正确的手机号码");else Notice.showBottomCenterMessage("请勾选同意用户协议");return!1},t.prototype.onLoginBack=function(e){ResponseUtil.checkResponseData(e)?(App.global.userInfo.uid=Number(e.data.uid),App.global.userInfo.skey=e.data.token,App.data.game2Center.DataCenter.skey=e.data.avg_token,App.global.storage.setItem(EnumStorageType.PHONE,this._view.txtPhoneNum.text),App.global.storage.removeItem(EnumStorageType.IS_TOURIST),App.global.storage.setItem(EnumStorageType.TOKEN,e.data.token),App.global.storage.setItem(EnumStorageType.UID,String(App.global.userInfo.uid)),App.global.storage.setItem(EnumStorageType.G2_TOKEN,e.data.avg_token),this.startGame()):210==Number(e.code)&&(GameLog.log("禁用按钮！"),this._canSendCode=!1,this._view.txtCode.text="",App.global.storage.setItem(EnumStorageType.FORBID_GETCODE_TIME+this._view.txtPhoneNum.text,Math.floor(.001*(new Date).getTime()+300).toString()),this.setGetCodeBtnCd(Number(App.global.storage.getItem(EnumStorageType.FORBID_GETCODE_TIME+this._view.txtPhoneNum.text)),"请稍候"),this.onTxtPhoneNumChange())},t.prototype.notInCodeValideCd=function(){var e=!0,t=App.global.storage.getItem(EnumStorageType.FORBID_GETCODE_TIME+this._view.txtPhoneNum.text);if(t){var i=Math.floor(.001*(new Date).getTime()-Number(t));0>i&&(this.setGetCodeBtnCd(Number(t),"请稍候"),this._canSendCode=!1,e=!1)}else t=App.global.storage.getItem(EnumStorageType.GETCODE_CD_TIME+this._view.txtPhoneNum.text),t&&(i=Math.floor(.001*(new Date).getTime()-Number(t)),0>i&&(this.setGetCodeBtnCd(Number(t),"请稍候"),this._canSendCode=!1,e=!1));return e},t.prototype.setGetCodeBtnCd=function(e,t){void 0===t&&(t="--"),App.timer.serverTimeEnd(this,this.onGetCodeTime,Math.floor(e),[t])},t.prototype.onGetCodeTime=function(e,t){if(void 0===t&&(t="--"),e.spuleTime<=0)App.timer.clearTimer(this,this.onGetCodeTime),this._view.btnGetCode.label="获取验证码",this._canSendCode=!0,this.onTxtPhoneNumChange();else{var i=e.spuleTime;if(i>60){var n=Math.ceil(i/60);this._view.btnGetCode.label=t+"("+n+"分)"}else this._view.btnGetCode.label=t+"("+i+"秒)"}},t.prototype.onBtnGetCodeTouch=function(e){var t=this._view.txtPhoneNum.text;0==this._view.checkBoxUserAgreement.selected?11==t.length?this.notInCodeValideCd()?ProtocolCommon.instance().send_tel_code(t,new FunctionVO(this.onGetCodeBack,this)):Notice.showBottomCenterMessage("验证码错误次数过多，请稍后再试"):Notice.showBottomCenterMessage("请输入正确的手机号码"):Notice.showBottomCenterMessage("请勾选同意用户协议")},t.prototype.onGetCodeBack=function(e){GameLog.log("验证码："+e.data),ResponseUtil.checkResponseData(e)&&(this._canSendCode=!1,this._lastGetCodeTime=egret.getTimer(),App.global.storage.setItem(EnumStorageType.GETCODE_CD_TIME+this._view.txtPhoneNum.text,Math.floor(.001*(new Date).getTime()+60).toString()),this._view.txtPhoneNum.text&&App.global.storage.setItem(EnumStorageType.PHONE2,this._view.txtPhoneNum.text),this.setGetCodeBtnCd(ServerTime.serverTime+60,"已发送"),this._view.btnGetCode.filters=FilterUtil.FILTER_GRAY,this._view.btnGetCode.touchEnabled=!1)},t.prototype.ontxtTouristloginTouch=function(e){"游客登录"==this._view.txtTouristlogin.text?DeviceUtil.IsNative&&DeviceUtil.IsIos?ProtocolCommon.instance().send_tourist_login_ios(Number(App.global.userInfo.channelId),new FunctionVO(this.onTouristLoginBack,this)):this.ontxt_NotloggingTouch():this.onNotloggingTouch(),App.sound.playSoundSwitchClient(EnumSoundId.CLICK)},t.prototype.ontxt_NotloggingTouch=function(){ProtocolCommon.instance().send_tourist_login(Number(App.global.userInfo.channelId),new FunctionVO(this.onTouristLoginBack,this))},t.prototype.startGame=function(){PanelManager.removePanelByName(PanelRegister.LOGIN),PanelOpenManager.openPanel(EnumPanelID.GAME_HALL)},t.prototype.onNotloggingTouch=function(){ProtocolCommon.instance().send_tourist_login(Number(App.global.userInfo.channelId),new FunctionVO(this.onTouristLoginBack,this))},t.prototype.onTouristLoginBack=function(e){ResponseUtil.checkResponseData(e)&&(App.global.userInfo.uid=Number(e.data.uid),App.global.userInfo.skey=e.data.token,App.data.game2Center.DataCenter.skey=e.data.avg_token,App.global.storage.setItem(EnumStorageType.IS_TOURIST,"1"),App.global.storage.setItem(EnumStorageType.TOKEN,e.data.token),App.global.storage.setItem(EnumStorageType.UID,e.data.uid),App.global.storage.setItem(EnumStorageType.G2_TOKEN,e.data.avg_token),this.startGame())},Object.defineProperty(t.prototype,"width",{get:function(){return 720},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return 1280},enumerable:!0,configurable:!0}),t}(BasePanel);__reflect(GameLogin.prototype,"GameLogin");var GameOtherLogin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),this._view=new GameOtherLoginUI,this.addChild(this._view),Config.isLandscape?(this._view.imgBg.source="img_other_login_bg1_jpg",this._view.width=Config.MAIN_HEIGHT,this._view.height=Config.MAIN_WIDTH,this._view.btnLogin.bottom=138):(this._view.imgBg.source="img_other_login_bg_jpg",this._view.width=Config.MAIN_WIDTH,this._view.height=Config.MAIN_HEIGHT)},t.prototype.show=function(t){e.prototype.show.call(this,t),Config.isLandscape&&App.setOrientation(egret.OrientationMode.LANDSCAPE),this._dispatcher.addEventListener(EventConst.U8LoginFail,this.onLoginFail,this),this._dispatcher.addEventListener(LoginEvent.GET_DEVICE_CODE_BACK,this.onGetDeviceCode,this),this._dispatcher.addEventListener(EventConst.U8LOGIN,this.onU8Login,this),t?1==t.type?(App.nativeBridge.log("request login out"),this._loginData=t.data,ProtocolCommon.instance().send_login_out(new FunctionVO(this.onLoginOut,this))):2==t.type&&(this._loginData=t.data,this.onLogin()):this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLogin,this,this._view.btnLogin)},t.prototype.hide=function(){e.prototype.hide.call(this),this._loginData=null},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._view&&(this._view.dispose(),this._view=null)},t.prototype.onLoginOut=function(e){ResponseUtil.checkResponseData(e,!1)&&(App.global.userInfo.uid=void 0,App.global.userInfo.skey="",App.global.storage.removeItem(EnumStorageType.TOKEN),App.global.storage.removeItem(EnumStorageType.UID),App.global.storage.removeItem(EnumStorageType.PHONE),App.nativeBridge.log("login out success"),DeviceUtil.IsWeb&&Config.soEasy||DeviceUtil.IsAndroid&&Config.U8Login&&this.onLogin())},t.prototype.onLoginFail=function(){},t.prototype.onLogin=function(e){DeviceUtil.IsWeb&&Config.soEasy?onSoeasyLogin(0,new FunctionVO(this.soEasyLoginBack,this)):DeviceUtil.IsAndroid&&Config.U8Login&&this.startU8Login()},t.prototype.soEasyLoginBack=function(e){if("200"==e.code){var t=ZmSdk.getInstance().getUserInfo();App.data.game2Center.DataCenter.skey=e.data.avg_token,App.global.userInfo.skey=e.data.token,App.global.userInfo.uid=e.data.uid,App.data.game2Center.DataCenter.skey=e.data.avg_token,GameLog.log("用户的sdkindx"+t.common.sdkindx),this.startGame()}},t.prototype.startU8Login=function(){GameLog.log("请求u8登录"),App.global.userInfo.deviceCode?this._loginData?this.onU8Login(this._loginData):App.nativeBridge.sendU8Login(""):App.nativeBridge.getDeviceCode()},t.prototype.onGetDeviceCode=function(){App.nativeBridge.log("get device code: "+App.global.userInfo.deviceCode),this._loginData?this.onU8Login(this._loginData):App.nativeBridge.sendU8Login("")},t.prototype.onU8Login=function(e){App.nativeBridge.log("request login to server: "+e);var t=JSON.parse(e);ProtocolCommon.instance().send_u8_login({userID:t.userID,sdkUserID:t.sdkUserID,token:t.token,DeviceNo:App.global.userInfo.deviceCode},new FunctionVO(this.onU8LoginBack,this))},t.prototype.onU8LoginBack=function(e){App.nativeBridge.log("get login data back from server: "+JSON.stringify(e)),ResponseUtil.checkResponseData(e)?(App.global.userInfo.uid=Number(e.data.uid),App.global.userInfo.skey=e.data.token,App.data.game2Center.DataCenter.skey=e.data.avg_token,this.startGame()):(App.nativeBridge.log("login error "+(e?e.code:null)),Alert.show(e.data,"确定"))},t.prototype.startGame=function(){PanelManager.removePanelByName(PanelRegister.OTHER_LOGIN),PanelOpenManager.openPanel(EnumPanelID.GAME_HALL)},Object.defineProperty(t.prototype,"width",{get:function(){return Config.isLandscape?Config.MAIN_HEIGHT:Config.MAIN_WIDTH},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return Config.isLandscape?Config.MAIN_WIDTH:Config.MAIN_HEIGHT},enumerable:!0,configurable:!0}),t}(BasePanel);__reflect(GameOtherLogin.prototype,"GameOtherLogin");var StartVideoPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),this._spSkip=new h5_engine.GSprite,this._spSkip.graphics.beginFill(16711680,.01),this._spSkip.graphics.drawRect(0,0,160,40),this._spSkip.graphics.endFill(),this._spSkip.touchEnabled=!0,this._spSkip.touchChildren=!0,this.addChild(this._spSkip),this._txtSkip=new h5_engine.GTextField,this._txtSkip.size=40,this._txtSkip.textColor=16777215,this._txtSkip.stroke=1,this._txtSkip.text="跳过视频",this._txtSkip.touchEnabled=!0,this._spSkip.addChild(this._txtSkip),this._txtSkip.x=this._spSkip.width-this._txtSkip.width>>1,this._txtSkip.y=this._spSkip.height-this._txtSkip.height>>1,this._spSkip.x=this.width-this._spSkip.width>>1,this._spSkip.y=.8*this.height},t.prototype.dispose=function(){this._txtSkip&&(this._txtSkip.parent&&this._txtSkip.parent.removeChild(this._txtSkip),this._txtSkip=null),this._spSkip&&(this._spSkip.parent&&this._spSkip.parent.removeChild(this._spSkip),this._spSkip=null),e.prototype.dispose.call(this)},t.prototype.show=function(t){e.prototype.show.call(this,t),this._txtSkip.visible=!1,App.global.userInfo.startVideo?this.onShowVideo():this._dispatcher.addEventListener(LoginEvent.GET_AVG_SYSTEM_INIT,this.onShowVideo,this),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSkip,this,this._spSkip),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onStartTouch,this,this._spSkip),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onReleaseTouch,this,this._spSkip)},t.prototype.onReleaseTouch=function(e){this._spSkip.filters=null},t.prototype.onStartTouch=function(e){this._spSkip.filters=FilterUtil.FILTER_BLUE},t.prototype.onShowVideo=function(){Video.instance().init(App.global.userInfo.startVideo,!0,!1,new FunctionVO(this.onSkip,this),Video.BOTTOM,new FunctionVO(this.onShowTxt,this),Config.isLandscape)},t.prototype.onShowTxt=function(){this._txtSkip.visible=!0},t.prototype.hide=function(){e.prototype.hide.call(this),this._spSkip.filters=null,Video.instance().dispose()},t.prototype.onSkip=function(e){App.nativeBridge.log("touch skip video"),App.dispatcher.dispatchEvent(PreloadEvent.PLAY_COMPLETE_START_VIDEO)},Object.defineProperty(t.prototype,"width",{get:function(){return Config.MAIN_WIDTH},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return Config.MAIN_HEIGHT},enumerable:!0,configurable:!0}),t}(BasePanel);__reflect(StartVideoPanel.prototype,"StartVideoPanel");var Touristlogin=function(e){function t(){return e.call(this,500,280)||this}return __extends(t,e),t.prototype.initView=function(){this._view=new TouristloginUI,this.viewSp.addChild(this._view),this.rightTitle="绑定手机"},t.prototype.show=function(t){e.prototype.show.call(this,t),this._uid=t,this._type=0,this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtn_BindingPhoneTouch,this,this._view.btn_BindingPhone),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ontxt_NotloggingTouch,this,this._view.txt_Notlogging)},t.prototype.hide=function(){e.prototype.hide.call(this)},t.prototype.startGame=function(){PanelManager.removePanelByName(PanelRegister.LOGIN),PanelOpenManager.openPanel(EnumPanelID.GAME_HALL)},t.prototype.onBtn_BindingPhoneTouch=function(){this._type=1,PanelOpenManager.removePanel(EnumPanelID.TOURISTLOGIN),PanelOpenManager.openPanel(EnumPanelID.FORCE_PHONE_BIND,this._uid,!1)},t.prototype.ontxt_NotloggingTouch=function(){var e=App.data.gameHallCenter.getHeroniesData(this._uid);e.setPlayerNotBind("1"),this.closePanel()},t.prototype.onTouristLoginBack=function(e){ResponseUtil.checkResponseData(e)&&(App.global.userInfo.uid=Number(e.data.uid),App.global.userInfo.skey=e.data.token,App.data.game2Center.DataCenter.skey=e.data.avg_token,this._type=2,PanelOpenManager.removePanel(EnumPanelID.TOURISTLOGIN))},t.prototype.dispose=function(){this._view&&(this._view.dispose(),this._view=void 0),e.prototype.dispose.call(this)},t}(WindowView);__reflect(Touristlogin.prototype,"Touristlogin");var UserAgreement=function(e){function t(){return e.call(this,600,500)||this}return __extends(t,e),t.prototype.initView=function(){this._view=new UserAgreementUI,this.viewSp.addChild(this._view),this.centerTitle="用户协议",this._view.dataList.useVirtualLayout=!0,this._view.dataList.itemRenderer=UserAgreeItem,this._view.scroller.viewport=this._view.dataList},t.prototype.show=function(t){e.prototype.show.call(this,t),this._view.dataList.dataProvider=new eui.ArrayCollection([App.global.userInfo.userAgreeInfo.content1]),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTabBtnTouch,this,this._view.userAgreement_btn),App.timer.doTimeOnce(this,1e3,this.updateContent),ScrollerCenter.hideVerticalScrollBar(this._view.scroller)},t.prototype.updateContent=function(){for(var e,t=App.global.userInfo.userAgreeInfo.content1+App.global.userInfo.userAgreeInfo.content2,i=t.split("\n"),n=20,o=i.length%n,a=Math.floor(i.length/n),s=[],r=n+(o>0?1:0),h=0;r>h;h++){e="";for(var p=a*h;a*(h+1)>p&&!(p>=i.length);p++)a*(h+1)>p&&(e+=0==s.length&&""==e?i[p]:"\n"+i[p]);s.push(e)}this._view.dataList.dataProvider=new eui.ArrayCollection(s)},t.prototype.hide=function(){e.prototype.hide.call(this),this._view.scroller.stopAnimation(),this._view.dataList.scrollV=0,this._view.dataList.dataProvider=new eui.ArrayCollection([]),App.timer.clearTimer(this,this.updateContent),App.dispatcher.dispatchEvent(LoginEvent.GAME_LOGIN_RESET,0)},t.prototype.onTabBtnTouch=function(){PanelManager.removePanelByName(PanelRegister.USER_AGREEMENT)},t.prototype.onTabuserAgreeTouch=function(e){PanelManager.removePanelByName(PanelRegister.USER_AGREEMENT)},t.prototype.dispose=function(){this._view&&(this._view.dispose(),this._view=void 0),e.prototype.dispose.call(this)},t}(WindowView);__reflect(UserAgreement.prototype,"UserAgreement");var ProtocolBase=function(){function e(){}return e.send=function(e,t,i,n,o,a){void 0===o&&(o=!0),void 0===a&&(a=!0),this.sendBack(e,t,new FunctionVO(i,n),o,null,a)},e.sendBack=function(e,t,i,n,o,a){void 0===n&&(n=!0),void 0===a&&(a=!0);var s=App.global.userInfo.skey;a&&null!=s&&"null"!=s&&""!=s&&(t.Authorization=s);var r=App.global.userInfo.uid;a&&r&&(t.AuthorizationID=r);var h=new HttpRequest;h.requestCompleteFun=i,h.noticeError=n,o&&(h.baseURL=o),h.needAddToken=a,h.send(e,JSON.stringify(t))},e}();__reflect(ProtocolBase.prototype,"ProtocolBase");var Config=function(){function e(){}return e.isRelease=!0,e.isDebug=!1,e.skipVideo=!1,e.skipGuide=!0,e.soundAsyncLoad=!1,e.isHttps=!0,e.hasEnterGame=!1,e.startPlaySoundEffect=!1,e.hasTouch=!1,e.version="v1.2.1",e.MAIN_WIDTH=720,e.MAIN_HEIGHT=1280,e.isEnterGame=!1,e.RESOURCE_PATH="resource/",e.currentGameFps=60,e.orientation="auto",e.isLandscape=!1,e.soEasy=!1,e.U8Login=!1,e.IsApplyIOS=!1,e.isIosHybird=!1,e}();__reflect(Config.prototype,"Config");var BaseDialog=function(e){function t(){var t=e.call(this)||this;return t.percentWidth=100,t.percentHeight=100,t}return __extends(t,e),t.prototype.show=function(){this.playEnterAnim(),App.layer.popLayer.addChild(this),this.okBtn&&this.okBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkTouch,this),this.cancelBtn&&this.cancelBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCancelTouch,this)},t.prototype.playEnterAnim=function(){this.contentGroup&&(this.contentGroup.scaleX=0,this.contentGroup.scaleY=0,egret.Tween.get(this.contentGroup).to({scaleX:1,scaleY:1},300,egret.Ease.backOut))},t.prototype.hide=function(){App.layer.popLayer.removeChild(this),this.okBtn&&this.okBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkTouch,this),this.cancelBtn&&this.cancelBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onCancelTouch,this)},t.prototype.setContent=function(e){this.contentLabel&&(this.contentLabel.text=e)},t.prototype.setContentSize=function(e){this.contentLabel&&(this.contentLabel.size=e)},t.prototype.setTitle=function(e){this.titleLabel&&(this.titleLabel.text=e)},t.prototype.setOk=function(e,t){this.ok=e,this.thisObject=t},t.prototype.setCancel=function(e,t){this.cancel=e,this.thisObject=t},t.prototype.onOkTouch=function(){this.ok&&this.thisObject&&this.ok.apply(this.thisObject,[]),this.destoryMe()},t.prototype.onCancelTouch=function(){this.cancel&&this.thisObject&&this.cancel.apply(this.thisObject,[]),this.destoryMe()},t.prototype.destoryMe=function(){this.cancel=null,this.ok=null,this.thisObject=null,this.okBtn&&this.okBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkTouch,this),this.cancelBtn&&this.cancelBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onCancelTouch,this),this.parent&&this.parent.removeChild(this)},t}(eui.Component);__reflect(BaseDialog.prototype,"BaseDialog");var BaseMovieClip=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.config=function(e,t,i){var n=RES.getRes(e),o=RES.getRes(t),a=new egret.MovieClipDataFactory(n,o);this.movieClipData=a.generateMovieClipData(i)},t.prototype.hide=function(){this.parent&&this.parent.removeChild(this)},t.prototype.destoryMe=function(){this.stop(),this.hide()
},t}(egret.MovieClip);__reflect(BaseMovieClip.prototype,"BaseMovieClip");var Mediator=function(){function e(){this._hasRegister=!1,this._dispatcher=new DispatcherRegister}return e.prototype.onRegister=function(){this._hasRegister=!0},e.prototype.onRemove=function(){this._hasRegister=!1,this._dispatcher&&this._dispatcher.removeAllListeners()},e.prototype.dispose=function(){this._dispatcher&&(this._dispatcher.removeAllListeners(),this._dispatcher=null)},Object.defineProperty(e.prototype,"hasRegister",{get:function(){return this._hasRegister},enumerable:!0,configurable:!0}),e.prototype.sendEvent=function(e,t){void 0===t&&(t=null),App.dispatcher.dispatchEvent(e,t)},e.prototype.addEvent=function(e,t,i){this._dispatcher.addEventListener(e,t,i)},e.prototype.removeEvent=function(e,t,i){this._dispatcher.removeEventListener(e,t,i)},e}();__reflect(Mediator.prototype,"Mediator");var SingleClass=function(){function e(){}return e.getInstance=function(){var e=this;return null==e.instance&&(e.instance=new e),e.instance},e}();__reflect(SingleClass.prototype,"SingleClass");var h5_engine;!function(e){var t=function(){function e(){}return e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.logError=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.logInfo=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.logDebug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.logWarn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.logStack=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.logXingneng=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e}();e.LogicInterface=t,__reflect(t.prototype,"h5_engine.LogicInterface")}(h5_engine||(h5_engine={}));var DlcMainDoc=function(e){function t(){var t=e.call(this)||this;return t.isOnLoop=!1,t.indexScrllHArr=[],t.endSocllH=6400,t.indexSC=0,t.showTitles=[{id:0,title:"比赛信息",source:"dlc_doc_p1_jpg",comeUrl:"http://www.szxinchenglong.com"},{id:1,title:"《闲玩S》 诚招合作伙伴了！",source:"dlc_doc_p2_jpg",comeUrl:"http://www.szxinchenglong.com"},{id:2,title:"公      告",source:"dlc_doc_p3_jpg",comeUrl:"http://www.szxinchenglong.com"},{id:3,title:"分享朋友圈，免费参赛！",source:"dlc_doc_p4_jpg",comeUrl:"http://www.szxinchenglong.com"},{id:4,title:"分享朋友圈，免费参赛！",source:"dlc_doc_p5_jpg",comeUrl:"http://www.szxinchenglong.com"}],t}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),this._view=new DlcMainDocUI,this.addChild(this._view)},t.prototype.show=function(t){e.prototype.show.call(this,t),this._view.showScroller.visible=!1,this._view.showIndexGrp.visible=!1,this._view.showScroller.throwSpeed=0,this.showSomeIndexLight(this.indexSC),this._view.finditemGrp.removeChildren();for(var i=0;i<this.showTitles.length;i++){var n=new eui.Group,o=new eui.Image;o.source=this.showTitles[i].source,o.top=o.bottom=o.left=o.right=0,n.width=1280,n.x=1280*i,n.addChild(o),n.touchEnabled=!0,n.touchChildren=!1,this._view.finditemGrp.addChild(n),n.top=n.bottom=0,n.name=i+"",this.indexScrllHArr.push(1280*i)}this.stateNum=0,this.addEvent()},t.prototype.hide=function(){e.prototype.hide.call(this)},t.prototype.autoMoveFunc=function(){this.indexSC==this.indexScrllHArr.length-1&&this.rightConOne();var e=this.indexScrllHArr[(this.indexSC+1)%this.indexScrllHArr.length];egret.Tween.get(this._view.showScroller.viewport).to({scrollH:e},200),this.indexSC++,5==this.indexSC&&(this.indexSC=0),this.showSomeIndexLight(this.indexSC)},t.prototype.showSomeIndexLight=function(e){for(var t=0;t<this._view.showIndexGrp.numChildren;t++){var i=this._view.showIndexGrp.getChildAt(t);t==e?i.source="dlc_select_icon_png":i.source="dlc_unselect_icon_png"}},t.prototype.changeEnd=function(){if(this.startTouch&&this.endTouch){var e=this.startTouch-this.endTouch;-100>e?this.isOnLoop?(0==this.indexSC&&(this.indexSC=5),this.indexSC=(this.indexSC-1)%5):this.indexSC>0&&this.indexSC--:e>100&&(this.isOnLoop?this.indexSC=(this.indexSC+1)%5:this.indexSC<4&&this.indexSC++),this.startTouch=this.endTouch=null,this.showSomeIndexLight(this.indexSC),egret.Tween.removeTweens(this._view.showScroller.viewport),egret.Tween.get(this._view.showScroller.viewport).to({scrollH:this.indexScrllHArr[this.indexSC]},200).call(function(){GameLog.log("moveEnd")}),this.stateTouch=1,this.stateNum++,100==this.stateNum&&(this.stateNum=1),GameLog.log(this.stateNum),GameLog.log(this.stateTouch)}},t.prototype.change=function(e){0==this._view.showScroller.viewport.scrollH?this.leftConOne():this._view.showScroller.viewport.scrollH==this.endSocllH&&this.rightConOne()},t.prototype.touchHandle=function(e){if(0==this.stateNum||this.stateNum>0&&1==this.stateTouch)switch(e.type){case egret.TouchEvent.TOUCH_BEGIN:this.startTouch=e.stageX;break;case egret.TouchEvent.TOUCH_MOVE:this.endTouch=e.stageX}},t.prototype.touchHandleButton=function(e){var t=this;switch(e.target){case this._view.backBtn:this.closePanel(),App.dispatcher.dispatchEvent(G2_GameSceneEvent.SHOW_SCENE_ANIMATION);break;case this._view.gotoShop:ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.dlc_getChapters,{Authorization:App.data.game2Center.DataCenter.skey},new FunctionVO(function(e){if(GameLog.log("data->"+e),200==e.code)return ProtocolHttpData.dlc_chaptersData=e,ProtocolHttpData.dlc_ChatStartInfo=e.data.story,PanelOpenManager.openPanel(EnumPanelID.G2_DlcMainPanel),void t.closePanel();var i=new DlcConfirmDialog;i.setBuyLove(e.info),i.show()},this))}},t.prototype.leftConOne=function(){var e=this._view.finditemGrp.getChildAt(0);this._view.finditemGrp.removeChild(e),this._view.finditemGrp.addChild(e),this._view.showScroller.viewport.scrollH=this.endSocllH;var t=this.showTitles.shift();this.showTitles.push(t)},t.prototype.rightConOne=function(){var e=this._view.finditemGrp.getChildAt(this._view.finditemGrp.numChildren-1);this._view.finditemGrp.removeChild(e),this._view.finditemGrp.addChildAt(e,0),this._view.showScroller.viewport.scrollH=0;var t=this.showTitles.pop();this.showTitles.unshift(t)},t.prototype.addEvent=function(){this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandleButton,this,this),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchHandle,this,this._view.showScroller),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchHandle,this,this._view.showScroller),this._dispatcher.addEventListener(eui.UIEvent.CHANGE_END,this.changeEnd,this,this._view.showScroller)},t.prototype.enableTouch=function(){this.touchEnabled=!0,this.touchChildren=!0},t.prototype.disableTouch=function(){this.touchChildren=!1,this.touchEnabled=!1},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._view&&(this._view.dispose(),this._view=null);try{egret.Tween.removeTweens(this)}catch(t){}},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t}(BasePanel);__reflect(DlcMainDoc.prototype,"DlcMainDoc");var DlcMainGame=function(e){function t(){var t=e.call(this)||this;return t.indexPData=0,t.isNet=!1,t}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),this._view=new DlcMainGameUI,this.addChild(this._view),this._view.selectGrp.visible=!1,this._view.meGrp.visible=!1,this._view.otherGrp.visible=!1,this._view.pangGrp.visible=!1,this._view.upBtn.visible=!1},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._view&&(this._view.dispose(),this._view=null)},t.prototype.show=function(t){e.prototype.show.call(this,t),this.addEvent(),t&&this.setData(t)},t.prototype.hide=function(){e.prototype.hide.call(this)},t.prototype.addEvent=function(){this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this,this)},t.prototype.onVideoFinish=function(){Video.instance().dispose(),this.showEnter(),this.nextIdShow(this.data_info[0].id)},t.prototype.showEnter=function(){try{egret.Tween.removeTweens(this._view.contentGroup),this._view.contentGroup.alpha=0,egret.Tween.get(this._view.contentGroup).to({alpha:1},1e3)}catch(e){}},t.prototype.showOff=function(){try{egret.Tween.removeTweens(this._view.contentGroup),this._view.contentGroup.alpha=0}catch(e){}},t.prototype.setData=function(e){if(App.data.game2Center.TalkManager.stopSound(),this.data_info=e,egret.Tween.removeTweens(this),e.length>1){this._view.selectGrp.visible=!0,this._view.meGrp.visible=!1,this._view.otherGrp.visible=!1,this._view.pangGrp.visible=!1,this._view.upBtn.visible=!1,this.setStarNum(0),this._view.titleSelect.text="";for(var t=[0,1,2],i=0,n=e.length;n>i;i++)if(8!=e[i].role){var o=Math.floor(Math.random()*t.length),a=this._view.showSelectGrp.getChildAt(t[o]);a.label=e[i].content,a.selected=!1,a.name=e[i].id+"",t.splice(o,1)}else this._view.titleSelect.text=e[i].content}else{var s=e[0];switch(s.roleimg?this._view.otherImg.source=s.roleimg+"_jpg":this._view.otherImg.source="lihui1-1_jpg",s.role){case 1:this._view.upBtn.visible=!0,this._view.selectGrp.visible=!1,this._view.meGrp.visible=!0,this._view.otherGrp.visible=!1,this._view.pangGrp.visible=!1,this.showSomeOneTextPrint(this._view.textInfoMe,s.content);break;case 0:this._view.upBtn.visible=!0,this._view.selectGrp.visible=!1,this._view.meGrp.visible=!1,this._view.otherGrp.visible=!0,this._view.pangGrp.visible=!1,this.showSomeOneTextPrint(this._view.textInfoOther,s.content);break;case 2:this._view.pangGrp.visible=!0,this._view.upBtn.visible=!0,this._view.selectGrp.visible=!1,this._view.meGrp.visible=!1,this._view.otherGrp.visible=!1,this.showSomeOneTextPrint(this._view.textInfoPang,s.content);break;case 4:this.showOff(),GameLog.log("播放视频-->"+s.video),DlcVideoMgr.playVideoByUrl(s.video,new FunctionVO(this.onVideoFinish,this))}if(this.parent&&s.audio){var r=s.audio;GameLog.log("播放语音->"+r),App.data.game2Center.TalkManager.playSound(r,this.onSoundComplete,this.onError,this.onLoaded,this)}}},t.prototype.onLoaded=function(){},t.prototype.tryPlaySound=function(){this.parent&&App.data.game2Center.TalkManager.tryPlaySound(),this.stopTryPlaySound()},t.prototype.stopTryPlaySound=function(){egret.Tween.removeTweens(App.data.game2Center.TalkManager)},t.prototype.onSoundComplete=function(){this.stopTryPlaySound()},t.prototype.onError=function(){GameLog.log("DlcMainGame >> 声音加载错误"),Notice.showBottomCenterMessage("声音加载失败"),this.onSoundComplete()},t.prototype.showSomeOneTextPrint=function(e,t){var i=this;egret.Tween.removeTweens(this);var n=t.length,o=0;egret.Tween.get(this,{loop:!0}).call(function(){var a=t.substr(0,o+1);e.text=a,o++,o==n&&egret.Tween.removeTweens(i)}).wait(20)},t.prototype.setStarNum=function(e){for(var t=0,i=this._view.startGrp.numChildren;i>t;t++){var n=this._view.startGrp.getChildAt(t);0==e?n.source="dlc_big_start_3_png":e-2>=0?(n.source="dlc_big_start_1_png",e-=2):e-1>=0&&(n.source="dlc_big_start_2_png",e-=1)}},t.prototype.touchHandle=function(e){var t=this;if(!this.isNet)switch(e.target){case this._view.upBtn:this.skipIdShow(this.data_info[0].id);break;case this._view.nextImg0:case this._view.nextImg1:case this._view.nextImg2:GameLog.log("next"),this.nextIdShow(this.data_info[0].id);break;case this._view.select_0:this.setStarNum(this.data_info[0].score),egret.Tween.get(this).wait(500).call(function(){egret.Tween.removeTweens(t),t.nextIdShow(parseInt(t._view.select_0.name))});break;case this._view.select_1:this.setStarNum(this.data_info[1].score),egret.Tween.get(this).wait(500).call(function(){egret.Tween.removeTweens(t),t.nextIdShow(parseInt(t._view.select_1.name))});break;case this._view.select_2:this.setStarNum(this.data_info[2].score),egret.Tween.get(this).wait(500).call(function(){egret.Tween.removeTweens(t),t.nextIdShow(parseInt(t._view.select_2.name))})}},t.prototype.skipIdShow=function(e){var t=this;ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.dlc_skip,{Authorization:App.data.game2Center.DataCenter.skey,id:e},new FunctionVO(function(e){if(200==e.code)if(e.data.story&&e.data.story.length>0)t.setData(e.data.story);else{try{egret.Tween.removeTweens(t._view.contentGroup)}catch(i){}GameLog.log("结束请求结果"),t.overChapter()}},this))},t.prototype.nextIdShow=function(e){var t=this;ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.dlc_storyNex,{Authorization:App.data.game2Center.DataCenter.skey,id:e},new FunctionVO(function(e){GameLog.log("data->"+e),t.isNet=!1,200==e.code?e.data.story&&e.data.story.length>0?t.setData(e.data.story):(GameLog.log("结束请求结果"),t.overChapter()):PanelOpenManager.openPanel(EnumPanelID.G2_DlcMainPanel)},this))},t.prototype.overChapter=function(){ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.dlc_storyFinish,{Authorization:App.data.game2Center.DataCenter.skey,cid:ProtocolHttpData.gameChapterId},new FunctionVO(function(e){if(GameLog.log("章节结束信息-->"+e),200==e.code){ProtocolHttpData.dlc_storyFinish_Info=e,ProtocolHttpData.dlc_chaptersData.data.chapters=e.data.chapters,ProtocolHttpData.dlc_chaptersData.data.detail=e.data.detail;for(var t=0,i=ProtocolHttpData.dlc_chaptersData.data.chapters.length;i>t;t++)if(1==ProtocolHttpData.dlc_chaptersData.data.chapters[t].status){ProtocolHttpData.gameChapterId=ProtocolHttpData.dlc_chaptersData.data.chapters[t].id;break}App.data.game2Center.TalkManager.stopSound(),PanelOpenManager.removePanel(EnumPanelID.G2_DlcMainGame),PanelOpenManager.openPanel(EnumPanelID.G2_DlcMainGameOver),App.dispatcher.dispatchEvent(EventConst.DLC_CHANGE_CHAPTER_DETAIL)}else PanelOpenManager.openPanel(EnumPanelID.G2_DlcMainPanel)},this))},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t}(BasePanel);__reflect(DlcMainGame.prototype,"DlcMainGame");var DlcMainGameOver=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),this._view=new DlcMainGameOverUI,this.addChild(this._view),this._view.backBtn.horizontalCenter=-150,this._view.nextBtn.horizontalCenter=150},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._view&&(this._view.dispose(),this._view=null)},t.prototype.show=function(t){e.prototype.show.call(this,t),this.setData({startNum:ProtocolHttpData.dlc_storyFinish_Info.data.score}),this.addEvent()},t.prototype.hide=function(){e.prototype.hide.call(this)},t.prototype.addEvent=function(){this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this,this)},t.prototype.touchHandle=function(e){try{ProtocolHttpData.dlc_ChatStartInfo=ProtocolHttpData.dlc_storyFinish_Info.data.story}catch(e){}switch(e.target){case this._view.backBtn:PanelOpenManager.openPanel(EnumPanelID.G2_DlcMainPanel),PanelOpenManager.removePanel(EnumPanelID.G2_DlcMainGame),this.closePanel();break;case this._view.nextBtn:this.closePanel(),PanelOpenManager.openPanel(EnumPanelID.G2_DlcMainGame,ProtocolHttpData.dlc_ChatStartInfo,!1)}},t.prototype.setData=function(e){this.setStarNum(e.startNum),0==e.startNum&&(this._view.backBtn.horizontalCenter=0,this._view.nextBtn.visible=!1)},t.prototype.setStarNum=function(e){for(var t=0,i=this._view.startGrp.numChildren;i>t;t++){var n=this._view.startGrp.getChildAt(t);0==e?n.source="dlc_big_start_3_png":e-2>=0?(n.source="dlc_big_start_1_png",e-=2):e-.5>=0&&(n.source="dlc_big_start_2_png",e-=1)}},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t}(BasePanel);__reflect(DlcMainGameOver.prototype,"DlcMainGameOver");var DlcMainPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),this._view=new DlcMainPanelUI,this.addChild(this._view);for(var t=0,i=ProtocolHttpData.dlc_chaptersData.data.chapters.length;i>t;t++)if(1==ProtocolHttpData.dlc_chaptersData.data.chapters[t].status){ProtocolHttpData.gameChapterId=ProtocolHttpData.dlc_chaptersData.data.chapters[t].id;break}this._view.showImggrp.visible=!1,this._view.showImgInfo.visible=!1,this.dataArr=new eui.ArrayCollection,this._view.panelChapterList.itemRenderer=DlcMainPanelItem,this.dataPanel=ProtocolHttpData.dlc_chaptersData.data.chapters,this.changeChapterDetail()},t.prototype.dispose=function(){e.prototype.dispose.call(this);for(var t=0,i=this._view.showGrpImgInfos.numChildren;i>t;t++)this._view.showGrpImgInfos.removeChildAt(0).dispose();this.dataArr&&(this.dataArr.removeAll(),this.dataArr=null),this.dataBgInfos&&(this.dataBgInfos.length=0,this.dataBgInfos=null),this.dataPanel=null,this._view&&(this._view.dispose(),this._view=null)},t.prototype.show=function(t){e.prototype.show.call(this,t),this.addEvent()},t.prototype.hide=function(){e.prototype.hide.call(this)},t.prototype.addEvent=function(){this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this,this),this._dispatcher.addEventListener(EventConst.SHOW_IMG_INFO_SOURCE,this.showShowImgInfoSource,this),this._dispatcher.addEventListener(EventConst.DLC_CHANGE_CHAPTER_DETAIL,this.changeChapterDetail,this)},t.prototype.changeChapterDetail=function(){this.dataArr.removeAll(),this.dataPanel=ProtocolHttpData.dlc_chaptersData.data.chapters;for(var e=0,t=this.dataPanel.length;t>e;e++)this.dataArr.addItem(this.dataPanel[e]);this._view.panelChapterList.dataProvider=this.dataArr,this.dataBgInfos=ProtocolHttpData.dlc_chaptersData.data.detail;for(var e=0,t=this.dataBgInfos.length;t>e;e++){var i=this._view.showGrpImgInfos.getChildAt(e);i&&i.update(this.dataBgInfos[e])}this.dataArr.refresh()},t.prototype.touchHandle=function(e){switch(e.target){case this._view.closeBtn:this.closePanel(),App.dispatcher.dispatchEvent(G2_GameSceneEvent.SHOW_SCENE_ANIMATION);break;case this._view.startBtn:PanelOpenManager.openPanel(EnumPanelID.G2_DlcMainGame,ProtocolHttpData.dlc_ChatStartInfo),this.closePanel();break;case this._view.showImggrp:this._view.showImggrp.visible=!1}},t.prototype.showShowImgInfoSource=function(e){this._view.showImggrp.visible=!0,this.startLoad(e.pic),this.startLoading()},t.prototype.startLoading=function(){var e=this;this._view.showLoading.visible=!0;var t=0;egret.Tween.get(this._view.showLabel,{loop:!0}).wait(1e3).call(function(){t++,e._view.showLabel.text="加载中";for(var i=0,n=t%5;n>i;i++)e._view.showLabel.text+="."})},t.prototype.startLoad=function(e){var t=new egret.ImageLoader;t.once(egret.Event.COMPLETE,this.onLoadComplete,this),t.load(e)},t.prototype.onLoadComplete=function(e){var t=e.target,i=t.data,n=new egret.Texture;n.bitmapData=i,this._view.showImgInfo.texture=n,this._view.showImgInfo.visible=!0,this._view.showImgInfo.scaleX=this._view.showImgInfo.scaleY=0==App.layer.rotation?Config.SCREEN_WIDTH/n.textureWidth:Config.SCREEN_HEIGHT/n.textureWidth,egret.Tween.removeTweens(this._view.showLabel),this._view.showLoading.visible=!1},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t}(BasePanel);__reflect(DlcMainPanel.prototype,"DlcMainPanel");var ActPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this._view=new ActPanelUI,this.addChild(this._view);for(var e=0;8>e;e++)this._view["page"+e].visible=!1;this._view.radioScroller.visible=!1,this.radioList=[this._view.radioBtn0,this._view.radioBtn1,this._view.radioBtn2,this._view.radioBtn3,this._view.radioBtn4,this._view.radioBtn5,this._view.radioBtn6,this._view.radioBtn7]},t.prototype.show=function(t){e.prototype.show.call(this,t),this._data=t,this._dispatcher.addEventListener(eui.UIEvent.CHANGE,this.onPageChange,this,this._view.radioBtn0.group),CommomBtn.btnClick(this._view.closeBtn,this.onCloseTouch,this),this._dispatcher.addEventListener(EventConst.BUY_MONTH_CARDS_SUCCESS,this.updateView,this),this._dispatcher.addEventListener(EventConst.UPDATE_ACT_VIEW6,this.updateView6,this),DeviceUtil.IsWeb&&!Config.soEasy&&!H5_360_Sdk.getInstance().config360||Config.U8Login&&App.global.userInfo.channelId==EnumChannel.C_DEFAULT?ProtocolGame2.instance().send_channel_offer(App.global.userInfo.channelId,new FunctionVO(this.onOfferBack,this)):this.updataData()},t.prototype.onOfferBack=function(e){ResponseUtil.checkResponseData(e)&&(e.data.images?(this._view.page7.show(e.data),this.updataData(7)):this.updataData())},t.prototype.updataData=function(e){void 0===e&&(e=-1),this._view.radioScroller.visible=!0;var t=App.data.game2Center.DataCenter.total_pay&&1==App.data.game2Center.DataCenter.total_pay.onoff,i=App.data.game2Center.DataCenter.month_cards&&1==App.data.game2Center.DataCenter.month_cards.onoff,n=null!=this._data&&(t||i);this.updateView(!n),-1==e&&this._view.radioBtn7.parent&&this._view.radioBtn7.parent.removeChild(this._view.radioBtn7),null!=this._data&&(-1!=e?this.switchPage(e):App.data.game2Center.DataCenter.total_pay&&1==App.data.game2Center.DataCenter.total_pay.onoff?this.switchPage(5):App.data.game2Center.DataCenter.month_cards&&1==App.data.game2Center.DataCenter.month_cards.onoff?this.switchPage(6):this.switchPage(this._data))},t.prototype.hide=function(){e.prototype.hide.call(this),this._view.page6.hide(),CommomBtn.removeClick(this._view.closeBtn,this.onCloseTouch,this)},t.prototype.updateView=function(e){void 0===e&&(e=!0),this._view.validateNow(),this._view.radioBtn0.red.visible=App.data.game2Center.DataCenter.login_reward==LoginRewardStatus.RedTip?!0:!1,this._view.radioBtn2.red.visible=!App.data.game2Center.DataCenter.first_gift,this._view.radioBtn3.red.visible=App.data.game2Center.DataCenter.isPower,this._view.radioBtn5.red.visible=1==App.data.game2Center.DataCenter.accumulative_recharge?!0:!1,App.data.game2Center.DataCenter.month_cards&&(this._view.radioBtn6.red.visible=1==App.data.game2Center.DataCenter.month_cards.month_cards||0==App.data.game2Center.DataCenter.month_cards.month_cards?!0:!1);var t;App.data.game2Center.DataCenter.login_reward==LoginRewardStatus.HideBtn&&(this._view.radioBtn0.parent&&this._view.radioBtn0.parent.removeChild(this._view.radioBtn0),t=!0),1==App.data.game2Center.DataCenter.first_gift&&(this._view.radioBtn2.parent&&this._view.radioBtn2.parent.removeChild(this._view.radioBtn2),t=!0),0==ClientConfig.inviteCode&&(this._view.radioBtn4.parent&&this._view.radioBtn4.parent.removeChild(this._view.radioBtn4),t=!0),(-1==App.data.game2Center.DataCenter.accumulative_recharge||0==App.data.game2Center.DataCenter.total_pay.onoff)&&(this._view.radioBtn5.parent&&this._view.radioBtn5.parent.removeChild(this._view.radioBtn5),t=!0),App.data.game2Center.DataCenter.total_pay&&1==App.data.game2Center.DataCenter.total_pay.onoff&&this._view.page5.updateView(),(!App.data.game2Center.DataCenter.month_cards||App.data.game2Center.DataCenter.month_cards&&0==App.data.game2Center.DataCenter.month_cards.onoff)&&(this._view.radioBtn6.parent&&this._view.radioBtn6.parent.removeChild(this._view.radioBtn6),t=!0),App.data.game2Center.DataCenter.month_cards&&1==App.data.game2Center.DataCenter.month_cards.onoff&&this._view.page6.updateView(),DeviceUtil.IsIos&&(t=!0),this._view.page0.updateView(),this._view.page1.updateView(),this._view.page2.updateView(),this._view.page3.updateView(),DeviceUtil.IsIos||this._view.page4.updateView(),e&&t&&this.switchFirstPage(),ScrollerCenter.hideVerticalScrollBar(this._view.radioScroller),App.dispatcher.dispatchEvent(EventConst.UPDATE_RED_TIP)},t.prototype.updateView6=function(){this.switchPage(6),this._view.radioBtn6.red.visible=1==App.data.game2Center.DataCenter.month_cards.month_cards||0==App.data.game2Center.DataCenter.month_cards.month_cards?!0:!1,this._view.page6.updateView()},t.prototype.onPageChange=function(e){App.sound.playSoundSwitchClient1(SoundManager.button);var t=e.target;this.switchPage(t.selectedValue)},t.prototype.switchPage=function(e){this.radioList[e].parent?(this._view.radioBtn0.group.selectedValue=e,this._view.viewStack.selectedIndex=e,this._view["page"+e].visible=!0,this._view["page"+e].show()):this.switchFirstPage()},t.prototype.switchFirstPage=function(){this._view.validateNow();for(var e=this.radioList.length,t=0;e>t;t++)if(this.radioList[t].parent){this.switchPage(t);break}},t.prototype.onCloseTouch=function(){this.closePanel(),App.dispatcher.dispatchEvent(EventConst.CHECK_UPGRADE)},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._view&&(this._view.page0.dispose(),this._view.page1.dispose(),this._view.page2.dispose(),this._view.page3.dispose(),this._view.page4.dispose(),this._view.page5.dispose(),this._view.page6.dispose(),this._view.page7.dispose(),this._view.dispose(),this._view=void 0),e.prototype.dispose.call(this)},t}(BasePanel);__reflect(ActPanel.prototype,"ActPanel");var BagsPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),this._view=new BagsPanelUI,this.addChild(this._view),this._view.giftGroup.removeChildren(),this.handY=this._view.backHand.y},t.prototype.dispose=function(){this.clearItems(),this._view&&(this._view.dispose(),this._view=void 0),e.prototype.dispose.call(this)},t.prototype.clearItems=function(){if(this._items)for(var e=0;e<this._items.length;e++)this._items[e]&&this._items[e].dispose(),this._items[e]=void 0;this._items=null},t.prototype.show=function(t){e.prototype.show.call(this,t),this.initView(),CommomBtn.btnClick(this._view.backBtn,this.closePanel,this,2),CommomBtn.btnClick(this._view.gotoShop,this.gotoTouch,this,1),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.yindaoTouch,this,this._view.yindaoTip),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.yindaoBackTouch,this,this._view.backCircle),this._dispatcher.addEventListener(EventConst.UPDATE_BAG_XIN,this.setXinText,this),this._dispatcher.addEventListener(EventConst.INIT_BAG,this.initView,this),this.setGuide()},t.prototype.hide=function(){e.prototype.hide.call(this),CommomBtn.removeClick(this._view.backBtn,this.closePanel,this),CommomBtn.removeClick(this._view.gotoShop,this.gotoTouch,this),App.dispatcher.dispatchEvent(G2_GameSceneEvent.SHOW_SCENE_ANIMATION)},t.prototype.initView=function(){var e=App.data.game2Center.DataCenter.Bags;GameLog.log("bags",e),e.length>0?this.showNothingGroup(!1):this.showNothingGroup(!0),this.clearItems(),this._items=[];for(var t=0;t<e.length;t++){var i=e[t],n=new BagsGroupItem;n.setImg(i.pic),n.setTypeText(i.cname),n.setToolsCount(i.count),n.show(i),this._view.giftGroup.addChild(n),this._items.push(n)}ScrollerCenter.hideVerticalScrollBar(this._view.giftScroller),this.setXinText(App.data.game2Center.DataCenter.UserInfo.hearts,App.data.game2Center.DataCenter.ConfigInfo.hearts)},t.prototype.showNothingGroup=function(e){e?this._view.nothingGroup.visible=!0:this._view.nothingGroup.visible=!1},t.prototype.setXinText=function(e,t){t&&""!=t&&this._view.heartPlugin.setJindu(e,t)},t.prototype.gotoTouch=function(){PanelOpenManager.openPanel(EnumPanelID.G2_ShopGiftToolPanel,0)},t.prototype.setGuide=function(){App.data.game2Center.DataCenter.bagGuide&&(this._view.yindaoTip.visible=!0)},t.prototype.yindaoTouch=function(){this._view.yindaoTip.visible=!1,this.setBackGuide()},t.prototype.setBackGuide=function(){this._view.yindaoBack.visible=!0,egret.Tween.get(this._view.backHand,{loop:!0}).set({y:this.handY}).to({y:this.handY+40},600).to({y:this.handY},800).wait(100)},t.prototype.yindaoBackTouch=function(){this._view.yindaoBack.visible=!1,App.data.game2Center.DataCenter.bagGuide=!1,this.closePanel()},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t}(BasePanel);__reflect(BagsPanel.prototype,"BagsPanel");var UseToolPanel=function(e){function t(){var t=e.call(this)||this;return t.count=1,t}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),this._view=new UseToolPanelUI,this.addChild(this._view)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._view&&(this._view.dispose(),this._view=null)},t.prototype.show=function(t){e.prototype.show.call(this,t),this.recData=t,this.count=1,this.count>=this.recData.count?this.showHuijia(!0):this.showHuijia(!1),this.showHuijian(!0),this.setCountLabel(this.count),this.setContentLabel(this.recData.des),this.setTitleLabel(this.recData.cname),this.setGiftImg(this.recData.pic),this.setMyCount(this.recData.count),this.setToolCanUse(),this._view.countGroup.visible=!0,"恋爱宝典"==this.recData.cname&&(this._view.countGroup.visible=!1),GameLog.log("transdata",this.recData),CommomBtn.btnClick(this._view.okBtn,this.okTouch,this,1),CommomBtn.btnClick(this._view.canelBtn,this.canelTouch,this,1),CommomBtn.btnClick(this._view.jianBtn,this.jianTouch,this,1),CommomBtn.btnClick(this._view.jiaBtn,this.jiaTouch,this,1),CommomBtn.btnClick(this._view.canelMidBtn,this.closePanel,this,1),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.jiaBtnTouchBegin,this,this._view.jiaBtn),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.jianBtnTouchBegin,this,this._view.jianBtn),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.bgTouch,this,this._view.bgImg),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this,App.stage)},t.prototype.hide=function(){e.prototype.hide.call(this),CommomBtn.removeClick(this._view.okBtn,this.okTouch,this),CommomBtn.removeClick(this._view.canelBtn,this.canelTouch,this),CommomBtn.removeClick(this._view.jianBtn,this.jianTouch,this),CommomBtn.removeClick(this._view.jiaBtn,this.jiaTouch,this),CommomBtn.removeClick(this._view.canelMidBtn,this.closePanel,this)},t.prototype.okTouch=function(){if(this.recData&&this.recData.id){var e={gid:0,count:0};e.gid=this.recData.id,e.count=this.count,ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.useTool,e,new FunctionVO(this.useBtnTouchBack,this))}},t.prototype.useBtnTouchBack=function(e){if(200==e.code){if(this.closePanel(),e.data.hearts-App.data.game2Center.DataCenter.UserInfo.hearts!=0&&TipsHeat.showHeat(e.data.hearts-App.data.game2Center.DataCenter.UserInfo.hearts),App.data.game2Center.DataCenter.UserInfo.diamond=e.data.diamond,App.data.game2Center.DataCenter.UserInfo.gold=e.data.gold,App.data.game2Center.DataCenter.UserInfo.hearts=e.data.hearts,App.data.game2Center.DataCenter.UserInfo.power=e.data.power,37==this.recData.id){var t=e.data.exps-App.data.game2Center.DataCenter.Work[0].exps;Notice.showBottomCenterMessage("增加"+t+"工作经验"),App.data.game2Center.DataCenter.Work[0].exps=e.data.exps}App.dispatcher.dispatchEvent(EventConst.UPDATE_BAG_XIN,App.data.game2Center.DataCenter.UserInfo.hearts,App.data.game2Center.DataCenter.ConfigInfo.hearts),App.dispatcher.dispatchEvent(EventConst.REQ_UPDATE_BAGS)}else Notice.showBottomCenterMessage(""+e.info)},t.prototype.canelTouch=function(){this.closePanel()},t.prototype.jiaTouch=function(){this.count+=1,this.showHuijian(!1),this.count>=this.recData.count?(this.count=this.recData.count,this.showHuijia(!0)):(this.showHuijia(!1),App.sound.playSoundSwitchClient1(SoundManager.number_add)),this.setCountLabel(this.count)},t.prototype.jianTouch=function(){this.showHuijia(!1),this.count>1?(this.count-=1,1==this.count?this.showHuijian(!0):this.showHuijian(!1),App.sound.playSoundSwitchClient1(SoundManager.number_reduce)):(this.count=1,this.showHuijian(!0)),this.setCountLabel(this.count)},t.prototype.jiaBtnTouchBegin=function(){var e=this;egret.Tween.get(this._view.jiaBtn,{loop:!0}).wait(250).call(function(){e.jiaTouch()
},this)},t.prototype.jianBtnTouchBegin=function(){var e=this;egret.Tween.get(this._view.jianBtn,{loop:!0}).wait(250).call(function(){e.jianTouch()},this)},t.prototype.onStageTouchEnd=function(){egret.Tween.removeTweens(this._view.jiaBtn),egret.Tween.removeTweens(this._view.jianBtn)},t.prototype.bgTouch=function(){this.closePanel()},t.prototype.setGiftImg=function(e){e&&""!=e&&(this._view.giftImg.source=e)},t.prototype.setContentLabel=function(e){""!=e&&(this._view.contentLabel.text=e)},t.prototype.setTitleLabel=function(e){""!=e&&(this._view.titleLabel.text=e)},t.prototype.setCountLabel=function(e){""!=e&&(this._view.countLabel.text=e)},t.prototype.showHuijia=function(e){e?this._view.nojiaBtn.visible=!0:this._view.nojiaBtn.visible=!1},t.prototype.showHuijian=function(e){e?this._view.nojianBtn.visible=!0:this._view.nojianBtn.visible=!1},t.prototype.setMyCount=function(e){""!=e&&(this._view.myCount.text=e)},t.prototype.setToolCanUse=function(){var e=this.recData.initiative;1==e?(this._view.okBtn.visible=!0,this._view.canelBtn.visible=!0,this._view.jiaBtn.visible=!0,this._view.jianBtn.visible=!0,this._view.canelMidBtn.visible=!1):(this._view.okBtn.visible=!1,this._view.canelBtn.visible=!1,this._view.jiaBtn.visible=!1,this._view.jianBtn.visible=!1,this._view.canelMidBtn.visible=!0,this._view.countLabel.text=this.recData.count+"",this._view.contentLabel.text+="（不能在背包中使用）",this._view.nojianBtn.visible=!1)},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t}(BasePanel);__reflect(UseToolPanel.prototype,"UseToolPanel");var LibaoCDPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.dispose=function(){this._view&&(this._view.dispose(),this._view=void 0),e.prototype.dispose.call(this)},t.prototype.init=function(){this._view=new LibaoCDUI,this.addChild(this._view)},t.prototype.show=function(t){e.prototype.show.call(this,t),CommomBtn.btnClick(this._view.buyBtn,this.buyBtnTouch,this,1),CommomBtn.btnClick(this._view.closeBtn,this.close,this,2)},t.prototype.hide=function(){e.prototype.hide.call(this),this.open_window=null,App.timer.clearTimer(this,this.onTimer),CommomBtn.removeClick(this._view.buyBtn,this.buyBtnTouch,this),CommomBtn.removeClick(this._view.closeBtn,this.close,this)},t.prototype.buyBtnTouch=function(){var e=App.data.game2Center.DataCenter.keybuy.wulengque;if(Config.U8Login)return void App.nativeBridge.sendU8PayOld("libao",e);if(Config.soEasy)return void platform.payOrder(App.data.game2Center.DataCenter.keybuy.wulengque.id);if(DeviceUtil.IsAndroid&&DeviceUtil.IsNative){var t=e["package"],i=e.price,n={name:t[0].cname,price:i+"元",desc:"解锁"+t[0].cname+"功能,加送"+t[1].num+t[1].cname};App.nativeBridge.sendAndroidPay(e.id,n)}else{var o={gid:0};o=AddSomeMsgUtils.addSomeMsgByGiftBuy(o),o.gid=App.data.game2Center.DataCenter.keybuy.wulengque.id;var a=window.channel;a&&(o.channel=a),MilletSDK.getInstance().millet&&(o.channel="xiaomi"),H5_Vivo_SDK.getInstance().vivoData&&(o.channel="vivo"),DeviceUtil.IsWeb&&(H5_360_Sdk.getInstance().config360&&0!=H5_360_Sdk.getInstance().config360.time?o.channel="360":o.channel="web_alipay"),!DeviceUtil.IsWeb||Config.soEasy||H5_360_Sdk.getInstance().config360||(this.open_window=WebParams.openWindow(WebParams.defaultURL)),ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.giftBuy,o,new FunctionVO(this.buyBack,this))}},t.prototype.buyBack=function(e){if(200==e.code){if(this.close(),DeviceUtil.IsWeb){if(this.order_id=e.data.order_id,H5_360_Sdk.getInstance().config360&&0!=H5_360_Sdk.getInstance().config360.time)H5_360_Sdk.getInstance().pay360Param=e.data.params,H5_360_Sdk.getInstance().order_id=e.data.order_id,H5_360_Sdk.getInstance().paySdk(),GameLog.log("360支付订单号"+this.order_id);else{var t=e.data.aliparams,i=App.data.game2Center.DataCenter.setSelect(t);WebParams.openWindow("/shop/web/switch/?url="+i,this.open_window)}return void this.getBuy()}DeviceUtil.IsNative&&DeviceUtil.IsIos&&"rmb"==App.data.game2Center.DataCenter.keybuy.wulengque.coin_type?App.nativeBridge.sendIOSPay(e.data.order_id,e.data.product_id):"rmb"==App.data.game2Center.DataCenter.keybuy.wulengque.coin_type?App.nativeBridge.sendPay(e):"diamond"==App.data.game2Center.DataCenter.keybuy.wulengque.coin_type&&(Notice.showBottomCenterMessage("购买成功"),App.data.game2Center.DataCenter.keybuy.wulengque.hasbuy=!0)}else 981==e.code?App.nativeBridge.sendPay(e):Notice.showBottomCenterMessage(""+e.info)},t.prototype.close=function(){this.closePanel()},t.prototype.getBuy=function(){ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.payStatusH5,{order_id:this.order_id},new FunctionVO(this.payBack,this))},t.prototype.payBack=function(e){200==e.code?(Notice.showBottomCenterMessage("支付成功"),App.dispatcher.dispatchEvent(EventConst.REQ_GAME_INFO),App.data.game2Center.LoadingLock.unlock()):(this.t=0,this._needSendBuy=!0,App.timer.clearTimer(this,this.onTimer),App.timer.doTimeLoop(this,3e3,this.onTimer))},t.prototype.onTimer=function(){return this.t+=3,this.t>=600?(GameLog.log("-------------10分钟内支付失败"),void App.timer.clearTimer(this,this.onTimer)):void(this._needSendBuy&&(this._needSendBuy=!1,ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.payStatusH5,{order_id:this.order_id},new FunctionVO(this.onPaySuccess,this,!0))))},t.prototype.onPaySuccess=function(e){200==e.code?(Notice.showBottomCenterMessage("支付成功"),App.dispatcher.dispatchEvent(EventConst.REQ_GAME_INFO),App.timer.clearTimer(this,this.onTimer),App.data.game2Center.LoadingLock.unlock()):(GameLog.log("-------------未支付，继续检测----------"),this._needSendBuy=!0)},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t}(BasePanel);__reflect(LibaoCDPanel.prototype,"LibaoCDPanel");var LibaoFinishPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.dispose=function(){this._view&&(this._view.dispose(),this._view=void 0),e.prototype.dispose.call(this)},t.prototype.init=function(){this._view=new LibaoFinishUI,this.addChild(this._view)},t.prototype.show=function(t){e.prototype.show.call(this,t),CommomBtn.btnClick(this._view.buyBtn,this.buyBtnTouch,this,1),CommomBtn.btnClick(this._view.closeBtn,this.close,this,2)},t.prototype.hide=function(){e.prototype.hide.call(this),this.open_window=null,App.timer.clearTimer(this,this.onTimer),CommomBtn.removeClick(this._view.buyBtn,this.buyBtnTouch,this),CommomBtn.removeClick(this._view.closeBtn,this.close,this)},t.prototype.buyBtnTouch=function(){var e=App.data.game2Center.DataCenter.keybuy.yijian;if(Config.U8Login)return void App.nativeBridge.sendU8PayOld("libao",e);if(Config.soEasy)return void platform.payOrder(App.data.game2Center.DataCenter.keybuy.yijian.id);if(DeviceUtil.IsAndroid&&DeviceUtil.IsNative){var t=e["package"],i=e.price,n={name:t[0].cname,price:i+"元",desc:"解锁"+t[0].cname+"功能,加送"+t[1].num+t[1].cname};App.nativeBridge.sendAndroidPay(e.id,n)}else{var o={gid:0};o=AddSomeMsgUtils.addSomeMsgByGiftBuy(o),o.gid=App.data.game2Center.DataCenter.keybuy.yijian.id;var a=window.channel;a&&(o.channel=a),MilletSDK.getInstance().millet&&(o.channel="xiaomi"),H5_Vivo_SDK.getInstance().vivoData&&(o.channel="vivo"),DeviceUtil.IsWeb&&(H5_360_Sdk.getInstance().config360&&0!=H5_360_Sdk.getInstance().config360.time?o.channel="360":o.channel="web_alipay"),!DeviceUtil.IsWeb||Config.soEasy||H5_360_Sdk.getInstance().config360||(this.open_window=WebParams.openWindow(WebParams.defaultURL)),ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.giftBuy,o,new FunctionVO(this.buyBack,this))}},t.prototype.buyBack=function(e){if(200==e.code){if(this.close(),DeviceUtil.IsWeb){if(this.order_id=e.data.order_id,H5_360_Sdk.getInstance().config360&&0!=H5_360_Sdk.getInstance().config360.time)H5_360_Sdk.getInstance().pay360Param=e.data.params,H5_360_Sdk.getInstance().order_id=e.data.order_id,H5_360_Sdk.getInstance().paySdk(),GameLog.log("360支付订单号"+this.order_id);else{var t=e.data.aliparams,i=App.data.game2Center.DataCenter.setSelect(t);WebParams.openWindow("/shop/web/switch/?url="+i,this.open_window)}return void this.getBuy()}DeviceUtil.IsNative&&DeviceUtil.IsIos&&"rmb"==App.data.game2Center.DataCenter.keybuy.yijian.coin_type?App.nativeBridge.sendIOSPay(e.data.order_id,e.data.product_id):"rmb"==App.data.game2Center.DataCenter.keybuy.yijian.coin_type?App.nativeBridge.sendPay(e):"diamond"==App.data.game2Center.DataCenter.keybuy.yijian.coin_type&&(Notice.showBottomCenterMessage("购买成功"),App.data.game2Center.DataCenter.keybuy.yijian.hasbuy=!0)}else 981==e.code?App.nativeBridge.sendPay(e):Notice.showBottomCenterMessage(""+e.info)},t.prototype.close=function(){this.closePanel()},t.prototype.getBuy=function(){ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.payStatusH5,{order_id:this.order_id},new FunctionVO(this.payBack,this))},t.prototype.payBack=function(e){200==e.code?(Notice.showBottomCenterMessage("支付成功"),App.dispatcher.dispatchEvent(EventConst.REQ_GAME_INFO),App.data.game2Center.LoadingLock.unlock()):(this.t=0,this._needSendBuy=!0,App.timer.clearTimer(this,this.onTimer),App.timer.doTimeLoop(this,3e3,this.onTimer))},t.prototype.onTimer=function(){return this.t+=3,this.t>=600?(GameLog.log("-------------10分钟内支付失败"),void App.timer.clearTimer(this,this.onTimer)):void(this._needSendBuy&&(this._needSendBuy=!1,ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.payStatusH5,{order_id:this.order_id},new FunctionVO(this.onPaySuccess,this,!0))))},t.prototype.onPaySuccess=function(e){200==e.code?(Notice.showBottomCenterMessage("支付成功"),App.dispatcher.dispatchEvent(EventConst.REQ_GAME_INFO),App.timer.clearTimer(this,this.onTimer),App.data.game2Center.LoadingLock.unlock()):(GameLog.log("-------------未支付，继续检测----------"),this._needSendBuy=!0)},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t}(BasePanel);__reflect(LibaoFinishPanel.prototype,"LibaoFinishPanel");var LibaomiaohuiPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.dispose=function(){this._view&&(this._view.dispose(),this._view=void 0),e.prototype.dispose.call(this)},t.prototype.init=function(){e.prototype.init.call(this),this._view=new LibaomiaohuiPanelUI,this.addChild(this._view)},t.prototype.show=function(t){e.prototype.show.call(this,t),CommomBtn.btnClick(this._view.buyBtn,this.buyBtnTouch,this,1),CommomBtn.btnClick(this._view.closeBtn,this.closePanel,this,2)},t.prototype.hide=function(){e.prototype.hide.call(this),this.open_window=null,App.timer.clearTimer(this,this.onTimer),CommomBtn.removeClick(this._view.buyBtn,this.buyBtnTouch,this),CommomBtn.removeClick(this._view.closeBtn,this.closePanel,this)},t.prototype.buyBtnTouch=function(){GameLog.log("keybuy",App.data.game2Center.DataCenter.keybuy);var e=App.data.game2Center.DataCenter.keybuy.miaohui;if(Config.U8Login)return void App.nativeBridge.sendU8PayOld("libao",e);if(Config.soEasy)return void platform.payOrder(App.data.game2Center.DataCenter.keybuy.miaohui.id);if(DeviceUtil.IsAndroid&&DeviceUtil.IsNative){var t=e["package"],i=e.price,n={name:t[0].cname,price:i+"元",desc:"解锁"+t[0].cname+"功能,加送"+t[1].num+t[1].cname};App.nativeBridge.sendAndroidPay(e.id,n)}else{var o={gid:0};o=AddSomeMsgUtils.addSomeMsgByGiftBuy(o),o.gid=App.data.game2Center.DataCenter.keybuy.miaohui.id;var a=window.channel;a&&(o.channel=a),MilletSDK.getInstance().millet&&(o.channel="xiaomi"),H5_Vivo_SDK.getInstance().vivoData&&(o.channel="vivo"),DeviceUtil.IsWeb&&(H5_360_Sdk.getInstance().config360&&0!=H5_360_Sdk.getInstance().config360.time?o.channel="360":o.channel="web_alipay"),!DeviceUtil.IsWeb||Config.soEasy||H5_360_Sdk.getInstance().config360||(this.open_window=WebParams.openWindow(WebParams.defaultURL)),ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.giftBuy,o,new FunctionVO(this.buyBack,this))}},t.prototype.buyBack=function(e){if(200==e.code){if(DeviceUtil.IsWeb){if(this.order_id=e.data.order_id,H5_360_Sdk.getInstance().config360&&0!=H5_360_Sdk.getInstance().config360.time)H5_360_Sdk.getInstance().pay360Param=e.data.params,H5_360_Sdk.getInstance().order_id=e.data.order_id,H5_360_Sdk.getInstance().paySdk(),GameLog.log("360支付订单号"+this.order_id);else{var t=e.data.aliparams,i=App.data.game2Center.DataCenter.setSelect(t);WebParams.openWindow("/shop/web/switch/?url="+i,this.open_window)}return void this.getBuy()}DeviceUtil.IsNative&&DeviceUtil.IsIos&&"rmb"==App.data.game2Center.DataCenter.keybuy.miaohui.coin_type?App.nativeBridge.sendIOSPay(e.data.order_id,e.data.product_id):"rmb"==App.data.game2Center.DataCenter.keybuy.miaohui.coin_type?App.nativeBridge.sendPay(e):"diamond"==App.data.game2Center.DataCenter.keybuy.miaohui.coin_type&&(Notice.showBottomCenterMessage("购买成功"),App.data.game2Center.DataCenter.keybuy.miaohui.hasbuy=!0),this.closePanel()}else 981==e.code?App.nativeBridge.sendPay(e):Notice.showBottomCenterMessage(""+e.info)},t.prototype.getBuy=function(){ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.payStatusH5,{order_id:this.order_id},new FunctionVO(this.payBack,this))},t.prototype.payBack=function(e){200==e.code?(Notice.showBottomCenterMessage("支付成功"),App.dispatcher.dispatchEvent(EventConst.REQ_GAME_INFO),App.data.game2Center.LoadingLock.unlock()):(this.t=0,this._needSendBuy=!0,App.timer.clearTimer(this,this.onTimer),App.timer.doTimeLoop(this,3e3,this.onTimer))},t.prototype.onTimer=function(){return this.t+=3,this.t>=600?(GameLog.log("-------------10分钟内支付失败"),void App.timer.clearTimer(this,this.onTimer)):void(this._needSendBuy&&(this._needSendBuy=!1,ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.payStatusH5,{order_id:this.order_id},new FunctionVO(this.onPaySuccess,this,!0))))},t.prototype.onPaySuccess=function(e){200==e.code?(Notice.showBottomCenterMessage("支付成功"),App.dispatcher.dispatchEvent(EventConst.REQ_GAME_INFO),App.timer.clearTimer(this,this.onTimer),App.data.game2Center.LoadingLock.unlock()):(GameLog.log("-------------未支付，继续检测----------"),this._needSendBuy=!0)},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t}(BasePanel);__reflect(LibaomiaohuiPanel.prototype,"LibaomiaohuiPanel");var LibaoVideoPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.dispose=function(){this._view&&(this._view.dispose(),this._view=void 0),e.prototype.dispose.call(this)},t.prototype.init=function(){this._view=new LibaoVideoPanelUI,this.addChild(this._view)},t.prototype.show=function(t){e.prototype.show.call(this,t),CommomBtn.btnClick(this._view.buyBtn,this.buyBtnTouch,this,1),CommomBtn.btnClick(this._view.closeBtn,this.close,this,2)},t.prototype.hide=function(){e.prototype.hide.call(this),this.open_window=null,App.timer.clearTimer(this,this.onTimer),CommomBtn.removeClick(this._view.buyBtn,this.buyBtnTouch,this),CommomBtn.removeClick(this._view.closeBtn,this.close,this)},t.prototype.buyBtnTouch=function(){var e={gid:0};e=AddSomeMsgUtils.addSomeMsgByGiftBuy(e),e.gid=App.data.game2Center.DataCenter.keybuy.shiping.id;var t=window.channel;t&&(e.channel=t),MilletSDK.getInstance().millet&&(e.channel="xiaomi"),H5_Vivo_SDK.getInstance().vivoData&&(e.channel="vivo"),DeviceUtil.IsWeb&&(H5_360_Sdk.getInstance().config360&&0!=H5_360_Sdk.getInstance().config360.time?e.channel="360":e.channel="web_alipay"),!DeviceUtil.IsWeb||Config.soEasy||H5_360_Sdk.getInstance().config360||(this.open_window=WebParams.openWindow(WebParams.defaultURL)),ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.giftBuy,e,new FunctionVO(this.buyBack,this))},t.prototype.buyBack=function(e){if(200==e.code){if(this.close(),DeviceUtil.IsWeb){if(this.order_id=e.data.order_id,H5_360_Sdk.getInstance().config360&&0!=H5_360_Sdk.getInstance().config360.time)H5_360_Sdk.getInstance().pay360Param=e.data.params,H5_360_Sdk.getInstance().order_id=e.data.order_id,H5_360_Sdk.getInstance().paySdk(),GameLog.log("360支付订单号"+this.order_id);else{var t=e.data.aliparams,i=App.data.game2Center.DataCenter.setSelect(t);WebParams.openWindow("/shop/web/switch/?url="+i,this.open_window)}return void this.getBuy()}DeviceUtil.IsNative&&DeviceUtil.IsIos&&"rmb"==App.data.game2Center.DataCenter.keybuy.shiping.coin_type?App.nativeBridge.sendIOSPay(e.data.order_id,e.data.product_id):"rmb"==App.data.game2Center.DataCenter.keybuy.shiping.coin_type?App.nativeBridge.sendPay(e):"diamond"==App.data.game2Center.DataCenter.keybuy.shiping.coin_type&&(Notice.showBottomCenterMessage("购买成功"),App.data.game2Center.DataCenter.keybuy.shiping.hasbuy=!0,this.reqVideoList())}else 981==e.code?App.nativeBridge.sendPay(e):Notice.showBottomCenterMessage(""+e.info)},t.prototype.close=function(){this.closePanel()},t.prototype.reqVideoList=function(){ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.videoList,{},new FunctionVO(this.revVideoList,this))},t.prototype.revVideoList=function(e){200==e.code?(App.data.game2Center.DataCenter.Video.mem=e.data.mem,App.data.game2Center.DataCenter.Video.fav=e.data.fav,App.dispatcher.dispatchEvent(EventConst.UPDATE_LIBAO)):Notice.showBottomCenterMessage(e.info)},t.prototype.getBuy=function(){ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.payStatusH5,{order_id:this.order_id},new FunctionVO(this.payBack,this))},t.prototype.payBack=function(e){200==e.code?(Notice.showBottomCenterMessage("支付成功"),App.dispatcher.dispatchEvent(EventConst.REQ_GAME_INFO),App.data.game2Center.LoadingLock.unlock()):(this.t=0,this._needSendBuy=!0,App.timer.clearTimer(this,this.onTimer),App.timer.doTimeLoop(this,3e3,this.onTimer))},t.prototype.onTimer=function(){return this.t+=3,this.t>=600?(GameLog.log("-------------10分钟内支付失败"),void App.timer.clearTimer(this,this.onTimer)):void(this._needSendBuy&&(this._needSendBuy=!1,ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.payStatusH5,{order_id:this.order_id},new FunctionVO(this.onPaySuccess,this,!0))))},t.prototype.onPaySuccess=function(e){200==e.code?(Notice.showBottomCenterMessage("支付成功"),App.dispatcher.dispatchEvent(EventConst.REQ_GAME_INFO),App.timer.clearTimer(this,this.onTimer),App.data.game2Center.LoadingLock.unlock()):(GameLog.log("-------------未支付，继续检测----------"),this._needSendBuy=!0)},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t}(BasePanel);__reflect(LibaoVideoPanel.prototype,"LibaoVideoPanel");var FinishLovePanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this._view=new FinishLovePanelUI,this.addChild(this._view)},t.prototype.show=function(t){e.prototype.show.call(this,t),t&&this.setLabel(t),CommomBtn.btnClick(this._view.okBtn,this.okBtnTouch,this,1)},t.prototype.hide=function(){e.prototype.hide.call(this),CommomBtn.removeClick(this._view.okBtn,this.okBtnTouch,this)},t.prototype.setLabel=function(e){this._view.xinLabel.text=""+e},t.prototype.okBtnTouch=function(){this.closePanel()},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._view&&(this._view.dispose(),this._view=void 0),e.prototype.dispose.call(this)},t}(BasePanel);__reflect(FinishLovePanel.prototype,"FinishLovePanel");var LovePanel=function(e){function t(){var t=e.call(this)||this;return t.inited=!1,t}return __extends(t,e),t.prototype.init=function(){this._view=new LovePanelUI,this.addChild(this._view),this._view.itemGroup.removeChildren(),this.handX=this._view.loveHand.x,this.handY=this._view.loveHand0.y,this.handBY=this._view.backHand.y,this.inited=!0},t.prototype.show=function(t){e.prototype.show.call(this,t),this.setConfig(),this._dispatcher.addEventListener(EventConst.WaitTime,this.waitLisenter,this),this._dispatcher.addEventListener(EventConst.UPDATE_SIWEI,this.updateSiwei,this),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goldGroupTouch,this,this._view.goldGroup),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.powerGroupTouch,this,this._view.powerGroup),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.guideTouch,this,this._view.yd_loveImg0),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.guideBack,this,this._view.backCircle),CommomBtn.btnClick(this._view.backBtn,this.close,this,2),CommomBtn.btnClick(this._view.startBtn,this.startTouch,this,1),this.setGuide(),this.addItem()},t.prototype.reqLoves=function(){ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.loves,{},new FunctionVO(this.revLoves,this))},t.prototype.revLoves=function(e){if(200==e.code){var t=e.data;App.data.game2Center.DataCenter.Love=t,this.addItem()}},t.prototype.hide=function(){e.prototype.hide.call(this),this.clearItems(),CommomBtn.removeClick(this._view.backBtn,this.close,this),CommomBtn.removeClick(this._view.startBtn,this.startTouch,this),App.dispatcher.dispatchEvent(G2_GameSceneEvent.SHOW_SCENE_ANIMATION)},t.prototype.updateSiwei=function(){this.setConfig()},t.prototype.waitLisenter=function(e){this.setTimeGuide(),GameLog.log("wait",e);var t=e.lid,i=e.data;if(t>=0)if(0==i.cd)this._items[t-1]&&this._items[t-1].showCD(!1);else{for(var n=App.data.game2Center.DataCenter.Love,o=0;o<n.length;o++)if(t==n[o].lid){this._items[o]&&(this._items[o].showCD(!0),this._items[o].setTimeText(n[o].cd,n[o].wait,n[o].endTime));break}GameLog.log(i.power)}},t.prototype.clearItems=function(){if(this._items)for(var e=0;e<this._items.length;e++)this._items[e]&&this._items[e].dispose(),this._items[e]=void 0;this._items=null},t.prototype.addItem=function(){this.clearItems(),this._items=[];for(var e=App.data.game2Center.DataCenter.Love,t=0;t<e.length;t++){var i=e[t],n=new LoveBox;this._items.push(n),n.setData(i,t),this._view.itemGroup.addChild(n)}this.jiesuoItem()},t.prototype.refreshData=function(e){if(e)for(var t=0;t<e.length;t++){var i=e[t].cd,n=e[t].wait,o=e[t].endTime,a=this._items[t];0==i?a.showCD(!1):(a.showCD(!0),a.setTimeText(i,n,o))}},t.prototype.startTouch=function(){ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.guideDone,{},new FunctionVO(this.finishGuideBack,this))},t.prototype.finishGuideBack=function(e){if(200==e.code){this._view.yindaoGroup.visible=!1,egret.Tween.removeTweens(this._view.loveHand),App.data.game2Center.DataCenter.loveGuide=!1,this.timeGuideFlag=!0,App.data.game2Center.DataCenter.guide.fill_nick_name=e.data.fill_nick_name,App.data.game2Center.DataCenter.guide.emph_zone=e.data.emph_zone,App.data.game2Center.DataCenter.guide.video=e.data.video;var t=ProtocolHttp.loveStart;t.lid=App.data.game2Center.DataCenter.Love[0].lid,ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.loveStart,t,new FunctionVO(this.sendBack,this))}else Notice.showBottomCenterMessage(""+e.info)},t.prototype.sendBack=function(e){200==e.code?App.data.game2Center.DataCenter.Love[0]&&App.data.game2Center.DataCenter.Love[0].duration?PanelOpenManager.openPanel(EnumPanelID.G2_LoveProPanel,App.data.game2Center.DataCenter.Love[0]):Notice.showBottomCenterMessage("数据错误"):Notice.showBottomCenterMessage(""+e.info)},t.prototype.jiesuoItem=function(){for(var e=App.data.game2Center.DataCenter.Love,t=0;t<e.length;t++){var i=this._items[t];App.data.game2Center.DataCenter.UserInfo.days>=e[t].available_days?i&&i.showBtn(!0):(i&&i.showBtn(!1),i&&i.setKaifangText(e[t].available_days))}ScrollerCenter.hideVerticalScrollBar(this._view.loveBoxScroller)},t.prototype.close=function(){this.closePanel()},t.prototype.setConfig=function(){this.setPowerText(App.data.game2Center.DataCenter.UserInfo.power),this.setGoldText(App.data.game2Center.DataCenter.UserInfo.gold),this.setXinText(App.data.game2Center.DataCenter.UserInfo.hearts,App.data.game2Center.DataCenter.ConfigInfo.hearts)},t.prototype.setXinText=function(e,t){t&&""!=t&&this._view.heartPlugin.setJindu(e,t)},t.prototype.setGoldText=function(e){this._view.goldLabel.text=e},t.prototype.setPowerText=function(e){this._view.powerLabel.text=e+"/100"},t.prototype.goldGroupTouch=function(){PanelOpenManager.openPanel(EnumPanelID.G2_ShopGoldPanel)},t.prototype.powerGroupTouch=function(){PanelOpenManager.openPanel(EnumPanelID.G2_ShopGiftToolPanel,1)},t.prototype.setGuide=function(){App.data.game2Center.DataCenter.loveGuide&&(this._view.yindaoGroup.visible=!0,egret.Tween.get(this._view.loveHand,{loop:!0}).set({x:this.handX}).to({x:this.handX+40},600).to({x:this.handX},800).wait(100))},t.prototype.setTimeGuide=function(){this.timeGuideFlag&&(this._view.yindaoGroup0.visible=!0,egret.Tween.get(this._view.loveHand0,{loop:!0}).set({y:this.handY}).to({y:this.handY-40},600).to({y:this.handY},800).wait(100))},t.prototype.guideTouch=function(){this._view.yindaoGroup0.visible=!1,this.setBackGuide()},t.prototype.setBackGuide=function(){this._view.yindaoBack.visible=!0,egret.Tween.get(this._view.backHand,{loop:!0}).set({y:this.handBY}).to({y:this.handBY+40},600).to({y:this.handBY},800).wait(100)},t.prototype.guideBack=function(){this._view.yindaoBack.visible=!1,this.timeGuideFlag=!1,App.data.game2Center.DataCenter.bagGuide=!0,this.close()},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._view&&(this._view.dispose(),this._view=void 0),e.prototype.dispose.call(this)},t}(BasePanel);__reflect(LovePanel.prototype,"LovePanel");var LoveProPanel=function(e){function t(){var t=e.call(this)||this;return t.count=1,t.proInitW=60,t}return __extends(t,e),t.prototype.init=function(){this._view=new LoveProPanelUI,this.addChild(this._view)},t.prototype.show=function(t){e.prototype.show.call(this,t),this.recData=t,this._view.proImg.width=this.proInitW,this._view.ProLabel.text="0%",App.data.game2Center.SoundManager.stopBGM(),App.sound.stopSoundSwitchClient1(this._currentSoundKey),this.recData&&this.recData.title&&App.timer.doTimeOnce(this,500,this.playMusicTitle),this.recData&&this.recData.pic&&this.setImgType(this.recData.pic),this.recData&&this.recData.title&&(this._view.typeLabel.text=this.recData.title),CommomBtn.btnClick(this._view.backBtn,this.close,this,2),CommomBtn.btnClick(this._view.finishBtn,this.finishTouch,this,1),this.showLoveTip(),this.hideCDImg(),this.showCDImg(),this.countDown(10*this.recData.duration,100)},t.prototype.hide=function(){e.prototype.hide.call(this),CommomBtn.removeClick(this._view.backBtn,this.close,this),CommomBtn.removeClick(this._view.finishBtn,this.finishTouch,this),this.hideCDImg(),this.removeTimer(),this._view.proImg.width=this.proInitW,this._view.ProLabel.text="0%",App.data.game2Center.SoundManager.playBGM(SoundManager.bgm)},t.prototype.playMusicTitle=function(){App.timer.clearTimer(this,this.playMusicTitle),this.playMusic(this.recData.title)},t.prototype.countDown=function(e,t){this.count=1;var i=parseInt(e),n=parseInt(t);i&&n&&App.timer.doTimeLoop(this,i,this.showProbar,[n])},t.prototype.showProbar=function(e){this.jindu(this.count),this.count==e&&this.timerComFunc(),this.count++},t.prototype.timerComFunc=function(){this.removeTimer(),this.finish(),App.data.game2Center.SoundManager.playBGM(SoundManager.bgm)},t.prototype.finish=function(){var e=this.recData,t=ProtocolHttp.loveFinish;t.lid=e.lid,ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.loveFinish,t,new FunctionVO(this.loveFinish,this))},t.prototype.loveFinish=function(e){if(200==e.code){App.sound.playSoundSwitchClient1(SoundManager.love_done),GameLog.log(e.data);var t=new Object;t.lid=this.recData.lid,t.data=e.data,App.data.game2Center.DataCenter.UserInfo.updateLoveData(t),App.dispatcher.dispatchEvent(EventConst.WaitTime,t);var i="获得"+e.data.hearts+"心动值";PanelOpenManager.openPanel(EnumPanelID.G2_FinishLovePanel,i);var n=e.data.hearts;TipsHeat.showHeat(n);var o=App.data.game2Center.DataCenter.UserInfo.hearts;App.data.game2Center.DataCenter.UserInfo.hearts=o+n,this.close(),App.data.game2Center.DataCenter.UserInfo.power=e.data.power,App.dispatcher.dispatchEvent(EventConst.UPDATE_SIWEI),e.data.extra_lost&&Alert.show2(e.data.extra_lost.des,"确定",null)}},t.prototype.jindu=function(e){e&&(this._view.ProLabel.text=e+"%",this._view.proImg.width=this.proInitW+e*(this._view.probg.width-this.proInitW)/100)},t.prototype.removeTimer=function(){App.timer.clearTimer(this,this.showProbar),this.count=1,App.sound.stopSoundSwitchClient1(this._currentSoundKey)},t.prototype.close=function(){this.closePanel()},t.prototype.finishTouch=function(){this.finishNow()},t.prototype.finishNow=function(){var e=this.recData,t=ProtocolHttp.loveFinish;t.lid=e.lid,ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.loveFinishNow,t,new FunctionVO(this.loveFinishNowBack,this))},t.prototype.loveFinishNowBack=function(e){if(200==e.code){App.sound.playSoundSwitchClient1(SoundManager.love_done),this.close(),GameLog.log(e.data);var t=new Object;t.lid=this.recData.lid,t.data=e.data,App.data.game2Center.DataCenter.UserInfo.updateLoveData(t),App.dispatcher.dispatchEvent(EventConst.WaitTime,t);var i="获得"+e.data.hearts+"心动值";PanelOpenManager.openPanel(EnumPanelID.G2_FinishLovePanel,i);var n=e.data.hearts;TipsHeat.showHeat(n);var o=App.data.game2Center.DataCenter.UserInfo.hearts;App.data.game2Center.DataCenter.UserInfo.hearts=o+n,App.data.game2Center.DataCenter.UserInfo.power=e.data.power,App.dispatcher.dispatchEvent(EventConst.UPDATE_SIWEI),e.data.extra_lost&&Alert.show2(e.data.extra_lost.des,"确定",null)}else Notice.showBottomCenterMessage(""+e.info),PanelOpenManager.openPanel(EnumPanelID.G2_LibaoFinishPanel)},t.prototype.setTextType=function(e){e&&""!=e&&(this._view.typeLabel.text=e)},t.prototype.setImgType=function(e){e&&""!=e&&(this._view.TypeImg.source=e)},t.prototype.setType=function(){},t.prototype.outAnimation=function(e){void 0===e&&(e=null)},t.prototype.enterAnimation=function(){},t.prototype.playMusic=function(e){switch(e){case"泡图书馆":this._currentSoundKey=SoundManager.library;break;case"约吃饭":this._currentSoundKey=SoundManager.canteen;break;case"看电影":this._currentSoundKey=SoundManager.canteen;break;case"逛街":this._currentSoundKey=SoundManager.canteen;break;case"唱歌":this._currentSoundKey=SoundManager.shopping;break;case"游公园":this._currentSoundKey=SoundManager.park;break;case"做运动":this._currentSoundKey=SoundManager.gym;break;case"逗猫":this._currentSoundKey=SoundManager.cat;break;case"游乐园":this._currentSoundKey=SoundManager.carnie;break;default:this._currentSoundKey=SoundManager.time_click}App.sound.playSoundSwitchClient1(this._currentSoundKey,!0)},t.prototype.showLoveTip=function(){if(null==this.tipJson&&(this.tipJson=RES.getRes("lovetips_json")),null!=this.tipJson){var e=this.tipJson.tips,t=e.length;this._view.tipLabel.text=e[NumberTool.getRandInt(0,t-1)]}},t.prototype.showCDImg=function(){0==App.data.game2Center.DataCenter.keybuy.yijian.hasbuy&&(this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.hideCDImg,this),this._view.cdBtn.visible=!0,this._view.cdBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCDBtnTouch,this))},t.prototype.hideCDImg=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.hideCDImg,this),this._view.cdBtn.visible=!1,this._view.cdBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onCDBtnTouch,this)},t.prototype.onCDBtnTouch=function(e){this.hideCDImg(),this.showLiBao()},t.prototype.showLiBao=function(){0==App.data.game2Center.DataCenter.keybuy.yijian.hasbuy&&PanelOpenManager.openPanel(EnumPanelID.G2_LibaoFinishPanel)},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height
},enumerable:!0,configurable:!0}),t}(BasePanel);__reflect(LoveProPanel.prototype,"LoveProPanel");var NoticeDialogPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this._view=new NoticeDialogPanelUI,this.addChild(this._view),this.radioList=[this._view.radioBtn0,this._view.radioBtn1,this._view.radioBtn2],this._view.gameContent.text="",this._view.systemLabel.text=""},t.prototype.show=function(e){if(this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.qqTouch,this,this._view.QQgift),this._dispatcher.addEventListener(eui.UIEvent.CHANGE,this.onPageChange,this,this._view.radioBtn0.group),CommomBtn.btnClick(this._view.closeBtn,this.onCloseTouch,this),this._view.gameContent.text=e.data.game.content,this._view.systemLabel.text=e.data.system.content,Config.soEasy&&SoEasySdk.shieldChannel())this._view.radioBtn2.visible=!1,this._view.radioBtn0.selected=!0,this._view.viewStack.selectedIndex=0,this._view.radioBtn0.group.selectedValue=0;else{this._view.radioBtn2.visible=!0,this.switchPage(2);for(var t=0;t<this._view.radioGrp.numChildren;t++){var i=this._view.radioGrp.getElementAt(t);2==t?i.selected=!0:i.selected=!1}}},t.prototype.qqTouch=function(e){if(DeviceUtil.IsNative){var t={key:App.data.game2Center.DataCenter.shareContent.key,group:App.data.game2Center.DataCenter.shareContent.group};App.nativeBridge.pushQQGroup("pushQQGroup",t)}else window.open("https://jq.qq.com/?_wv=1027&k=5DC9mi9")},t.prototype.onPageChange=function(e){App.sound.playSoundSwitchClient1(SoundManager.button);var t=e.target;this.switchPage(t.selectedValue)},t.prototype.switchPage=function(e){this.radioList[e].parent?(this._view.radioBtn0.group.selectedValue=e,this._view.viewStack.selectedIndex=e):this.switchFirstPage()},t.prototype.switchFirstPage=function(){this._view.validateNow();for(var e=this.radioList.length,t=0;e>t;t++)if(this.radioList[t].parent){this.switchPage(t);break}},t.prototype.hide=function(){e.prototype.hide.call(this),CommomBtn.removeClick(this._view.closeBtn,this.onCloseTouch,this)},t.prototype.onCloseTouch=function(){this.closePanel()},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._view&&(this._view.dispose(),this._view=void 0),e.prototype.dispose.call(this)},t}(BasePanel);__reflect(NoticeDialogPanel.prototype,"NoticeDialogPanel");var CallHistoryPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),this._view=new CallHistoryPanelUI,this.addChild(this._view)},t.prototype.show=function(t){e.prototype.show.call(this,t),this.recData=t,this._view.grilImg.mask=this._view.maskImg,App.data.game2Center.DataCenter.Tel&&(this._view.grilImg.source=App.data.game2Center.DataCenter.Tel.head),CommomBtn.btnClick(this._view.backBtn,this.close,this,2),this.setData()},t.prototype.hide=function(){e.prototype.hide.call(this),CommomBtn.removeClick(this._view.backBtn,this.close,this)},t.prototype.setData=function(){var e=new eui.ArrayCollection,t=[],i=this.recData.dialog;t=i,GameLog.log("arr",t),e.source=t,this._view.dataList.dataProvider=e,this._view.dataList.itemRenderer=CallHistoryListItem},t.prototype.close=function(){PanelManager.removePanelByName(this.panelName),PanelOpenManager.openPanel(EnumPanelID.G2_DianhuaPanel),App.data.game2Center.TalkManager.stopSound()},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._view&&(this._view.dispose(),this._view=null)},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t}(BasePanel);__reflect(CallHistoryPanel.prototype,"CallHistoryPanel");var CallingPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),this._view=new CallingPanelUI,this.addChild(this._view)},t.prototype.show=function(t){e.prototype.show.call(this,t),this._view.grilImg.mask=this._view.maskImg,App.data.game2Center.DataCenter.Tel&&(this._view.grilImg.source=App.data.game2Center.DataCenter.Tel.head),this.startOverTimer(),this._view.heartPlugin.setJindu(App.data.game2Center.DataCenter.UserInfo.hearts,App.data.game2Center.DataCenter.ConfigInfo.hearts)},t.prototype.hide=function(){this.stopOverTimer()},t.prototype.startOverTimer=function(){App.sound.playSoundSwitchClient1(SoundManager.calling,!0),App.timer.doTimeOnce(this,3e3,this.onTimerComplete)},t.prototype.stopOverTimer=function(){App.timer.clearTimer(this,this.onTimerComplete)},t.prototype.onTimerComplete=function(){PanelOpenManager.openPanel(EnumPanelID.G2_JietongPanel),App.sound.stopSoundSwitchClient1(SoundManager.calling),this.close(),this.stopOverTimer()},t.prototype.close=function(){PanelManager.removePanelByName(this.panelName)},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t}(BasePanel);__reflect(CallingPanel.prototype,"CallingPanel");var DianhuaPanel=function(e){function t(){var t=e.call(this)||this;return t.arr=[],t.itemData=[],t}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),this._view=new DianhuaPanelUI,this.addChild(this._view)},t.prototype.show=function(t){void 0===t&&(t=null),e.prototype.show.call(this,t),this._view.girlName.fontFamily="fzyc",this.handY=this._view.dianhuaHand.y,this.recData=t,this._view.grilImg.mask=this._view.maskImg,App.data.game2Center.DataCenter.Tel&&(this._view.grilImg.source=App.data.game2Center.DataCenter.Tel.head),this.initView(),this._view.girlName.text=App.data.game2Center.DataCenter.ConfigInfo.girl_name,this._view.dianhuaList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.itemTouch,this),this._view.yd_dianhuaImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.yd_dianhuaImgTouch,this),CommomBtn.btnClick(this._view.backBtn,this.backTouch,this,2),CommomBtn.btnClick(this._view.callBtn,this.callBtnTouch,this,1),1==this.recData&&this.playBackBtnAnim()},t.prototype.hide=function(){e.prototype.hide.call(this),this._view.dianhuaList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.itemTouch,this),this._view.yd_dianhuaImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.yd_dianhuaImgTouch,this),CommomBtn.removeClick(this._view.backBtn,this.backTouch,this),CommomBtn.removeClick(this._view.callBtn,this.callBtnTouch,this),egret.Tween.removeTweens(this._view.dianhuaHand),this.stopBackBtnAnim(),this.recData=null},t.prototype.callBtnTouch=function(){PanelOpenManager.openPanel(EnumPanelID.G2_CallingPanel),PanelManager.removePanelByName(this.panelName)},t.prototype.itemTouch=function(e){GameLog.log("item",e.itemIndex);App.data.game2Center.DataCenter.Tel;if(this.itemData){var t=this.itemData[e.itemIndex];GameLog.log("data",t),PanelOpenManager.openPanel(EnumPanelID.G2_CallHistoryPanel,t),PanelManager.removePanelByName(this.panelName)}},t.prototype.yd_dianhuaImgTouch=function(){this._view.yindaoGroup.visible=!1,egret.Tween.removeTweens(this._view.dianhuaHand),PanelOpenManager.openPanel(EnumPanelID.G2_CallingPanel),PanelManager.removePanelByName(this.panelName)},t.prototype.backTouch=function(){PanelManager.removePanelByName(this.panelName),App.dispatcher.dispatchEvent(G2_GameSceneEvent.SHOW_SCENE_ANIMATION)},t.prototype.initView=function(){this.ac=new eui.ArrayCollection,this.arr=[];var e=this.setData();this.arr=e,this.ac.source=this.arr,this._view.dianhuaList.dataProvider=this.ac,this._view.dianhuaList.itemRenderer=CallListItem,ScrollerCenter.hideVerticalScrollBar(this._view.dianhuaScroller),this.setGuide()},t.prototype.setData=function(){var e=App.data.game2Center.DataCenter.Tel,t=[];this.itemData=[],GameLog.log("tel",e);var i=e.history,n=e.nexttel;GameLog.log("nexttel",n),n&&n.length>0?this.showCallBtn(!0):this.showCallBtn(!1);for(var o=1,a=0;a<i.length;a++)if(0!=i[a].dialog.length){var s=new Object;s.num=o,s.history=i[a],i[a].dialog&&i[a].dialog.length>0&&(t.push(s),this.itemData.push(i[a])),o++}return GameLog.log("arr",t),t},t.prototype.refresh=function(e){this.history.push(e);var t=this.history;GameLog.log("refresh",t),this.arr=t,this.ac.source=this.arr},t.prototype.showCallBtn=function(e){e?this._view.callBtn.visible=!0:this._view.callBtn.visible=!1},t.prototype.outAnimation=function(e){void 0===e&&(e=null)},t.prototype.enterAnimation=function(){},t.prototype.setGuide=function(){App.data.game2Center.DataCenter.dianhuaGuide&&(this._view.yindaoGroup.visible=!0,egret.Tween.get(this._view.dianhuaHand,{loop:!0}).set({y:this.handY}).to({y:this.handY-40},600).to({y:this.handY},800).wait(100))},t.prototype.playBackBtnAnim=function(){egret.Tween.get(this._view.backBtn,{loop:!0}).to({scaleX:1.15,scaleY:1.15},500).to({scaleX:1,scaleY:1},500)},t.prototype.stopBackBtnAnim=function(){this._view.backBtn.scaleX=1,this._view.backBtn.scaleY=1,egret.Tween.removeTweens(this._view.backBtn)},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._view&&(this._view.dispose(),this._view=void 0),e.prototype.dispose.call(this)},t}(BasePanel);__reflect(DianhuaPanel.prototype,"DianhuaPanel");var JietongPanel=function(e){function t(){var t=e.call(this)||this;return t.count=0,t}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),this._view=new JietongPanelUI,this.addChild(this._view)},t.prototype.show=function(t){e.prototype.show.call(this,t),this._view.grilImg.mask=this._view.maskImg,App.data.game2Center.DataCenter.Tel&&(this._view.grilImg.source=App.data.game2Center.DataCenter.Tel.head),this._view.girlName.text=App.data.game2Center.DataCenter.ConfigInfo.girl_name,this.handY=this._view.dianhuaHand.y,this.handYH=this._view.dianhuaHand0.y,App.data.game2Center.SoundManager.stopBGM(),this.hideSelect(),this.setHeart(),this.initHistory(),this.setScolltoEnd(),this.startOverTimer(),this.setGuide(),this.dealRevMsg(App.data.game2Center.DataCenter.Tel.nexttel),CommomBtn.btnClick(this._view.guaduanBtn,this.guanduanTouch,this,1),this._view.yd_dianhuaImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.yd_dianhuaImgTouch,this),this._view.yd_dianhuaImg0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.yd_dianhuaImgTouchHeart,this)},t.prototype.hide=function(){e.prototype.hide.call(this),App.timer.clearTimer(this,this.scrollToEnd),CommomBtn.removeClick(this._view.guaduanBtn,this.guanduanTouch,this),App.data.game2Center.TalkManager.stopSound(),this.stopTryPlaySound(),this.stopOverTimer(),App.data.game2Center.LoadingLock.unLockScreen(),App.data.game2Center.DataCenter.dianhuaGuide=!1},t.prototype.initHistory=function(){this.ac=new eui.ArrayCollection,this.history=[];var e=this.getLastHistory();this.history=e,this.ac.source=ArrayTool.copyArr(this.history),this._view.messageList.dataProvider=this.ac,this._view.messageList.itemRenderer=MessageListItem,this._view.messageList.useVirtualLayout=!1},t.prototype.getLastHistory=function(){var e=App.data.game2Center.DataCenter.Tel,t=[],i=e.history,n=ProtocolHttpData.wechat;n=i[0];for(var o=0,a=n.dialog.length;a>o;o++){var s=new Object,r=ProtocolHttpData.dialog;r=n.dialog[o],s.msg=r,t.push(s)}return this.nexttel=e.nexttel,this.history=t,t},t.prototype.dealRevMsg=function(e){if(GameLog.log("JietongPanel >> 发送下一条数据:",e),null!=e)if(0==e.length)App.data.game2Center.DataCenter.Tel.nexttel=[],App.data.game2Center.DataCenter.UserInfo.tel_main=!0,App.data.game2Center.DataCenter.UserInfo.nextTel=!1,this.getNewTel();else if(1==e.length){if(e!=this.oldMsg){var t=new Object;t.msg=e[0],this.addMsg(t)}this.oldMsg=e;var i=e[0].audio;this.msgType=e[0],this.parent&&App.data.game2Center.TalkManager.playSound(i,this.onSoundComplete,this.onError,this.onLoaded,this)}else e.length>1&&this.showSelect(e)},t.prototype.onLoaded=function(){var e=this;if(DeviceUtil.isMobile&&DeviceUtil.IsWeb&&this._view.messageList.numChildren>=1){var t=this._view.messageList.getChildAt(this._view.messageList.numChildren-1);t&&egret.Tween.get(App.data.game2Center.TalkManager).wait(50).call(function(){App.data.game2Center.TalkManager.channel&&0==App.data.game2Center.TalkManager.channel.position&&(t.leftMessage.showTalkAnim(),t.leftMessage.talkImg.once(egret.TouchEvent.TOUCH_TAP,e.tryPlaySound,e))},this)}},t.prototype.tryPlaySound=function(){this.parent&&App.data.game2Center.TalkManager.tryPlaySound(),this.stopTryPlaySound()},t.prototype.stopTryPlaySound=function(){if(egret.Tween.removeTweens(App.data.game2Center.TalkManager),this._view.messageList.numChildren>=1){var e=this._view.messageList.getChildAt(this._view.messageList.numChildren-1);e&&(e.leftMessage.hideTalkAnim(),e.leftMessage.talkImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.tryPlaySound,this))}},t.prototype.selectHandler=function(e){if(this.hideSelect(),e>=MessageSelectEnum.one&&e<=MessageSelectEnum.four&&this.nexttel[e]&&this.nexttel[e].says){this.msgType=this.nexttel[e];var t=new Object;t.msg=this.msgType,this.addMsg(t),this.sendMessageTouch()}},t.prototype.addMsg=function(e){App.data.game2Center.DataCenter.Tel;this.ac&&this.ac.length>0&&this.ac.getItemAt(this.ac.length-1).msg.says==e.msg.says||(this.history.length>0&&this.history[this.history.length-1].msg!=e.msg&&this.history.push(e),App.data.game2Center.DataCenter.Tel&&App.data.game2Center.DataCenter.Tel.history&&App.data.game2Center.DataCenter.Tel.history.length>0&&App.data.game2Center.DataCenter.Tel.history[0].dialog.push(e.msg),this.ac.addItem(e),this.setScolltoEnd(!0),App.sound.playSoundSwitchClient1(SoundManager.sent_msg))},t.prototype.setScolltoEnd=function(e){void 0===e&&(e=!1),App.timer.doTimeOnce(this,100,this.scrollToEnd,[e])},t.prototype.scrollToEnd=function(e){if(this._view.msgScroller.viewport.contentHeight>this._view.msgScroller.height){var t=this._view.msgScroller.viewport.contentHeight-this._view.msgScroller.height;e&&egret.Tween.get(this._view.msgScroller.viewport).to({scrollV:t},200),this._view.msgScroller.viewport&&(this._view.msgScroller.viewport.scrollV=t)}ScrollerCenter.hideVerticalScrollBar(this._view.msgScroller)},t.prototype.sendMessageTouch=function(){if(GameLog.log("JietongPanel >> 发送的话:",this.msgType),this.msgType&&this.msgType.id){var e=ProtocolHttp.chat;e.id=this.msgType.id,e.pid=this.msgType.pid,e.sid=this.msgType.sid,ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.chat,e,new FunctionVO(this.sendMsgBack,this))}},t.prototype.sendMsgBack=function(e){var t=this;200==e.code&&(App.data.game2Center.LoadingLock.lockScreen(),egret.Tween.get(this).wait(1e3).call(function(){App.data.game2Center.LoadingLock.unLockScreen();var i=e.data.hearts;0!=i&&(TipsHeat.showHeat(i),App.data.game2Center.DataCenter.UserInfo.hearts+=i,t.setHeart()),e.data.chat.length>=1?(App.data.game2Center.DataCenter.Tel.nexttel=e.data.chat,t.nexttel=e.data.chat,App.data.game2Center.DataCenter.dianhuaGuide&&1==t.nexttel.length&&t.ac&&2==t.ac.length?t.setHeartGuide():t.dealRevMsg(t.nexttel)):(t.nexttel=e.data.chat,App.data.game2Center.DataCenter.Tel.nexttel=[],App.data.game2Center.DataCenter.UserInfo.tel_main=!0,App.data.game2Center.DataCenter.UserInfo.nextTel=!1,t.getNewTel())},this))},t.prototype.reqFinishGuide=function(){var e={};ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.guideDone,e,new FunctionVO(this.revFinishGuide,this))},t.prototype.revFinishGuide=function(e){200==e.code?(App.data.game2Center.DataCenter.dianhuaGuide=!1,App.data.game2Center.DataCenter.guide.fill_nick_name=e.data.fill_nick_name,App.data.game2Center.DataCenter.guide.emph_zone=e.data.emph_zone,App.data.game2Center.DataCenter.guide.video=e.data.video,this.closePanel(),App.data.game2Center.SoundManager.playBGM(SoundManager.bgm),App.timer.clearTimer(this,this.scrollToEnd),PanelOpenManager.openPanel(EnumPanelID.G2_DianhuaPanel,App.data.game2Center.DataCenter.UserInfo.tel_main)):Notice.showBottomCenterMessage(e.info)},t.prototype.getNewTel=function(){var e={};ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.userChats,e,new FunctionVO(this.getTelBack,this))},t.prototype.getTelBack=function(e){if(GameLog.log(e),200==e.code){var t=e.data.wechat;t&&(App.data.game2Center.DataCenter.Wechat=t);var i=e.data.tel;i&&(App.data.game2Center.DataCenter.Tel=i),1==App.data.game2Center.DataCenter.ConfigInfo.days?this.reqFinishGuide():(this.closePanel(),App.data.game2Center.SoundManager.playBGM(SoundManager.bgm),App.timer.clearTimer(this,this.scrollToEnd),PanelOpenManager.openPanel(EnumPanelID.G2_DianhuaPanel,App.data.game2Center.DataCenter.UserInfo.tel_main))}},t.prototype.startOverTimer=function(){App.timer.doTimeLoop(this,1e3,this.onTimer)},t.prototype.stopOverTimer=function(){this.count=0,App.timer.clearTimer(this,this.onTimer)},t.prototype.onTimer=function(){this._view.timeLabel.text=StringTool.formatClock(this.count),this.count++},t.prototype.guanduanTouch=function(){App.data.game2Center.SoundManager.playBGM(SoundManager.bgm),this.hideSelect(),this.closePanel(),PanelOpenManager.openPanel(EnumPanelID.G2_DianhuaPanel),App.timer.clearTimer(this,this.scrollToEnd),this._view.timeLabel.text="00:00",App.data.game2Center.TalkManager.stopSound(),this.stopTryPlaySound()},t.prototype.onError=function(){GameLog.log("JietongPanel >> 声音加载错误"),Notice.showBottomCenterMessage("声音加载失败"),this.onSoundComplete()},t.prototype.onSoundComplete=function(){this.stopTryPlaySound(),this.sendMessageTouch()},t.prototype.setHeart=function(){this._view.heartPlugin.setJindu(App.data.game2Center.DataCenter.UserInfo.hearts,App.data.game2Center.DataCenter.ConfigInfo.hearts)},t.prototype.showSelect=function(e){this.showGuide(),this._view.yindaoGroup.visible&&(this._view.yindaoGroup.touchEnabled=!1,this._view.yindaoGroup.touchChildren=!1),this._view.selectGroup.visible=!0,this._view.selectList.showMsg(e),this._view.selectList.setOK(this.selectHandler,this)},t.prototype.hideSelect=function(){this._view.yindaoGroup.touchEnabled=!1,this._view.yindaoGroup.touchChildren=!0,this.setGuide(),this._view.selectGroup.visible=!1},t.prototype.yd_dianhuaImgTouch=function(){this._view.yindaoGroup.visible=!1,egret.Tween.removeTweens(this._view.dianhuaHand)},t.prototype.setGuide=function(){App.data.game2Center.DataCenter.dianhuaGuide&&this.ac&&this.ac.length<=2?(egret.Tween.get(this._view.dianhuaHand,{loop:!0}).set({y:this.handY}).to({y:this.handY-40},600).to({y:this.handY},800).wait(100),this._view.yindaoSGro.visible=!1,this._view.yindaoHeart.visible=!1):(this._view.yindaoSGro.visible=!1,this._view.yindaoHeart.visible=!1,this._view.yindaoGroup.visible=!1)},t.prototype.showGuide=function(){App.data.game2Center.DataCenter.dianhuaGuide&&this.ac&&1==this.ac.length&&(this._view.yindaoGroup.visible=!0,this._view.yindaoSGro.visible=!0)},t.prototype.setHeartGuide=function(){this.ac&&2!=this.ac.length||(this._view.yindaoGroup.visible=!0,egret.Tween.get(this._view.dianhuaHand0,{loop:!0}).set({y:this.handYH}).to({y:this.handYH-40},600).to({y:this.handYH},800).wait(100),this._view.yindaoSGro.visible=!1,this._view.yindaoHeart.visible=!0)},t.prototype.yd_dianhuaImgTouchHeart=function(){this._view.yindaoGroup.visible=!1,egret.Tween.removeTweens(this._view.dianhuaHand0),App.data.game2Center.DataCenter.dianhuaGuide=!1,this.dealRevMsg(this.nexttel)},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._view&&(this._view.dispose(),this._view=void 0),e.prototype.dispose.call(this)},t}(BasePanel);__reflect(JietongPanel.prototype,"JietongPanel");var RedPacketPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this._view=new RedPacketPanelUI,this.addChild(this._view)},t.prototype.show=function(t){e.prototype.show.call(this,t),0==App.data.game2Center.DataCenter.red_packet.alreadly?(this._view.redPacketImage.source=RES.getRes("red_packet_1_png"),0==App.data.game2Center.DataCenter.red_packet.days?(this._view.minLabel.text="x90",this._view.maxLabel.text="x500",this._view.circleImage0.visible=!0,this._view.circleImage1.visible=!1,this._view.circleImage2.visible=!1,this._view.rect0.visible=!1,this._view.rect1.visible=!0,this._view.rect2.visible=!0):1==App.data.game2Center.DataCenter.red_packet.days?(this._view.minLabel.text="x120",this._view.maxLabel.text="x800",this._view.circleImage0.visible=!1,this._view.circleImage1.visible=!0,this._view.circleImage2.visible=!1,this._view.rect0.visible=!0,this._view.rect1.visible=!1,this._view.rect2.visible=!0):2==App.data.game2Center.DataCenter.red_packet.days&&(this._view.minLabel.text="x150",this._view.maxLabel.text="x1000",this._view.circleImage0.visible=!1,this._view.circleImage1.visible=!1,this._view.circleImage2.visible=!0,this._view.rect0.visible=!0,this._view.rect1.visible=!0,this._view.rect2.visible=!1)):1==App.data.game2Center.DataCenter.red_packet.alreadly&&(this._view.redPacketImage.source=RES.getRes("red_packet_8_png"),this._view.circleImage0.visible=!1,this._view.circleImage1.visible=!1,this._view.circleImage2.visible=!1,this._view.rect0.visible=!0,this._view.rect1.visible=!0,this._view.rect2.visible=!0),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this,this._view.closeBtn),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this,this._view.remindBtn),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this,this._view.redPacketImage),this._dispatcher.addEventListener(EventConst.UPDATE_LIBAO,this.updateSiwei,this)},t.prototype.hide=function(){e.prototype.hide.call(this),this.open_window=null,App.timer.clearTimer(this,this.onTimer)},t.prototype.updateSiwei=function(){0==App.data.game2Center.DataCenter.red_packet.alreadly?this._view.redPacketImage.source=RES.getRes("red_packet_1_png"):1==App.data.game2Center.DataCenter.red_packet.alreadly&&(this._view.redPacketImage.source=RES.getRes("red_packet_8_png"),this._view.circleImage0.visible=!1,this._view.circleImage1.visible=!1,this._view.circleImage2.visible=!1,this._view.rect0.visible=!0,this._view.rect1.visible=!0,this._view.rect2.visible=!0,Notice.showBottomCenterMessage("获得钻石"+App.data.game2Center.DataCenter.lottery_result))},t.prototype.onTouch=function(e){switch(e.target){case this._view.closeBtn:this.backTouch();break;case this._view.remindBtn:PanelOpenManager.openPanel(EnumPanelID.G2_RedPacketRemindPanel);break;case this._view.redPacketImage:0==App.data.game2Center.DataCenter.red_packet.alreadly&&this.buyGoods()}},t.prototype.buyGoods=function(){GameLog.log("keybuy",App.data.game2Center.DataCenter.keybuy);var e=App.data.game2Center.DataCenter.keybuy.red_packet;if(Config.U8Login)return void App.nativeBridge.sendU8PayOld("libao",e);if(Config.soEasy)return void platform.payOrder(App.data.game2Center.DataCenter.keybuy.red_packet.id);if(DeviceUtil.IsAndroid&&DeviceUtil.IsNative){var t=e["package"],i=e.price,n="解锁"+t[0].cname+"功能";t.length>1&&(n+=",加送"+t[1].num+t[1].cname);var o={name:t[0].cname,price:i+"元",desc:n};App.nativeBridge.sendAndroidPay(e.id,o)}else{var a={gid:0};a=AddSomeMsgUtils.addSomeMsgByGiftBuy(a),a.gid=App.data.game2Center.DataCenter.keybuy.red_packet.id,egret.log("ios下单+红包"),egret.log(a.gid);var s=window.channel;s&&(a.channel=s),MilletSDK.getInstance().millet&&(a.channel="xiaomi"),H5_Vivo_SDK.getInstance().vivoData&&(a.channel="vivo"),DeviceUtil.IsWeb&&(H5_360_Sdk.getInstance().config360&&0!=H5_360_Sdk.getInstance().config360.time?a.channel="360":a.channel="web_alipay"),!DeviceUtil.IsWeb||Config.soEasy||H5_360_Sdk.getInstance().config360||(this.open_window=WebParams.openWindow(WebParams.defaultURL)),ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.giftBuy,a,new FunctionVO(this.revBuyGoods,this))}},t.prototype.revBuyGoods=function(e){if(200==e.code){if(DeviceUtil.IsWeb){if(this.order_id=e.data.order_id,H5_360_Sdk.getInstance().config360&&0!=H5_360_Sdk.getInstance().config360.time)H5_360_Sdk.getInstance().pay360Param=e.data.params,H5_360_Sdk.getInstance().order_id=e.data.order_id,H5_360_Sdk.getInstance().paySdk(),GameLog.log("360支付订单号"+this.order_id);else{var t=e.data.aliparams,i=App.data.game2Center.DataCenter.setSelect(t);WebParams.openWindow("/shop/web/switch/?url="+i,this.open_window)}return void this.getBuy()}DeviceUtil.IsNative&&DeviceUtil.IsIos&&"rmb"==App.data.game2Center.DataCenter.keybuy.red_packet.coin_type?App.nativeBridge.sendIOSPay(e.data.order_id,e.data.product_id):"rmb"==App.data.game2Center.DataCenter.keybuy.red_packet.coin_type?App.nativeBridge.sendPay(e):"diamond"==App.data.game2Center.DataCenter.keybuy.red_packet.coin_type&&(Notice.showBottomCenterMessage("购买成功"),App.data.game2Center.DataCenter.keybuy.red_packet.hasbuy=!0)}else 981==e.code?App.nativeBridge.sendPay(e):Notice.showBottomCenterMessage(""+e.info)},t.prototype.backTouch=function(){this.closePanel()},t.prototype.getBuy=function(){ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.payStatusH5,{order_id:this.order_id},new FunctionVO(this.payBack,this))},t.prototype.payBack=function(e){200==e.code?(Notice.showBottomCenterMessage("支付成功"),App.dispatcher.dispatchEvent(EventConst.REQ_GAME_INFO),App.data.game2Center.LoadingLock.unlock()):(this.t=0,this._needSendBuy=!0,App.timer.clearTimer(this,this.onTimer),App.timer.doTimeLoop(this,3e3,this.onTimer))},t.prototype.onTimer=function(){return this.t+=3,this.t>=600?(GameLog.log("-------------10分钟内支付失败"),void App.timer.clearTimer(this,this.onTimer)):void(this._needSendBuy&&(this._needSendBuy=!1,ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.payStatusH5,{order_id:this.order_id},new FunctionVO(this.onPaySuccess,this,!0))))},t.prototype.onPaySuccess=function(e){200==e.code?(Notice.showBottomCenterMessage("支付成功"),App.dispatcher.dispatchEvent(EventConst.REQ_GAME_INFO),App.timer.clearTimer(this,this.onTimer),App.data.game2Center.LoadingLock.unlock()):(GameLog.log("-------------未支付，继续检测----------"),this._needSendBuy=!0)},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._view&&(this._view.dispose(),this._view=void 0),e.prototype.dispose.call(this)},t}(BasePanel);__reflect(RedPacketPanel.prototype,"RedPacketPanel");var RedPacketRemindPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this._view=new RedPacketRemindPanelUI,this.addChild(this._view)},t.prototype.show=function(t){e.prototype.show.call(this,t),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this,this._view.exitImage)},t.prototype.onTouch=function(e){this.closePanel()},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._view&&(this._view.dispose(),this._view=void 0),e.prototype.dispose.call(this)},t}(BasePanel);__reflect(RedPacketRemindPanel.prototype,"RedPacketRemindPanel");var MailDataPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),this._view=new MailDataPanelUI,this.addChild(this._view),this._view.giftGroup.removeChildren()},t.prototype.clearItems=function(){if(this._items)for(var e=0;e<this._items.length;e++)this._items[e]&&this._items[e].dispose(),this._items[e]=void 0;this._items=null},t.prototype.dispose=function(){this.clearItems(),e.prototype.dispose.call(this),this._view&&(this._view.dispose(),this._view=null)},t.prototype.show=function(t){e.prototype.show.call(this,t),this.recData=t,CommomBtn.btnClick(this._view.backBtn,this.closePanel,this,2),CommomBtn.btnClick(this._view.linquBtn,this.linquBtnTouch,this,1),this.setData()},t.prototype.hide=function(){e.prototype.hide.call(this),this.recData=null,CommomBtn.removeClick(this._view.backBtn,this.closePanel,this),CommomBtn.removeClick(this._view.linquBtn,this.linquBtnTouch,this),PanelOpenManager.openPanel(EnumPanelID.G2_MailPanel,null,!1)},t.prototype.setData=function(){this._view.text.text=this.recData.title,this._view.content.text=this.recData.content,GameLog.log("tool",this.recData.tool),this.clearItems(),this._items=[];var e=this.recData.tool,t=new MailDataGroupItem;t.x=20,t.y=20,t.setName(e.cname),t.setCount(this.recData.num),t.setImage(e.pic),this._view.giftGroup.addChild(t),this._items.push(t)},t.prototype.linquBtnTouch=function(){var e={mid:0};e.mid=this.recData.id,ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.mailLingqu,e,new FunctionVO(this.lingquBack,this))},t.prototype.lingquBack=function(e){if(200==e.code){App.data.game2Center.DataCenter.UserInfo.hearts=e.data.hearts,App.data.game2Center.DataCenter.UserInfo.diamond=e.data.diamond,App.data.game2Center.DataCenter.UserInfo.gold=e.data.gold,App.data.game2Center.DataCenter.UserInfo.power=e.data.power;for(var t=App.data.game2Center.DataCenter.mail,i=0;i<t.length;i++)t[i].id==this.recData.id&&App.data.game2Center.DataCenter.mail.splice(i,1);this.closePanel(),App.dispatcher.dispatchEvent(EventConst.UPDATE_RED_TIP),Notice.showBottomCenterMessage(LanConst.mail0_00)}else Notice.showBottomCenterMessage(e.info)},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t}(BasePanel);__reflect(MailDataPanel.prototype,"MailDataPanel");var MailPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),this._view=new MailPanelUI,this.addChild(this._view),this._view.mailList.itemRenderer=MailListItem},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._view&&(this._view.dispose(),this._view=null)},t.prototype.show=function(t){e.prototype.show.call(this,t),this._type=1,Config.soEasy&&SoEasySdk.shieldChannel()||this.setData(),CommomBtn.btnClick(this._view.backBtn,this.closePanel,this,2)},t.prototype.hide=function(){e.prototype.hide.call(this),CommomBtn.removeClick(this._view.backBtn,this.closePanel,this),0==this._type&&Config.hasEnterGame&&PanelOpenManager.openPanel(EnumPanelID.G2_SetPanel)},t.prototype.setData=function(){var e=App.data.game2Center.DataCenter.mail;e&&e.length>0?this._view.noText.visible=!1:this._view.noText.visible=!0;var t=new eui.ArrayCollection,i=[];i=e,GameLog.log("arr",i),t.source=i,this._view.mailList.dataProvider=t,ScrollerCenter.hideVerticalScrollBar(this._view.maillScroller)},t.prototype.closePanel=function(){this._type=0,e.prototype.closePanel.call(this)},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t}(BasePanel);__reflect(MailPanel.prototype,"MailPanel");var ProtocolPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),this._view=new ProtocolPanelUI,this.addChild(this._view),this._view.dataList.useVirtualLayout=!0,this._view.dataList.itemRenderer=ProtocolItem,this._view.protocalScroller.viewport=this._view.dataList},t.prototype.show=function(t){e.prototype.show.call(this,t),this._view.dataList.dataProvider=new eui.ArrayCollection([App.global.userInfo.userAgreeInfo.content1]),App.timer.doTimeOnce(this,500,this.updateContent),ScrollerCenter.hideVerticalScrollBar(this._view.protocalScroller),CommomBtn.btnClick(this._view.guanbiBtn,this.onClose,this,2),CommomBtn.btnClick(this._view.okBtn,this.onClose,this,1),this._view.protocalScroller.viewport&&(this._view.protocalScroller.viewport.scrollV=0)
},t.prototype.hide=function(){e.prototype.hide.call(this),this._view.protocalScroller.stopAnimation(),this._view.dataList.dataProvider=new eui.ArrayCollection([]),App.timer.clearTimer(this,this.updateContent),CommomBtn.removeClick(this._view.guanbiBtn,this.onClose,this),CommomBtn.removeClick(this._view.okBtn,this.onClose,this),PanelOpenManager.openPanel(EnumPanelID.G2_SetPanel)},t.prototype.updateContent=function(){for(var e,t=App.global.userInfo.userAgreeInfo.content1+App.global.userInfo.userAgreeInfo.content2,i=t.split("\n"),n=20,o=i.length%n,a=Math.floor(i.length/n),s=[],r=n+(o>0?1:0),h=0;r>h;h++){e="";for(var p=a*h;a*(h+1)>p&&!(p>=i.length);p++)a*(h+1)>p&&(e+=0==s.length&&""==e?i[p]:"\n"+i[p]);s.push(e)}this._view.dataList.dataProvider=new eui.ArrayCollection(s)},t.prototype.onClose=function(){this.closePanel()},t.prototype.dispose=function(){this._view&&(this._view.dispose(),this._view=void 0),e.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t}(BasePanel);__reflect(ProtocolPanel.prototype,"ProtocolPanel");var SetPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),this._view=new SetPanelUI,this.addChild(this._view),this._view.kaiguan.selected=!0},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._view&&(this._view.dispose(),this._view=null)},t.prototype.show=function(t){e.prototype.show.call(this),App.data.game2Center.DataCenter.mail&&App.data.game2Center.DataCenter.mail.length>0?this._view.xin.visible=!0:this._view.xin.visible=!1,this._type=0,Config.soEasy&&SoEasySdk.shieldChannel()&&(this._view.xin.visible=!1),this._view.versionLabel.text=GlobalConfig.version_obj.main_version,this._dispatcher.addEventListener(egret.TouchEvent.CHANGE,this.yinyueTouch,this,this._view.kaiguan),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.xieyiTouch,this,this._view.jianyiGroup),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.youjianTouch,this,this._view.youjianGroup),CommomBtn.btnClick(this._view.guanbiBtn,this.close,this,2),this._view.zhuName.text=App.data.game2Center.DataCenter.UserInfo.nickName,this._view.zhuId.text=App.data.game2Center.DataCenter.UserInfo.id+"",this.musicOff(),CommomBtn.btnClick(this._view.quitGameBtn,this.onQuitGame,this)},t.prototype.hide=function(){e.prototype.hide.call(this),CommomBtn.removeClick(this._view.guanbiBtn,this.close,this),CommomBtn.removeClick(this._view.quitGameBtn,this.onQuitGame,this),this._view.setGroup.scaleX=this._view.setGroup.scaleY=this._view.setGroup.alpha=1,egret.Tween.removeTweens(this._view.setGroup),0==this._type&&Config.hasEnterGame&&App.dispatcher.dispatchEvent(G2_GameSceneEvent.SHOW_SCENE_ANIMATION)},t.prototype.musicOff=function(){App.data.game2Center.SoundManager.allowPlayBGM?(this._view.kaiguan.selected=!0,this._view.sndLine.visible=!1):(this._view.kaiguan.selected=!1,this._view.sndLine.visible=!0)},t.prototype.yinyueTouch=function(){this.playClick(),this._view.kaiguan.selected?(App.data.game2Center.SoundManager.allowPlayBGM=!0,App.data.game2Center.SoundManager.allowPlayEffect=!0,this._view.sndLine.visible=!1):(App.data.game2Center.SoundManager.allowPlayBGM=!1,App.data.game2Center.SoundManager.allowPlayEffect=!1,this._view.sndLine.visible=!0)},t.prototype.yinyue1Touch=function(){this.playClick()},t.prototype.youjianTouch=function(){this.playClick(),this._type=1,PanelOpenManager.openPanel(EnumPanelID.G2_MailPanel),this.closePanel()},t.prototype.xieyiTouch=function(){this.playClick(),this._type=1,PanelOpenManager.openPanel(EnumPanelID.G2_ProtocolPanel),this.closePanel()},t.prototype.playClick=function(){App.sound.playSoundSwitchClient1(SoundManager.click)},t.prototype.close=function(){this.outAnimation()},t.prototype.showXin=function(e){e?this._view.xin.visible=!0:this._view.xin.visible=!1},t.prototype.outAnimation=function(){this.closePanel()},t.prototype.onQuitGame=function(){var e=this;Alert.show2("是否返回大厅？","",new FunctionVO(function(t){t.type==Alert.OK&&(e._type=1,GameManager.exitGame(),PanelOpenManager.openPanel(EnumPanelID.GAME_HALL))},this))},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t}(BasePanel);__reflect(SetPanel.prototype,"SetPanel");var SharePanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),this._view=new SharePanelUI,this.addChild(this._view)},t.prototype.dispose=function(){this._view&&(this._view.dispose(),this._view=null),e.prototype.dispose.call(this)},t.prototype.show=function(t){e.prototype.show.call(this,t),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this,this)},t.prototype.hide=function(){e.prototype.hide.call(this)},t.prototype.onTouchTap=function(e){switch(e.target){case this._view.weiboBtn:break;case this._view.qqBtn:break;case this._view.zoneBtn:break;case this._view.weixinBtn:break;case this._view.friendBtn:break;case this._view.closeBtn:this.hide();break;case this._view.okBtn:this.onShare()}},t.prototype.onShare=function(){this.hide();var e=window.auth_7k7k;if(e){var t=window.K7_SDK;t.wxShare({title:"心动女生",desc:"与女神来一场轰轰烈烈的爱情吧！",custom:'{user:"yafet"}',imgUrl:"http://www.dmgame.com:3000/xdns.png",isUseGuide:"yes"})}},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t}(BasePanel);__reflect(SharePanel.prototype,"SharePanel");var ShipinPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),this._view=new ShipinPanelUI,this.addChild(this._view),this._view.itemGroup.removeChildren(),this._view.item2Group.removeChildren(),this._view.item3Group.removeChildren(),this._view.yindaoBack.visible=!1,this._view.yindaoGroup.visible=!1,this.handX=this._view.shipinHand.x,this.handY=this._view.backHand.y,this._items=[]},t.prototype.reset=function(){this._huiyi=!1,this._zhencang=!1,this._beijing=!1,this._view.itemGroup.scrollV=0,this._view.item2Group.scrollV=0,this._view.item3Group.scrollV=0},t.prototype.dispose=function(){this.clearItems(),this._view&&(this._view.dispose(),this._view=null),e.prototype.dispose.call(this)},t.prototype.show=function(t){e.prototype.show.call(this,t),this.reset(),this.setGuide(),this.openLibao(),this.showIndex(0,!1),this._view.kaiguan.selected=!1,this.setGoldtext(App.data.game2Center.DataCenter.UserInfo.gold),CommomBtn.btnClick(this._view.backBtn,this.closePanel,this,2),this._dispatcher.addEventListener(EventConst.UPDATE_LIBAO,this.updateSiwei,this),this._dispatcher.addEventListener(EventConst.UPDATE_SHIPIN_GOLD,this.setGoldtext,this),this._dispatcher.addEventListener(egret.TouchEvent.CHANGE,this.kaiguanTouch,this,this._view.kaiguan),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goldGroupTouch,this,this._view.goldGroup),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.guideBack,this,this._view.backCircle),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.yd_shipinImgTouch,this,this._view.yd_shipinImg),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.selectGrp,this,this._view.rag)},t.prototype.hide=function(){e.prototype.hide.call(this),CommomBtn.removeClick(this._view.backBtn,this.closePanel,this),App.dispatcher.dispatchEvent(G2_GameSceneEvent.SHOW_SCENE_ANIMATION),this.clearItems(),this._items=[],this._curIndex=-1,this.reset()},t.prototype.showIndex=function(e,t){switch(void 0===t&&(t=!0),e){case 0:this._curIndex=e,this._view.huiyiScroller.visible=!0,this._view.shoucangScroller.visible=!1,this._view.bgScroller.visible=!1,this._huiyi||this.initHuiyi();break;case 1:this._curIndex=e,this._view.huiyiScroller.visible=!1,this._view.shoucangScroller.visible=!0,this._view.bgScroller.visible=!1,this._zhencang||this.initZhencang();break;case 2:this._view.huiyiScroller.visible=!1,this._view.shoucangScroller.visible=!1,this._view.bgScroller.visible=!0,this._beijing||this.initBeijing();break;default:return}for(var i=0,n=this._view.rag.numChildren;n>i;i++)this._view.rag.getChildAt(i).selected=i==e;this._curIndex=e,t&&App.sound.playSoundSwitchClient1(SoundManager.button)},t.prototype.selectGrp=function(e){this.showIndex(this._view.rag.getChildIndex(e.target))},t.prototype.yd_shipinImgTouch=function(){ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.guideDone,{},new FunctionVO(this.finishGuideBack,this))},t.prototype.finishGuideBack=function(e){if(200==e.code){this._view.yindaoGroup.visible=!1,egret.Tween.removeTweens(this._view.shipinHand),App.data.game2Center.DataCenter.shipinGuide=!1,App.data.game2Center.DataCenter.guide.fill_nick_name=e.data.fill_nick_name,App.data.game2Center.DataCenter.guide.emph_zone=e.data.emph_zone,App.data.game2Center.DataCenter.guide.video=e.data.video,this.setBackGuide();var t=App.data.game2Center.DataCenter.Video.mem[0];if(t&&0==t.types)if(0==t.locked){var i={ossvid:t.ossvid};ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.videoUrl,i,new FunctionVO(this.videoUrlBack,this))}else Notice.showBottomCenterMessage("第"+t.days+"天开放")}else Notice.showBottomCenterMessage(""+e.info)},t.prototype.videoUrlBack=function(e){var t=this;if(200==e.code)if(DeviceUtil.IsWeb&&DeviceUtil.isMobile){var i=new PlayVideoDialog;i.setContent("观看视频"),i.setOk(function(){App.dispatcher.dispatchEvent(EventConst.PLAY_WEB_VIDEO,e.data.url,new FunctionVO(t.onPlayVideoComplete,t))},this),i.show(!1)}else App.dispatcher.dispatchEvent(EventConst.PLAY_WEB_VIDEO,e.data.url,new FunctionVO(this.onPlayVideoComplete,this));else Notice.showBottomCenterMessage(""+e.info)},t.prototype.onPlayVideoComplete=function(){Video.instance().dispose(),App.data.game2Center.SoundManager.playBGM(SoundManager.bgm)},t.prototype.urlBack=function(e){200==e.code?App.dispatcher.dispatchEvent(EventConst.PLAY_WEB_VIDEO,e.data,new FunctionVO(this.onPlayVideoComplete,this)):Notice.showBottomCenterMessage(""+e.info)},t.prototype.clearItems=function(){if(this._items)for(var e=0;e<this._items.length;e++)this._items[e]&&this._items[e].dispose(),this._items[e]=void 0;this._items=null},t.prototype.initHuiyi=function(){this._huiyi=!0;for(var e=App.data.game2Center.DataCenter.Video,t=e.mem,i=0;i<t.length;i++){var n=t[i],o=new ShiPinScrollerItem;o.showGoldGroup(!1);if(o.setTypeText(n.name),o.setVideoImg(n.preview),0==n.locked)o.showMask(!1),o.showLock(!1),o.showPlay(!0),o.showDate(!1);else{o.showMask(!0),o.showLock(!0),o.showPlay(!1),o.showDate(!0);var a="游戏第"+n.days+"天开放";o.setDateText(a)}o.setData(n),o.x=i%3*401+40,o.y=322*Math.floor(i/3)+40,this._view.item2Group.addChild(o),this._items.push(o)}},t.prototype.initZhencang=function(){this._zhencang=!0;for(var e=App.data.game2Center.DataCenter.Video,t=e.fav,i=0;i<t.length;i++){var n=t[i],o=new ShiPinScrollerItem;o.showDate(!1);o.setTypeText(n.name),o.setVideoImg(n.preview),0==n.locked?(o.showMask(!1),o.showLock(!1),o.showPlay(!0),o.showGoldGroup(!1)):(o.showMask(!0),o.showLock(!0),o.showPlay(!1),o.showGoldGroup(!0),o.setGoldText(n.price)),o.setData(n),o.x=i%3*401+40,o.y=322*Math.floor(i/3)+40,this._view.itemGroup.addChild(o),this._items.push(o)}},t.prototype.initBeijing=function(){this._beijing=!0;for(var e=App.data.game2Center.DataCenter.Video,t=e.bgi,i=0;i<t.length;i++){var n=t[i],o=new ShiPinScrollerItem;o.setTypeText(n.title),o.setVideoImg(n.uri,!0,!1),o.setIconImg("game_bg_icon_1_png"),1==n.use_status?o.showRectMask(!1):o.setVideoImg(n.uri,!0,!0),0==n.locked?(o.showMask(!1),o.showLock(!1),o.showPlay(!1),o.showDate(!1),o.showGoldGroup(!1)):(o.showMask(!0),o.showLock(!0),o.showPlay(!1),o.showDate(!0),o.setDateText(""),o.showGoldGroup(!0),o.setGoldText(n.cons)),o.setData(n),o.x=i%3*401+40,o.y=322*Math.floor(i/3)+40,this._view.item3Group.addChild(o),this._items.push(o)}},t.prototype.setGoldtext=function(e){""!=e&&(this._view.goldLabel.text=e)},t.prototype.kaiguanTouch=function(){this._view.kaiguan.selected?(this._view.huiyiScroller.visible=!1,this._view.shoucangScroller.visible=!0,App.sound.playSoundSwitchClient1(SoundManager.button)):(this._view.huiyiScroller.visible=!0,this._view.shoucangScroller.visible=!1,App.sound.playSoundSwitchClient1(SoundManager.button))},t.prototype.goldGroupTouch=function(){PanelOpenManager.openPanel(EnumPanelID.G2_ShopGoldPanel)},t.prototype.setGuide=function(){App.data.game2Center.DataCenter.shipinGuide&&(this._view.yindaoGroup.visible=!0,egret.Tween.get(this._view.shipinHand,{loop:!0}).set({x:this.handX}).to({x:this.handX-40},600).to({x:this.handX},800).wait(100)),this._view.huiyiScroller&&this._view.huiyiScroller.verticalScrollBar&&(this._view.huiyiScroller.verticalScrollBar.autoVisibility=!1,this._view.huiyiScroller.verticalScrollBar.visible=!1),this._view.shoucangScroller&&this._view.shoucangScroller.verticalScrollBar&&(this._view.shoucangScroller.verticalScrollBar.autoVisibility=!1,this._view.shoucangScroller.verticalScrollBar.visible=!1),this._view.bgScroller&&this._view.bgScroller.verticalScrollBar&&(this._view.bgScroller.verticalScrollBar.autoVisibility=!1,this._view.bgScroller.verticalScrollBar.visible=!1)},t.prototype.openLibao=function(){if(0==App.data.game2Center.DataCenter.keybuy.shiping.hasbuy){var e=Math.floor(Math.random()*App.data.game2Center.DataCenter.UserInfo.randNum)+1;GameLog.log("num"+e,App.data.game2Center.DataCenter.keybuy.shiping.hasbuy),1!=e||App.data.game2Center.DataCenter.keybuy.shiping.hasbuy||"ZONE_VIDEO"==App.data.game2Center.DataCenter.guide.emph_zone||PanelOpenManager.openPanel(EnumPanelID.G2_LibaoVideoPanel)}},t.prototype.updateSiwei=function(){this.reset(),this.showIndex(this._curIndex),this.setGoldtext(App.data.game2Center.DataCenter.UserInfo.gold)},t.prototype.setBackGuide=function(){this._view.yindaoBack.visible=!0,egret.Tween.get(this._view.backHand,{loop:!0}).set({y:this.handY}).to({y:this.handY+40},600).to({y:this.handY},800).wait(100)},t.prototype.guideBack=function(){this._view.yindaoBack.visible=!1,this.closePanel()},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t}(BasePanel);__reflect(ShipinPanel.prototype,"ShipinPanel");var BuyToolPanel=function(e){function t(){var t=e.call(this)||this;return t.count=1,t}return __extends(t,e),t.prototype.init=function(){this._view=new buyToolPanelUI,this.addChild(this._view),this.showHuijia(!1),this.showHuijian(!0),this.setCountLabel(this.count),this.setContentLabel(this.recData.des),this.setTitleLabel(this.recData.cname),this.setGoldLabel(this.recData.price),this.setGiftImg(this.recData.pic),this.recData.is_limit?(this.showXiangouGroup(!0),this.setMaxCount(this.recData.left_times,this.recData.buy_times)):this.showXiangouGroup(!1)},t.prototype.show=function(t){e.prototype.show.call(this,t),this.recData=t,this.count=1,this._view.jiaBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.jiaBtnTouchBegin,this),this._view.jianBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.jianBtnTouchBegin,this),App.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),App.dispatcher.addEventListener(EventConst.UPDATE_LIMIT_NUM,this.setXiangou,this),CommomBtn.btnClick(this._view.okBtn,this.okTouch,this,1),CommomBtn.btnClick(this._view.canelBtn,this.canelTouch,this,1),CommomBtn.btnClick(this._view.jiaBtn,this.jiaTouch,this,1),CommomBtn.btnClick(this._view.jianBtn,this.jianTouch,this,1)},t.prototype.hide=function(){e.prototype.hide.call(this),CommomBtn.removeClick(this._view.okBtn,this.okTouch,this),CommomBtn.removeClick(this._view.canelBtn,this.canelTouch,this),CommomBtn.removeClick(this._view.jiaBtn,this.jiaTouch,this),CommomBtn.removeClick(this._view.jianBtn,this.jianTouch,this)},t.prototype.okTouch=function(){if(this.recData&&this.recData.id){var e=this.recData.id,t=ProtocolHttp.toolsBuy;t.gid=e,t.count=this.count,ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.toolsBuy,t,new FunctionVO(this.buyBtnTouchBack,this)),GameLog.log("BuyToolPanel >> 发送购买道具，购买个数:",this.count)}},t.prototype.buyBtnTouchBack=function(e){if(GameLog.log("tool",e),200==e.code){App.data.game2Center.DataCenter.UserInfo.diamond=e.data.diamond,App.data.game2Center.DataCenter.UserInfo.gold=e.data.gold,App.data.game2Center.DataCenter.UserInfo.hearts=e.data.hearts,App.data.game2Center.DataCenter.UserInfo.power=e.data.power,GameLog.log("BuyToolPanel >> 购买返回，剩余限购次数:",e.data.left_times);var t={id:this.recData.id,left_times:e.data.left_times};App.dispatcher.dispatchEvent(EventConst.UPDATE_LEFT_TIMES,t),App.dispatcher.dispatchEvent(EventConst.UPDATE_SIWEI),GameLog.log("=======",this.recData),this.recData.is_limit&&(this.showXiangouGroup(!0),this.recData.left_times=e.data.left_times,this.setMaxCount(this.recData.left_times,this.recData.buy_times)),Notice.showBottomCenterMessage("购买成功"),App.dispatcher.dispatchEvent(EventConst.UPDATE_SHOP_GOLD,App.data.game2Center.DataCenter.UserInfo.gold),this.close(),App.dispatcher.dispatchEvent(EventConst.REQ_UPDATE_BAGS)}else Notice.showBottomCenterMessage(""+e.info)},t.prototype.setXiangou=function(e){this.recData.is_limit&&(this.showXiangouGroup(!0),this.recData.left_times=e,this.setMaxCount(this.recData.left_times,this.recData.buy_times))},t.prototype.canelTouch=function(){this.close()},t.prototype.jiaTouch=function(){return this.recData.price*(this.count+1)>App.data.game2Center.DataCenter.UserInfo.gold?void this.showHuijia(!0):(this.count+=1,this.showHuijian(!1),void(this.recData.is_limit?(this.count>=this.recData.left_times?(this.showHuijia(!0),this.count=this.recData.left_times):this.showHuijia(!1),this.setCountLabel(this.count),this.setGoldLabel(this.recData.price*this.count)):(this.setCountLabel(this.count),this.setGoldLabel(this.recData.price*this.count))))},t.prototype.jianTouch=function(){this.showHuijia(!1),this.count>1?(this.count-=1,1==this.count?this.showHuijian(!0):this.showHuijian(!1)):(this.count=1,this.showHuijian(!0)),this.setCountLabel(this.count),this.setGoldLabel(this.recData.price*this.count)},t.prototype.jiaBtnTouchBegin=function(){var e=this;egret.Tween.get(this._view.jiaBtn,{loop:!0}).wait(250).call(function(){e.jiaTouch()},this)},t.prototype.jianBtnTouchBegin=function(){var e=this;egret.Tween.get(this._view.jianBtn,{loop:!0}).wait(250).call(function(){e.jianTouch()},this)},t.prototype.onStageTouchEnd=function(){egret.Tween.removeTweens(this._view.jiaBtn),egret.Tween.removeTweens(this._view.jianBtn)},t.prototype.setGiftImg=function(e){e&&""!=e&&(this._view.giftImg.source=e)},t.prototype.setGoldLabel=function(e){null!=e&&(this._view.goldLabel.text=e)},t.prototype.setContentLabel=function(e){""!=e&&(this._view.contentLabel.text=e)},t.prototype.setTitleLabel=function(e){""!=e&&(this._view.titleLabel.text=e)},t.prototype.setCountLabel=function(e){""!=e&&(this._view.countLabel.text=e)},t.prototype.showXiangouGroup=function(e){e?this._view.xiangouGroup.visible=!0:this._view.xiangouGroup.visible=!1},t.prototype.setMaxCount=function(e,t){t&&""!=t&&(this._view.maxcountLabel.text=e+"/"+t)},t.prototype.showHuijia=function(e){e?this._view.nojiaBtn.visible=!0:this._view.nojiaBtn.visible=!1},t.prototype.showHuijian=function(e){e?this._view.nojianBtn.visible=!0:this._view.nojianBtn.visible=!1},t.prototype.close=function(){this.closePanel(),this.count=1},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._view&&(this._view.dispose(),this._view=void 0),e.prototype.dispose.call(this)},t}(BasePanel);__reflect(BuyToolPanel.prototype,"BuyToolPanel");var MysteriousShop=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this._view=new MysteriousShopUI,this.addChild(this._view),this._view.showListGrp.removeChildren(),this._shopItems=[]},t.prototype.show=function(t){e.prototype.show.call(this,t),CommomBtn.btnClick(this._view.closeBtn,this.onRemoveSmshop,this),CommomBtn.btnClick(this._view.gotoShop,this.onGotoShop,this),this._dispatcher.addEventListener(G2_GameSceneEvent.BUY_SHENMISHOP,this.sendUserSGB,this),this.sendSpecialGoods()},t.prototype.onRemoveSmshop=function(e){PanelOpenManager.removePanel(EnumPanelID.G2_MysteriousShop)},t.prototype.onGotoShop=function(e){this.sendUserSGR()},t.prototype.sendUserSGB=function(e){var t=this,i={gid:e.id,index:e.index};ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.userSGB,i,new FunctionVO(function(e){200==e.code?(App.dispatcher.dispatchEvent(EventConst.REQ_GAME_INFO),t.sendSpecialGoods(),Notice.showBottomCenterMessage("购买成功")):Notice.showBottomCenterMessage(""+e.info)},this))},t.prototype.sendUserSGR=function(){var e=this;ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.userSGR,{},new FunctionVO(function(t){200==t.code?(App.dispatcher.dispatchEvent(EventConst.REQ_GAME_INFO),e.sendSpecialGoods(),Notice.showBottomCenterMessage("刷新成功")):Notice.showBottomCenterMessage(t.info+"")},this))},t.prototype.sendSpecialGoods=function(){ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.userSpecialGoods,{},new FunctionVO(this.initShow,this))},t.prototype.initShow=function(e){if(200==e.code){PanelOpenManager.removePanel(EnumPanelID.G2_DlcMainDoc),App.data.game2Center.DataCenter.smShopData=e.data;var t=App.data.game2Center.DataCenter.smShopData;"diamond"==t.refresh_type?this._view.iconImg.source="shop2_zhuanshi_png":this._view.iconImg.source="main2_jinbi_png",this._view.refresh_text.text=t.refresh_cons+"";for(var i=t.goods.length,n=void 0,o=0;i>o;o++)o<this._shopItems.length?n=this._shopItems[o]:(n=new MysteriousShopItem,this._view.showListGrp.addChild(n),this._shopItems.push(n)),n.show(t.goods[o])}else Notice.showBottomCenterMessage(e.info+"")},t.prototype.hide=function(){e.prototype.hide.call(this),CommomBtn.btnClick(this._view.closeBtn,this.onRemoveSmshop,this),CommomBtn.btnClick(this._view.gotoShop,this.onGotoShop,this);for(var t=0;t<this._shopItems.length;t++)this._shopItems[t].hide()},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){for(var t=0;t<this._shopItems.length;t++)this._shopItems[t]&&(this._shopItems[t].dispose(),this._shopItems[t]=void 0);this._shopItems=void 0,this._view&&(this._view.dispose(),this._view=void 0),e.prototype.dispose.call(this)},t}(BasePanel);__reflect(MysteriousShop.prototype,"MysteriousShop");var ShopPanel=function(e){function t(){var t=e.call(this)||this;return t.goldListData=[],t.diamondsListData=[],t.giftpcakListData=[],t.xiangouListData=[],t.limitListData=[],t.isBack=!1,t.select=0,t}return __extends(t,e),t.prototype.init=function(){this._view=new ShopUI,this.addChild(this._view);var e=App.data.game2Center.DataCenter.Shop,t=e.tools;this.goldListData=e.golds,this.diamondsListData=e.diamonds,this.giftpcakListData=e.giftpcak,this.limitListData=e.limitpack,this._items=[];for(var i=0;i<t.length;i++){var n=new DaojuListItem;n.setData(t[i]),n.setImg(t[i].pic),n.setGold(t[i].price),n.setEName(t[i].ename),n.setCName(t[i].cname),n.setMiaoShu(t[i].des,t[i].quantity),n.setBuyLimit(t[i].is_limit,t[i].buy_times,t[i].left_times),this._view.shopViewStack.getChildAt(4).addChild(n),this._items.push(n)}for(var i=0;i<this.goldListData.length;i++){var n=new ShopGoldListItem;n.updateCallBack=new FunctionVO(this.updateCallBack,this),n.setData(this.goldListData[i]),this._view.shopViewStack.getChildAt(3).addChild(n),this._items.push(n)}for(var i=0;i<this.diamondsListData.length;i++){var n=new ShopDiamondsListItem;n.updateCallBack=new FunctionVO(this.updateCallBack,this),n.setData(this.diamondsListData[i]),n.setFirstPay(this.diamondsListData[i].first_pay),n.x=414*i+48,n.y=20,this._view.shopViewStack.getChildAt(2).addChild(n),this._items.push(n)}for(var i=0;i<this.limitListData.length;i++){var n=new ShopXiangouListItem;n.updateCallBack=new FunctionVO(this.updateCallBack,this),n.setData(this.limitListData[i]),n.x=414*i+48,n.y=20,this._view.shopViewStack.getChildAt(0).addChild(n),this._items.push(n)}for(var i=0;i<this.giftpcakListData.length;i++){var n=new ShopXiangouListItem;n.updateCallBack=new FunctionVO(this.updateCallBack,this),n.setData(this.giftpcakListData[i]),n.x=414*i+48,n.y=20,this._view.shopViewStack.getChildAt(1).addChild(n),this._items.push(n)}this.setGoldText(App.data.game2Center.DataCenter.UserInfo.gold),this.setDiaMondText(App.data.game2Center.DataCenter.UserInfo.diamond),this.setXinText(App.data.game2Center.DataCenter.UserInfo.hearts,App.data.game2Center.DataCenter.ConfigInfo.hearts)},t.prototype.show=function(t){e.prototype.show.call(this,t),null!=t&&(this.select=t,this._view.shopViewStack.selectedIndex=this.select,this.setRadioBtn(this.select)),this.setGoldText(App.data.game2Center.DataCenter.UserInfo.gold),this.setDiaMondText(App.data.game2Center.DataCenter.UserInfo.diamond),this.setXinText(App.data.game2Center.DataCenter.UserInfo.hearts,App.data.game2Center.DataCenter.ConfigInfo.hearts),this._view.xiangouScroller.viewport.scrollH=0,this._view.chaozhiScroller.viewport.scrollH=0,this._view.zhuanshiScroller.viewport.scrollH=0,this._view.goldScroller.viewport.scrollH=0,this._view.daojuScroller.viewport.scrollH=0,this._dispatcher.addEventListener(eui.UIEvent.CHANGE,this.changeViewStack,this,this._view.xiangouRadioBtn.group),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goldGroup1Touch,this,this._view.goldGroup1),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.diamondGroup1Touch,this,this._view.diamondGroup1),CommomBtn.btnClick(this._view.backBtn,this.close,this,2),this._dispatcher.addEventListener(EventConst.payBack,this.payback,this),this._dispatcher.addEventListener(EventConst.UPDATE_FIRST_PAY,this.onUpdateFirstPay,this),this._dispatcher.addEventListener(EventConst.UPDATE_LEFT_TIMES,this.onUpdateLeftTimes,this),this._dispatcher.addEventListener(EventConst.TURN_DIAMOND_PAGE,this.onTurnDiamondPage,this),this._dispatcher.addEventListener(EventConst.UPDATE_SIWEI,this.onUpdateSiwei,this),this._dispatcher.addEventListener(EventConst.UPDATE_SHOP_GOLD,this.setGoldText,this);for(var i=0;i<this._items.length;i++)this._items[i]&&this._items[i].show()},t.prototype.hide=function(){if(e.prototype.hide.call(this),this._items)for(var t=0;t<this._items.length;t++)this._items[t]&&this._items[t].hide();CommomBtn.removeClick(this._view.backBtn,this.close,this)},t.prototype.onUpdateSiwei=function(){this.setGoldText(App.data.game2Center.DataCenter.UserInfo.gold),this.setDiaMondText(App.data.game2Center.DataCenter.UserInfo.diamond),this.setXinText(App.data.game2Center.DataCenter.UserInfo.hearts,App.data.game2Center.DataCenter.ConfigInfo.hearts)},t.prototype.onUpdateLeftTimes=function(e){for(var t=e.id,i=e.left_times,n=this._view.daojuGroup.numChildren,o=0;n>o;o++){var a=this._view.daojuGroup.getChildAt(o);a.recData.id==t&&a.recData.is_limit&&(a.recData.left_times=i,a.setBuyLimit(!0,a.recData.buy_times,a.recData.left_times))}},t.prototype.onTurnDiamondPage=function(){this._view.shopViewStack.selectedIndex=2,this.setRadioBtn(2)},t.prototype.onUpdateFirstPay=function(){for(var e=App.data.game2Center.DataCenter.Shop.diamonds,t=e.length,i=this._view.zhuanshiGroup.numChildren,n=0;i>n;n++)for(var o=this._view.zhuanshiGroup.getChildAt(n),a=0;t>a;a++){var s=e[a];o.transData.id==s.id&&o.setFirstPay(s.first_pay)}},t.prototype.updateCallBack=function(){this.setXinText(App.data.game2Center.DataCenter.UserInfo.hearts,App.data.game2Center.DataCenter.ConfigInfo.hearts),this.setGoldText(App.data.game2Center.DataCenter.UserInfo.gold),this.setDiaMondText(App.data.game2Center.DataCenter.UserInfo.diamond)},t.prototype.changeViewStack=function(e){var t=e.target;this._view.shopViewStack.selectedIndex=t.selectedValue,GameLog.log("g",t.selectedValue,"viewstack"+this._view.shopViewStack.selectedIndex),App.sound.playSoundSwitchClient1(SoundManager.page_switch)},t.prototype.setGoldText=function(e){this._view.goldLabel.text=e+""},t.prototype.setDiaMondText=function(e){this._view.diamendLabel.text=e+""},t.prototype.setRadioBtn=function(e){switch(e){case 0:this._view.xiangouRadioBtn.selected=!0,this._view.goumaiRadioBtn.selected=!1,this._view.goldRadioBtn.selected=!1,this._view.diamontRadioBtn.selected=!1,this._view.daojuRadioBtn.selected=!1;break;case 1:this._view.xiangouRadioBtn.selected=!1,this._view.goumaiRadioBtn.selected=!0,this._view.goldRadioBtn.selected=!1,this._view.diamontRadioBtn.selected=!1,this._view.daojuRadioBtn.selected=!1;break;case 2:this._view.xiangouRadioBtn.selected=!1,this._view.goumaiRadioBtn.selected=!1,this._view.goldRadioBtn.selected=!1,this._view.diamontRadioBtn.selected=!0,this._view.daojuRadioBtn.selected=!1;break;case 3:this._view.xiangouRadioBtn.selected=!1,this._view.goumaiRadioBtn.selected=!1,this._view.goldRadioBtn.selected=!0,this._view.diamontRadioBtn.selected=!1,this._view.daojuRadioBtn.selected=!1;break;case 4:this._view.xiangouRadioBtn.selected=!1,this._view.goumaiRadioBtn.selected=!1,this._view.goldRadioBtn.selected=!1,this._view.diamontRadioBtn.selected=!1,this._view.daojuRadioBtn.selected=!0}},t.prototype.setXinText=function(e,t){t&&""!=t&&this._view.heartPlugin.setJindu(e,t)},t.prototype.goldGroup1Touch=function(){this._view.shopViewStack.selectedIndex=1,this.setRadioBtn(1)},t.prototype.diamondGroup1Touch=function(){this._view.shopViewStack.selectedIndex=2,this.setRadioBtn(2)},t.prototype.close=function(){this.isBack?(this.closePanel(),this.isBack=!1,PanelManager.isShowing(PanelRegister.G2_BagsPanel)&&this.getBags()):(this.closePanel(),App.dispatcher.dispatchEvent(G2_GameSceneEvent.SHOW_SCENE_ANIMATION))},t.prototype.getBags=function(){ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.bags,{},new FunctionVO(this.dataBack,this))},t.prototype.dataBack=function(e){200==e.code&&(App.data.game2Center.DataCenter.Bags=e.data,App.dispatcher.dispatchEvent(EventConst.INIT_BAG))},t.prototype.payback=function(){this.setXinText(App.data.game2Center.DataCenter.UserInfo.hearts,App.data.game2Center.DataCenter.ConfigInfo.hearts),this.setGoldText(App.data.game2Center.DataCenter.UserInfo.gold),this.setDiaMondText(App.data.game2Center.DataCenter.UserInfo.diamond)},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){if(this._items){for(var t=0;t<this._items.length;t++)this._items[t]&&this._items[t].dispose();this._items=void 0}this._view&&(this._view.dispose(),this._view=void 0),e.prototype.dispose.call(this)},t}(BasePanel);__reflect(ShopPanel.prototype,"ShopPanel");var ShopDiamondPanel=function(e){function t(){var t=e.call(this)||this;return t.diamondsListData=[],t}return __extends(t,e),t.prototype.init=function(){this._view=new ShopDiamondPanelUI,this.addChild(this._view),this._view.diamondGrp.removeChildren();var e=App.data.game2Center.DataCenter.Shop;this.diamondsListData=e.diamonds,this._items=[];for(var t=0;t<this.diamondsListData.length;t++){var i=new ShopDiamondItem;i.setData(this.diamondsListData[t]),i.setFirstPay(this.diamondsListData[t].first_pay),this._view.diamondGrp.addChild(i),this._items.push(i)}this.setGoldText(App.data.game2Center.DataCenter.UserInfo.gold),this.setDiaMondText(App.data.game2Center.DataCenter.UserInfo.diamond),this.setXinText(App.data.game2Center.DataCenter.UserInfo.hearts,App.data.game2Center.DataCenter.ConfigInfo.hearts)
},t.prototype.show=function(t){e.prototype.show.call(this,t),this.setGoldText(App.data.game2Center.DataCenter.UserInfo.gold),this.setDiaMondText(App.data.game2Center.DataCenter.UserInfo.diamond),this.setXinText(App.data.game2Center.DataCenter.UserInfo.hearts,App.data.game2Center.DataCenter.ConfigInfo.hearts),CommomBtn.btnClick(this._view.backBtn,this.close,this,2),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGold,this,this._view.goldGroup),this._dispatcher.addEventListener(EventConst.payBack,this.payback,this),this._dispatcher.addEventListener(EventConst.UPDATE_FIRST_PAY,this.onUpdateFirstPay,this),this._dispatcher.addEventListener(EventConst.UPDATE_SIWEI,this.onUpdateSiwei,this);for(var i=0;i<this._items.length;i++)this._items[i]&&this._items[i].show()},t.prototype.hide=function(){e.prototype.hide.call(this),this.clearItems(),this._dispatcher.dispatchEvent(G2_GameSceneEvent.SHOW_SCENE_ANIMATION)},t.prototype.clearItems=function(){if(this._items)for(var e=0;e<this._items.length;e++)this._items[e]&&this._items[e].hide()},t.prototype.onUpdateFirstPay=function(){for(var e=App.data.game2Center.DataCenter.Shop.diamonds,t=e.length,i=this._view.diamondGrp.numChildren,n=0;i>n;n++)for(var o=this._view.diamondGrp.getChildAt(n),a=0;t>a;a++){var s=e[a];o.transData.id==s.id&&o.setFirstPay(s.first_pay)}},t.prototype.onUpdateSiwei=function(){this.setGoldText(App.data.game2Center.DataCenter.UserInfo.gold),this.setDiaMondText(App.data.game2Center.DataCenter.UserInfo.diamond),this.setXinText(App.data.game2Center.DataCenter.UserInfo.hearts,App.data.game2Center.DataCenter.ConfigInfo.hearts)},t.prototype.onGold=function(e){PanelOpenManager.openPanel(EnumPanelID.G2_ShopGoldPanel)},t.prototype.setGoldText=function(e){this._view.goldLabel.text=e+""},t.prototype.setDiaMondText=function(e){this._view.diamondLabel.text=e+""},t.prototype.setXinText=function(e,t){t&&""!=t&&this._view.heartPlugin.setJindu(e,t)},t.prototype.payback=function(){this.setXinText(App.data.game2Center.DataCenter.UserInfo.hearts,App.data.game2Center.DataCenter.ConfigInfo.hearts),this.setGoldText(App.data.game2Center.DataCenter.UserInfo.gold),this.setDiaMondText(App.data.game2Center.DataCenter.UserInfo.diamond)},t.prototype.close=function(){this.closePanel()},t.prototype.dispose=function(){if(this._items){for(var t=0;t<this._items.length;t++)this._items[t]&&this._items[t].dispose();this._items=void 0}this._view&&(this._view.dispose(),this._view=void 0),e.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t}(BasePanel);__reflect(ShopDiamondPanel.prototype,"ShopDiamondPanel");var ShopGiftToolPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this._view=new ShopGiftToolPanelUI,this.addChild(this._view),this.radioList=[this._view.radioBtn0,this._view.radioBtn1],this._view.shopToolPart.init(),this._view.shopGiftPart.init(),this.changeView()},t.prototype.changeView=function(){DeviceUtil.isIPhoneX&&(this._view.viewStack.left+=35,this._view.viewStack.scaleY=.9)},t.prototype.show=function(t){if(e.prototype.show.call(this,t),CommomBtn.btnClick(this._view.backBtn,this.onCloseTouch,this),this.setGoldText(App.data.game2Center.DataCenter.UserInfo.gold),this.setDiaMondText(App.data.game2Center.DataCenter.UserInfo.diamond),this._dispatcher.addEventListener(eui.UIEvent.CHANGE,this.onPageChange,this,this._view.radioBtn0.group),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onDiamond,this,this._view.diamondGroup),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGold,this,this._view.goldGroup),this._dispatcher.addEventListener(EventConst.payBack,this.payback,this),this._dispatcher.addEventListener(EventConst.UPDATE_SIWEI,this.onUpdateSiwei,this),this._dispatcher.addEventListener(EventConst.UPDATE_SHOP_GIFT_GOLD,this.setGoldText,this),this._dispatcher.addEventListener(G2_GameSceneEvent.CHANGEBUYLIMIT,this.changeBuyLimit,this),this._dispatcher.addEventListener(G2_GameSceneEvent.SETBUYPART,this.setbuypart,this),this._dispatcher.addEventListener(G2_GameSceneEvent.SETGOLDTEXT,this.setGoldText,this),this._dispatcher.addEventListener(G2_GameSceneEvent.SETDIAMONDTEXT,this.setDiaMondText,this),t){for(var i=0;i<this._view.radioGrp.numChildren;i++){var n=this._view.radioGrp.getElementAt(i);i==t?n.selected=!0:n.selected=!1}this._view.viewStack.selectedIndex=1}else{for(var i=0;i<this._view.radioGrp.numChildren;i++){var n=this._view.radioGrp.getElementAt(i);0==i?n.selected=!0:n.selected=!1}this._view.viewStack.selectedIndex=0}},t.prototype.hide=function(){e.prototype.hide.call(this),CommomBtn.removeClick(this._view.backBtn,this.onCloseTouch,this),App.dispatcher.dispatchEvent(G2_GameSceneEvent.SHOW_SCENE_ANIMATION)},t.prototype.setbuypart=function(e,t){0==t?this._view.shopToolPart.setBuyPart(e):this._view.shopGiftPart.setBuyPart(e)},t.prototype.changeBuyLimit=function(e,t){this._view.shopToolPart.changeBuyLimit(e,t)},t.prototype.onGold=function(e){PanelOpenManager.openPanel(EnumPanelID.G2_ShopGoldPanel)},t.prototype.onDiamond=function(e){PanelOpenManager.openPanel(EnumPanelID.G2_ShopDiamondPanel,null,!1)},t.prototype.onPageChange=function(e){App.sound.playSoundSwitchClient1(SoundManager.button);var t=e.target;GameLog.log(t.selectedValue),this.switchPage(t.selectedValue)},t.prototype.switchPage=function(e){this.radioList[e].parent?(this._view.radioBtn0.group.selectedValue=e,this._view.viewStack.selectedIndex=e):this.switchFirstPage()},t.prototype.switchFirstPage=function(){this._view.validateNow();for(var e=this.radioList.length,t=0;e>t;t++)if(this.radioList[t].parent){this.switchPage(t);break}},t.prototype.payback=function(){this.setGoldText(App.data.game2Center.DataCenter.UserInfo.gold),this.setDiaMondText(App.data.game2Center.DataCenter.UserInfo.diamond)},t.prototype.onUpdateSiwei=function(){this.setGoldText(App.data.game2Center.DataCenter.UserInfo.gold),this.setDiaMondText(App.data.game2Center.DataCenter.UserInfo.diamond)},t.prototype.setGoldText=function(e){this._view.goldLabel.text=e+""},t.prototype.setDiaMondText=function(e){this._view.diamondLabel.text=e+""},t.prototype.onCloseTouch=function(){this.closePanel()},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._view&&(this._view.dispose(),this._view=void 0),e.prototype.dispose.call(this)},t}(BasePanel);__reflect(ShopGiftToolPanel.prototype,"ShopGiftToolPanel");var ShopGoldPanel=function(e){function t(){var t=e.call(this)||this;return t.goldListData=[],t}return __extends(t,e),t.prototype.init=function(){this._view=new ShopGoldPanelUI,this.addChild(this._view),this._view.goldGrp.removeChildren();var e=App.data.game2Center.DataCenter.Shop;this.goldListData=e.golds;for(var t=0;t<this.goldListData.length;t++){var i=new ShopGoldItem;i.setData(this.goldListData[t]),this._view.goldGrp.addChild(i)}this.setGoldText(App.data.game2Center.DataCenter.UserInfo.gold),this.setDiaMondText(App.data.game2Center.DataCenter.UserInfo.diamond),this.setXinText(App.data.game2Center.DataCenter.UserInfo.hearts,App.data.game2Center.DataCenter.ConfigInfo.hearts)},t.prototype.show=function(t){e.prototype.show.call(this,t),this.setGoldText(App.data.game2Center.DataCenter.UserInfo.gold),this.setDiaMondText(App.data.game2Center.DataCenter.UserInfo.diamond),this.setXinText(App.data.game2Center.DataCenter.UserInfo.hearts,App.data.game2Center.DataCenter.ConfigInfo.hearts),CommomBtn.btnClick(this._view.backBtn,this.close,this,2),this._dispatcher.addEventListener(EventConst.payBack,this.payback,this),this._dispatcher.addEventListener(EventConst.UPDATE_SIWEI,this.onUpdateSiwei,this),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onDiamond,this,this._view.diamondGroup)},t.prototype.hide=function(){e.prototype.hide.call(this),App.dispatcher.dispatchEvent(G2_GameSceneEvent.SHOW_SCENE_ANIMATION),CommomBtn.removeClick(this._view.backBtn,this.close,this)},t.prototype.onDiamond=function(e){PanelOpenManager.openPanel(EnumPanelID.G2_ShopDiamondPanel,null,!1)},t.prototype.onUpdateSiwei=function(){this.setGoldText(App.data.game2Center.DataCenter.UserInfo.gold),this.setDiaMondText(App.data.game2Center.DataCenter.UserInfo.diamond),this.setXinText(App.data.game2Center.DataCenter.UserInfo.hearts,App.data.game2Center.DataCenter.ConfigInfo.hearts)},t.prototype.setGoldText=function(e){this._view.goldLabel.text=e+""},t.prototype.setDiaMondText=function(e){this._view.diamondLabel.text=e+""},t.prototype.setXinText=function(e,t){t&&""!=t&&this._view.heartPlugin.setJindu(e,t)},t.prototype.payback=function(){this.setXinText(App.data.game2Center.DataCenter.UserInfo.hearts,App.data.game2Center.DataCenter.ConfigInfo.hearts),this.setGoldText(App.data.game2Center.DataCenter.UserInfo.gold),this.setDiaMondText(App.data.game2Center.DataCenter.UserInfo.diamond)},t.prototype.close=function(){this.closePanel()},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){for(var t,i=0;i<this._view.goldGrp.numChildren;i++)t=this._view.goldGrp.getChildAt(i),t&&(t.dispose(),t=void 0);this._view&&(this._view.dispose(),this._view=void 0),e.prototype.dispose.call(this)},t}(BasePanel);__reflect(ShopGoldPanel.prototype,"ShopGoldPanel");var WeiboPanel=function(e){function t(){var t=e.call(this)||this;return t.MAX_ITEM_COUNT=4,t.needNext=!1,t}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),this._view=new WeiBoPanelUI,this.addChild(this._view),this.zanHandY=this._view.zanHand.y,this.pinHandY=this._view.pinHand.y,this.ac=new eui.ArrayCollection,this._view.weiboList.useVirtualLayout=!1,this._view.weiboList.itemRenderer=WeiboListItem,this._view.weiboList.dataProvider=this.ac},t.prototype.show=function(t){e.prototype.show.call(this,t),this._view.selectGroup.visible=!1,this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchSelected,this,this._view.selectGroup),this._dispatcher.addEventListener(eui.UIEvent.CHANGE,this.onMoveScroll,this,this._view.weiboScoller),this._dispatcher.addEventListener(eui.UIEvent.CHANGE_END,this.onMoveScrollEnd,this,this._view.weiboScoller),this.initView(),this._view.headImg.mask=this._view.maskImg,this.setHeart(App.data.game2Center.DataCenter.UserInfo.hearts,App.data.game2Center.DataCenter.ConfigInfo.hearts),CommomBtn.btnClick(this._view.backBtn,this.closePanel,this,2),this.setZanGuide()},t.prototype.hide=function(){e.prototype.hide.call(this),CommomBtn.removeClick(this._view.backBtn,this.closePanel,this),App.dispatcher.dispatchEvent(G2_GameSceneEvent.SHOW_SCENE_ANIMATION),this.ac.removeAll()},t.prototype.dispose=function(){this.ac=null,this._view&&(this._view.remove(),this._view=null)},t.prototype.onTouchSelected=function(e){this._view.selectGroup.visible=!1},t.prototype.callBackFunction=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];1==e?this.showSelect.apply(this,t):2==e?this.hideSelect():3==e&&this.setHeart.apply(this,t)},t.prototype.initView=function(){this.allWeiboList=[];var e=App.data.game2Center.DataCenter.Weibo;if(e){var t=e.data;this._view.girlNeme.text=e.name,this._view.headImg.source=e.weibo_head,this.allWeiboList=t}this.count=Math.ceil(this.allWeiboList.length/this.MAX_ITEM_COUNT),this.page=0;var i=this.getCurrentPage();this.ac.source=i,GameLog.log("页数:"+this.page+"/"+this.count+","+this.ac.length),this.page++,App.timer.doFrameOnce(this,1,this.onDelayRender)},t.prototype.getCurrentPage=function(){return null==this.allWeiboList?null:this.page<this.count-1?this.allWeiboList.slice(this.page*this.MAX_ITEM_COUNT,(this.page+1)*this.MAX_ITEM_COUNT):this.page==this.count-1?this.allWeiboList.slice(this.page*this.MAX_ITEM_COUNT):null},t.prototype.onMoveScroll=function(e){!this.needNext&&this._view.weiboList.scrollV>=this._view.weiboList.contentHeight-this._view.weiboScoller.height&&(this.needNext=!0)},t.prototype.onMoveScrollEnd=function(e){if(this.needNext&&(this.needNext=!1,this.page<=this.count-1)){var t=this.getCurrentPage();if(this.page++,t&&t.length>0)for(var i=0,n=t.length;n>i;i++)this.ac.addItem(t[i]);App.timer.doFrameOnce(this,1,this.onDelayRender)}},t.prototype.onDelayRender=function(){GameLog.log("总对象数:"+this._view.weiboList.numElements);for(var e,t=0,i=this._view.weiboList.numElements;i>t;t++)e=this._view.weiboList.getVirtualElementAt(t),e.callBackFunction=new FunctionVO(this.callBackFunction,this);ScrollerCenter.hideVerticalScrollBar(this._view.weiboScoller)},t.prototype.setHeart=function(e,t){t&&""!=t&&this._view.heartPlugin.setJindu(e,t)},t.prototype.showSelect=function(e,t,i){this._view.selectGroup.visible=!0,this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.hideSelect,this,this._view.selectBg),this._view.selectList.showMsg(e),this._view.selectList.setOK(t,i)},t.prototype.hideSelect=function(){this._view.selectGroup.visible=!1},t.prototype.setZanGuide=function(){App.data.game2Center.DataCenter.weiboGuide&&(this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.zanGuideTouch,this,this._view.zanCricle),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.pinGuideTouch,this,this._view.pinCricle),this._view.yindaoZan.visible=!0,egret.Tween.get(this._view.zanHand,{loop:!0}).set({y:this.zanHandY}).to({y:this.zanHandY-40},600).to({y:this.zanHandY},800).wait(100))},t.prototype.zanGuideTouch=function(){this._view.weiboList.getVirtualElementAt(0).zanTouch(),this._view.yindaoZan.visible=!1,egret.Tween.removeTweens(this._view.zanHand),this.setPinGuide()},t.prototype.setPinGuide=function(){this._view.yindaoPin.visible=!0,egret.Tween.get(this._view.pinHand,{loop:!0}).set({y:this.pinHandY}).to({y:this.pinHandY-40},600).to({y:this.pinHandY},800).wait(100)},t.prototype.pinGuideTouch=function(){this._view.weiboList.getVirtualElementAt(0).pinlunTouch(),this._view.yindaoPin.visible=!1,egret.Tween.removeTweens(this._view.pinHand),App.data.game2Center.DataCenter.weiboGuide=!1;var e={};ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.guideDone,e,new FunctionVO(this.finishGuideBack,this))},t.prototype.finishGuideBack=function(e){200==e.code?(App.data.game2Center.DataCenter.guide.fill_nick_name=e.data.fill_nick_name,App.data.game2Center.DataCenter.guide.emph_zone=e.data.emph_zone,App.data.game2Center.DataCenter.guide.video=e.data.video):Notice.showBottomCenterMessage(""+e.info)},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t}(BasePanel);__reflect(WeiboPanel.prototype,"WeiboPanel");var WeixinPanel=function(e){function t(){var t=e.call(this)||this;return t.showGold=!1,t.chatLen=0,t.bSending=!1,t.bOpenLiBao=!0,t}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),this._view=new WeixinPanelUI,this.addChild(this._view),this._view.yindaoBack.visible=!1,this._view.yindaoGroup.visible=!1,this._view.yindaoHeart.visible=!1,this.handY=this._view.weixinHand.y,this.handYH=this._view.dianhuaHand0.y,this.handYB=this._view.backHand.y,this._view.grilImg.mask=this._view.maskImg,App.data.game2Center.DataCenter.Wechat&&(this._view.grilImg.source=App.data.game2Center.DataCenter.Wechat.head)},t.prototype.show=function(t){e.prototype.show.call(this,t),this.ac=new eui.ArrayCollection,this._view.messageList.useVirtualLayout=!1,this._view.messageList.dataProvider=this.ac,this._view.messageList.itemRenderer=MessageListItem,this._view.grilname.text=App.data.game2Center.DataCenter.ConfigInfo.girl_name,this.bOpenLiBao=!0,this.openLibao(),this.hideCDImg(),this.bFirstCD=!0,this.hideSelect(),this.setGuide(),this.getHistory(),this.addHistoryChat(),this.setScolltoEnd(),this.setConfig(),App.data.game2Center.DataCenter.UserInfo.tel_main?0==this.isWaitingReply?(this._view.sendMessage.showGold(!1),this.showGold=!1,this.sendnext()):(this._view.sendMessage.showGold(!0),App.timer.serverTimeEnd(this,this.timerFunc,App.data.game2Center.DataCenter.weixinWaitTimeEnd),this.showCDImg()):this._view.sendMessage.showInput(!1),this._view.sendMessage.send.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sendMessageTouch,this),this._view.sendMessage.labelGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.labelTouch,this),this._view.sendMessage.goldGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goldTouch,this),this._view.yd_weixinImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.yd_weixinImgTouch,this),this._view.yd_dianhuaImg0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.yd_dianhuaImgTouchHeart,this),this._view.ydsend.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ydsendTouch,this),this._view.goldGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goldGroupTouch,this),this._view.messageScroller.addEventListener(eui.UIEvent.CHANGE_END,this.msgScrollChangeEnd,this),CommomBtn.btnClick(this._view.backBtn,this.backTouch,this,2),this._view.backCircle.addEventListener(egret.TouchEvent.TOUCH_TAP,this.backGuideTouch,this),App.dispatcher.addEventListener(EventConst.UPDATE_SIWEI,this.updateSiwei,this),App.dispatcher.addEventListener(EventConst.UPDATE_LIBAO,this.updateSiwei,this)},t.prototype.hide=function(){e.prototype.hide.call(this),this._view.sendMessage.send.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.sendMessageTouch,this),this._view.sendMessage.labelGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.labelTouch,this),this._view.sendMessage.goldGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.goldTouch,this),this._view.yd_weixinImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.yd_weixinImgTouch,this),this._view.yd_dianhuaImg0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.yd_dianhuaImgTouchHeart,this),this._view.ydsend.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ydsendTouch,this),this._view.goldGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.goldGroupTouch,this),this._view.messageScroller.removeEventListener(eui.UIEvent.CHANGE_END,this.msgScrollChangeEnd,this),CommomBtn.removeClick(this._view.backBtn,this.backTouch,this),this.removeTimer(),this.stopBackBtnAnim(),this.hideCDImg(),App.dispatcher.dispatchEvent(G2_GameSceneEvent.SHOW_SCENE_ANIMATION)},t.prototype.updateSiwei=function(){this.setConfig()},t.prototype.yd_weixinImgTouch=function(){var e={};ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.guideDone,e,new FunctionVO(this.finishGuideBack,this))},t.prototype.finishGuideBack=function(e){200==e.code?(this._view.yindaoGroup.visible=!1,egret.Tween.removeTweens(this._view.weixinHand),App.data.game2Center.DataCenter.guide.fill_nick_name=e.data.fill_nick_name,App.data.game2Center.DataCenter.guide.emph_zone=e.data.emph_zone,App.data.game2Center.DataCenter.guide.video=e.data.video,2==App.data.game2Center.DataCenter.weixinSendMsg.length&&(this._view.sendMessage.showInput(!1),this.showSelect(App.data.game2Center.DataCenter.weixinSendMsg)),3==App.data.game2Center.DataCenter.weixinSendMsg.length&&(this._view.sendMessage.showInput(!1),this.showSelect(App.data.game2Center.DataCenter.weixinSendMsg))):Notice.showBottomCenterMessage(""+e.info)},t.prototype.ydsendTouch=function(){this.sendMessageTouch()},t.prototype.backTouch=function(){this._view.sendMessage.setText(""),this.hideSelect(),this._view.sendMessage.showInput(!0),this.closePanel()},t.prototype.goldGroupTouch=function(){PanelOpenManager.openPanel(EnumPanelID.G2_ShopGoldPanel)},t.prototype.msgScrollChangeEnd=function(){this._view.messageScroller.viewport.scrollV<=200&&this.addHistoryChat()},t.prototype.addHistoryChat=function(){var e=this._view.messageList.dataProvider.length,t=this.history.length;if(t>e){var i=this._view.messageScroller.viewport.contentHeight,n=t-e,o=n-10;o=0>o?0:o;for(var a=this.history.slice(o,n),s=a.length,r=s-1;r>=0;r--)this.ac.addItemAt(a[r],0);this._view.messageScroller.viewport.validateNow(),this._view.messageScroller.viewport.scrollV=this._view.messageScroller.viewport.contentHeight-i}ScrollerCenter.hideVerticalScrollBar(this._view.messageScroller)},t.prototype.getHistory=function(){for(var e=App.data.game2Center.DataCenter.Wechat,t=[],i=e.history,n=0;n<i.length;n++){var o=ProtocolHttpData.wechat;o=i[n];for(var a=0;a<o.dialog.length;a++){var s=new Object,r=ProtocolHttpData.dialog;r=o.dialog[a],s.msg=r,t.push(s)}}return 0==this.isWaitingReply&&App.data.game2Center.DataCenter.UserInfo.weChatFinish&&(App.data.game2Center.DataCenter.weixinSendMsg=e.nextwechat),this.history=t,t},t.prototype.sendnext=function(){if(GameLog.log("sendnext:",App.data.game2Center.DataCenter.weixinSendMsg,App.data.game2Center.DataCenter.weixinSendMsg.length),1==App.data.game2Center.DataCenter.weixinSendMsg.length){var e=App.data.game2Center.DataCenter.weixinSendMsg[0];if(-1==e.reply)return void this._view.sendMessage.showInput(!1);this.bSending=!0,this._view.sendMessage.send.enabled=!1;var t=ProtocolHttp.chat;t.id=e.id,t.pid=e.pid,t.sid=e.sid,t.instant=0,ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.chat,t,new FunctionVO(this.sendnextBack,this))}else App.data.game2Center.DataCenter.weixinSendMsg.length>1?this.showGold?(this._view.sendMessage.showGold(!0),this._view.sendMessage.showInput(!0)):(this._view.sendMessage.showGold(!1),this._view.sendMessage.showInput(!0)):0==App.data.game2Center.DataCenter.weixinSendMsg.length&&this._view.sendMessage.showInput(!1)},t.prototype.sendnextBack=function(e){if(this.showGold=!1,200==e.code)if(this._view.sendMessage.showGold(!1),e.data.chat&&e.data.chat.length>0){var t=App.data.game2Center.DataCenter.weixinSendMsg[0],i=new Object;i.msg=t,this.refresh(i),App.data.game2Center.DataCenter.weixinSendMsg=e.data.chat,App.data.game2Center.DataCenter.Wechat.nextwechat=e.data.chat,App.data.game2Center.DataCenter.UserInfo.nextWechat=!0,App.data.game2Center.DataCenter.UserInfo.weChatFinish=!1,this._view.sendMessage.setGoldText(e.data.chat[0].instant_gold)}else{var t=App.data.game2Center.DataCenter.weixinSendMsg[0],i=new Object;i.msg=t,this.refresh(i),App.data.game2Center.DataCenter.UserInfo.nextWechat=!1,App.data.game2Center.DataCenter.UserInfo.weChatFinish=!0,App.data.game2Center.DataCenter.Wechat.nextwechat=[],this._view.sendMessage.showInput(!1),App.data.game2Center.DataCenter.UserInfo.wechat_main=!0,this.playBackBtnAnim(),this.setBackGuide()}},t.prototype.sendMessageTouch=function(){if(App.sound.playSoundSwitchClient1(SoundManager.button),App.data.game2Center.DataCenter.weixinMsgType&&App.data.game2Center.DataCenter.weixinMsgType.id&&0==this.bSending){this.bSending=!0,this._view.sendMessage.send.enabled=!1;var e=ProtocolHttp.chat;e.id=App.data.game2Center.DataCenter.weixinMsgType.id,e.pid=App.data.game2Center.DataCenter.weixinMsgType.pid,e.sid=App.data.game2Center.DataCenter.weixinMsgType.sid,e.instant=0,ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.chat,e,new FunctionVO(this.sendMsgBack,this))}else Notice.showBottomCenterMessage("点击左侧输入框，选择回复内容")},t.prototype.sendMsgBack=function(e){if(this.showGold=!1,200==e.code){this._view.sendMessage.setText(" ");var t=new Object;t.msg=App.data.game2Center.DataCenter.weixinMsgType,this.refresh(t);var i=e.data.hearts;0!=i&&1==e.data.chat.length&&(TipsHeat.showHeat(i),App.data.game2Center.DataCenter.UserInfo.hearts+=i,this.setConfig(),this._view.sendMessage.setGoldText(e.data.chat[0].instant_gold));var n=e.data.chat;this.waitnextmsg=e.data.chat,n&&1==n.length?(App.data.game2Center.DataCenter.weixinSendMsg=n,this.waitMsg(n[0])):0==n.length&&(App.data.game2Center.DataCenter.weixinSendMsg=[],this._view.sendMessage.showInput(!1)),this.setHeartGuide()}},t.prototype.waitMsg=function(e){var t=e.wait;0==t?App.timer.doTimeOnce(this,1e3,this.dealySendNext):(this._view.sendMessage.showGold(!0),this.removeTimer(),0==Config.isRelease&&(t=5),App.data.game2Center.DataCenter.weixinWaitTimeEnd=ServerTime.serverTime+t,App.timer.serverTimeEnd(this,this.timerFunc,App.data.game2Center.DataCenter.weixinWaitTimeEnd),this.showCDImg())},t.prototype.dealySendNext=function(){this._view.sendMessage.showGold(!1),this.sendnext()},t.prototype.labelTouch=function(e){GameLog.log("labelTouch:",App.data.game2Center.DataCenter.weixinSendMsg,App.data.game2Center.DataCenter.weixinSendMsg.length),App.data.game2Center.DataCenter.weixinSendMsg.length>=2&&(this._view.sendMessage.showInput(!1),this.showSelect(App.data.game2Center.DataCenter.weixinSendMsg))},t.prototype.selectHandler=function(e){GameLog.log("msgListTouch:",e),this.bSending=!1,this._view.sendMessage.send.enabled=!0,this.hideSelect(),this._view.sendMessage.showInput(!0),this._view.sendMessage.setText(App.data.game2Center.DataCenter.weixinSendMsg[e].says),App.data.game2Center.DataCenter.weixinMsgType=App.data.game2Center.DataCenter.weixinSendMsg[e]},t.prototype.refresh=function(e){if(this.history.push(e),App.data.game2Center.DataCenter.Wechat&&App.data.game2Center.DataCenter.Wechat.history&&App.data.game2Center.DataCenter.Wechat.history.length>0){var t=App.data.game2Center.DataCenter.Wechat.history.length;App.data.game2Center.DataCenter.Wechat.history[t-1].dialog.push(e.msg)}e.msg&&e.msg.says?this.chatLen=e.msg.says.length:this.chatLen=0,this.ac.addItem(e),this.setScolltoEnd1(),App.sound.playSoundSwitchClient1(SoundManager.sent_msg)},t.prototype.setScolltoEnd=function(e){void 0===e&&(e=!0),this._view.messageScroller.validateNow(),App.timer.doTimeOnce(this,100,this.scrollToEnd)},t.prototype.scrollToEnd=function(){this._view.messageScroller.viewport.contentHeight>this._view.messageScroller.height?this._view.messageScroller.viewport.scrollV=this._view.messageScroller.viewport.contentHeight-this._view.messageScroller.height:this._view.messageScroller.viewport.scrollV=0},t.prototype.setScolltoEnd1=function(){App.timer.doTimeOnce(this,50,this.scrollToEnd1)},t.prototype.scrollToEnd1=function(){if(this._view.messageScroller.viewport.contentHeight>this._view.messageScroller.height){var e=Math.floor(this.chatLen/11),t=this._view.messageScroller.viewport.contentHeight-this._view.messageScroller.height+30*e;egret.Tween.get(this._view.messageScroller.viewport).to({scrollV:t},200)}},t.prototype.timerFunc=function(e){e.spuleTime<=0?(this.showGold=!1,this.sendnext(),this.removeTimer()):this.showGold=!0},t.prototype.removeTimer=function(){App.timer.clearTimer(this,this.timerFunc)},t.prototype.setConfig=function(){var e=App.data.game2Center.DataCenter.UserInfo.gold;this._view.goldLabel.text=e+"",this._view.heartPlugin.setJindu(App.data.game2Center.DataCenter.UserInfo.hearts,App.data.game2Center.DataCenter.ConfigInfo.hearts)},t.prototype.goldTouch=function(){GameLog.log("goldTouch"),this.bSending=!0,this._view.sendMessage.send.enabled=!1,this._view.sendMessage.goldGroup.touchEnabled=!1;var e=ProtocolHttp.chat;e.id=this.waitnextmsg[0].id,e.pid=this.waitnextmsg[0].pid,e.sid=this.waitnextmsg[0].sid,e.instant=1,ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.chat,e,new FunctionVO(this.goldTouchBack,this))},t.prototype.goldTouchBack=function(e){if(this.showGold=!1,this._view.sendMessage.goldGroup.touchEnabled=!0,200==e.code)if(GameLog.log("goldTouchBack:",e),this._view.sendMessage.showGold(!1),App.data.game2Center.DataCenter.UserInfo.gold=e.data.gold,this.setConfig(),e.data.chat&&e.data.chat.length>0){var t=App.data.game2Center.DataCenter.weixinSendMsg[0],i=new Object;i.msg=t,this.refresh(i),App.data.game2Center.DataCenter.weixinSendMsg=e.data.chat,this.removeTimer(),App.data.game2Center.DataCenter.Wechat.nextwechat=e.data.chat,App.data.game2Center.DataCenter.UserInfo.nextWechat=!0,App.data.game2Center.DataCenter.UserInfo.weChatFinish=!1}else{var t=App.data.game2Center.DataCenter.weixinSendMsg[0],i=new Object;i.msg=t,this.refresh(i),App.data.game2Center.DataCenter.weixinSendMsg=e.data.chat,this.removeTimer(),App.data.game2Center.DataCenter.UserInfo.nextWechat=!1,App.data.game2Center.DataCenter.UserInfo.weChatFinish=!0,App.data.game2Center.DataCenter.Wechat.nextwechat=[],this._view.sendMessage.showInput(!1),App.data.game2Center.DataCenter.UserInfo.wechat_main=!0,this.playBackBtnAnim()}else 809==e.code&&0==App.data.game2Center.DataCenter.keybuy.miaohui.hasbuy&&1==this.bOpenLiBao&&(this.bOpenLiBao=!1,PanelOpenManager.openPanel(EnumPanelID.G2_LibaomiaohuiPanel)),Notice.showBottomCenterMessage(e.info)},t.prototype.setGuide=function(){App.data.game2Center.DataCenter.weixinGuide&&(this._view.yindaoGroup.visible=!0,egret.Tween.get(this._view.weixinHand,{loop:!0}).set({y:this.handY}).to({y:this.handY-40},600).to({y:this.handY},800).wait(100))},t.prototype.openLibao=function(){var e=Math.floor(Math.random()*App.data.game2Center.DataCenter.UserInfo.randNum)+1;1!=e||App.data.game2Center.DataCenter.keybuy.miaohui.hasbuy||"ZONE_WEIXIN"==App.data.game2Center.DataCenter.guide.emph_zone||PanelOpenManager.openPanel(EnumPanelID.G2_LibaomiaohuiPanel)},Object.defineProperty(t.prototype,"isWaitingReply",{get:function(){return App.data.game2Center.DataCenter.weixinWaitTimeEnd>ServerTime.serverTime},enumerable:!0,configurable:!0}),t.prototype.playBackBtnAnim=function(){egret.Tween.get(this._view.backBtn,{loop:!0}).to({scaleX:1.15,scaleY:1.15},500).to({scaleX:1,scaleY:1},500)},t.prototype.stopBackBtnAnim=function(){this._view.backBtn.scaleX=1,this._view.backBtn.scaleY=1,egret.Tween.removeTweens(this._view.backBtn)},t.prototype.showSelect=function(e){this._view.selectGroup.visible=!0,this._view.selectBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.lookChat,this),this._view.selectList.showMsg(e),this._view.selectList.setOK(this.selectHandler,this)},t.prototype.hideSelect=function(){this._view.selectGroup.visible=!1},t.prototype.lookChat=function(){this.hideSelect(),this.showGold?(this._view.sendMessage.showGold(!0),this._view.sendMessage.showInput(!0)):(this._view.sendMessage.showGold(!1),this._view.sendMessage.showInput(!0))},t.prototype.setHeartGuide=function(){1==this.ac.length&&App.data.game2Center.DataCenter.weixinGuide&&(this._view.yindaoHeart.visible=!0,egret.Tween.get(this._view.dianhuaHand0,{loop:!0}).set({y:this.handYH}).to({y:this.handYH-40},600).to({y:this.handYH},800).wait(100))},t.prototype.yd_dianhuaImgTouchHeart=function(){this._view.yindaoHeart.visible=!1,egret.Tween.removeTweens(this._view.dianhuaHand0),App.data.game2Center.DataCenter.weixinGuide=!1,this.backFlag=!0},t.prototype.setBackGuide=function(){this.backFlag&&(this._view.yindaoBack.visible=!0,egret.Tween.get(this._view.backHand,{loop:!0}).set({y:this.handYB}).to({y:this.handYB+40},600).to({y:this.handYB},800).wait(100))},t.prototype.backGuideTouch=function(){this._view.yindaoBack.visible=!1,App.data.game2Center.DataCenter.weixinGuide=!1,this.backTouch()},t.prototype.showCDImg=function(){1==this.bFirstCD&&0==App.data.game2Center.DataCenter.keybuy.miaohui.hasbuy&&(this.bFirstCD=!1,this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.hideCDImg,this,this),this._view.cdBtn.visible=!0,this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCDBtnTouch,this,this._view.cdBtn))},t.prototype.hideCDImg=function(){this._dispatcher.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.hideCDImg,this,this),this._view.cdBtn.visible=!1,this._dispatcher.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onCDBtnTouch,this,this._view.cdBtn)},t.prototype.onCDBtnTouch=function(e){this.hideCDImg(),this.showLiBao()},t.prototype.showLiBao=function(){0==App.data.game2Center.DataCenter.keybuy.miaohui.hasbuy&&PanelOpenManager.openPanel(EnumPanelID.G2_LibaomiaohuiPanel)},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height
},enumerable:!0,configurable:!0}),t}(BasePanel);__reflect(WeixinPanel.prototype,"WeixinPanel");var FinishWorkPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this._view=new FinishWorkPanelUI,this.addChild(this._view)},t.prototype.show=function(t){e.prototype.show.call(this,t),this.recData=t,this.recData&&this.setLabel(this.recData),CommomBtn.btnClick(this._view.okBtn,this.okBtnTouch,this,1)},t.prototype.hide=function(){e.prototype.hide.call(this),CommomBtn.removeClick(this._view.okBtn,this.okBtnTouch,this)},t.prototype.setLabel=function(e){this._view.xinLabel.text=""+e},t.prototype.okBtnTouch=function(){this.closePanel()},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._view&&(this._view.dispose(),this._view=void 0),e.prototype.dispose.call(this)},t}(BasePanel);__reflect(FinishWorkPanel.prototype,"FinishWorkPanel");var WorkPanel=function(e){function t(){var t=e.call(this)||this;return t.inited=!1,t}return __extends(t,e),t.prototype.init=function(){this._view=new WorkPanelUI,this.addChild(this._view),this._view.itemGroup.removeChildren(),this.handX=this._view.workHand.x,this.handTimeY=this._view.loveHand0.y,this.handExpY=this._view.loveHand1.y,this.handBackY=this._view.backHand.y,this.inited=!0},t.prototype.show=function(t){e.prototype.show.call(this,t),this.addItem(),this.setConfig(),GameLog.log("exps",App.data.game2Center.DataCenter.Work[0].exps,this.workBoxList),this.workBoxList&&this.workBoxList[0]&&this.workBoxList[0].setEXP(App.data.game2Center.DataCenter.Work[0].exps,this.upgrade_exp),this._dispatcher.addEventListener(EventConst.WorkWaitTime,this.waitLisenter,this),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goldGroupTouch,this,this._view.goldGroup),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.diamondGroupTouch,this,this._view.diamondGroup),this.setGuide(),CommomBtn.btnClick(this._view.backBtn,this.close,this,2),CommomBtn.btnClick(this._view.startBtn,this.startTouch,this,1),this._dispatcher.addEventListener(EventConst.UPDATE_SIWEI,this.updateSiwei,this),this._dispatcher.addEventListener(EventConst.ADD_WORD_ITEM,this.addItem,this),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.timeGuideTouch,this,this._view.yd_loveImg0),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.expGuideTouch,this,this._view.yd_loveImg1),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.backGuideTouch,this,this._view.backCircle)},t.prototype.reqWorks=function(){ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.works,{},new FunctionVO(this.revWorks,this))},t.prototype.revWorks=function(e){if(200==e.code){var t=e.data;App.data.game2Center.DataCenter.Work=t,this.addItem()}},t.prototype.hide=function(){e.prototype.hide.call(this),this.clearList(),CommomBtn.removeClick(this._view.backBtn,this.close,this),CommomBtn.removeClick(this._view.startBtn,this.startTouch,this),App.dispatcher.dispatchEvent(G2_GameSceneEvent.SHOW_SCENE_ANIMATION)},t.prototype.updateSiwei=function(){this.setConfig()},t.prototype.startTouch=function(){ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.guideDone,{},new FunctionVO(this.finishGuideBack,this))},t.prototype.finishGuideBack=function(e){if(200==e.code){this._view.yindaoGroup.visible=!1,egret.Tween.removeTweens(this._view.workHand),App.data.game2Center.DataCenter.workGuide=!1,this.guideFlag=!0,App.data.game2Center.DataCenter.guide.fill_nick_name=e.data.fill_nick_name,App.data.game2Center.DataCenter.guide.emph_zone=e.data.emph_zone,App.data.game2Center.DataCenter.guide.video=e.data.video;var t=ProtocolHttp.workStart;t.wid=App.data.game2Center.DataCenter.Work[0].id,ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.workStart,t,new FunctionVO(this.sendBack,this))}else Notice.showBottomCenterMessage(""+e.info)},t.prototype.sendBack=function(e){200==e.code&&(App.data.game2Center.DataCenter.Work[0]&&App.data.game2Center.DataCenter.Work[0].duration?PanelOpenManager.openPanel(EnumPanelID.G2_WorkProPanel,App.data.game2Center.DataCenter.Work[0]):Notice.showBottomCenterMessage("数据错误")),200!==e.code&&Notice.showBottomCenterMessage(""+e.info)},t.prototype.close=function(){this.closePanel()},t.prototype.clearList=function(){if(this.workBoxList)for(var e=0;e<this.workBoxList.length;e++)this.workBoxList[e].dispose();this.workBoxList=[]},t.prototype.addItem=function(){this.clearList();for(var e=App.data.game2Center.DataCenter.Work,t=0;t<e.length;t++){var i=e[t],n=new WorkBox;this.workBoxList.push(n),n.setData(i,t),0==t&&(this.upgrade_exp=i.upgrade_exp),this._view.itemGroup.addChild(n)}ScrollerCenter.hideVerticalScrollBar(this._view.workBoxScroller)},t.prototype.refreshData=function(e){if(e)for(var t=0;t<e.length;t++){var i=e[t].cd,n=e[t].wait,o=e[t].endTime,a=this.workBoxList[t];0==i?a.showCD(!1):(a.showCD(!0),a.setTimeText(i,n,o))}},t.prototype.waitLisenter=function(e){if(this.setTimeGuide(),GameLog.log("wait",e,"upgrade_exp",this.upgrade_exp),e){var t=this.workBoxList[0];t.setData(e,0),App.data.game2Center.DataCenter.UserInfo.workCount=e.left_times,this.setGoldText(e.gold)}},t.prototype.setConfig=function(){this.setDiamendText(App.data.game2Center.DataCenter.UserInfo.diamond),this.setGoldText(App.data.game2Center.DataCenter.UserInfo.gold),this.setXinText(App.data.game2Center.DataCenter.UserInfo.hearts,App.data.game2Center.DataCenter.ConfigInfo.hearts)},t.prototype.setXinText=function(e,t){t&&""!=t&&this._view.heartPlugin.setJindu(e,t)},t.prototype.setGoldText=function(e){this._view.goldLabel.text=e},t.prototype.setDiamendText=function(e){this._view.diamendLabel.text=e},t.prototype.goldGroupTouch=function(){PanelOpenManager.openPanel(EnumPanelID.G2_ShopGoldPanel)},t.prototype.diamondGroupTouch=function(){PanelOpenManager.openPanel(EnumPanelID.G2_ShopDiamondPanel,null,!1)},t.prototype.setGuide=function(){App.data.game2Center.DataCenter.workGuide&&(this._view.yindaoGroup.visible=!0,egret.Tween.get(this._view.workHand,{loop:!0}).set({x:this.handX,y:614}).to({x:this.handX+40,y:614},600).to({x:this.handX,y:614},800).wait(100))},t.prototype.setTimeGuide=function(){this.guideFlag&&(this._view.yindaoGroup0.visible=!0)},t.prototype.timeGuideTouch=function(){this._view.yindaoGroup0.visible=!1,this.setExpGuide()},t.prototype.setExpGuide=function(){this._view.yindaoGroup1.visible=!0},t.prototype.expGuideTouch=function(){this._view.yindaoGroup1.visible=!1,this.setBackGuide()},t.prototype.setBackGuide=function(){this._view.yindaoBack.visible=!0,egret.Tween.get(this._view.backHand,{loop:!0}).set({y:this.handBackY}).to({y:this.handBackY+40},600).to({y:this.handBackY},800).wait(100)},t.prototype.backGuideTouch=function(){this._view.yindaoBack.visible=!1,this.guideFlag=!1,this.close()},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._view&&(this._view.dispose(),this._view=void 0),e.prototype.dispose.call(this)},t}(BasePanel);__reflect(WorkPanel.prototype,"WorkPanel");var WorkProPanel=function(e){function t(){var t=e.call(this)||this;return t.count=1,t.proInitW=60,t}return __extends(t,e),t.prototype.init=function(){this._view=new WorkProPanelUI,this.addChild(this._view)},t.prototype.show=function(t){e.prototype.show.call(this,t),App.data.game2Center.SoundManager.stopBGM(),this.recData=t,this._view.proImg.width=this.proInitW,this._view.ProLabel.text="0%",App.sound.playSoundSwitchClient1(SoundManager.time_click,!0),this.recData&&this.recData.pic&&(this._view.TypeImg.source=this.recData.pic),this.recData&&this.recData.title&&(this._view.typeLabel.text=this.recData.title),CommomBtn.btnClick(this._view.backBtn,this.close,this,2),CommomBtn.btnClick(this._view.finishBtn,this.finishNow,this,1),this.showLoveTip(),this.showCDImg(),this.countDown(10*this.recData.duration,100)},t.prototype.hide=function(){e.prototype.hide.call(this),CommomBtn.removeClick(this._view.backBtn,this.close,this),CommomBtn.removeClick(this._view.finishBtn,this.finishNow,this),this.hideCDImg(),this.removeTimer(),App.data.game2Center.SoundManager.playBGM(SoundManager.bgm),this._view.proImg.width=this.proInitW,this._view.ProLabel.text="0%",App.dispatcher.dispatchEvent(EventConst.WorkWaitTime,this.recData),this.recData=null},t.prototype.countDown=function(e,t){this.count=1;var i=parseInt(e),n=parseInt(t);i&&n&&App.timer.doTimeLoop(this,i,this.showProbar,[n])},t.prototype.showProbar=function(e){this.jindu(this.count),this.count==e&&this.timerComFunc(),this.count++},t.prototype.timerComFunc=function(){this.removeTimer(),this.finish()},t.prototype.jindu=function(e){e&&(this._view.ProLabel.text=e+"%",this._view.proImg.width=this.proInitW+e*(this._view.probg.width-this.proInitW)/100)},t.prototype.removeTimer=function(){App.timer.clearTimer(this,this.showProbar),this.count=1,App.sound.stopSoundSwitchClient1(SoundManager.time_click)},t.prototype.close=function(){this.closePanel()},t.prototype.finish=function(){var e=this.recData,t=ProtocolHttp.workFinish;t.wid=e.id,ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.workFinish,t,new FunctionVO(this.workFinish,this))},t.prototype.workFinish=function(e){if(200==e.code){App.sound.playSoundSwitchClient1(SoundManager.work_done),GameLog.log(e.data);var t=new Object;t.lid=this.recData.lid,t.data=e.data,App.data.game2Center.DataCenter.UserInfo.updateWorkData(t);var i="获得"+(e.data.gold-App.data.game2Center.DataCenter.UserInfo.gold)+"金币";PanelOpenManager.openPanel(EnumPanelID.G2_FinishWorkPanel,i),App.data.game2Center.DataCenter.UserInfo.gold=e.data.gold,this.close(),App.dispatcher.dispatchEvent(EventConst.UPDATE_SIWEI),this.recData=e.data}},t.prototype.finishNow=function(){var e=this.recData,t=ProtocolHttp.workFinish;t.wid=e.id,ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.workFinishNow,t,new FunctionVO(this.loveFinishNowBack,this))},t.prototype.loveFinishNowBack=function(e){if(200==e.code){App.sound.playSoundSwitchClient1(SoundManager.work_done),GameLog.log(e.data),this.close();var t=new Object;t.data=e.data,App.data.game2Center.DataCenter.UserInfo.updateWorkData(t);var i="获得"+(e.data.gold-App.data.game2Center.DataCenter.UserInfo.gold)+"金币";PanelOpenManager.openPanel(EnumPanelID.G2_FinishWorkPanel,i),App.data.game2Center.DataCenter.UserInfo.gold=e.data.gold,App.dispatcher.dispatchEvent(EventConst.UPDATE_SIWEI),this.recData=e.data}else Notice.showBottomCenterMessage(""+e.info),PanelOpenManager.openPanel(EnumPanelID.G2_LibaoFinishPanel)},t.prototype.setTextType=function(e){e&&""!=e&&(this._view.typeLabel.text=e)},t.prototype.setImgType=function(e){e&&""!=e&&(this._view.TypeImg.source=e)},t.prototype.showLoveTip=function(){if(null==this.tipJson&&(this.tipJson=RES.getRes("lovetips_json")),null!=this.tipJson){var e=this.tipJson.tips,t=e.length;this._view.tipLabel.text=e[NumberTool.getRandInt(0,t-1)]}},t.prototype.showCDImg=function(){0==App.data.game2Center.DataCenter.keybuy.yijian.hasbuy&&(this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.hideCDImg,this,this),this._view.cdBtn.visible=!0,this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCDBtnTouch,this,this._view.cdBtn))},t.prototype.hideCDImg=function(){this._dispatcher.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.hideCDImg,this,this),this._view.cdBtn.visible=!1,this._dispatcher.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onCDBtnTouch,this,this._view.cdBtn)},t.prototype.onCDBtnTouch=function(e){this.hideCDImg(),this.showLiBao()},t.prototype.showLiBao=function(){0==App.data.game2Center.DataCenter.keybuy.yijian.hasbuy&&PanelOpenManager.openPanel(EnumPanelID.G2_LibaoFinishPanel)},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._view&&(this._view.dispose(),this._view=void 0),e.prototype.dispose.call(this)},t}(BasePanel);__reflect(WorkProPanel.prototype,"WorkProPanel");var GameScene=function(e){function t(){var t=e.call(this)||this;return t.isOut=!0,t.finishIn=!1,t.finishOut=!0,t.btnList=[],t}return __extends(t,e),t.prototype.dispose=function(){this.dianhuaBtn&&this.dianhuaBtn.dispose(),this.weixinBtn&&this.weixinBtn.dispose(),this.weiboBtn&&this.weiboBtn.dispose(),this.lianaiBtn&&this.lianaiBtn.dispose(),this.gongzuoBtn&&this.gongzuoBtn.dispose(),this.beibaoBtn&&this.beibaoBtn.dispose(),this.shangchengBtn&&this.shangchengBtn.dispose(),this.ctrl&&(this.ctrl.onRemove(),this.ctrl=null),this._view&&(this._view.dispose(),this._view=void 0),e.prototype.dispose.call(this)},t.prototype.init=function(){this._view=new GameSceneUI,this.addChild(this._view),this.ctrl=App.data.game2Center.mediatorCenter.gameMediator,this.dianhuaHandY=this._view.dianhuaHand.y,this.lianaiHandY=this._view.lianaiHand.y,this.gongzuoHandY=this._view.gongzuoHand.y,this.shipinHandY=this._view.shipinHand.y,this.weixinHandY=this._view.weixinHand.y,this.backY=this._view.backHand.y,this.bagY=this._view.bagHand.y,this.weiY=this._view.weiHand.y,this.fitCurrencyIPhoneX()},t.prototype.changeGameBg=function(e){this._view.gameBG.source=e+"_jpg",this._view.mohuBG.source=this._view.gameBG.source,this._view.mohuBG.touchEnabled=!1,this._view.mohuBG.scaleX=1.3,this._view.mohuBG.scaleY=1.3},t.prototype.fitCurrencyIPhoneX=function(){DeviceUtil.isIPhoneX&&(this._view.diamondUI.x+=30,this._view.goldUI.x+=30,this._view.powerUI.x+=30)},t.prototype.show=function(t){e.prototype.show.call(this,t),this.setActiveBtn(),this.setBottomBtn(this.btnList),this.enterAnimation(),this.setConfig(),this.setGuide(),this.checkShareFun(),App.data.game2Center.gameSceneCenter.checkGitFun(),Config.soEasy&&0==App.data.game2Center.DataCenter.isVideoPlaying&&QingFengSdk.getInstance().noticeSdk(),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showDlcInfoPanel,this,this._view.dlcBtn),DlcUtils.addSomeOneBtnTouchScale(this._view.msBtn),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMsBtn,this,this._view.msBtn),this.changeGameBg(App.data.game2Center.DataCenter.UserInfo.bgi+"_bg"),this._view.dlcBtn.visible=!0,this._view.leftBtnGrp.layout=null;for(var i=0;i<this._view.leftBtnGrp.numChildren;i++){var n=this._view.leftBtnGrp.getChildAt(i);0==n.visible?(n.parent.removeChild(n),i--):(DlcUtils.addSomeOneBtnTouchScale(n),n.x=i%3*115+n.anchorOffsetX,n.y=126*Math.floor(i/3)+n.anchorOffsetY)}this.enterAnimation(),App.data.game2Center.DataCenter.isVideoPlaying?App.data.game2Center.SoundManager.stopBGM():App.data.game2Center.SoundManager.playBGM(SoundManager.bgm),CommomBtn.btnClick(this._view.setBtn,this.setBtnTouch,this),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.shipinBtnTouch,this,this._view.shipinBtn),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.fuliBtnTouch,this,this._view.fuliBtn),this._dispatcher.addEventListener(G2_GameSceneEvent.SHOW_SCENE_ANIMATION,this.enterAnimation,this),this._dispatcher.addEventListener(G2_GameSceneEvent.HIDE_SCENE_ANIMATION,this.outAnimation,this),this._dispatcher.addEventListener(G2_GameSceneEvent.CHANGE_BG,this.changeGameBg,this),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.yd_dianhuaImgTouch,this,this._view.yd_dianhuaImg),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.yd_lianaiImgTouch,this,this._view.yd_lianaiImg),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.yd_gongzuoImgTouch,this,this._view.yd_gongzuoImg),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.yd_shipinImgTouch,this,this._view.yd_shipinImg),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.yd_weixinImgTouch,this,this._view.yd_weixinImg),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.yd_levelUpImgTouch,this,this._view.backCircle),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.yd_bagImgTouch,this,this._view.bagCircle),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.yd_weiboImgTouch,this,this._view.weiCircle),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goldGroupTouch,this,this._view.goldUI),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.diamondGroupTouch,this,this._view.diamondUI),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.powerGroupTouch,this,this._view.powerUI),CommomBtn.btnClick(this._view.actBtn,this.onActTouch,this,1),CommomBtn.btnClick(this._view.redPacketBtn,this.onRedPacketTouch,this,1),this._dispatcher.addEventListener(EventConst.guide,this.guideBack,this),this._dispatcher.addEventListener(EventConst.UPDATE_RED_TIP,this.onUpdateRedTip,this),this._dispatcher.addEventListener(EventConst.UPDATE_SIWEI,this.setConfig,this),this._dispatcher.addEventListener(EventConst.CHECK_UPGRADE,this.onCheckUpgrade,this),this._dispatcher.addEventListener(EventConst.REQ_GAME_INFO,this.reqGameInfo,this),this._dispatcher.addEventListener(G2_GameSceneEvent.LevelUpGuide,this.setLevelUpGuide,this),this._dispatcher.addEventListener(G2_GameSceneEvent.SETGAMECONFIG,this.setGameConfig,this),App.data.game2Center.DataCenter.red_packet&&1==App.data.game2Center.DataCenter.red_packet.onoff?this._view.redPacketBtn.visible=!0:this._view.redPacketBtn.visible=!1,this.onUpdateRedTip()},t.prototype.hide=function(){e.prototype.hide.call(this),App.data.game2Center.SoundManager.stopBGM(),CommomBtn.removeClick(this._view.setBtn,this.setBtnTouch,this),CommomBtn.removeClick(this._view.actBtn,this.onActTouch,this),CommomBtn.removeClick(this._view.redPacketBtn,this.onRedPacketTouch,this)},t.prototype.onMsBtn=function(e){PanelOpenManager.openPanel(EnumPanelID.G2_MysteriousShop)},t.prototype.setBottomBtn=function(e){this._view.btnGroup.removeChildren();var t=[];e.sort();for(var i=0;i<e.length;i++)switch(e[i]){case 0:break;case 1:this.dianhuaBtn||(this.dianhuaBtn=new DianhuaBtn),t.push(this.dianhuaBtn);break;case 2:this.weixinBtn||(this.weixinBtn=new WeixinBtn),t.push(this.weixinBtn);break;case 3:this.lianaiBtn||(this.lianaiBtn=new LianaiBtn),t.push(this.lianaiBtn);break;case 4:this.gongzuoBtn||(this.gongzuoBtn=new GongzuoBtn),t.push(this.gongzuoBtn);break;case 5:this.weiboBtn||(this.weiboBtn=new WeiboBtn),t.push(this.weiboBtn);break;case 6:this.beibaoBtn||(this.beibaoBtn=new BeibaoBtn),t.push(this.beibaoBtn);break;case 7:this.shangchengBtn||(this.shangchengBtn=new ShangchengBtn),t.push(this.shangchengBtn);break;case 8:1==ClientConfig.video?this._view.shipinBtn.visible=!0:this._view.shipinBtn.visible=!1}for(var i=0,n=t.length;n>i;i++)t[i].x=802-123*(n-i-1),t[i].y=67,this._view.btnGroup.addChild(t[i]);this._view.btnBG.width=115*t.length+75},t.prototype.showDlcInfoPanel=function(){this.outAnimation(EnumPanelID.G2_DlcMainDoc)},t.prototype.enterAnimation=function(){var e=this;this._view.touchChildren=!1,this.setConfig(),this.setActive(),this.isUpgrade()&&(App.data.game2Center.LoadingLock.lockScreen(),this.upGrade()),App.data.game2Center.DataCenter.bagGuide&&this.setBagGuide(),this.setWeiBoGuide(),PanelManager.isShowing(PanelRegister.G2_WeixinPanel)||(egret.Tween.get(this._view.upGroup).set({x:1280,y:12}).to({x:681,y:12},250).to({x:661,y:12},200).to({x:681,y:12},150).call(function(){egret.Tween.removeTweens(e._view.upGroup),e._view.touchChildren=!0}),egret.Tween.get(this._view.leftGroup).set({x:-800,y:0}).to({x:0,y:0},250).call(function(){egret.Tween.removeTweens(e._view.leftGroup)}),egret.Tween.get(this._view.downGroup).set({x:1280,y:517}).to({x:360,y:517},250).call(function(){egret.Tween.removeTweens(e._view.downGroup)}),egret.Tween.get(this._view.mohuBG).set({alpha:1}).to({alpha:0},500).call(function(){egret.Tween.removeTweens(e._view.mohuBG)}))},t.prototype.outAnimation=function(e){var t=this;this._view.touchChildren=!1,egret.Tween.get(this._view.upGroup).set({x:681,y:12}).to({x:661,y:12},150).to({x:681,y:12},200).to({x:1280,y:12},250).call(function(){egret.Tween.removeTweens(t._view.upGroup),TypeUtil.isNumber(e)&&0!=e?PanelOpenManager.openPanel(e):e instanceof FunctionVO&&e.exec()}),egret.Tween.get(this._view.leftGroup).set({x:0,y:0}).to({x:-800,y:0},250).call(function(){egret.Tween.removeTweens(t._view.leftGroup)}),egret.Tween.get(this._view.downGroup).set({x:360,y:517}).to({x:1280,y:517},250).call(function(){egret.Tween.removeTweens(t._view.downGroup)}),egret.Tween.get(this._view.mohuBG).set({alpha:0}).to({alpha:1},500).call(function(){egret.Tween.removeTweens(t._view.mohuBG)})},t.prototype.shipinBtnTouch=function(){App.sound.playSoundSwitchClient1(SoundManager.button),ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.userCollections,{},new FunctionVO(this.revVideoList,this))},t.prototype.revVideoList=function(e){200==e.code?(App.data.game2Center.DataCenter.Video.mem=e.data.mem,App.data.game2Center.DataCenter.Video.fav=e.data.fav,App.data.game2Center.DataCenter.Video.bgi=e.data.bgi,this.outAnimation(EnumPanelID.G2_ShipinPanel)):Notice.showBottomCenterMessage(e.info)},t.prototype.yd_dianhuaImgTouch=function(){this._view.yindaoGroup.visible=!1,this._view.yindaodianhuaGroup.visible=!1,App.data.game2Center.DataCenter.dianhuaGuide=!0,egret.Tween.removeTweens(this._view.dianhuaHand),App.sound.playSoundSwitchClient1(SoundManager.button),this.outAnimation(EnumPanelID.G2_DianhuaPanel)},t.prototype.yd_weixinImgTouch=function(){this._view.yindaoGroup.visible=!1,this._view.yindaoweixinGroup.visible=!1,App.data.game2Center.DataCenter.weixinGuide=!0,egret.Tween.removeTweens(this._view.weixinHand),App.sound.playSoundSwitchClient1(SoundManager.button),this.outAnimation(EnumPanelID.G2_WeixinPanel)},t.prototype.setLevelUpGuide=function(){this._view.yindaoGroup.visible=!0,this._view.yindaoLevelUp.visible=!0,egret.Tween.get(this._view.backHand,{loop:!0}).set({y:this.backY}).to({y:this.backY+40},600).to({y:this.backY},800).wait(100)},t.prototype.yd_levelUpImgTouch=function(){this._view.yindaoGroup.visible=!1,this._view.yindaoLevelUp.visible=!1,egret.Tween.removeTweens(this._view.backHand),App.data.game2Center.gameSceneCenter.sendUpGrade()},t.prototype.setBagGuide=function(){this._view.yindaoGroup.visible=!0,this._view.yindaoBag.visible=!0,egret.Tween.get(this._view.bagHand,{loop:!0}).set({y:this.bagY}).to({y:this.bagY-40},600).to({y:this.bagY},800).wait(100)},t.prototype.yd_bagImgTouch=function(){this._view.yindaoGroup.visible=!1,this._view.yindaoBag.visible=!1,this.beibaoBtn.onTouch()},t.prototype.yd_weiboImgTouch=function(){this._view.yindaoGroup.visible=!1,this._view.yindaoWei.visible=!1,App.data.game2Center.DataCenter.weiboGuide=!0,App.sound.playSoundSwitchClient1(SoundManager.button),this.outAnimation(EnumPanelID.G2_WeiboPanel)},t.prototype.yd_lianaiImgTouch=function(){this._view.yindaoGroup.visible=!1,this._view.yindaolianaiGroup.visible=!1,App.data.game2Center.DataCenter.loveGuide=!0,egret.Tween.removeTweens(this._view.lianaiHand),App.sound.playSoundSwitchClient1(SoundManager.button),this.outAnimation(EnumPanelID.G2_LovePanel)},t.prototype.yd_gongzuoImgTouch=function(){this._view.yindaoGroup.visible=!1,this._view.yindaoGongzuoGroup.visible=!1,App.data.game2Center.DataCenter.workGuide=!0,egret.Tween.removeTweens(this._view.gongzuoHand),App.sound.playSoundSwitchClient1(SoundManager.button),this.outAnimation(EnumPanelID.G2_WorkPanel)},t.prototype.yd_shipinImgTouch=function(){this._view.yindaoGroup.visible=!1,this._view.yindaoShipinGroup.visible=!1,App.data.game2Center.DataCenter.shipinGuide=!0,egret.Tween.removeTweens(this._view.shipinHand),this.shipinBtnTouch()},t.prototype.goldGroupTouch=function(){App.sound.playSoundSwitchClient1(SoundManager.button),PanelOpenManager.openPanel(EnumPanelID.G2_ShopGoldPanel)},t.prototype.diamondGroupTouch=function(){App.sound.playSoundSwitchClient1(SoundManager.button),PanelOpenManager.openPanel(EnumPanelID.G2_ShopDiamondPanel,null,!1)},t.prototype.powerGroupTouch=function(){App.sound.playSoundSwitchClient1(SoundManager.button),PanelOpenManager.openPanel(EnumPanelID.G2_ShopGiftToolPanel,1)},t.prototype.tiliImgTouch=function(){App.sound.playSoundSwitchClient1(SoundManager.button),this.outAnimation(EnumPanelID.G2_GAME_LOGIN_SCENE)},t.prototype.setTouch=function(){App.sound.playSoundSwitchClient1(SoundManager.button)},t.prototype.fuliBtnTouch=function(){},t.prototype.huodongBtnTouch=function(){TipsHeat.showHeat(10),App.sound.playSoundSwitchClient1(SoundManager.button)},t.prototype.fuBtnTouch=function(){App.sound.playSoundSwitchClient1(SoundManager.button)},t.prototype.setBtnTouch=function(){this.getMail()},t.prototype.shopTouch=function(){this.outAnimation(EnumPanelID.G2_ShopGiftToolPanel)},t.prototype.onActTouch=function(){this.ctrl.reqLoginReward()},t.prototype.onRedPacketTouch=function(){PanelOpenManager.openPanel(EnumPanelID.G2_RedPacketPanel)},t.prototype.setXinText=function(e,t){t&&""!=t&&this._view.heartPlugin.setJindu(e,t)},t.prototype.setDateText=function(e){e&&""!=e&&(e>=10&&100>e&&(this._view.dateLabel.scaleX=.8,this._view.dateLabel.scaleY=.8),e>=100&&1e3>e&&(this._view.dateLabel.scaleX=.6,this._view.dateLabel.scaleY=.6),e>=1e3&&(this._view.dateLabel.scaleX=.4,this._view.dateLabel.scaleY=.4),this._view.dateLabel.text=e)},t.prototype.setDiaMondText=function(e){this._view.diamondUI.setDiamond(e)},t.prototype.setConfig=function(){this.setDateText(App.data.game2Center.DataCenter.UserInfo.days),this._view.diamondUI.setDiamond(App.data.game2Center.DataCenter.UserInfo.diamond),this._view.goldUI.setGold(App.data.game2Center.DataCenter.UserInfo.gold),this._view.powerUI.setPower(App.data.game2Center.DataCenter.UserInfo.power),this.setXinText(App.data.game2Center.DataCenter.UserInfo.hearts,App.data.game2Center.DataCenter.ConfigInfo.hearts)},t.prototype.setActive=function(){this._view.taskTipUI.visible=!1;var e=(App.data.game2Center.DataCenter.UserInfo.power,App.data.game2Center.DataCenter.UserInfo.workCount,App.data.game2Center.DataCenter.UserInfo.nextWechat),t=App.data.game2Center.DataCenter.UserInfo.nextTel;App.data.game2Center.DataCenter.ConfigInfo.main_event,App.data.game2Center.DataCenter.ConfigInfo.finish_main_event,App.data.game2Center.DataCenter.mail;if(1==App.data.game2Center.DataCenter.ConfigInfo.days&&App.data.game2Center.DataCenter.UserInfo.tel_main){for(var i=!1,n=0;n<this.btnList.length;n++)2==this.btnList[n]&&(i=!0);i||this.btnList.push(2),this.setBottomBtn(this.btnList),this.setGuide()}for(var o=!1,a=App.data.game2Center.DataCenter.Weibo,n=0;n<a.data.length;n++)if(0==a.data[n].is_approve||0==a.data[n].is_reply){o=!0;break}o?this.weiboBtn&&this.weiboBtn.showRedPoint(!0):this.weiboBtn&&this.weiboBtn.showRedPoint(!1),e&&App.data.game2Center.DataCenter.UserInfo.tel_main?(GameLog.log(App.data.game2Center.DataCenter.UserInfo.hearts,App.data.game2Center.DataCenter.ConfigInfo.hearts),App.data.game2Center.DataCenter.UserInfo.hearts>=App.data.game2Center.DataCenter.ConfigInfo.hearts?(this.weixinBtn&&this.weixinBtn.showRedPoint(!0),this._view.taskTipUI.visible=!0,this._view.taskTipUI.setTip("快给小野发个微信吧~")):this.weixinBtn&&this.weixinBtn.showRedPoint(!0)):this.weixinBtn&&this.weixinBtn.showRedPoint(!1),t?App.data.game2Center.DataCenter.UserInfo.hearts>=App.data.game2Center.DataCenter.ConfigInfo.hearts?(this.dianhuaBtn.showRedPoint(!0),this._view.taskTipUI.visible=!0,this._view.taskTipUI.setTip("快给小野打个电话吧~")):this.dianhuaBtn.showRedPoint(!0):this.dianhuaBtn.showRedPoint(!1),App.dispatcher.dispatchEvent(EventConst.UPDATE_RED_TIP)},t.prototype.reqGameInfo=function(){this.ctrl&&this.ctrl.reqGameInfo()},t.prototype.onCheckUpgrade=function(){this.isUpgrade()&&this.upGrade()},t.prototype.isUpgrade=function(){var e=App.data.game2Center.DataCenter.UserInfo.tel_main,t=App.data.game2Center.DataCenter.UserInfo.wechat_main,i=App.data.game2Center.DataCenter.UserInfo.hearts,n=App.data.game2Center.DataCenter.ConfigInfo.hearts;return e&&t&&i>=n?!0:!1},t.prototype.setGameConfig=function(){this.setConfig(),this.setActiveBtn(),this.setBottomBtn(this.btnList),this.setGuide(),this.setActive()},t.prototype.upGrade=function(){App.data.game2Center.gameSceneCenter.checkUpGrade()},t.prototype.getMail=function(){ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.mailList,{},new FunctionVO(this.mailBack,this))},t.prototype.mailBack=function(e){200==e.code?(App.data.game2Center.DataCenter.mail=e.data,this.outAnimation(EnumPanelID.G2_SetPanel),App.dispatcher.dispatchEvent(EventConst.UPDATE_RED_TIP)):Notice.showBottomCenterMessage(""+e.info)},t.prototype.setGuide=function(){var e=App.data.game2Center.DataCenter.guide,t=e.emph_zone;if(GameLog.log("GameScene >> 当前引导:",e),e.video){var i={ossvid:e.video};App.data.game2Center.gameSceneCenter.sendPlayVideo(i),DeviceUtil.IsNative||this.guideBack()}else e.fill_nick_name?PanelOpenManager.openPanel(EnumPanelID.G2_InputNamePanel):(this.checkFirstLogin(),this.checkShouChong());switch(t){case"ZONE_PHONE":this._view.yindaoGroup.visible=!0,this._view.yindaodianhuaGroup.visible=!0,egret.Tween.get(this._view.dianhuaHand,{loop:!0}).set({y:this.dianhuaHandY}).to({y:this.dianhuaHandY-40},600).to({y:this.dianhuaHandY},800).wait(100);break;case"ZONE_WEIXIN":this._view.yindaoGroup.visible=!0,this._view.yindaoweixinGroup.visible=!0,egret.Tween.get(this._view.weixinHand,{loop:!0}).set({y:this.weixinHandY}).to({y:this.weixinHandY-40},600).to({y:this.weixinHandY},800).wait(100);break;case"ZONE_LOVE":this._view.yindaoGroup.visible=!0,this._view.yindaolianaiGroup.visible=!0,egret.Tween.get(this._view.lianaiHand,{loop:!0}).set({y:this.lianaiHandY}).to({y:this.lianaiHandY-40},600).to({y:this.lianaiHandY},800).wait(100);break;case"ZONE_WORK":this._view.yindaoGroup.visible=!0,this._view.yindaoGongzuoGroup.visible=!0,egret.Tween.get(this._view.gongzuoHand,{loop:!0}).set({y:this.gongzuoHandY}).to({y:this.gongzuoHandY-40},600).to({y:this.gongzuoHandY},800).wait(100);break;case"ZONE_VIDEO":1==ClientConfig.video&&(this._view.shipinBtn.visible=!0,this._view.yindaoGroup.visible=!0,this._view.yindaoShipinGroup.visible=!0,egret.Tween.get(this._view.shipinHand,{loop:!0}).set({y:this.shipinHandY}).to({y:this.shipinHandY-40},600).to({y:this.shipinHandY},800).wait(100));break;case"ZONE_WEIBO":this._view.yindaoGroup.visible=!0,this._view.yindaoWei.visible=!0,egret.Tween.get(this._view.weiHand,{loop:!0}).set({y:this.weiY}).to({y:this.weiY-40},600).to({y:this.weiY},800).wait(100)}},t.prototype.setWeiBoGuide=function(){"ZONE_WEIBO"==App.data.game2Center.DataCenter.guide.emph_zone&&(this._view.yindaoGroup.visible=!0,this._view.yindaoWei.visible=!0,egret.Tween.get(this._view.weiHand,{loop:!0}).set({y:this.weiY}).to({y:this.weiY-40},600).to({y:this.weiY},800).wait(100))},t.prototype.guideBack=function(){App.data.game2Center.DataCenter.guide.video&&this.finishGuide()},t.prototype.finishGuide=function(){ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.guideDone,{},new FunctionVO(this.finishGuideBack,this))},t.prototype.finishGuideBack=function(e){200==e.code?(this._view.yindaoGroup.visible=!1,egret.Tween.removeTweens(this._view.dianhuaHand),App.data.game2Center.DataCenter.dianhuaGuide=!1,App.data.game2Center.DataCenter.guide.fill_nick_name=e.data.fill_nick_name,App.data.game2Center.DataCenter.guide.emph_zone=e.data.emph_zone,App.data.game2Center.DataCenter.guide.video=e.data.video,this.setGuide()):Notice.showBottomCenterMessage(""+e.info)},t.prototype.setActiveBtn=function(){this.btnList=[];for(var e=App.data.game2Center.DataCenter.ConfigInfo.avilable_event,t=0;t<e.length;t++)switch(e[t].type){case"tel":this.btnList.push(1);break;case"wechat":(1!=App.data.game2Center.DataCenter.ConfigInfo.days||"ZONE_PHONE"!=App.data.game2Center.DataCenter.guide.emph_zone)&&this.btnList.push(2);break;case"love":this.btnList.push(3);break;case"work":this.btnList.push(4);break;case"weibo":this.btnList.push(5);break;case"back":this.btnList.push(6);break;
case"shop":this.btnList.push(7);break;case"video":this.btnList.push(8)}},t.prototype.onUpdateRedTip=function(){var e=App.data.game2Center.DataCenter.mail;e&&e.length>0?this._view.setBtn.showRedPoint(!0):this._view.setBtn.showRedPoint(!1),Config.soEasy&&SoEasySdk.shieldChannel()&&this._view.setBtn.showRedPoint(!1),App.data.game2Center.DataCenter.isPower||App.data.game2Center.DataCenter.login_reward==LoginRewardStatus.RedTip||!App.data.game2Center.DataCenter.first_gift||1==App.data.game2Center.DataCenter.accumulative_recharge||App.data.game2Center.DataCenter.month_cards&&(0==App.data.game2Center.DataCenter.month_cards.month_cards||1==App.data.game2Center.DataCenter.month_cards.month_cards)?this._view.actBtn.showRedPoint(!0):this._view.actBtn.showRedPoint(!1),this.checkShouChong(),this.lianaiBtn&&this.lianaiBtn.showRedPoint(App.data.game2Center.DataCenter.UserInfo.isCanLove()),this.gongzuoBtn&&this.gongzuoBtn.showRedPoint(App.data.game2Center.DataCenter.UserInfo.isCanWork()),this.beibaoBtn&&this.beibaoBtn.showRedPoint(App.data.game2Center.DataCenter.UserInfo.isHaveActiveItem())},t.prototype.onVideoFinish=function(){Config.soEasy&&QingFengSdk.getInstance().noticeSdk()},t.prototype.checkShouChong=function(){this._view.shouChongBtn.visible=!1},t.prototype.onShouChongTouch=function(){this.ctrl.reqLoginReward(2)},t.prototype.checkFirstLogin=function(){var e=this;if(App.data.game2Center.DataCenter.is_first_login)App.data.game2Center.DataCenter.is_first_login=!1,App.data.game2Center.DataCenter.isFirstEnterGame=!1,this.ctrl.reqLoginReward();else{if(!App.data.game2Center.DataCenter.isFirstEnterGame)return;if(App.data.game2Center.DataCenter.isFirstEnterGame=!1,DeviceUtil.IsWeb&&!Config.soEasy&&!H5_360_Sdk.getInstance().config360||Config.U8Login&&App.global.userInfo.channelId==EnumChannel.C_DEFAULT){var t;t=DeviceUtil.IsWeb?"1":EnumChannel.C_DEFAULT,ProtocolGame2.instance().send_channel_offer(t,new FunctionVO(function(t){ResponseUtil.checkResponseData(t)&&t.data.images&&e.ctrl.reqLoginReward()},this))}}},t.prototype.checkShareFun=function(){if(this._view.shareBtn.visible=!1,this._view.qrCodeBtn.visible=!1,this._view.sendToDeBtn.visible=!1,Config.soEasy){var e=ZmSdk.getInstance().getUserInfo();GameLog.log("用户信息:",e),ZmSdk.getInstance().isSupportMethod("share")&&(this._view.shareBtn.visible=!0,SoEasySdk.isCurChannel(SoEasySdk.channelList.h5_3500)?this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){H5_3500_Sdk.getInstance().game35.share({title:SoEasySdk.shareData.title,content:SoEasySdk.shareData.content}),H5_3500_Sdk.getInstance().game35.onShareOK(function(){GameLog.log("分享成功")})},this,this._view.shareBtn):this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){ZmSdk.getInstance().share(SoEasySdk.shareData,function(e){GameLog.log("分享结果:",e)})},this,this._view.shareBtn)),ZmSdk.getInstance().isSupportMethod("showQRCode")&&(this._view.qrCodeBtn.visible=!0,this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onShowQRCode,this,this._view.qrCodeBtn)),e&&"true"==e.userdata.isSubscribe&&(this._view.qrCodeBtn.visible=!1),ZmSdk.getInstance().isSupportMethod("sendToDesktop")&&(GameLog.log("发送桌面"),this._view.sendToDeBtn.visible=!0,this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,ZmSdk.getInstance().sendToDesktop({},function(e){GameLog.log("发送桌面：",e)}),this,this._view.sendToDeBtn))}else WanBaSDK.getIntance().wanBaData&&(this._view.shareBtn.visible=!0,this._view.shareBtn.x=5,this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){WanBaSDK.getIntance().showShareMenu()},this,this._view.shareBtn),this._view.sendToDeBtn.visible=!0,this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){WanBaSDK.getIntance().collectSendToDesktop(function(e){GameLog.log("发送到桌面回调!",e)})},this,this._view.sendToDeBtn))},t.prototype.onShowQRCode=function(e){ZmSdk.getInstance().showQRCode({},function(e){this._view.qrCodeBtn.visible=!1,GameLog.log("关注结果:",e)})},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t}(BasePanel);__reflect(GameScene.prototype,"GameScene");var LoadScene=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),this._view=new LoadSceneUI,this.addChild(this._view)},t.prototype.show=function(t){if(e.prototype.show.call(this,t),this.setProgress(0),DeviceUtil.IsWeb&&Config.soEasy&&DeviceUtil.IsIos&&DeviceUtil.ISQQBrower&&DeviceUtil.isMobile){var i=new SureDialog;i.setContentSize(30),i.show(),i.setContent("如观看视频后无法正常游戏请更换其它浏览器重新进入游戏。\n推荐：Safari浏览器。"),i.setOk(this.loadAsset,this)}else this.loadAsset()},t.prototype.hide=function(){e.prototype.hide.call(this),this.setProgress(0)},t.prototype.setProgress=function(e){this._view.percentLab&&(this._view.percentLab.text=e+"%"),this._view.proImg&&this._view.probg&&(this._view.proImg.width=e*this._view.probg.width/100)},t.prototype.loadAsset=function(){App.res.loadGroup(DeviceUtil.isWebIOS?AssetConst.SOUND_RES_LIST:AssetConst.ONLY_IMAGE_RES_LIST,new FunctionVO(this.loadLoginComplete,this),new FunctionVO(this.loadLoginProgress,this))},t.prototype.loadLoginProgress=function(e){this.setProgress(Math.round(e.itemsLoaded/e.itemsTotal*100))},t.prototype.loadLoginComplete=function(){this.gotoLogin()},t.prototype.showGameAdvice=function(){var e=this,t=new GameAdviceUI;this.addChild(t),egret.Tween.get(this).wait(200).call(function(){e.removeChild(t),t=null,e.gotoLogin()},this)},t.prototype.gotoLogin=function(){Config.hasEnterGame&&GameManager.isPlaying&&GameManager.lasetGameId==EnumGameID.GAME2&&(PanelOpenManager.removePanel(EnumPanelID.G2_GAME_LOAD_SCENE),PanelOpenManager.openPanel(EnumPanelID.G2_GAME_LOGIN_SCENE,null,!1))},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t}(BasePanel);__reflect(LoadScene.prototype,"LoadScene");var InputNamePanel=function(e){function t(t){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this._view=new InputNameViewUI,this.addChild(this._view)},t.prototype.show=function(t){e.prototype.show.call(this,t),GameLog.log("InputNamePanel >> 进入昵称界面"),CommomBtn.btnClick(this._view.startBtn,this.startBtnTouch,this),CommomBtn.btnClick(this._view.shaiziBtn,this.shaiziBtnTouch,this),InputTextUtil.addNativeInputTextListener(this._view.zhanghaoEdit),this._view.zhanghaoEdit.textTemp.textColor=3355443,this.shaiziBtnTouch()},t.prototype.hide=function(){e.prototype.hide.call(this),InputTextUtil.removeNativeInputTextListener(this._view.zhanghaoEdit),CommomBtn.removeClick(this._view.startBtn,this.startBtnTouch,this),CommomBtn.removeClick(this._view.shaiziBtn,this.shaiziBtnTouch,this)},t.prototype.startBtnTouch=function(){if(""!=this._view.zhanghaoEdit.text){var e={nick_name:""};e.nick_name=this._view.zhanghaoEdit.text,ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.nameBind,e,new FunctionVO(this.bindNameBack,this))}else Notice.showBottomCenterMessage("请输入昵称")},t.prototype.shaiziBtnTouch=function(){var e={};ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.randomName,e,new FunctionVO(this.randomNameBack,this))},t.prototype.bindNameBack=function(e){200==e.code?(App.data.game2Center.DataCenter.UserInfo.nickName=e.data.name,App.data.game2Center.mediatorCenter.loginMediator.reqGuideDone()):Notice.showBottomCenterMessage(""+e.info)},t.prototype.randomNameBack=function(e){200==e.code?this._view.zhanghaoEdit.text=e.data.name:Notice.showBottomCenterMessage(""+e.info)},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t}(BasePanel);__reflect(InputNamePanel.prototype,"InputNamePanel");var LoginScene=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this._view=new LoginSceneUI,this.addChild(this._view),this._view.titleLabel.text="",this._view.componeyLabel.text="",this._view.statusLabel.text=""},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._view&&(this._view.dispose(),this._view=null)},t.prototype.show=function(t){e.prototype.show.call(this,t),this._view.startBtn.alpha=0,Config.soEasy?onSoeasyLogin(1,new FunctionVO(this.soEasyLoginBack,this)):this.reqUpgradeStatus(),this._dispatcher.addEventListener(EventConst.U8LoginFail,this.revU8LoginFail,this),this._dispatcher.addEventListener(G2_GameSceneEvent.REQ_UPGRADE_STATUS,this.reqUpgradeStatus,this)},t.prototype.soEasyLoginBack=function(e){var t=e.currentTarget,i=JSON.parse(t.response);if(GameLog.log("_onLoginHandler : ",i),"200"==i.code){var n=ZmSdk.getInstance().getUserInfo();GameLog.log("用户的sdkindx"+n.common.sdkindx),n.common.sdkindx==QingFengSdk.getInstance().sdkIndex?QingFengSdk.getInstance().loadSdk(dispatcherReqUpgradeStatus):n.common.sdkindx==H5_3500_Sdk.getInstance().sdkIndex?H5_3500_Sdk.getInstance().loadSdk(dispatcherReqUpgradeStatus):n.common.sdkindx==H5_4177_Sdk.getInstance().sdkIndex?H5_4177_Sdk.getInstance().loadSdk(dispatcherReqUpgradeStatus):dispatcherReqUpgradeStatus()}},t.prototype.hide=function(){e.prototype.hide.call(this),egret.Tween.removeTweens(this._view.startBtn),CommomBtn.removeClick(this._view.startBtn,this.gotoGame,this),this._view.startBtn.enabled=!0},t.prototype.reqUpgradeStatus=function(){ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.upgradeStatus,{},new FunctionVO(this.revUpgradeStatus,this))},t.prototype.revUpgradeStatus=function(e){200==e.code?(ClientConfig.video=e.data.video,ClientConfig.inviteCode=e.data.inviteCode,ClientConfig.attention=e.data.attention,Config.IsApplyIOS&&(ClientConfig.inviteCode=0,ClientConfig.attention=0),this.reqAuthorInfo()):Notice.showBottomCenterMessage(e.info)},t.prototype.reqAuthorInfo=function(){ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.authorInfo,{},new FunctionVO(this.revAuthorInfo,this))},t.prototype.revAuthorInfo=function(e){200==e.code?(App.data.game2Center.DataCenter.authorInfo=e.data,App.data.game2Center.DataCenter.authorInfo&&(this._view.titleLabel.text=App.data.game2Center.DataCenter.authorInfo.title,this._view.componeyLabel.text=App.data.game2Center.DataCenter.authorInfo.company,this._view.statusLabel.text=App.data.game2Center.DataCenter.authorInfo.status),Config.soEasy?this.reqFilterList():this.tryReqNotice()):Notice.showBottomCenterMessage(e.info)},t.prototype.reqFilterList=function(){ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.fitlerList,{},new FunctionVO(this.revFilterList,this))},t.prototype.revFilterList=function(e){GameLog.log("LoginScene >> soeasy渠道屏蔽列表:",e),200==e.code?(SoEasySdk.hideChannelList=e.data,this.tryReqNotice()):Notice.showBottomCenterMessage(e.info)},t.prototype.tryReqNotice=function(){1==ClientConfig.attention?this.reqNotice():this.moveBtn()},t.prototype.revU8LoginFail=function(e){this._view.startBtn.enabled=!0},t.prototype.reqNotice=function(){var e={Authorization:App.data.game2Center.DataCenter.skey};DeviceUtil.IsAndroid?e.channel="android":DeviceUtil.IsIos&&(e.channel="ios"),ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.attention,e,new FunctionVO(this.revNotice,this))},t.prototype.revNotice=function(e){var t=ProtocolHttpData.attention;t=e,e.data.share&&(App.data.game2Center.DataCenter.shareContent=e.data.share,GameLog.log(App.data.game2Center.DataCenter.shareContent)),PanelOpenManager.openPanel(EnumPanelID.G2_NoticeDialogPanel,t),this.moveBtn()},t.prototype.moveBtn=function(){var e=this,t=this._view.startBtn.y;egret.Tween.get(this._view.startBtn).set({y:t+50,alpha:.4}).to({y:t-30,alpha:1},500).to({y:t},300).call(function(){egret.Tween.removeTweens(e._view.startBtn),CommomBtn.btnClick(e._view.startBtn,e.gotoGame,e,1)},this)},t.prototype.gotoGame=function(){if(App.data.game2Center.mediatorCenter.loginMediator,MilletSDK.getInstance().millet)return GameLog.log("小米平台-->"+MilletSDK.getInstance().milletData),void MilletSDK.getInstance().login(this.loginMillt,this);if(H5_360_Sdk.getInstance().config360&&0!=H5_360_Sdk.getInstance().config360.qid)return GameLog.log("360渠道"),void App.data.game2Center.mediatorCenter.loginMediator.reqGameInfo();if(WanBaSDK.getIntance().wanBaData){var e=WanBaSDK.getIntance().wanBaData;return GameLog.log("玩吧平台数据->"+JSON.stringify(e)),void this.loginWanBa(e.openid,e.openkey,WanBaSDK.getIntance().wanBaData.platform)}if(H5_Vivo_SDK.getInstance().vivoData)return GameLog.log("vivo渠道"),void H5_Vivo_SDK.getInstance().Vivo_login(this.vivoLogin,this);if(Config.U8Login)return this._view.startBtn.enabled=!1,App.data.game2Center.mediatorCenter.loginMediator.reqGameInfo(),void GameLog.log("------------U8Login-------------");if(Config.soEasy)return App.data.game2Center.mediatorCenter.loginMediator.reqGameInfo(),void GameLog.log("------------soEasy-------------");var t=window.auth_7k7k;return t?(App.data.game2Center.mediatorCenter.loginMediator.req7k7kLogin(),void GameLog.log("------------auth_7k7k-------------")):DeviceUtil.IsIos&&DeviceUtil.IsNative?void App.data.game2Center.mediatorCenter.loginMediator.reqGameInfo():void App.data.game2Center.mediatorCenter.loginMediator.reqOfficialLogin()},t.prototype.vivoLogin=function(){ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.loginVivo,{authtoken:H5_Vivo_SDK.getInstance().gameInfo.opentoken},new FunctionVO(this.revVivoLogin,this))},t.prototype.revVivoLogin=function(e){return 200==e.code?(App.data.game2Center.DataCenter.skey=e.data.skey,App.data.game2Center.mediatorCenter.loginMediator.reqGameInfo(),void Notice.showBottomCenterMessage("登陆成功")):void Notice.showBottomCenterMessage("登陆失败")},t.prototype.h5_360=function(e){200==e.code&&(H5_360_Sdk.getInstance().game_qid=e.data.qid,GameLog.log("H5_360     "+e.data.qid),App.data.game2Center.DataCenter.UserInfo.nickName=e.data.user,App.data.game2Center.mediatorCenter.loginMediator.reqGameInfo())},t.prototype.loginWanBa=function(e,t,i){ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.loginWanBa,{openid:e,openkey:t,platform:i},new FunctionVO(this.revWanBaLogin,this))},t.prototype.revWanBaLogin=function(e){200==e.code&&(App.data.game2Center.DataCenter.skey=e.data.skey,App.data.game2Center.mediatorCenter.loginMediator.reqGameInfo())},t.prototype.loginMillt=function(){ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.loginXiaoMi,{uid:MilletSDK.getInstance().milletData.uid,session:MilletSDK.getInstance().milletData.session},new FunctionVO(this.revMilltLogin,this))},t.prototype.revMilltLogin=function(e){return 200==e.code?(App.data.game2Center.DataCenter.skey=e.data.skey,void App.data.game2Center.mediatorCenter.loginMediator.reqGameInfo()):void Notice.showBottomCenterMessage(e.info+"")},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),t}(BasePanel);__reflect(LoginScene.prototype,"LoginScene");var VideoButtonView=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this._view=new VideoButtonUI,this.addChild(this._view)},t.prototype.show=function(t){e.prototype.show.call(this,t),this._view.width=this.width,this._view.height=this.height,this._videoType=t.type,this._uid=t.uid,this._collectId=t.collectId,this._isWallPaper=t.using,this._videoType!=EnumVideoType.DONGTAI_BIZHI&&this._videoType!=EnumVideoType.AVG_SHIPIN&&(App.sound.isCloseBgm=!0),this._canSkip=t.canSkip,this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBg,this,this._view.bgRect),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBack,this,this._view.btnBack),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickUse,this,this._view.btnUse),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickShare,this,this._view.btnShare),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClicpSkip,this,this._view.groupSkip),this._dispatcher.addEventListener(egret.Event.RESIZE,this.onResize,this),this.showVideoButton(!0)},t.prototype.showVideoButton=function(e){void 0===e&&(e=!1);var t=0==Video.instance().paused||e;switch(this._videoType){case EnumVideoType.DONGTAI_BIZHI:this._view.btnBack.visible=!1,this._view.btnPlay.visible=!1,this._view.btnUse.visible=!0,this._view.btnUse.label=this._isWallPaper?"使用中":"使用",this._view.btnShare.visible=App.global.canShare,this._view.btnShare.visible?this._view.btnUse.horizontalCenter=-130:this._view.btnUse.horizontalCenter=0,this._view.groupSkip.visible=!1;break;case EnumVideoType.HUIYI_SHIPIN:case EnumVideoType.XIN_DONG1_VIDEO:this._view.btnBack.visible=!t,this._view.btnPlay.visible=!t,this._view.btnUse.visible=!1,this._view.btnShare.visible=!1,this._view.groupSkip.visible=!1;break;case EnumVideoType.XIN_DONG1:this._view.btnBack.visible=!1,this._view.btnPlay.visible=!t,this._view.btnUse.visible=!1,this._view.btnShare.visible=!1,this._view.groupSkip.visible=Config.skipVideo;break;case EnumVideoType.XINTIAO_JIEJU:this._view.btnBack.visible=!t,this._view.btnPlay.visible=!t,this._view.btnUse.visible=!1,this._view.btnShare.visible=!1,this._view.groupSkip.visible=!1;break;case EnumVideoType.AVG_SHIPIN:this._view.btnBack.visible=!1,this._view.btnPlay.visible=!t,this._view.btnUse.visible=!1,this._view.btnShare.visible=!1,this._view.groupSkip.visible=this._canSkip||Config.skipVideo}},t.prototype.onClicpSkip=function(e){Video.instance().completeHandler&&Video.instance().completeHandler.exec(),Video.instance().dispose(!0)},t.prototype.onClickUse=function(e){this._isWallPaper||ProtocolCommon.instance().send_user_use_wallpaper(this._uid,this._collectId,new FunctionVO(this.onUseBack,this))},t.prototype.onUseBack=function(e){"200"==e.code&&(this._isWallPaper=!0,this.showVideoButton(),App.dispatcher.dispatchEvent(MemoryEvent.CHANGE_BIZHI,this._collectId),App.data.gameHallCenter.updateHeroniesProps(this._uid,{videoUrl:Video.instance().src}))},t.prototype.onClickShare=function(e){ProtocolCommon.instance().send_share_link(this._uid,this._collectId,new FunctionVO(this.onCallBack,this))},t.prototype.onCallBack=function(e){"200"==e.code&&PanelOpenManager.openPanel(EnumPanelID.GAME_SHARE2,{url:e.data.collect_image})},t.prototype.onClickBack=function(e){if(this._videoType==EnumVideoType.HUIYI_SHIPIN||this._videoType==EnumVideoType.XINTIAO_JIEJU)App.sound.playSoundSwitchClient(EnumSoundId.PANEL_CLOSE);else if(this._videoType==EnumVideoType.XIN_DONG1&&Video.instance().completeHandler)return void Video.instance().completeHandler.exec();Video.instance().dispose(!0)},t.prototype.onClickBg=function(e){return this._videoType==EnumVideoType.DONGTAI_BIZHI?(this.onClickBack(e),void App.sound.playSoundSwitchClient(EnumSoundId.PANEL_CLOSE)):void this.showPlayBtnState()},t.prototype.showPlayBtnState=function(){0==Video.instance().paused?(Video.instance().pause(),this._videoType==EnumVideoType.HUIYI_SHIPIN&&App.sound.playSoundSwitchClient(EnumSoundId.CLICK)):Video.instance().play(),this.showVideoButton()},t.prototype.hide=function(){if(e.prototype.hide.call(this),this._videoType==EnumVideoType.HUIYI_SHIPIN||this._videoType==EnumVideoType.XINTIAO_JIEJU){var t=App.global.storage.getItem(EnumStorageType.HALL_MUSIC_SETTING);App.sound.isCloseBgm="0"==t}},t.prototype.dispose=function(){this._view&&(this._view.dispose(),this._view=void 0),e.prototype.dispose.call(this)},t.prototype.onResize=function(e){this.x=0,this.y=0},Object.defineProperty(t.prototype,"width",{get:function(){return 0==App.layer.rotation?Config.SCREEN_WIDTH:Config.SCREEN_HEIGHT},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return 0==App.layer.rotation?Config.SCREEN_HEIGHT:Config.SCREEN_WIDTH},enumerable:!0,configurable:!0}),t.prototype.needDispose=function(){return!1},t}(BasePanel);__reflect(VideoButtonView.prototype,"VideoButtonView");var LayerBase=function(e){function t(){return e.call(this)||this}return __extends(t,e),t}(h5_engine.GDisplayObjectContainer);__reflect(LayerBase.prototype,"LayerBase");var GMovieClip=function(e){function t(){var t=e.call(this)||this;return t.isDispose=!1,t}return __extends(t,e),t.prototype.init=function(e,t,i){var n=RES.getRes(e),o=RES.getRes(t),a=new egret.MovieClipDataFactory(n,o);this.movieClipData=a.generateMovieClipData(i)},t.prototype.remove=function(){this.parent&&this.parent.removeChild(this)},t.prototype.dispose=function(){this.stop(),this.remove(),this.movieClipData=null,this.isDispose=!0},t}(egret.MovieClip);__reflect(GMovieClip.prototype,"GMovieClip",["IDispose"]);var EnumPanelID=function(){function e(){}return e.LOGIN=1,e.GAME_HALL=2,e.START_VIDEO=3,e.GAMEHALL_SETTING=4,e.USER_AGREEMENT=5,e.TOURISTLOGIN=6,e.HEROINES_DETAIL=7,e.HERONIES_BUY=8,e.HERONIES_SETTING=9,e.LOADING_RESVIEW=10,e.MEMORY=11,e.VIDEO_BUTTON=12,e.FULL_SCREEN_IMAGE=13,e.GAME_SHARE=14,e.RECORD=15,e.UNBIND_PHONE=16,e.BIND_NEW_PHONE=17,e.TOURIST_BIND_PHONE=18,e.FORCE_PHONE_BIND=19,e.RETRY_CONNECT=20,e.ENDING=21,e.GAME_SHARE2=22,e.OTHER_LOGIN=23,e.GAME_FANG_DONG_SELECT=101,e.GAME_FANG_DONG_BENAME=102,e.GAME_FANG_DONG_MENU=103,e.GAME_FANG_DONG_REVIEW=104,e.GAME_FANG_DONG_BUY=105,e.ALERT=1e3,e.ALERT2=1001,e.GM=2e3,e.G2_WeixinPanel=200,e.G2_DianhuaPanel=201,e.G2_JietongPanel=204,e.G2_CallingPanel=205,e.G2_SetPanel=206,e.G2_LovePanel=207,e.G2_WorkPanel=208,e.G2_WorkProPanel=209,e.G2_LoveProPanel=210,e.G2_FinishLovePanel=211,e.G2_FinishWorkPanel=212,e.G2_CallHistoryPanel=213,e.G2_ShopPanel=214,e.G2_BagsPanel=215,e.G2_ShipinPanel=216,e.G2_WeiboPanel=217,e.G2_UseToolPanel=218,e.G2_BuyToolPanel=219,e.G2_LibaoFinishPanel=220,e.G2_MailPanel=221,e.G2_MailDataPanel=222,e.G2_LibaoCDPanel=223,e.G2_LibaomiaohuiPanel=224,e.G2_LibaoVideoPanel=225,e.G2_InputNamePanel=226,e.G2_ProtocolPanel=227,e.G2_SharePanel=228,e.G2_ActPanel=229,e.G2_RedPacketPanel=230,e.G2_NoticeDialogPanel=231,e.G2_RedPacketRemindPanel=232,e.G2_ShopDiamondPanel=233,e.G2_ShopGoldPanel=234,e.G2_ShopGiftToolPanel=235,e.G2_GAME_LOAD_SCENE=236,e.G2_GAME_LOGIN_SCENE=237,e.G2_GAME_SCENE=238,e.G2_DlcMainPanel=239,e.G2_DlcMainDoc=240,e.G2_MysteriousShop=241,e.G2_DlcMainGameOver=242,e.G2_DlcMainGame=243,e}();__reflect(EnumPanelID.prototype,"EnumPanelID");var ObjectPool=function(){function e(e,t){void 0===t&&(t=!0),this._cls=void 0,this._pool=void 0,this._poolDict=void 0,this._numCount=0,this._checkDuplicate=!0,this._pool=[],this._cls=e,this._checkDuplicate=t,this._checkDuplicate&&(this._poolDict=new HashMap)}return Object.defineProperty(e.prototype,"numCount",{get:function(){return this._numCount},enumerable:!0,configurable:!0}),e.prototype.getObject=function(){var e=void 0;return this._pool.length>0?(e=this._pool.pop(),this._checkDuplicate&&this._poolDict.del(e)):(e=new this._cls,this._numCount++),e},e.prototype.push=function(e){null!=e&&(this._checkDuplicate?this._poolDict.has(e)?GameLog.logDebug("有重复的对象入池"):(this._pool.push(e),this._poolDict.put(e,e)):this._pool.push(e))},e.prototype.pushArr=function(e){var t=0,i=e.length;for(t=0;i>t;t++)this.push(e[t])},e.getPool=function(t){if(0==this.POOL_HASH.has(t)){var i=egret.getDefinitionByName(t);this.POOL_HASH.put(t,new e(i))}return this.POOL_HASH.get(t)},e.getObject=function(e){return this.getPool(e).getObject()},e.recoveryObject=function(e,t){this.getPool(e).push(t)},e.POOL_HASH=new HashMap,e}();__reflect(ObjectPool.prototype,"ObjectPool");var PanelManager=function(){function e(){}return e.registerPanel=function(e,t,i,n,o,a,s){void 0===n&&(n=-1),void 0===o&&(o=!1),void 0===a&&(a=1),void 0===s&&(s=!0),n>0&&(this._panelNameHash.put(e,n),this._panelIDHash.put(n,e));var r=this._allPanelHash.get(e);return r||(r=new PanelInfo(e,i,t,o,a,s),this._allPanelHash.put(e,r)),e},e.registerFunctionID=function(e,t){if(null!=t)for(var i=0;i<t.length;i++)this._functionIDdic[t[i]]=e;return e},e.getFunctionID=function(e){return null==this._functionIDdic[e]?-1:this._functionIDdic[e]},e.registerPanelOwner=function(e,t){this._panelOwnerHash.put(e,t)},e.registerPanelParent=function(e,t,i){void 0===i&&(i=0);var n=this.getPanelInfo(e);n&&(n.parent=t,n.effectType=i,n.parentIndex=App.layer.getChildIndex(t))},e.registerPanelSound=function(e,t,i){void 0===t&&(t=null),void 0===i&&(i=null);var n=this.getPanelInfo(e);n&&(n.openSound=t,n.closeSound=i)},e.registerModalAlpha=function(e,t){var i=this.getPanelInfo(e);i&&(i.modalAlpha=t)},e.isShowing=function(e){var t=this._panelHash.get(e);return t?t.isShowing:!1},e.removeAllPanel=function(){for(var e,t=this._panelHash.values,i=t.length-1;i>=0;i--)e=t[i],e&&this.removePanelByName(e.panelName,!1)},e.openPanel=function(e,t,i){void 0===t&&(t=null),void 0===i&&(i=!0);var n=this.getPanel(e),o=this._allPanelHash.get(e);if(!o)throw"面板 "+e+"未注册！";if(!n){var a=o.className;n=new a,this._panelHash.put(o.panelName,n)}n&&(i&&n.isShowing?this.removePanelByName(e):(o.isModal&&this.addModal(e),o.lastShowTime=egret.getTimer(),this.addPanelToCenter(e,n,t,o.effectType)))},e.addModal=function(e){-1==this._panelModalList.indexOf(e)&&(this._panelModalList.push(e),this._panelModalList.sort(this.sortModalPanelList),this.updateModal(!0))},e.removeModal=function(e){var t=this._panelModalList.indexOf(e);-1!=t&&(this._panelModalList.splice(t,1),this.updateModal(!1))},e.sortModalPanelList=function(t,i){var n=e.getPanelInfo(t),o=e.getPanelInfo(i);if(n.parentIndex>o.parentIndex)return 1;if(n.parentIndex<o.parentIndex)return-1;var a=e.getPanel(t),s=e.getPanel(i);if(null==a.parent)return 1;if(null==s.parent)return-1;var r=a.parent.getChildIndex(a),h=s.parent.getChildIndex(s);return r>h?-1:1},e.updateModal=function(e){if(this._panelModalList.length>0){var t=this._panelModalList[this._panelModalList.length-1],i=this._allPanelHash.get(t);App.layer.showModal(i.parent?i.parent:App.layer.moduleLayer,i.modalAlpha,e)}else App.layer.hideModal()},e.removeModalPanel=function(){if(this._panelModalList.length>0){var e=this._panelModalList[this._panelModalList.length-1],t=this._allPanelHash.get(e);t.canTouchClose&&this.removePanelByName(e)}},e.removePanelByName=function(e,t){void 0===t&&(t=!0);var i=this._panelHash.get(e);if(i&&i.parent){var n=this.getPanelInfo(e);n.lastHideTime=egret.getTimer(),n.closeSound&&App.sound.playSoundSwitchClient(n.closeSound);var o=0==App.layer.rotation?Config.SCREEN_WIDTH:Config.SCREEN_HEIGHT,a=0==App.layer.rotation?Config.SCREEN_HEIGHT:Config.SCREEN_WIDTH;t&&n.effectType==this.EFFECT_SCALE?egret.Tween.get(i).to({scaleX:0,scaleY:0,x:o>>1,y:a>>1},400,egret.Ease.backIn).call(this.onHideComplete,this,[i]):this.onHideComplete(i)}},e.addPanelToCenter=function(e,t,i,n){if(void 0===i&&(i=null),t){var o=this.getPanelInfo(e),a=o.parent?o.parent:App.layer.moduleLayer;t.panelName=e;var s=0==App.layer.rotation?Config.SCREEN_WIDTH:Config.SCREEN_HEIGHT,r=0==App.layer.rotation?Config.SCREEN_HEIGHT:Config.SCREEN_WIDTH;t.x=s-t.width>>1,t.y=r-t.height>>1,a.addChild(t),0==t.isShowing&&(this.showPanelCount++,o.openSound&&App.sound.playSoundSwitchClient(o.openSound)),t.isShowing=!0,t.show(i),t.alpha=0,n==this.EFFECT_SCALE?(t.alpha=1,egret.Tween.get(t).set({scaleX:0,scaleY:0,x:s>>1,y:r>>1}).to({scaleX:1,scaleY:1,x:s-t.width>>1,y:r-t.height>>1},400,egret.Ease.backOut).call(this.onShowComplete,this,[t])):n==this.EFFECT_ALPHA?egret.Tween.get(t).to({alpha:1},700,egret.Ease.backOut).call(this.onShowComplete,this,[t]):t.alpha=1}},e.onHideComplete=function(e){e.parent&&(this.onShowComplete(e),e.parent.removeChild(e),e.isShowing=!1,e.hide(),this.removeModal(e.panelName),this.showPanelCount--)},e.onShowComplete=function(e){egret.Tween.removeTweens(e)},e.onPanelRemove=function(e){var t=e.currentTarget,i=t.panelName;this.getPanelInfo(i)},e.disposePanelyByGameId=function(e){for(var t,i=this._panelOwnerHash.get(e),n=this._panelHash.values,o=0,a=n.length;a>o;o++)t=n[o],t&&t.needDispose()&&-1!=i.indexOf(t.panelName)&&(this._panelHash.del(t.panelName),t.dispose())},e.checkHidePanelDispose=function(){for(var e,t,i,n=2,o=60*n*1e3,a=egret.getTimer(),s=!1,r=this._panelHash.values,h=0,p=r.length;p>h;h++)t=r[h],t.needDispose()?(i=t.panelName,e=this.getPanelInfo(i),e.lastHideTime>e.lastShowTime&&a-e.lastHideTime>o&&(this._panelHash.del(i),t.dispose(),GameLog.log("定时释放了面板:"+e.panelName))):0==Config.isRelease&&(s=!0,0==this._disposeFailPanelHash.has(t.panelName)&&this._disposeFailPanelHash.put(t.panelName,t.panelName))},Object.defineProperty(e,"allPanelHash",{get:function(){return this._allPanelHash},enumerable:!0,configurable:!0}),e.getPanelInfo=function(e){return this._allPanelHash.get(e)},e.getPanelName=function(e){return this._panelIDHash.get(e)},e.getPanelId=function(e){return this._panelNameHash.get(e)},e.getPanel=function(e){return this._panelHash.get(e)},e.EFFECT_NONE=0,e.EFFECT_SCALE=1,e.EFFECT_ALPHA=2,e._functionIDdic=new HashMap,e._disposeFailPanelHash=new HashMap,e._panelHash=new HashMap,e._allPanelHash=new HashMap,e._panelIDHash=new HashMap,e._panelNameHash=new HashMap,e._panelModalList=[],e._panelOwnerHash=new HashMap,e.showPanelCount=0,e}();__reflect(PanelManager.prototype,"PanelManager");var PanelInfo=function(){function e(e,t,i,n,o,a){this.panelName="",this.isModal=!1,this.lastShowTime=0,this.lastHideTime=0,this.parentIndex=4,this.modalAlpha=.5,this.panelName=e,this.res=t,this.className=i,this.isModal=n,this.effectType=o,this.canTouchClose=a}return e}();__reflect(PanelInfo.prototype,"PanelInfo");var h5_engine;!function(e){var t=function(e){function t(t,i){var n=e.call(this)||this;return n.m_width=0,n.m_height=0,n.Create(t,i),n}return __extends(t,e),t.prototype.Create=function(e,t){if(e>0&&t>0){this.m_width=e,this.m_height=t,this.m_matrix=new Array(t);for(var i=0;t>i;i++){this.m_matrix[i]=new Array(e);for(var n=0;t>n;n++)this.m_matrix[i][n]=0}}},t.prototype.Destroy=function(){this.m_matrix=null},t.prototype.GetWidth=function(){return this.m_width},t.prototype.GetHeight=function(){return this.m_height},t.prototype.GetValue=function(e,t){var i=0;return e>=0&&e<this.m_height&&t>=0&&t<=this.m_width&&(i=this.m_matrix[e][t]),i},t.prototype.SetValue=function(e,t,i){e>=0&&e<this.m_height&&t>=0&&t<=this.m_width&&(this.m_matrix[e][t]=i)},t.prototype.LoadIdentity=function(){if(this.m_matrix)for(var e=0;e<this.m_height;e++)for(var t=0;t<this.m_width;t++)e==t?this.m_matrix[e][t]=1:this.m_matrix[e][t]=0},t.prototype.LoadZeros=function(){if(this.m_matrix)for(var e=0;e<this.m_height;e++)for(var t=0;t<this.m_width;t++)this.m_matrix[e][t]=0},t.prototype.Multiply=function(e,i){if(void 0===i&&(i=t.MATRIX_ORDER_PREPEND),!this.m_matrix||!e)return!1;var n=e.GetHeight(),o=e.GetWidth();if(i==t.MATRIX_ORDER_APPEND){if(this.m_width!=n)return!1;for(var a=new t(o,this.m_height),s=0;s<this.m_height;s++)for(var r=0;o>r;r++){for(var h=0,p=0,l=0;p<Math.max(this.m_height,n)&&l<Math.max(this.m_width,o);p++,l++)h+=e.GetValue(p,r)*this.m_matrix[s][l];a.SetValue(s,r,h)}for(this.Destroy(),this.Create(o,this.m_height),s=0;n>s;s++)for(r=0;r<this.m_width;r++)this.m_matrix[s][r]=a.GetValue(s,r)}else{if(this.m_height!=o)return!1;for(a=new t(this.m_width,n),s=0;n>s;s++)for(r=0;r<this.m_width;r++){for(h=0,p=0,l=0;p<Math.max(n,this.m_height)&&l<Math.max(o,this.m_width);p++,l++)h+=this.m_matrix[p][r]*e.GetValue(s,l);a.SetValue(s,r,h)}for(this.Destroy(),this.Create(this.m_width,n),s=0;n>s;s++)for(r=0;r<this.m_width;r++)this.m_matrix[s][r]=a.GetValue(s,r)}return!0},t.prototype.MultiplyNumber=function(e){if(!this.m_matrix)return!1;for(var t=0;t<this.m_height;t++)for(var i=0;i<this.m_width;i++){var n=0;n=this.m_matrix[t][i]*e,this.m_matrix[t][i]=n}return!0},t.prototype.Add=function(e){if(!this.m_matrix||!e)return!1;var t=e.GetHeight(),i=e.GetWidth();if(this.m_width!=i||this.m_height!=t)return!1;for(var n=0;n<this.m_height;n++)for(var o=0;o<this.m_width;o++){var a=0;a=this.m_matrix[n][o]+e.GetValue(n,o),this.m_matrix[n][o]=a}return!0},t.MATRIX_ORDER_PREPEND=0,t.MATRIX_ORDER_APPEND=1,t}(Dispose);
e.DynamicMatrix=t,__reflect(t.prototype,"h5_engine.DynamicMatrix")}(h5_engine||(h5_engine={}));var CallingPanelUI=function(e){function t(){return e.call(this,"CallingPanelSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(CallingPanelUI.prototype,"CallingPanelUI");var GuideManager=function(){function e(){this.init()}return e.prototype.init=function(){this.descHash=new HashMap,this.guideHash=new HashMap,this.displayHash=new HashMap,this.descHash.put(EnumGuideType.OPEN_MENU,["做选择之前保存一下，\n选错还可以读取存档获得\n重新选择的机会哦！"]),this.descHash.put(EnumGuideType.AVG_MENU_SAVE,["故事中有许多节点会将剧情引向\n不同的分支，在关键的节点处\n进行保存，轻松体验多样剧情！"]),this.descHash.put(EnumGuideType.REVIEW,["回顾之前的内容，给寇雅最恰当的回应吧！"]),this.descHash.put(EnumGuideType.DETAIL_MEMORY,["解锁了新的回忆\n快来看看吧！"]),this.descHash.put(EnumGuideType.AVG_HELP,["不知道该怎么选？\n问问朋友们吧！"]),this.descHash.put(EnumGuideType.START_AUTOPLAY,["点此开始自动播放"]),this.descHash.put(EnumGuideType.PRESS_JUMPREAD,["长按跳过已读内容"]),this.descHash.put(EnumGuideType.END_SHARE,["解锁了新的结局\n分享给大家看看吧！"]),this.descHash.put(EnumGuideType.DETAIL_READ,["不同的回答有不同的后续内容\n解锁后续故事前还有很多没有探索呢~\n读取存档和寇雅多相处一会儿吧！"]),this.descHash.put(EnumGuideType.OPEN_MENU2,["对选择不太满意？读取之前\n保存的进度，重新选择一次吧！"]),this.descHash.put(EnumGuideType.AVG_MENU_READ,["系统会自动保存最近一次选择的\n节点，对寇雅的回应不满意？\n读取进度再试一次吧！"])},e.prototype.initState=function(){if(!this._initState){this._initState=!0;var e=App.global.userInfo.uid;if(!e)return void GameLog.logError("未获得角色id");this.allGuidesKey=EnumStorageType.FANGDONG_PLAYER_GUIDE+e,this.readExistGuideData(),this.changeGuideTo_stateN(EnumGuideType.REVIEW),this.changeGuideTo_stateN(EnumGuideType.DETAIL_MEMORY),this.changeGuideTo_stateN(EnumGuideType.START_AUTOPLAY),this.changeGuideTo_stateN(EnumGuideType.END_SHARE),this.changeGuideTo_state0(EnumGuideType.OPEN_MENU),this.changeGuideTo_state0(EnumGuideType.AVG_MENU_SAVE),this.changeGuideTo_state0(EnumGuideType.OPEN_MENU2),this.changeGuideTo_state0(EnumGuideType.AVG_MENU_READ),this.changeGuideTo_state0(EnumGuideType.AVG_HELP),this.changeGuideTo_state0(EnumGuideType.PRESS_JUMPREAD),this.changeGuideTo_state0(EnumGuideType.DETAIL_READ)}},e.prototype.addDisplayer=function(e,t){this.displayHash.put(t,e)},e.prototype.showView=function(e,t,i,n){if(void 0===i&&(i=""),void 0===n&&(n=!1),!Config.skipGuide){0==Config.isRelease&&this.readExistGuideData();var o=this.getGuideStorageValue(t);if(o==EnumGuideType.STATE_N){var a;if(""==i){if(a=App.layer.specialMenuLayer,null==GameManager.currentGame)return}else{var s=PanelManager.getPanelInfo(i);if(!s)return void GameLog.logError("面板不存在:",i);if(a=s.parent?s.parent:App.layer.moduleLayer,0==PanelManager.isShowing(i))return}n?App.timer.doFrameOnce(this,1,this.showGuide,[e,t,a]):this.showGuide(e,t,a)}}},e.prototype.showGuide=function(e,t,i){void 0===i&&(i=App.layer.sceneLayer),this.setGuideStorageData(t,EnumGuideType.STATE_1),App.timer.clearTimer(this,this.showGuide),null==this.guideView&&(this.guideView=GuideView.getView());var n=this.descHash.get(t)[0];this.guideId=t,this.guideView.show([e,t,n]),i.addChild(this.guideView),this.guideId==EnumGuideType.REVIEW?this.changeGuideTo_stateN(EnumGuideType.OPEN_MENU):this.guideId==EnumGuideType.OPEN_MENU?this.changeGuideTo_stateN(EnumGuideType.AVG_MENU_SAVE):this.guideId==EnumGuideType.AVG_MENU_SAVE?this.changeGuideTo_stateN(EnumGuideType.AVG_HELP):this.guideId==EnumGuideType.OPEN_MENU2&&this.changeGuideTo_stateN(EnumGuideType.AVG_MENU_READ)},e.prototype.removeView=function(e){this.guideView&&this.guideView.guideId==e&&(this.guideId=-1,this.guideView.dispose(),this.guideView=void 0)},e.prototype.showNextView=function(e){var t,i=-1;e==EnumGuideType.REVIEW&&(i=EnumGuideType.OPEN_MENU),-1!=i&&(t=this.displayHash.get(i),t&&this.showView(t,i))},e.prototype.removeExistGuide=function(){this.guideView&&this.removeView(this.guideView.guideId)},e.prototype.changeGuideTo_stateN=function(e){var t=this.getGuideStorageValue(e);t&&t!=EnumGuideType.STATE_0||this.setGuideStorageData(e,EnumGuideType.STATE_N)},e.prototype.changeGuideTo_state0=function(e){var t=this.getGuideStorageValue(e);t&&t!=EnumGuideType.STATE_N||this.setGuideStorageData(e,EnumGuideType.STATE_0)},e.prototype.setGuideStorageData=function(e,t,i){void 0===i&&(i=!0),this.guideHash.put(e,t),i&&this.updateAllGuideStates()},e.prototype.getGuideStorageValue=function(e){return this.guideHash.get(e)},e.prototype.readExistGuideData=function(){var e=App.global.storage.getItem(this.allGuidesKey);if(e&&e.length==EnumGuideType.MAX_NUM)for(var t=0;t<EnumGuideType.MAX_NUM;t++)this.setGuideStorageData(t,e.charAt(t),t==EnumGuideType.MAX_NUM-1)},e.prototype.updateAllGuideStates=function(){this.guideStates="";for(var e=0;e<EnumGuideType.MAX_NUM;e++)this.guideStates+=this.getGuideStorageValue(e);App.global.storage.setItem(this.allGuidesKey,this.guideStates)},e}();__reflect(GuideManager.prototype,"GuideManager");var GuideView=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.show=function(e){var t=(egret.getTimer(),e[0]);this.guideId=e[1];var i,n=t.localToGlobal().x,o=t.localToGlobal().y,a=t.width,s=t.height;this._display=t,this._display.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClickDisplay,this),this.container||(this.container=new egret.DisplayObjectContainer),this.bgMask||(this.bgMask=new egret.Shape,this.container.addChild(this.bgMask)),this.bgMask.graphics.clear(),this.bgMask.graphics.beginFill(0,.65),this.bgMask.graphics.drawRect(0,0,Config.MAIN_WIDTH,Config.MAIN_HEIGHT),this.bgMask.graphics.endFill(),this.showArea||(this.showArea=new egret.Bitmap);var r=t instanceof eui.Button;if(r){var h;h=t instanceof eui.Button?t.getChildAt(0):t,this.container.addChild(this.showArea),this.showArea.texture=h.texture,this.showArea.x=n,this.showArea.y=o,this.showArea.width=a,this.showArea.height=s,this.showArea.blendMode=egret.BlendMode.ERASE,this.showAreaS&&this.showAreaS.parent&&this.showAreaS.parent.removeChild(this.showAreaS),i=.8*s}else i=2*s,this.showArea&&this.showArea.parent&&this.showArea.parent.removeChild(this.showArea),this.showAreaS||(this.showAreaS=new egret.Sprite,this.showAreaS.touchEnabled=!1),this.container.addChild(this.showAreaS),this.showAreaS.graphics.clear(),this.showAreaS.graphics.beginFill(16711680),this.showAreaS.graphics.drawRoundRect(n-5,o-5,a+10,s+10,.3*a,.3*s),this.showAreaS.graphics.endFill(),this.showAreaS.blendMode=egret.BlendMode.ERASE;this.renderTexture||(this.renderTexture=new egret.RenderTexture),this.renderTexture.drawToTexture(this.container),this.bitmap||(this.bitmap=new egret.Bitmap,this.addChild(this.bitmap),this.bitmap.touchEnabled=!0,this.bitmap.pixelHitTest=!0),this.bitmap.texture=this.renderTexture,e[2]?(this.textBg||(this.textBg=new eui.Image("img_guide_wordbg_png"),this.textBg.scale9Grid=new egret.Rectangle(90,86,40,10),this.textBg.touchEnabled=!1,this.addChild(this.textBg),this.textDesc=new egret.TextField,this.textDesc.textColor=16777215,this.textDesc.size=26,this.textDesc.wordWrap=!0,this.textDesc.multiline=!0,this.textDesc.textAlign="center",this.textDesc.lineSpacing=10,this.textDesc.touchEnabled=!1,this.addChild(this.textDesc)),this.textBg.visible=!0,this.textDesc.visible=!0,this.textDesc.text=e[2],this.textBg.width=Math.max(this.textDesc.textWidth+76,200),this.textBg.height=Math.max(this.textDesc.textHeight+78,150),this.textBg.x=Math.min(n+.5*(a-this.textBg.width),Config.MAIN_WIDTH-this.textBg.width-20),this.textBg.y=o-this.textBg.height-20,this.textDesc.x=this.textBg.x+.5*(this.textBg.width-this.textDesc.textWidth)+12,this.textDesc.y=this.textBg.y+.5*(this.textBg.height-this.textDesc.textHeight)+12):this.textBg&&(this.textBg.visible=!1,this.textDesc.visible=!1),this._effect||(this._effect=new ListenEffect(i,.5,500)),this.addChild(this._effect),this._effect.x=n+.5*a,this._effect.y=o+.5*s,this._effect.play(),App.timer.doTimeOnce(this,2e3,this.addClickEvent),this.touchEnabled=!1},t.prototype.addClickEvent=function(){App.timer.clearTimer(this,this.addClickEvent),this.touchEnabled=!0,this.removeEffect(),this.bitmap.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBg,this)},t.prototype.onClickDisplay=function(e){App.global.guide.removeView(this.guideId),this.guideId==EnumGuideType.START_AUTOPLAY&&(App.global.storage.setItem(EnumStorageType.HERONIES_SETTING_AUTOPLAY+App.global.userInfo.uid+"_"+App.data.gameFangDongCenter.gameId,"1"),App.data.gameFangDongCenter.gameId&&App.data.gameFangDongCenter.updateSetting())},t.prototype.onClickBg=function(e){App.global.guide.removeView(this.guideId),App.global.guide.showNextView(this.guideId)},t.prototype.removeEffect=function(){this._effect&&(this._effect.stop(),this._effect.remove())},t.prototype.dispose=function(){App.timer.clearTimer(this,this.addClickEvent),this.removeEffect(),this.bitmap&&this.bitmap.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBg,this),this._display&&this._display.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClickDisplay,this),this.parent&&this.parent.removeChild(this),t.pool.push(this)},t.getView=function(){return this.pool.length&&this.pool.pop(),new t},t.pool=[],t}(eui.Component);__reflect(GuideView.prototype,"GuideView",["IDispose"]);var MenuButtonManager=function(){function e(){}return e}();__reflect(MenuButtonManager.prototype,"MenuButtonManager");var MusicBgmItem=function(){function e(){this._crtPlayCount=0,this._isLoadingFinish=!1,this._volume=0,this._delay=0,this._num=0,this._isPlaying=!1,this._isKey=!1,this._fadeIn=!1,this._fadeOut=!1}return Object.defineProperty(e.prototype,"isPlaying",{get:function(){return this._isPlaying},set:function(e){this._isPlaying=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._volume},set:function(e){this._volume=e,this._soundChannel&&(this._soundChannel.volume=this._volume)},enumerable:!0,configurable:!0}),e.prototype.playSound=function(e,t,i,n,o,a,s){return void 0===t&&(t=2e3),void 0===n&&(n=.3),void 0===o&&(o=1),void 0===a&&(a=!0),void 0===s&&(s=null),i&&0==RES.hasRes(e)?void GameLog.logError(e+" 背景音乐不存在"):void(this._isPlaying||(this._isKey=i,this._delay=t,this._num=o,this._volume=n,this._isPlaying=!0,this._url=e,this._fadeIn=a,this._callBack=s,0==this._delay&&(this._delay=1),this._sound||(i?(this._sound=RES.getRes(e),this._sound.type=egret.Sound.MUSIC,this.onLoadComplete()):(this._sound=new egret.Sound,this._sound.type=egret.Sound.MUSIC,this._sound.addEventListener(egret.Event.COMPLETE,this.onLoadComplete,this),this._sound.load(e)))))},e.prototype.onLoadComplete=function(e){this._isLoadingFinish=!0,this._isPlaying?(GameLog.log("开始播放"),this._sound.removeEventListener(egret.Event.COMPLETE,this.onLoadComplete,this),this._soundChannel&&this._soundChannel.removeEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this),this._soundChannel=this._sound.play(0,this._num),this._startTime=egret.getTimer(),this._fadeIn?(this._soundChannel.volume=0,egret.Tween.get(this._soundChannel).to({volume:this._volume},500)):this._soundChannel.volume=this._volume,this._soundChannel?this._soundChannel.addEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this):this.stopSound(!1)):this.stopSound(!1)},e.prototype.onSoundComplete=function(e){this._crtPlayCount++,this._isPlaying=!1,this.stopSound(!1),App.timer.doTimeOnce(this,this._delay,this.onTimeHandler)},e.prototype.onTimeHandler=function(){App.timer.clearTimer(this,this.onTimeHandler),this._callBack&&this._callBack.exec()},e.prototype.onFadeOutComplete=function(e){e&&e.stop()},e.prototype.stopSound=function(e){if(void 0===e&&(e=!0),egret.getTimer()-this._startTime<300)return void App.timer.doTimeOnce(this,300,this.stopSound,[e]);if(App.timer.clearTimer(this,this.onTimeHandler),this._soundChannel&&(egret.Tween.removeTweens(this._soundChannel),e?(egret.Tween.get(this._soundChannel).to({volume:0},500).call(this.onFadeOutComplete,this,[this._soundChannel,this._isKey?null:this._sound]),this._soundChannel.removeEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this)):(this._soundChannel.stop(),this._soundChannel.removeEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this))),this._sound&&(this._sound.removeEventListener(egret.Event.COMPLETE,this.onLoadComplete,this),0==this._isLoadingFinish&&0==this._isKey))try{this._sound.close()}catch(t){}this._isPlaying=!1,this._volume=0,this._sound=null,this._soundChannel=null},e}();__reflect(MusicBgmItem.prototype,"MusicBgmItem");var MusicEffectItem=function(){function e(){this._volume=0,this._isLoop=!1,this._lastPlayingTime=0,this._isPlaying=!1,this.isKey=!1}return Object.defineProperty(e.prototype,"lastPlaying",{get:function(){return this._lastPlayingTime},set:function(e){this._lastPlayingTime=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._volume},set:function(e){this._volume=e,this._soundChannel&&(this._soundChannel.volume=this._volume)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._path},set:function(e){this._path=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPlaying",{get:function(){return this._isPlaying},enumerable:!0,configurable:!0}),e.prototype.playSound=function(e,t,i,n){return void 0===t&&(t=!1),void 0===i&&(i=null),void 0===n&&(n=null),this._volume=e,this._returnCallBack=i,this._callBack=n,this._isLoop=t,this._isPlaying?void 0:this.isKey&&0==RES.hasRes(this.path)?void GameLog.logError(this.path+"音效不存在"):void(this._sound?(this._isPlaying=!0,this.onLoadComplete(null)):this.isKey?(this._sound=RES.getRes(this.path),this._sound.type=egret.Sound.EFFECT,this._isPlaying=!0,this.onLoadComplete(null)):(this._sound=new egret.Sound,this._sound.type=egret.Sound.EFFECT,this._sound.addEventListener(egret.Event.COMPLETE,this.onLoadComplete,this),this._sound.load(this.path),this._isPlaying=!0))},e.prototype.onLoadComplete=function(e){this._isPlaying?(this._sound.removeEventListener(egret.Event.COMPLETE,this.onLoadComplete,this),this._soundChannel&&this._soundChannel.removeEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this),this._soundChannel=this._sound.play(0,this._isLoop?0:1),this._soundChannel.volume=this._volume,this._soundChannel?this._soundChannel.addEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this):this.stopSound()):this.stopSound()},e.prototype.onSoundComplete=function(e){this._soundChannel.removeEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this),this.stopSound()},e.prototype.stopSound=function(){this._isPlaying=!1,null!=this._returnCallBack&&this._returnCallBack.exec(this),null!=this._callBack&&this._callBack.exec(this),this._soundChannel&&(this._soundChannel.stop(),this._soundChannel.removeEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this),this._soundChannel=null)},e.prototype.dispose=function(){if(this._soundChannel&&(this._soundChannel.stop(),this._soundChannel.removeEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this),this._soundChannel=null),this._sound){if(0==this.isKey)try{this._sound.close()}catch(e){}this._sound=null}this._volume=0},e}();__reflect(MusicEffectItem.prototype,"MusicEffectItem");var MusicManager=function(){function e(){this._effectVolume=1,this._bgmVolume=1,this._isCloseBgm=!1,this._isCloseSound=!1,this._maxEffectSoundLen=10,this._isCloseVoice=!1,this._voiceVolume=1,this.enabled=!0,this._soundHash=new HashMap,this._playingSoundHash=new HashMap}return Object.defineProperty(e.prototype,"currentBackBgms",{get:function(){return this._currentBackBgms},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"soundHashLength",{get:function(){return this._soundHash.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bgmVolume",{get:function(){return this._bgmVolume},set:function(e){this._bgmVolume=e,this._currentBackBgmSound&&(this._currentBackBgmSound.volume=this._bgmVolume)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"voiceVolume",{get:function(){return this._voiceVolume},set:function(e){this._voiceVolume=e,this._currentVoice&&(this._currentVoice.volume=this._bgmVolume)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"effectVolume",{set:function(e){if(this._effectVolume=e,this._playingSoundHash)for(var t=this._playingSoundHash.size,i=this._playingSoundHash.values,n=0;t>n;n++)i[n].volume=this._effectVolume},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"effectVolue",{get:function(){return this._effectVolume},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBgmPlaying",{get:function(){return null!=this._currentBackBgmSound&&this._currentBackBgmSound.isPlaying},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCloseBgm",{get:function(){return this._isCloseBgm},set:function(e){this._isCloseBgm!=e&&(this._isCloseBgm=e,e?this.closeBgm(!1,!0):this._currentBackBgms&&this.playBgm(this._currentBackBgms,2e3,this._bgmIsKey,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCloseVoice",{get:function(){return this._isCloseVoice},set:function(e){this._isCloseVoice!=e&&(this._isCloseVoice=e,e&&this.closeVoice())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCloseSound",{get:function(){return this._isCloseSound},set:function(e){this._isCloseSound!=e&&(this._isCloseSound=e)},enumerable:!0,configurable:!0}),e.prototype.playBgm=function(e,t,i,n){if(void 0===t&&(t=2e3),void 0===i&&(i=!1),void 0===n&&(n=!0),this._currentBackBgms==e){if(0==this._isCloseBgm&&Config.hasTouch){if(this._currentBackBgmSound){if(this._currentBackBgmSound.isPlaying)return;this._currentBackBgmSound.stopSound(!1)}this.playBgmSound(e,t,n)}}else this._currentBackBgms=e,this._bgmIsKey=i,0==this._isCloseBgm&&Config.hasTouch&&(this._currentBackBgmSound&&this._currentBackBgmSound.stopSound(!1),this.playBgmSound(e,t,n))},e.prototype.playBgmSound=function(e,t,i){e&&(this._currentBackBgmSound=new MusicBgmItem,this._currentBackBgmSound&&0==this._currentBackBgmSound.isPlaying&&this._currentBackBgmSound.playSound(e,t,this._bgmIsKey,this.bgmVolume,0,i))},e.prototype.closeBgm=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!0),this._currentBackBgmSound&&this._currentBackBgmSound.stopSound(t),this._currentBackBgmSound=null,e&&(this._currentBackBgms=null)},e.prototype.makeBgmUp=function(e,t){void 0===e&&(e=1),void 0===t&&(t=500),this.bgmVolume!=e&&egret.Tween.get(this).to({bgmVolume:e},t)},e.prototype.makeBgmDown=function(e,t){void 0===e&&(e=.3),void 0===t&&(t=500),this.bgmVolume!=e&&egret.Tween.get(this).to({bgmVolume:e},t)},e.prototype.playVoice=function(e,t){return 0==this._isCloseVoice&&(this._currentVoice&&this._currentVoice.stopSound(),e&&(this._currentVoice=new MusicVoiceItem,this._currentVoice&&0==this._currentVoice.isPlaying))?(this._currentVoice.path=e,this._currentVoice.playSound(this.voiceVolume,t)):!1},e.prototype.playVoiceByKey=function(e,t){return 0==this._isCloseVoice&&(this._currentVoice&&this._currentVoice.stopSound(!1),e&&(this._currentVoice=new MusicVoiceItem,this._currentVoice&&0==this._currentVoice.isPlaying))?(this._currentVoice.path=e,this._currentVoice.playSoundByKey(e,this.voiceVolume,t),!0):!1},e.prototype.closeVoice=function(){this._currentVoice&&this._currentVoice.isPlaying&&(this._currentVoice.stopSound(),this._currentVoice=null)},e.prototype.playSoundByKey=function(e,t,i,n,o){if(void 0===t&&(t=!1),void 0===i&&(i=0),void 0===n&&(n=1),void 0===o&&(o=null),this._isCloseSound||0==Config.hasTouch)return!1;var a,s=0,r=0/0;if(this._playingSoundHash.size<this._maxEffectSoundLen&&e){if(a=this._soundHash.get(e),s=egret.getTimer(),a&&s-a.lastPlaying<0)return!1;if(a=this.getSoundItem(e,a,!0))return a.lastPlaying=s+i,r=n*this._effectVolume,a.playSound(r,t,new FunctionVO(this.playEndBlack,this),o),this._playingSoundHash.put(e,a),a.isPlaying}return!1},e.prototype.playSound=function(e,t,i,n,o){if(void 0===t&&(t=!1),void 0===i&&(i=0),void 0===n&&(n=1),void 0===o&&(o=null),!this._isCloseSound&&0!=Config.hasTouch){var a,s=0,r=0/0;if(this._playingSoundHash.size<this._maxEffectSoundLen&&e&&"0"!=e){if(a=this._soundHash.get(e),s=egret.getTimer(),a&&s-a.lastPlaying<0)return;a=this.getSoundItem(e,a),a&&(a.lastPlaying=s+i,r=n*this._effectVolume,a.playSound(r,t,new FunctionVO(this.playEndBlack,this),o),this._playingSoundHash.put(e,a))}}},e.prototype.playEndBlack=function(e){this._playingSoundHash.remove(e.path)},e.prototype.stopSound=function(e){var t=this._playingSoundHash.get(e);t&&t.stopSound()},e.prototype.getSoundItem=function(e,t,i){if(void 0===i&&(i=!1),!e)return null;var n;return t&&0==t.isPlaying?t:(n=new MusicEffectItem,n.path=e,n.isKey=i,0==this._soundHash.has(e)&&this._soundHash.put(e,n),n)},e.prototype.playSoundSwitchClient=function(e,t){void 0===t&&(t=!1),DeviceUtil.isWebIOS?this.playSoundByKey(e+"_mp3",t):this.playSound(ResPathUtil.getSoundPath(e),t)},e.prototype.playSoundSwitchClient1=function(e,t){void 0===t&&(t=!1),DeviceUtil.isWebIOS?this.playSoundByKey(e+"_mp3",t):this.playSound(ResPathUtil.getSoundPath1(e),t)},e.prototype.stopSoundSwitchClient=function(e){DeviceUtil.isWebIOS?this.stopSound(e+"_mp3"):this.stopSound(ResPathUtil.getSoundPath(e))},e.prototype.stopSoundSwitchClient1=function(e){DeviceUtil.isWebIOS?this.stopSound(e+"_mp3"):this.stopSound(ResPathUtil.getSoundPath1(e))},e.prototype.stopAll=function(){if(this._playingSoundHash)for(var e=this._playingSoundHash.size,t=this._playingSoundHash.values,i=0;e>i;i++)t[i].stopSound();this._currentBackBgmSound&&this._currentBackBgmSound.stopSound(!1)},e.prototype.addvanceTime=function(){for(var e,t,i=egret.getTimer(),n=6e5,o=this._soundHash.keys,a=o.length,s=0;a>s;s++)e=o[s],t=this._soundHash.get(e),t&&i-t.lastPlaying>n&&0==t.isPlaying&&(t.dispose(),this._soundHash.remove(e))},e}();__reflect(MusicManager.prototype,"MusicManager");var MusicVoiceItem=function(){function e(){this._volume=0,this._lastPlayingTime=0,this._isPlaying=!1}return Object.defineProperty(e.prototype,"lastPlaying",{get:function(){return this._lastPlayingTime},set:function(e){this._lastPlayingTime=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._volume},set:function(e){this._volume=e,this._soundChannel&&(this._soundChannel.volume=this._volume)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._path},set:function(e){this._path=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPlaying",{get:function(){return this._isPlaying},enumerable:!0,configurable:!0}),e.prototype.playSound=function(e,t){return this._volume=e,this._callBack=t,this._isPlaying?!1:this._sound?(this._isPlaying=!0,!1):(this._isKey=!1,this._sound=new egret.Sound,this._sound.type=egret.Sound.EFFECT,this._sound.addEventListener(egret.Event.COMPLETE,this.onLoadComplete,this),this._sound.load(this.path),this._isPlaying=!0,!0)},e.prototype.playSoundByKey=function(e,t,i){return 0==RES.hasRes(e)?(GameLog.logError(e+"语音不存在"),void(i&&i.exec())):(this._volume=t,this._callBack=i,void(this._isPlaying||this._sound||(this._soundChannel&&this._soundChannel.removeEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this),this._isPlaying=!0,this._isKey=!0,this._sound=RES.getRes(e),this._sound.type=egret.Sound.EFFECT,this._soundChannel=this._sound.play(0,1),this._startTime=egret.getTimer(),this._soundChannel.volume=this._volume,this._soundChannel?this._soundChannel.addEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this):this.stopSound())))},e.prototype.onLoadComplete=function(e){this._isPlaying?(this._sound.removeEventListener(egret.Event.COMPLETE,this.onLoadComplete,this),this._soundChannel&&this._soundChannel.removeEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this),this._soundChannel=this._sound.play(0,1),this._startTime=egret.getTimer(),this._soundChannel.volume=this._volume,this._soundChannel?this._soundChannel.addEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this):this.stopSound()):this.stopSound()},e.prototype.onSoundComplete=function(e){this._soundChannel.removeEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this),this.stopSound()},e.prototype.stopSound=function(e){return void 0===e&&(e=!0),egret.getTimer()-this._startTime<300?void App.timer.doTimeOnce(this,300,this.stopSound,[e]):(this._isPlaying=!1,e&&null!=this._callBack&&(this._callBack.param=[this],this._callBack.exec()),void this.dispose())},e.prototype.dispose=function(){if(this._callBack=null,this._soundChannel&&(this._soundChannel.stop(),this._soundChannel.removeEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this),this._soundChannel=null),this._sound){if(0==this._isKey)try{this._sound.close()}catch(e){}this._sound=null}this._volume=0},e}();__reflect(MusicVoiceItem.prototype,"MusicVoiceItem");var RedDisplay=function(){function e(){}return e.setRedByDisPlayer=function(t,i,n,o,a){var s=e.getRedImage(t,i);return s&&(s.visible=i),i?(o?s.x=o:s.x=t.width,a?s.y=a:s.y=0,2==n&&this.onMoveOver1(s)):s&&egret.Tween.removeTweens(s),s},e.onMoveOver1=function(e){egret.Tween.get(e).to({scaleX:1.5,scaleY:1.5},1e3).call(this.onMoveOver2,this,[e])},e.onMoveOver2=function(e){egret.Tween.get(e).to({scaleX:1,scaleY:1},1e3).call(this.onMoveOver1,this,[e])},e.getRedImage=function(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=1);var o=t.getChildByName("RedPoint");return i&&null==o&&(e._redListLen>0?(o=e._redImageList.pop(),e._redListLen--):(o=new eui.Image,o.width=26,o.height=26,o.anchorOffsetX=13,o.anchorOffsetY=13,o.name="RedPoint",1==n?o.source="common_v1_json.common_v1_heart_png":o.source="common_v1_json.common_v1_heart_png"),o.visible=!0,t.addChild(o)),o},e.setRedImage=function(t){var i=t.getChildByName("RedPoint");i&&(egret.Tween.removeTweens(i),t.removeChild(i),i.x=i.y=0,e._redImageList.push(i),e._redListLen++)},e._redImageList=[],e._redListLen=0,e}();__reflect(RedDisplay.prototype,"RedDisplay");var RedManager=function(){function e(){}return e}();__reflect(RedManager.prototype,"RedManager");var EnumStorageType=function(){function e(){}return e.TOKEN="token",e.UID="uid",e.PHONE="phone",e.PHONE2="phone2",e.USER_UID="user_uid",e.GETCODE_CD_TIME="getcode_cd_time",e.FORBID_GETCODE_TIME="forbid_getcode_time",e.UNBIND_GETCODE_TIME="unbind_getcode_time",e.BIND_GETCODE_TIME="bind_getcode_time",e.IS_TOURIST="is_tourist",e.PLAYER_NOT_BIND="player_not_bind",e.HERONIES_VERSION="heronies_version",e.HERONIES_URLTEXT="heroines_urltext",e.HERONIES_SETTING_BGM="heronies_setting_bgm",e.HERONIES_SETTING_EFFECT="heronies_setting_effect",e.HERONIES_SETTING_ROLESOUND="heronies_setting_rolesound",e.HERONIES_SETTING_AUTOPLAY="heronies_setting_autoplay",e.HERONIES_SETTING_WORDSPEED="heronies_setting_wordspeed",e.HALL_MUSIC_SETTING="Hall_music_setting",e.HALL_SOUND_SETTING="Hall_sound_setting",e.G2_ACCOUNT="account",e.G2_GUEST="guest",e.G2_AUTO_VOICE="autoVoice",e.G2_ALLOW_EFFECT="allowEffect",e.G2_ALLOW_MUSIC="allowMusic",e.G2_NICK_NAME="nickName",e.G2_TEL_GUIDE="telGuide",e.G2_TOKEN="g2_token",e.FANGDONG_PLAYER_GUIDE="fangdong_guide_",e}();__reflect(EnumStorageType.prototype,"EnumStorageType");var LocalStorageManager=function(){function e(){}return e.prototype.setItem=function(e,t){return egret.localStorage.setItem(e,t)},e.prototype.getItem=function(e){return egret.localStorage.getItem(e)},e.prototype.removeItem=function(e){egret.localStorage.removeItem(e)},e.prototype.clear=function(){egret.localStorage.clear()},e}();__reflect(LocalStorageManager.prototype,"LocalStorageManager");var VersionController=function(){function e(){var e=this;this.resourceRoot="resource/",this.versionPath="assets/",this.versionConfigPath="resource/version.json",this.currentVersion="1.0.7",this.versionCacheWxgame=function(){var t=egret.localStorage.getItem("resVersion");if(t!=e.currentVersion){egret.localStorage.setItem("resVersion",e.currentVersion),GameLog.log("版本更新");var i=wx.getFileSystemManager(),n=wx.env.USER_DATA_PATH+"/cache_crc32/assets";i.readdir({dirPath:n,success:function(t){for(var o=e.getRemoveList(t.files),a=o.length,s=0;a>s;++s)GameLog.log("删除",n+"/"+o[s]),i.unlinkSync(n+"/"+o[s])},fail:function(e){}})}},this.versionCacheWeb=function(){var t=egret.localStorage.getItem("resVersion");GameLog.log("Web版本判断old:"+t+",now:"+e.currentVersion),t!=e.currentVersion&&(egret.localStorage.setItem("resVersion",e.currentVersion),GameLog.log("Web版本更新"))}}return e.prototype.init=function(){var e=this;return new Promise(function(t,i){var n=new egret.HttpRequest;n.responseType=egret.HttpResponseType.TEXT,n.open(e.versionConfigPath,egret.HttpMethod.GET),n.send(),n.addEventListener(egret.Event.COMPLETE,function(i){var n=i.currentTarget;e.versionConfig=JSON.parse(n.response),egret.Capabilities.runtimeType==egret.RuntimeType.WXGAME?e.versionCacheWxgame():egret.Capabilities.runtimeType==egret.RuntimeType.WEB&&e.versionCacheWeb(),t()},e),n.addEventListener(egret.IOErrorEvent.IO_ERROR,function(){GameLog.log("post error : "+event),i()},e)})},e.prototype.getRemoveList=function(e){var t=[],i="";for(var n in this.versionConfig)i+=this.versionConfig[n]+",";for(var o=e.length,a=0;o>a;++a){var s=e[a],r=s.slice(0,s.indexOf("."));-1==i.indexOf(r)&&t.push(s)}return t},e.prototype.getVirtualUrl=function(e){return this.getResUrlByVersion(e)},e.prototype.getResUrlByVersion=function(e){if(-1==e.indexOf(this.resourceRoot))return e;if(e=e.replace(this.resourceRoot,""),this.versionConfig){var t=e.indexOf("?v=");-1!=t&&(e=e.slice(0,t));var i=e.replace(this.versionPath,"");if(this.versionConfig&&this.versionConfig[i]){var n=this.versionConfig[i],o=e.slice(e.lastIndexOf("."));e=this.versionPath+n+o}}return e=this.resourceRoot+e},e}();__reflect(VersionController.prototype,"VersionController",["RES.IVersionController"]),RES.registerVersionController(new VersionController);var Alert=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.show=function(e,t,i,n){void 0===e&&(e=""),void 0===t&&(t="确定|取消"),void 0===i&&(i=null),void 0===n&&(n="提示"),PanelOpenManager.openPanel(EnumPanelID.ALERT,{txt:e,title:n,btnLabels:t,closeHandler:i},!1)},t.show2=function(e,t,i,n,o){void 0===e&&(e=""),void 0===t&&(t="确 定|取 消"),void 0===i&&(i=null),void 0===n&&(n="提示"),void 0===o&&(o=!1),PanelOpenManager.openPanel(EnumPanelID.ALERT2,{isHtml:o,txt:e,title:n||"提示",btnLabels:t||"确 定|取 消",closeHandler:i},!1)},t.OK=0,t.CANCEL=1,t}(h5_engine.GDisplayObjectContainer);__reflect(Alert.prototype,"Alert");var App=function(){function e(){}return e.init=function(t){e.stage=t,e.nativeBridge=new NativeBridge,e.nativeBridge.init(),e.dispatcher=new EventManager,e.timer=new TimeCenter(e.stage),e.data=new ClientDataManager,e.log=new LogManager,e.layer=new MainLayer,e.sound=new MusicManager,e.global=new GlobalManager,e.stage.addChild(e.layer),ServerTime.setServerTime((new Date).getTime()),PanelRegister.init(),GameManager.init(),e.timer.doTimeLoop(this,3e4,this.onUpateTime),egret.lifecycle.onPause=function(){(DeviceUtil.IsWeb&&DeviceUtil.isMobile||DeviceUtil.IsNative)&&(egret.ticker.pause(),GameManager.isPlaying&&GameManager.lasetGameId==EnumGameID.GAME2?e.data.game2Center.SoundManager.stopBGM():e.sound.closeBgm(!1,!1),Video.instance().src&&0==Video.instance().paused&&(Video.instance().pause(),Video.instance().resumeContine=!0))},egret.lifecycle.onResume=function(){(DeviceUtil.IsWeb&&DeviceUtil.isMobile||DeviceUtil.IsNative)&&(egret.ticker.resume(),GameManager.isPlaying&&GameManager.lasetGameId==EnumGameID.GAME2?e.data.game2Center.SoundManager.playBGM(SoundManager.bgm):e.sound.playBgm(e.sound.currentBackBgms),Video.instance().src&&Video.instance().resumeContine&&Video.instance().play())}},e.setOrientation=function(t){Config.orientation!=t&&(Config.orientation=t,DeviceUtil.IsWeb?0==DeviceUtil.isMobile?t==egret.OrientationMode.AUTO?e.stage.setContentSize(Config.MAIN_WIDTH,Config.MAIN_HEIGHT):e.stage.setContentSize(Config.MAIN_HEIGHT,Config.MAIN_WIDTH):(this.stage.orientation=t,t==egret.OrientationMode.PORTRAIT?e.stage.setContentSize(Config.MAIN_WIDTH,Config.MAIN_HEIGHT):e.stage.setContentSize(Config.MAIN_HEIGHT,Config.MAIN_WIDTH)):0==Config.isLandscape?t==egret.OrientationMode.AUTO?(e.nativeBridge.setOrientation("false"),e.stage.setContentSize(Config.MAIN_WIDTH,Config.MAIN_HEIGHT)):(e.nativeBridge.setOrientation("true"),e.stage.setContentSize(Config.MAIN_HEIGHT,Config.MAIN_WIDTH)):t==egret.OrientationMode.AUTO?(e.nativeBridge.setOrientation("false"),e.stage.setContentSize(Config.MAIN_WIDTH,Config.MAIN_HEIGHT)):(e.nativeBridge.setOrientation("true"),e.stage.setContentSize(Config.MAIN_HEIGHT,Config.MAIN_WIDTH)))
},e.onUpateTime=function(){e.sound.addvanceTime(),PanelManager.checkHidePanelDispose()},e.res=new ResManager,e}();__reflect(App.prototype,"App");var LayoutContainer=function(e){function t(t,i,n,o,a){void 0===i&&(i=80),void 0===n&&(n=80),void 0===o&&(o=1);var s=e.call(this)||this;return s._sourseArr=[],s._alignStartX=0,s._cols=-1,s._vGap=0,s._hGap=0,s._verSpan=50,s._horSpan=50,s._align="left",s._sourse=t,s._cellFunction=a,s._verSpan=i,s._horSpan=n,s._cols=o,s.touchEnabled=!0,s.touchChildren=!0,s}return __extends(t,e),Object.defineProperty(t.prototype,"dataProvider",{get:function(){return this._dataProvider},set:function(e){if(this.clear(),this._dataProvider=e,this._dataProvider){var i=e.length;this._align==t.CENTER?this._alignStartX=-(this._cols*this._verSpan-this._vGap)/2:this._align==t.RIGHT?this._alignStartX=-(this._cols*this._verSpan-this._vGap):this._alignStartX=0,this._sourseArr=[];for(var n,o=0;i>o;o++)n=this.getItemTarget(),-1!=this._cols?(n.x=o%this._cols*this._verSpan+this._alignStartX,n.y=Math.floor(o/this._cols)*this._horSpan):(n.x=o*this._verSpan,n.y=0),this.addChild(n),this._sourseArr.push(n),this._cellFunction&&(this._cellFunction.param=[n,e[o],o],this._cellFunction.exec())}},enumerable:!0,configurable:!0}),t.prototype.refreshData=function(){if(this._cellFunction)for(var e,t=this.dataProvider.length,i=0;t>i;i++)e=this.dataGroup[i],this._cellFunction.param=[e,this.dataProvider[i]],this._cellFunction.exec()},Object.defineProperty(t.prototype,"dataGroup",{get:function(){return this._sourseArr},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vGap",{set:function(e){this._vGap=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hGap",{set:function(e){this._hGap=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"align",{set:function(e){this._align=e},enumerable:!0,configurable:!0}),t.prototype.getItemTarget=function(){var e=new this._sourse;return e},t.prototype.clear=function(){for(;this.numChildren>0;){var e=this.removeChildAt(0);if(!egret.is(e,"IDispose"))throw Error("使用LayoutContainer必须实现 IDispose接口");e.dispose()}},t.LEFT="left",t.CENTER="center",t.RIGHT="right",t}(eui.Group);__reflect(LayoutContainer.prototype,"LayoutContainer");var ScrollerCenter=function(){function e(){}return e.hideVerticalScrollBar=function(e){App.timer.doFrameOnce(this,1,this.delayToHideScrollBar,[e])},e.delayToHideScrollBar=function(e){App.timer.clearTimer(this,this.delayToHideScrollBar),e&&e.verticalScrollBar&&(e.verticalScrollBar.autoVisibility=!1,e.verticalScrollBar.visible=!1),e&&e.horizontalScrollBar&&(e.horizontalScrollBar.autoVisibility=!1,e.horizontalScrollBar.visible=!1)},e}();__reflect(ScrollerCenter.prototype,"ScrollerCenter");var VScrollPanel=function(e){function t(t,i,n,o,a){var s=e.call(this)||this;return s._gap=0,s.listSelectedIndex=-1,s.configUI(a),s.width=t?t:0,s.height=i?i:0,s.itemRender=n?n:void 0,s.gap=o?o:0,s}return __extends(t,e),t.prototype.configUI=function(e){this.skinName="ScrollerSkin",e?this.viewport=e:(this._list=new eui.List,this._list.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onListItemTab,this),this.viewport=this._list)},Object.defineProperty(t.prototype,"dataProvider",{set:function(e){this._dataProvider?(this._dataProvider.source=e,this._dataProvider.refresh()):(this._dataProvider=new eui.ArrayCollection(e),this._list.dataProvider=this._dataProvider),-1!=this.listSelectedIndex&&App.timer.doFrameOnce(this,1,this.onFrameSelecedItem)},enumerable:!0,configurable:!0}),t.prototype.setSelectedIndex=function(e){this.listSelectedIndex!=e&&(this.listSelectedIndex=e,App.timer.doFrameOnce(this,1,this.onFrameSelecedItem))},t.prototype.onFrameSelecedItem=function(){this._list&&(this.listSelectedIndex>=this._list.numChildren||this.onSelecedItem(this._list.getChildAt(this.listSelectedIndex)))},t.prototype.onListItemTab=function(e){this.listSelectedIndex=this._list.selectedIndex,this.onSelecedItem(e.itemRenderer)},t.prototype.onSelecedItem=function(e){this._clickItem&&this._clickItem.exec(e)},t.prototype.getDataProvider=function(){return this._dataProvider},t.prototype.move=function(e,t){this.x=e,this.y=t},Object.defineProperty(t.prototype,"gap",{get:function(){return this._gap},set:function(e){if(this._list&&this._gap!=e){this._gap=e;var t=new eui.VerticalLayout;t.gap=this.gap,this._list.layout=t}},enumerable:!0,configurable:!0}),t.prototype.removeAll=function(){if(this._list)for(var e=this._list.numChildren,t=void 0,i=0;e>i;i++)t=this._list.getChildAt(i),t&&t.dispose();this._dataProvider&&this._dataProvider.removeAll()},t.prototype.dispose=function(){this.stopAnimation(),this.removeAll(),this._list&&(this._list.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onListItemTab,this),this._list=null),this.viewport=null,this._itemRender=null,this._dataProvider=null,this.listSelectedIndex=-1},Object.defineProperty(t.prototype,"itemRender",{get:function(){return this._itemRender},set:function(e){e&&(this._itemRender=e,this._list.itemRenderer=this._itemRender)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"list",{get:function(){return this._list},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clickItem",{set:function(e){this._clickItem=e},enumerable:!0,configurable:!0}),t}(eui.Scroller);__reflect(VScrollPanel.prototype,"VScrollPanel");var HttpLoading=function(e){function t(){var t=e.call(this)||this;return t.init(),t}return __extends(t,e),t.prototype.init=function(){this._view=new h5_engine.GShape,this._view.touchEnabled=!0,this.addChild(this._view),this._loadingEffect=new GMovieClip,this._loadingEffect.init("loadingEffect_json","loadingEffect_png","loadingEffect")},t.prototype.show=function(e){App.timer.doTimeOnce(this,500,this.onShowImage),App.stage.addEventListener(egret.Event.RESIZE,this.onResize,this),this.onResize()},t.prototype.hide=function(){App.timer.clearTimer(this,this.onShowImage),this._loadingEffect&&(this._loadingEffect.stop(),this._loadingEffect.parent&&this._loadingEffect.parent.removeChild(this._loadingEffect)),this.parent&&this.parent.removeChild(this),App.stage.removeEventListener(egret.Event.RESIZE,this.onResize,this)},t.prototype.onShowImage=function(){this._loadingEffect.play(-1),this.addChild(this._loadingEffect)},t.prototype.onResize=function(e){var t=0==App.layer.rotation?Config.SCREEN_WIDTH:Config.SCREEN_HEIGHT,i=0==App.layer.rotation?Config.SCREEN_HEIGHT:Config.SCREEN_WIDTH;(t!=this._view.width||i!=this._view.height)&&(this._view.graphics.clear(),this._view.graphics.beginFill(0,0),this._view.graphics.drawRect(0,0,t,i),this._view.graphics.endFill(),this._loadingEffect.x=t>>1,this._loadingEffect.y=i>>1,this.width=t,this.height=i)},t}(eui.Group);__reflect(HttpLoading.prototype,"HttpLoading");var Video=function(){function e(){this._src=null}return e.prototype.init=function(t,i,n,o,a,s){for(var r=[],h=6;h<arguments.length;h++)r[h-6]=arguments[h];this._src=t,this._muted=i,this._loop=n,this._completeHandler=o,this._loadCompleteHandler=s,this._resumeContine=!1,this._isInit=!1,GameLog.log("播放视频:"+t),a==e.TOP&&App.layer.showVideoLayer(!0),null==this._maskSp&&(this._maskSp=new h5_engine.GShape),this._maskSp.alpha=1,App.layer.videoLoadingLayer.addChild(this._maskSp),null==this._loadingEffect&&(this._loadingEffect=new VideoLoadingEffect),this._loadingEffect.play(-1),App.layer.videoLoadingLayer.addChild(this._loadingEffect),this.onResize(),App.stage.addEventListener(egret.Event.RESIZE,this.onResize,this)},Object.defineProperty(e.prototype,"isInit",{get:function(){return this._isInit},set:function(e){this._isInit=e},enumerable:!0,configurable:!0}),e.prototype.play=function(){},e.prototype.pause=function(){},Object.defineProperty(e.prototype,"resumeContine",{get:function(){return this._resumeContine},set:function(e){this._resumeContine=e},enumerable:!0,configurable:!0}),e.prototype.onResize=function(e){void 0===e&&(e=null);var t=0==App.layer.rotation?Config.SCREEN_WIDTH:Config.SCREEN_HEIGHT,i=0==App.layer.rotation?Config.SCREEN_HEIGHT:Config.SCREEN_WIDTH;!this._maskSp.parent||this._maskSp.width==t&&this._maskSp.height==i||(this._maskSp.graphics.clear(),this._maskSp.graphics.beginFill(0),this._maskSp.graphics.drawRect(0,0,t,i),this._maskSp.graphics.endFill()),this._loadingEffect.x=t>>1,this._loadingEffect.y=i>>1},e.prototype.dispose=function(e){GameLog.log("释放video"),this._maskSp&&this._maskSp.remove(),this._loadingEffect&&this._loadingEffect.parent&&(this._loadingEffect.stop(),this._loadingEffect.remove()),this._isInit=!1,this._loop=!1,this._muted=!1,this._resumeContine=!1,this._completeHandler=null,this._loadCompleteHandler=null,App.layer.showVideoLayer(!1),PanelOpenManager.removePanel(EnumPanelID.VIDEO_BUTTON)},Object.defineProperty(e.prototype,"paused",{get:function(){return this._isPaused},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"completeHandler",{get:function(){return this._completeHandler},enumerable:!0,configurable:!0}),e.prototype.execCompleteHandler=function(){this._completeHandler&&this._completeHandler.exec()},Object.defineProperty(e.prototype,"src",{get:function(){return this._src},enumerable:!0,configurable:!0}),e.prototype.hideMaskSp=function(){var e=this;this._loadingEffect.stop(),this._loadingEffect.remove(),egret.Tween.get(this._maskSp).to({alpha:0},500).call(function(){e._maskSp.remove()}),this._isInit=!0,this._loadCompleteHandler&&this._loadCompleteHandler.exec()},e.instance=function(){return null==this._instance&&(DeviceUtil.IsWeb?this._instance=new H5Video:this._instance=new NativeVideo),this._instance},e.BOTTOM="bottom",e.TOP="top",e}();__reflect(Video.prototype,"Video");var NativeVideo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(t,i,n,o,a,s,r){void 0===o&&(o=null),void 0===a&&(a=Video.BOTTOM),void 0===r&&(r=!1),e.prototype.init.call(this,t,i,n,o,a,s),App.nativeBridge.sendPlayVideo(t,i,n,r),this._isPaused=!1},t.prototype.play=function(){App.nativeBridge.sendVideoResume(),this._isPaused=!1},t.prototype.pause=function(){App.nativeBridge.sendVideoPause(),this._isPaused=!0},t.prototype.dispose=function(t){e.prototype.dispose.call(this),this._src&&(t&&App.nativeBridge.sendVideoStop(),this._isPaused=!0,this._src=null)},t}(Video);__reflect(NativeVideo.prototype,"NativeVideo");var H5Video=function(e){function t(){var t=e.call(this)||this;return t._video=document.getElementById("myVideo"),t._video.style.visibility="hidden",t}return __extends(t,e),t.prototype.init=function(t,i,n,o,a,s){void 0===o&&(o=null),void 0===a&&(a=Video.BOTTOM),this._src&&this.pause(),e.prototype.init.call(this,t,i,n,o,a,s),this._video.style.visibility="visible",this.muted=i,this.loop=n,this._video.src=t,this._video.addEventListener("canplay",this.onCanPlayVideo),o&&this._video.addEventListener("ended",this.onPlayerComplete)},t.prototype.play=function(){1==this.paused&&this._video.play()},t.prototype.pause=function(){0==this.paused&&this._video.pause()},t.prototype.dispose=function(t){e.prototype.dispose.call(this),this._video.style.visibility="hidden",this._video.removeEventListener("ended",this.onPlayerComplete),this._video.removeEventListener("canplaythrough",this.onCanPlayVideo),this.pause(),this._video.src="",this._src=null,App.stage.removeEventListener(egret.Event.RESIZE,this.onResize,this)},Object.defineProperty(t.prototype,"loop",{set:function(e){this._video.loop=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"muted",{set:function(e){this._video.muted=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paused",{get:function(){return this._video.paused},enumerable:!0,configurable:!0}),t.prototype.onResize=function(t){void 0===t&&(t=null);var i=document.body.clientWidth,n=document.body.clientHeight;DeviceUtil.isMobile?App.stage.orientation==egret.OrientationMode.LANDSCAPE&&(0==window.orientation||180==window.orientation)||App.stage.orientation==egret.OrientationMode.PORTRAIT&&(90==window.orientation||-90==window.orientation)?(App.stage.orientation==egret.OrientationMode.PORTRAIT?(this._video.style.transform="rotate(270deg) translate("+(i-n)/2+"px,"+(i-n)/2+"px)",this._video.style.webkitTransform="rotate(270deg) translate("+(i-n)/2+"px,"+(i-n)/2+"px)"):App.stage.orientation==egret.OrientationMode.LANDSCAPE&&(this._video.style.transform="rotate(90deg) translate("+(n-i)/2+"px,"+(n-i)/2+"px)",this._video.style.webkitTransform="rotate(90deg) translate("+(n-i)/2+"px,"+(n-i)/2+"px)"),this._video.style.width=n+"px",this._video.style.height=i+"px",this._video.style.transformOrigin="center center",this._video.style.webkitTransformOrigin="center center"):(this._video.style.transform="",this._video.style.webkitTransform="",this._video.style.transformOrigin="",this._video.style.webkitTransformOrigin="",this._video.style.width=i+"px",this._video.style.height=n+"px"):(this._video.style.width=i+"px",this._video.style.height=n+"px"),e.prototype.onResize.call(this)},t.prototype.onCanPlayVideo=function(){Video.instance().play(),Video.instance().isInit=!0,Video.instance().hideMaskSp()},t.prototype.onPlayerComplete=function(){Video.instance().execCompleteHandler()},t}(Video);__reflect(H5Video.prototype,"H5Video");var Main=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(e){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),App.init(this.stage),DeviceUtil.IsNative&&App.nativeBridge.log("onAddToStage");var t=window.ip;t&&t.ip&&(ProtocolHttpUrl.ip=t.ip),WebParams.ip=ProtocolHttpUrl.ip,t=window.version,t?Config.version=t:DeviceUtil.IsNative||(Config.version="v"+Math.random()),window.hasOwnProperty("skipGuide")&&(Config.skipGuide=window.skipGuide),window.hasOwnProperty("skipGuide")&&(Config.skipGuide=window.skipGuide),window.hasOwnProperty("skipVideo")&&(Config.skipVideo=window.skipVideo),window.hasOwnProperty("isRelease")&&(Config.isRelease=window.isRelease),window.hasOwnProperty("hasTouch")&&(Config.hasTouch=window.hasTouch),window.hasOwnProperty("isDebug")&&(Config.isDebug=window.isDebug),window.hasOwnProperty("soEasy")&&(Config.soEasy=window.soEasy),window.hasOwnProperty("isHttps")&&(Config.isHttps=window.isHttps),(DeviceUtil.IsNative||DeviceUtil.IsAndroid)&&(Config.hasTouch=!0),Config.isLandscape?App.setOrientation(egret.OrientationMode.LANDSCAPE):App.setOrientation(DeviceUtil.IsWeb&&DeviceUtil.isMobile?egret.OrientationMode.PORTRAIT:egret.OrientationMode.AUTO),GameLog.isTraceLog=Config.isDebug,Config.soundAsyncLoad=Config.soundAsyncLoad||DeviceUtil.isWebIOS,egret.ImageLoader.crossOrigin="anonymous",egret.TextField.default_fontFamily=Style.FONT,this.stage.registerImplementation("eui.IAssetAdapter",new AssetAdapter),this.stage.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.onResize(),this.loadConfig(),this.stage.addEventListener(egret.Event.RESIZE,this.onResize,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onStageHandler,this,!1,Number.POSITIVE_INFINITY)},t.prototype.loadConfig=function(){RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.CONFIG_LOAD_ERROR,this.onLoadError,this),DeviceUtil.IsWeb?RES.loadConfig(Config.RESOURCE_PATH+"default.res.json?v="+Config.version,Config.RESOURCE_PATH):(App.nativeBridge.log("start to load default.res.json"),RES.loadConfig(Config.RESOURCE_PATH+"default.res.json",Config.RESOURCE_PATH))},t.prototype.onConfigComplete=function(e){DeviceUtil.IsNative&&App.nativeBridge.log("load default.res.json complete"),RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.removeEventListener(RES.ResourceEvent.CONFIG_LOAD_ERROR,this.onLoadError,this),this.loadTheme()},t.prototype.loadTheme=function(){DeviceUtil.IsNative&&App.nativeBridge.log("start to load default.thm.json");var e=new eui.Theme(Config.RESOURCE_PATH+"default.thm.json",this.parent.stage);e.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),e.addEventListener(RES.ResourceEvent.CONFIG_LOAD_ERROR,this.onLoadError,this)},t.prototype.onThemeLoadComplete=function(e){DeviceUtil.IsNative&&App.nativeBridge.log("load default.thm.json complete");var t=e.currentTarget;t.removeEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),t.removeEventListener(RES.ResourceEvent.CONFIG_LOAD_ERROR,this.onLoadError,this),DeviceUtil.IsNative&&App.nativeBridge.log(" start to load resource "+(Config.isLandscape?EnumResGroupName.LOGO1:EnumResGroupName.LOGO)+","+EnumResGroupName.LOADING+" group"),App.res.setMaxLoadingThread(1),App.res.loadGroup(Config.isLandscape?[EnumResGroupName.LOGO1,EnumResGroupName.LOADING]:[EnumResGroupName.LOGO,EnumResGroupName.LOADING],new FunctionVO(this.onLoadResComplete,this))},t.prototype.onLoadResComplete=function(e){App.res.setMaxLoadingThread(App.res.DEFAULT_LOAD_THREAD),this.initLogo()},t.prototype.onLoadError=function(e){GameLog.logWarn("Url:"+e.resItem.url+" has failed to load")},t.prototype.onResize=function(e){Config.SCREEN_WIDTH=this.stage.stageWidth,Config.SCREEN_HEIGHT=this.stage.stageHeight},t.prototype.getInitData=function(){if(DeviceUtil.IsWeb){try{window.closeLogo()}catch(e){}window.hasOwnProperty("channelId")&&(App.global.userInfo.channelId=window.channelId)}else DeviceUtil.IsNative&&(App.nativeBridge.stopSplash(),App.nativeBridge.customLoadingFlag(),DeviceUtil.IsAndroid?App.nativeBridge.getChannelId():App.nativeBridge.sendGetIosID());ProtocolCommon.instance().send_get_avg_system_init()},t.prototype.initLogo=function(){this.getInitData(),this._gameLogo=new GameLogo,App.layer.mainLayer.addChild(this._gameLogo),this._gameLogo.show(),this.initLoading(),App.dispatcher.addEventListener(PreloadEvent.HIDE_LOGO_COMPLETE,this.onHideLogoComplete,this)},t.prototype.onHideLogoComplete=function(){App.dispatcher.removeEventListener(PreloadEvent.HIDE_LOGO_COMPLETE,this.onHideLogoComplete,this),this._gameLogo&&(this._gameLogo.dispose(),this._gameLogo=void 0),this._gameLoading.show()},t.prototype.initLoading=function(){this._gameLoading=new GameLoading,this._gameLoading.alpha=0,App.layer.mainLayer.addChildAt(this._gameLoading,0),App.dispatcher.addEventListener(PreloadEvent.PRELOAD_COMPLETE,this.onLoadComplete,this)},t.prototype.onLoadComplete=function(){App.dispatcher.removeEventListener(PreloadEvent.PRELOAD_COMPLETE,this.onLoadComplete,this),App.dispatcher.addEventListener(PreloadEvent.HIDE_LOADING_COMPLETE,this.onHideLoadingComplete,this),this.createGame()},t.prototype.hideLoading=function(){this._gameLoading&&this._gameLoading.hide()},t.prototype.onHideLoadingComplete=function(){App.dispatcher.removeEventListener(PreloadEvent.HIDE_LOADING_COMPLETE,this.onHideLoadingComplete,this),this._gameLoading&&(this._gameLoading.dispose(),this._gameLoading=void 0)},t.prototype.onStageHandler=function(e){if(0==Config.hasTouch&&(Config.hasTouch=!0,Config.hasEnterGame&&PanelManager.isShowing(PanelRegister.GAME_HALL)&&0==App.sound.isBgmPlaying&&App.sound.playBgm(ResPathUtil.getBgmPath(EnumSoundId.BGM),2e3)),0!=Config.startPlaySoundEffect){if(App.global){App.global.stageX=e.stageX,App.global.stageY=e.stageY,App.layer.effectLayer.globalToLocal(e.stageX,e.stageY,App.global.globalPoint);var t=ObjectPool.getObject(EnumEffectName.TouchEffect);t.x=App.global.globalPoint.x,t.y=App.global.globalPoint.y,t.playOnce(),App.layer.effectLayer.addChild(t)}App.sound.enabled&&0==App.sound.needSkip&&(e.target instanceof eui.ToggleButton&&e.target instanceof eui.CheckBox==0?0==e.target.selected&&App.sound.playSoundSwitchClient(EnumSoundId.PANEL_CLOSE):(e.target instanceof eui.Button||e.target instanceof eui.TextInput||e.target instanceof eui.EditableText)&&App.sound.playSoundSwitchClient(EnumSoundId.CLICK)),App.sound.needSkip=!1}},t.prototype.showStartVideo=function(){var e=App.global.storage.getItem(EnumStorageType.HALL_SOUND_SETTING);App.sound.isCloseSound="0"==e,PanelOpenManager.openPanel(EnumPanelID.START_VIDEO),App.dispatcher.addEventListener(PreloadEvent.PLAY_COMPLETE_START_VIDEO,this.onCompleteStartVideo,this)},t.prototype.onCompleteStartVideo=function(){this.createGame()},t.prototype.showNotice=function(){DeviceUtil.IsWeb&&(DeviceUtil.isIEBrowser||DeviceUtil.isMobile&&(DeviceUtil.IsUCBrowser||DeviceUtil.ISQQBrower||DeviceUtil.isBaiduBrowser||DeviceUtil.IsAndroid&&(DeviceUtil.isWeiXinBrowser||DeviceUtil.isSogouBrowser)||DeviceUtil.IsIos&&DeviceUtil.isWeiBoBrowser))&&Alert.show("为了您更流畅的游戏体验,请使用\n谷歌浏览器","确定")},t.prototype.createGame=function(){if(this.showNotice(),Config.startPlaySoundEffect=!0,DeviceUtil.IsWeb&&0==Config.soEasy&&!H5_360_Sdk.getInstance().config360||DeviceUtil.IsIos&&DeviceUtil.IsNative||DeviceUtil.IsAndroid&&DeviceUtil.IsNative&&(App.global.userInfo.channelId==EnumChannel.C_DEFAULT||"1"==App.global.userInfo.channelId)){var e=App.global.storage.getItem(EnumStorageType.TOKEN),t=App.global.storage.getItem(EnumStorageType.IS_TOURIST)?!0:!1,i=Number(App.global.storage.getItem(EnumStorageType.UID)),n=App.global.storage.getItem(EnumStorageType.G2_TOKEN);null==e||t?(t&&e&&(App.global.userInfo.skey=e,App.global.userInfo.uid=i,App.data.game2Center.DataCenter.skey=n),this.showLogin()):(App.global.userInfo.skey=e,App.global.userInfo.uid=i,App.data.game2Center.DataCenter.skey=n,App.dispatcher.addEventListener(LoginEvent.CHECK_LOGIN_BACK,this.onCheckLoginBack,this),ProtocolCommon.instance().send_user_token())}else if(H5_360_Sdk.getInstance().config360){var o=H5_360_Sdk.getInstance().config360;App.global.userInfo.skey=o.skey,App.data.game2Center.DataCenter.skey=o.avg_token,App.global.userInfo.uid=Number(o.uid),this.showGameBox()}else this.showOtherLogin();App.dispatcher.addEventListener(LoginEvent.RELOGIN,this.onRelogin,this)},t.prototype.showOtherLogin=function(){this.hideLoading(),PanelOpenManager.openPanel(EnumPanelID.OTHER_LOGIN,App.global.userInfo.loginData?{type:2,data:App.global.userInfo.loginData}:null,!1),App.global.userInfo.loginData=null},t.prototype.onCheckLoginBack=function(e){App.dispatcher.removeEventListener(LoginEvent.CHECK_LOGIN_BACK,this.onCheckLoginBack,this),e?DeviceUtil.IsAndroid&&DeviceUtil.IsNative&&App.global.userInfo.channelId==EnumChannel.C_DEFAULT?(App.dispatcher.addEventListener(EventConst.U8LOGIN,this.onAndroidLogin,this),App.nativeBridge.sendU8Login("")):this.showGameBox():this.showLogin()},t.prototype.onAndroidLogin=function(e){App.dispatcher.removeEventListener(EventConst.U8LOGIN,this.onAndroidLogin,this),App.nativeBridge.log("request login to server: "+e),this.showGameBox()},t.prototype.showGameBox=function(){this.hideLoading(),PanelOpenManager.openPanel(EnumPanelID.GAME_HALL)},t.prototype.onRelogin=function(e){void 0===e&&(e=null),Config.hasEnterGame=!1,GameManager.isPlaying&&GameManager.lasetGameId==EnumGameID.GAME2&&App.dispatcher.dispatchEvent(EventConst.QUIT_GAME),GameManager.exitGame(),PanelManager.removeAllPanel(),DeviceUtil.IsWeb&&0==Config.soEasy||DeviceUtil.IsIos&&DeviceUtil.IsNative||DeviceUtil.IsAndroid&&DeviceUtil.IsNative&&App.global.userInfo.channelId==EnumChannel.C_DEFAULT?PanelOpenManager.openPanel(EnumPanelID.LOGIN,null,!1):(Config.isLandscape&&App.setOrientation(egret.OrientationMode.LANDSCAPE),PanelOpenManager.openPanel(EnumPanelID.OTHER_LOGIN,e?{type:1,data:e}:null,!1))},t.prototype.showLogin=function(){this.hideLoading(),PanelOpenManager.openPanel(EnumPanelID.LOGIN,null,!1)},t}(h5_engine.GDisplayObjectContainer);__reflect(Main.prototype,"Main");var BgImageControl=function(e){function t(){var t=e.call(this)||this;return t.index=0,t.initImages(),t}return __extends(t,e),t.prototype.initImages=function(){this._images=[];var e=new EffectImage;this.addChild(e);var t=new EffectImage;this.addChild(t),this._images.push(t,e)},t.prototype.remove=function(){if(this._images)for(var e=0,t=this._images.length;t>e;e++)this._images[e].source=null,this._images[e].lastEffectType=null,this._images[e].removeStaticEffect(),this._images[e].resetBaseData();this.url=null},t.prototype.stopEffect=function(){if(this._images)for(var e=0,t=this._images.length;t>e;e++)this._images[e].resetEffect()},t.prototype.getFirstImage=function(){return this._images[0]},t.prototype.changeImage=function(e,t,i,n,o,a){void 0===n&&(n=null),void 0===o&&(o=500);var s=0;if(e&&(this._images[1].source=e,this.addChildAt(this._images[1],0),this.url=e),t)return e?(this._images[0].showEffect(EnumImageEffect.NONE_OUT),this._images[0].resetEffect(),this._images[1].showEffect(EnumImageEffect.NONE_IN),this._images.reverse()):i&&(this._images[0].showEffect(EnumImageEffect.NONE_OUT),this._images[0].resetEffect(),this._images[1].showEffect(EnumImageEffect.NONE_OUT),this._images[1].resetEffect()),s;var r=EnumImageEffect.getEffect(n);return null!=e||-1!=EnumImageEffect.NO_CHANGE_EFFECT_LIST.indexOf(n)||r&&(r.isInName(n)||r.isOutName(n))?(n==EnumImageEffect.CHANGE_SCALE||n==EnumImageEffect.LOOP_MOVE||n==EnumImageEffect.MOVE||n==EnumImageEffect.SHAKE_BLUR||n==EnumImageEffect.SHAKE||n==EnumImageEffect.FLASH_WHITE_LIGHT||n==EnumImageEffect.FLASH_BLACK_LIGHT||n==EnumImageEffect.APART_SHAKE?e?(this._images[0].showEffect(EnumImageEffect.FADE_OUT,500),this._images[1].showEffect(n,o,0,a),s=o>500?o:500):(this._images[0].source?this._images[0].showEffect(n,o,0,a):this._images[1].showEffect(n,o,0,a),s=o):n==EnumImageEffect.MEMORY||n==EnumImageEffect.DARK||n==EnumImageEffect.WHITE_IMAGINATION||n==EnumImageEffect.CLEAR?e?(this._images[0].showEffect(EnumImageEffect.FADE_OUT,500),this._images[1].showEffect(n)):this._images[0].source?this._images[0].showEffect(n):this._images[1].showEffect(n):r?r.isInName(n)?((e?this._images[1]:this._images[0]).showEffect(r.inName,o,0,a),this._images[0]&&this._images[0].source&&this._images[0].showEffect(EnumImageEffect.NONE_OUT),s=o):r.isOutName(n)?(this._images[0].source?this._images[0].showEffect(r.outName,o,0,a):this._images[1].source&&this._images[1].showEffect(r.outName,o,0,a),this.url=null,s=o):this._images[0].source?(this._images[0].showEffect(r.showOutName?r.showOutName:r.outName,o,0,a),this._images[1].showEffect(r.inName,o,r.inWaitTime?o:0,a),s=r.inWaitTime?2*o:o):(this._images[1].showEffect(r.defaultInName,o),s=o):e&&(this._images[0].showEffect(EnumImageEffect.NONE_OUT),this._images[1].showEffect(EnumImageEffect.NONE_IN)),e&&this._images.reverse(),isNaN(s)?0:s):s},t.prototype.addStaticEffect=function(e,t){void 0===t&&(t=null),this._images[0].addStaticEffect(e,t)},t.prototype.hideImage=function(e,t,i,n){void 0===t&&(t=null),void 0===i&&(i=500),t==EnumImageEffect.FADE_OUT?this._images[0].showEffect(EnumImageEffect.FADE_OUT,i):t==EnumImageEffect.CLOCK_OUT?this._images[0].showEffect(EnumImageEffect.CLOCK_OUT,i):t==EnumImageEffect.CUT_IMAGE_OUT&&this._images[0].showEffect(EnumImageEffect.CUT_IMAGE_OUT,i),App.timer.doTimeOnce(this,i,this.remove)},t.prototype.setBaseX=function(e,t){void 0===t&&(t=!1),this._images&&(this._images[0]&&this._images[0].setBaseX(e,t),this._images[1]&&this._images[1].setBaseX(e,t))},t.prototype.setBaseY=function(e,t){void 0===t&&(t=!1),this._images&&(this._images[0]&&this._images[0].setBaseY(e,t),this._images[1]&&this._images[1].setBaseY(e,t))},t.prototype.setBaseScale=function(e,t){void 0===t&&(t=!1),this._images&&(this._images[0]&&this._images[0].setBaseScale(e,t),this._images[1]&&this._images[1].setBaseScale(e,t))},t.prototype.dispose=function(){if(this._images){for(var e=0,t=this._images.length;t>e;e++)this._images[e].dispose();this._images.length=0,this._images=null}this.url=null},t}(eui.Group);__reflect(BgImageControl.prototype,"BgImageControl");var GameFangDong=function(e){function t(){var t=e.call(this)||this;return t._touchIgnore=!1,t._waitNum=0,t}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),App.data.gameResourceCenter.hasChapterResource(0)&&this.superInit()},t.prototype.superInit=function(){this._bgSp=new egret.Shape,this._bgSp.graphics.beginFill(0),this._bgSp.graphics.drawRect(0,0,Config.MAIN_WIDTH,Config.MAIN_HEIGHT),this._bgSp.graphics.endFill(),this.addChild(this._bgSp),this._view=new GameFangDongUI,this.addChild(this._view),this._bgImageControl=new BgImageControl,this._view.boxBg.addChild(this._bgImageControl),this._roleImageControl=new RoleImageControl,this._roleImageControl.init(this._view.boxRole),this._baseY=this._view.boxButton.y,this._groupShareX=this._view.groupShare.x,this._view.boxButton.x=Config.MAIN_WIDTH-this._view.boxButton.width-20;var e=new egret.Sprite;e.graphics.clear(),e.graphics.beginFill(0),e.graphics.drawCircle(55,51,51),e.graphics.endFill(),this._view.imgGuang.mask=e,this._view.groupShare.addChild(e),App.global.guide.addDisplayer(this._view.btnMenu,EnumGuideType.OPEN_MENU)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._view.imgGuang&&(this._view.imgGuang.mask=null),this._bgImageControl&&(this._bgImageControl.dispose(),this._bgImageControl=null),this._roleImageControl&&(this._roleImageControl.dispose(),this._roleImageControl=null),this._weChatView&&(this._weChatView.dispose(),this._weChatView=null),this._view&&(this._view.dispose(),this._view=null),this._bgSp&&(this._bgSp.graphics.clear(),this._bgSp.parent&&this._bgSp.parent.removeChild(this._bgSp),this._bgSp=null)},t.prototype.show=function(e){null==this._data&&(this._data=App.data.gameFangDongCenter,this._data.init(Number(e.id))),this._saveId=e.saveId,this._dispatcher.addEventListener(GameEvent.GAME_INIT,this.onGameInit,this),this._dispatcher.addEventListener(GameEvent.GAME_NEXT,this.onGameNext,this),this._dispatcher.addEventListener(GameEvent.GAME_RES_LOADED,this.onGameResLoaded,this),null==this._view?this._tempData=e:this.superShow(e),ProtocolFangDong.instance().send_chat_init(this._data.gameId,this._saveId)},t.prototype.superShow=function(t){PanelOpenManager.removePanel(EnumPanelID.GAME_FANG_DONG_SELECT),PanelOpenManager.removePanel(EnumPanelID.GAME_FANG_DONG_BENAME),App.sound.closeBgm(!0,!0),this.updateImgFlag(),this._view.btnMenu.alpha=this._view.btnReview.alpha=.8,this.hideShareGroup(!1),this._view.visible=!1,this._view.touchEnabled=!0,this._dispatcher.addEventListener(GameEvent.GAME_BENAME,this.onGameBename,this),this._dispatcher.addEventListener(GameEvent.GAME_CONTINE,this.onGameContine,this),this._dispatcher.addEventListener(GameEvent.SELECTED_OPTION,this.onSelectedOption,this),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onActivate,this,this._view.stage),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchImgNext,this,this._view.boxNext),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this,this._view),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchNext,this,this._view),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchBtn,this,this._view.btnMenu),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchBtn,this,this._view.btnReview),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchBtn,this,this._view.btnShare),this._view.btnReview.getChildAt(0).source=this.getRes(EnumGameRes1.REVIEW_BUTTON),this._view.btnMenu.getChildAt(0).source=this.getRes(EnumGameRes1.MENU_BUTTON),this.setState(EnumGameState.INIT),this._lastType=EnumChatType.CHAT,this._isFirst=t.isInGame?!1:!0,this._view.boxDialog.visible=!1,this._view.boxName.visible=!1,this._view.boxButton.visible=!1,e.prototype.show.call(this,t)},t.prototype.hide=function(){e.prototype.hide.call(this),this._data&&(this._data.resetAutoPlay(),this._data.dispose(),this._data=null),App.sound.closeBgm(!0,!0),App.sound.closeVoice(),App.sound.makeBgmUp(),this._view&&(this.hideWeChat(),this._bgImageControl.remove(),this._roleImageControl.remove(),this.moveButtonToTop(!1),this._particleEffect&&(this._particleEffect.dispose(),this._particleEffect=null),this.hideShareGroup(!1),egret.Tween.removeTweens(this._view.imgGuang.mask)),App.global.guide.removeExistGuide(),PanelOpenManager.removePanel(EnumPanelID.GAME_FANG_DONG_SELECT),PanelOpenManager.removePanel(EnumPanelID.GAME_FANG_DONG_BENAME),PanelOpenManager.removePanel(EnumPanelID.GAME_FANG_DONG_MENU),App.sound.closeVoice(),App.timer.clearTimer(this,this.onUpdateDialog),App.timer.clearTimer(this,this.onStartFastSpeedPlay),App.timer.clearTimer(this,this.requestNext),App.timer.clearTimer(this,this.onVideoComplete),App.timer.clearTimer(this,this.showRoleEffect),App.timer.clearTimer(this,this.playSound)
},t.prototype.onActivate=function(e){App.data.gameResourceCenter.activateSound()},t.prototype.onGameInit=function(){return null==this._view?void(App.data.gameResourceCenter.hasChapterResource(0)&&App.data.gameResourceCenter.hasChapterResource(App.data.gameFangDongCenter.currentChapter)?(this.superInit(),this.superShow(this._tempData),this._tempData=null):PanelOpenManager.openPanel(EnumPanelID.LOADING_RESVIEW,{chapter:App.data.gameFangDongCenter.currentChapter,completeEvent:GameEvent.GAME_INIT},!1)):App.data.gameResourceCenter.hasChapterResource(App.data.gameFangDongCenter.currentChapter)?void(this._state!=EnumGameState.START_VIDEO&&(GameLog.log("游戏初始化==>id:"+this._data.id),this._view.visible=!0,this.nextReset(),this.setState(EnumGameState.CAN_DO_NEXT),this.moveButtonToTop(!0),this.showNext())):void PanelOpenManager.openPanel(EnumPanelID.LOADING_RESVIEW,{chapter:App.data.gameFangDongCenter.currentChapter,completeEvent:GameEvent.GAME_INIT},!1)},t.prototype.onGameNext=function(){return this._data.chatType!=EnumChatType.VIDEO&&(0==App.data.gameResourceCenter.hasChapterResource(this._data.nextChapter)||this._data.nextChapter!=this._data.currentChapter&&0==App.data.gameResourceCenter.hasChapterResourceByNative(this._data.nextChapter))?void(0==PanelManager.isShowing(PanelRegister.LOADING_RESVIEW)&&PanelOpenManager.openPanel(EnumPanelID.LOADING_RESVIEW,{chapter:this._data.nextChapter,completeEvent:GameEvent.GAME_NEXT},!1)):(GameLog.log("下一步==>id:"+this._data.id),this.nextReset(),this.setState(EnumGameState.CAN_DO_NEXT),void this.showNext())},t.prototype.nextReset=function(){this.hideShareGroup(),PanelManager.isShowing(PanelRegister.GAME_FANG_DONG_SELECT)&&PanelManager.removePanelByName(PanelRegister.GAME_FANG_DONG_SELECT)},t.prototype.onGameResLoaded=function(){null==Video.instance().src&&this._data.id!=this._lastVideoId&&this.onGameNext()},t.prototype.startGame=function(){0!=this._data.currentChapter&&this.onGameInit()},t.prototype.playStartVideo=function(){if(Config.skipVideo)this.startGame();else{this.setState(EnumGameState.START_VIDEO);var e=App.data.gameResourceCenter.baseURL+"start.mp4";DeviceUtil.IsNative&&0==e.indexOf("//")&&(e="https:"+e),App.timer.doTimeOnce(Video.instance(),100,Video.instance().init,[e,DeviceUtil.isWebIOS?!0:!1,!1,new FunctionVO(this.onStartVideoComplete,this),Video.TOP,null,Config.isLandscape])}},t.prototype.onStartVideoComplete=function(){Video.instance().dispose(),this.setState(EnumGameState.INIT),this.startGame()},t.prototype.onGameContine=function(){App.sound.makeBgmUp(),this.updateImgFlag(),this._state==EnumGameState.CAN_DO_NEXT&&this._data.isAutoPlay?this.requestNext():this._state==EnumGameState.SELECT&&0==this._data.isPlayingVoice&&0==App.timer.hasTimer(this.onUpdateDialog,this)?(this.showShareGroup(),PanelOpenManager.openPanel(EnumPanelID.GAME_FANG_DONG_SELECT),App.global.guide.showView(this._view.btnMenu,EnumGuideType.OPEN_MENU)):this._state==EnumGameState.BENAME&&PanelOpenManager.openPanel(EnumPanelID.GAME_FANG_DONG_BENAME)},t.prototype.onTouchImgNext=function(e){0==this._touchIgnore&&0==this._data.isAutoPlay&&(this._data.resetAutoPlay(!0),this.updateImgFlag(),App.sound.playSoundSwitchClient(EnumSoundId.CLICK),this._state==EnumGameState.CAN_DO_NEXT&&this._data.isAutoPlay&&this.requestNext(),e.stopPropagation())},t.prototype.onTouchBegin=function(e){this._touchIgnore=!1,this._data.hasRead&&App.timer.doTimeOnce(this,500,this.onStartFastSpeedPlay),this.stage.once(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)},t.prototype.onTouchEnd=function(e){this.setFastSpeedPlay(!1),App.timer.clearTimer(this,this.onStartFastSpeedPlay)},t.prototype.onTouchNext=function(e){return 0==this._view.touchEnabled||this._touchIgnore||this._weChatView&&this._weChatView.parent&&0==this._weChatView.canNext||(this._data.isAutoPlay&&(this._data.resetAutoPlay(),App.sound.playSoundSwitchClient(EnumSoundId.CLICK)),this._state==EnumGameState.SELECT||this._state==EnumGameState.INIT||this._state==EnumGameState.BENAME)?void 0:this._state==EnumGameState.AUTO_TIME||this._state==EnumGameState.CAN_DO_NEXT?(App.timer.clearTimer(this,this.showRoleEffect),App.timer.clearTimer(this,this.playSound),void this.requestNext()):void this.finishShow()},t.prototype.finishShow=function(e){void 0===e&&(e=!1),this._data.chatType==EnumChatType.WECHAT&&this._weChatView&&0==this._weChatView.canNext||(this._state==EnumGameState.BG_EFFECT_PLAYING?(this._bgImageControl.stopEffect(),this._roleImageControl.showRole(!0),this.finishChat()):this._state==EnumGameState.ROLE_EFFECT_PLAYING?(this._bgImageControl.stopEffect(),this._roleImageControl.stopEffect(),this.finishChat()):this._state==EnumGameState.SOUND_PLAYING?(this.setState(EnumGameState.CAN_DO_NEXT),App.sound.stopSound(this._data.bgmInfo.soundEffectURL),this.finishChat()):this._state==EnumGameState.VOICE_TYPING_PLAYING&&this.finishChat(!1),App.timer.clearTimer(this,this.showRoleEffect),App.timer.clearTimer(this,this.playSound),this.setState(EnumGameState.CAN_DO_NEXT),this.updateImgFlag(),e?this.updateState(0):this.doAutoNext())},t.prototype.finishChat=function(e){void 0===e&&(e=!0),e?(this._data.windowInfo.transform(this._view.boxDialog,this._view.imgDialogBox,this._view.txtDialog),this._data.windowInfo.transformName(this._view.boxName,this._view.txtName,this._view.imgName),this._view.boxButton.visible=this._view.boxDialog.visible&&(null==this._weChatView||null==this._weChatView.parent),this.setDialogText(this._data.windowInfo.label)):(App.timer.hasTimer(this.onUpdateDialog,this)&&(App.timer.clearTimer(this,this.onUpdateDialog),this.setDialogText(this._data.windowInfo.label)),this._data.isPlayingVoice&&(App.sound.closeVoice(),this._data.isPlayingVoice=!1))},t.prototype.onStartFastSpeedPlay=function(){this._touchIgnore=!0,this.setFastSpeedPlay(!0),this.finishShow(!0)},t.prototype.requestNext=function(){App.timer.clearTimer(this,this.requestNext),App.timer.clearTimer(this,this.onVideoComplete),ProtocolFangDong.instance().send_chat_select(this._data.gameId)},t.prototype.onTouchBtn=function(e){if(e.currentTarget==this._view.btnMenu)PanelOpenManager.openPanel(EnumPanelID.GAME_FANG_DONG_MENU),App.sound.makeBgmDown();else if(e.currentTarget==this._view.btnReview)PanelOpenManager.openPanel(EnumPanelID.GAME_FANG_DONG_REVIEW),App.sound.makeBgmDown();else if(e.currentTarget==this._view.btnShare)return void ProtocolCommon.instance().send_share_link(App.data.gameFangDongCenter.gameId,App.data.gameFangDongCenter.id,new FunctionVO(this.onCallBack,this));this._state==EnumGameState.SELECT?this.nextReset():this._state==EnumGameState.BENAME&&PanelOpenManager.removePanel(EnumPanelID.GAME_FANG_DONG_BENAME)},t.prototype.onCallBack=function(e){"200"==e.code&&PanelOpenManager.openPanel(EnumPanelID.GAME_SHARE2,{url:e.data.collect_image,effect:!0})},t.prototype.onGameBename=function(e){PanelManager.removePanelByName(PanelRegister.GAME_FANG_DONG_BENAME),this.setState(EnumGameState.CAN_DO_NEXT),this.requestNext()},t.prototype.onUnlockSuccess=function(e){GameLog.log("购买成功==>"),e==this._data.gameId&&this.requestNext()},t.prototype.showNext=function(){if(this._lastType==EnumChatType.VIDEO?Video.instance().dispose():this._baseY!=this._view.boxButton.y&&(this._view.boxButton.y=this._baseY),1==this._data.getNewMemory?GameLog.log("解锁了新的壁纸("+this._data.hasGetMemoryNum+"/"+this._data.memoryTotal+")"):2==this._data.getNewMemory?GameLog.log("解锁了新的回忆("+this._data.hasGetMemoryNum+"/"+this._data.memoryTotal+")"):3==this._data.getNewMemory&&GameLog.log("解锁了新的结局("+this._data.hasGetMemoryNum+"/"+this._data.memoryTotal+")"),App.timer.clearTimer(this,this.onUpdateDialog),App.timer.clearTimer(this,this.onVideoComplete),this._data.type==EnumGameStepType.SHOP)PanelOpenManager.openPanel(EnumPanelID.GAME_FANG_DONG_BUY,{id:this._data.gameId,money:this._data.costMoney,originalMoney:this._data.originalMoney,endTime:this._data.stop_time,title:App.data.gameHallCenter.getHeroniesData(this._data.gameId).title}),this._dispatcher.addEventListener(GameEvent.GAME_UNLOCK_SUCCESS,this.onUnlockSuccess,this),this.setFastSpeedPlay(!1),this.playBgm();else if(this._data.type==EnumGameStepType.END)GameManager.exitGame(),PanelOpenManager.openPanel(EnumPanelID.HEROINES_DETAIL,App.data.gameHallCenter.getHeroniesData(this._data.gameId));else if(this._data.type==EnumGameStepType.CHAT)switch(this.updateImgFlag(),this._particleEffect&&(this._particleEffect.dispose(),this._particleEffect=null),this._data.particleEffect&&(this._particleEffect=new ParticleEffect,this._particleEffect.init(this._data.particleEffect),this._view.addChild(this._particleEffect),this._particleEffect.touchEnabled=!1,this._particleEffect.touchThrough=!0,this._particleEffect.play()),this._lastType!=EnumChatType.WECHAT&&this._lastType!=EnumChatType.WECHAT_DIALOG||this._data.chatType==EnumChatType.WECHAT||this._data.chatType==EnumChatType.WECHAT_DIALOG||this.hideWeChat(),this._lastType=this._data.chatType,this._data.chatType){case EnumChatType.CHAT:case EnumChatType.OPTION:this.showChat();break;case EnumChatType.WECHAT:this.showWeChat(!0);break;case EnumChatType.WECHAT_DIALOG:this.showWeChat(!1);break;case EnumChatType.BENAME:this.setFastSpeedPlay(!1),this.setState(EnumGameState.BENAME),PanelOpenManager.openPanel(EnumPanelID.GAME_FANG_DONG_BENAME),this.showChat();break;case EnumChatType.VIDEO:case EnumChatType.END_VIDEO:this.showVideo(),this._bgImageControl.remove(),this._roleImageControl.remove();break;case EnumChatType.END_IMAGE:PanelOpenManager.openPanel(EnumPanelID.ENDING)}},t.prototype.showWeChat=function(e){if(null==this._weChatView&&(this._weChatView=new GameFangDongChatView),null==this._weChatView.parent&&(this._view.boxWeChat.addChild(this._weChatView),this._weChatView.show(),this._bgImageControl.remove()),e){this.setFastSpeedPlay(!1);var t={};this._data.bgmInfo.voiceURL?(t.type=2,t.voiceLength=Number(this._data.windowInfo.label),t.voiceURL=this._data.bgmInfo.voiceURL):(t.type=1,t.text=this._data.windowInfo.label),this._weChatView.addChatItem(t),this._view.boxDialog.visible=!1,this._view.boxName.visible=!1,this._view.boxButton.visible=!1,this.showNextImage(!1)}else this._view.touchEnabled=!0,this._view.boxButton.visible=!0,this.setState(EnumGameState.BG_EFFECT_PLAYING),this.updateTextDialog()},t.prototype.hideWeChat=function(){this._view&&(this._view.touchEnabled=!0),this._weChatView&&this._weChatView.parent&&this._weChatView.hide()},t.prototype.updateImgFlag=function(){this._data.fastSpeedPlay?(this._view.imgNext.source=this.getRes(EnumGameRes1.FAST_SPEED_PLAY),this.showNextImage(!0)):this._data.isAutoPlay?(this._view.imgNext.source=this.getRes(EnumGameRes1.AUTO_PLAYING),this.showNextImage(this._view.boxDialog.visible)):(this._view.imgNext.source=this.getRes(EnumGameRes1.NEXT_WORD),this.showNextImage(this._state==EnumGameState.CAN_DO_NEXT&&this._view.boxDialog.visible))},t.prototype.showVideo=function(){this._lastVideoId=this._data.id,App.sound.closeBgm(!1,!1),this.setState(EnumGameState.VIDEO_PLAYING),Video.instance().init(this._data.videoURL,!1,!1,new FunctionVO(this.onVideoComplete,this),Video.TOP,null,Config.isLandscape),PanelOpenManager.openPanel(EnumPanelID.VIDEO_BUTTON,{type:EnumVideoType.AVG_SHIPIN,canSkip:this._data.hasRead}),this._view.boxDialog.visible=!1,this._view.boxName.visible=!1,this._view.boxButton.visible=!1,this.showNextImage(!1),(0==App.data.gameResourceCenter.hasChapterResource(this._data.nextChapter)||this._data.nextChapter!=this._data.currentChapter&&0==App.data.gameResourceCenter.hasChapterResourceByNative(this._data.nextChapter))&&PanelOpenManager.openPanel(EnumPanelID.LOADING_RESVIEW,{chapter:this._data.nextChapter,completeEvent:GameEvent.GAME_RES_LOADED},!1)},t.prototype.onVideoComplete=function(){this._isPlaying&&(this.setState(EnumGameState.CAN_DO_NEXT),this.requestNext())},t.prototype.showChat=function(){(0==this._data.windowInfo.hasDialog||this._data.imageEffectInfo.isSameEffect)&&this._view.boxDialog.visible&&(this._view.boxDialog.visible=!1,this._view.boxName.visible=!1,this.showNextImage(!1)),this._view.boxButton.visible=this._view.boxDialog.visible,this.playBgm(),this._data.hasRead||this.setFastSpeedPlay(!1),this.playSound(1);var e=this.showBgEffect();return this._data.hasSelectOptions?(this.showOption(),void this._roleImageControl.showRole()):void(this._data.imageEffectInfo.isSameEffect||0==e||this._data.fastSpeedPlay?this.showRoleEffect(e):App.timer.doTimeOnce(this,e,this.showRoleEffect))},t.prototype.playBgm=function(){this._data.bgmInfo.bgMusicChanged&&(this._data.bgmInfo.bgMusicChanged=!1,this._data.bgmInfo.bgMusicURL?(GameLog.log("播放背景音乐:",this._data.bgmInfo.bgMusicURL),App.data.gameResourceCenter.playBgmSound(this._data.bgmInfo.bgMusicURL)):App.sound.closeBgm(!0,!1)),App.sound.isBgmPlaying&&this._data.bgmInfo.bgMusicVolumeChanged&&(this._data.bgmInfo.bgMusicVolumeChanged=!1,App.sound.makeBgmDown(this._data.bgmInfo.bgMusicVolume))},t.prototype.showBgEffect=function(){var e;if(this._data.imageEffectInfo.bgURL!=this._bgImageControl.url)var t=this._data.imageEffectInfo.bgURL;if(this._data.imageEffectInfo.bgEffect&&this._data.imageEffectInfo.bgEffect.length>0)if(this._data.imageEffectInfo.bgEffect[0]&&this._data.imageEffectInfo.bgEffect[1])e=this._bgImageControl.changeImage(t,this._data.fastSpeedPlay,!1,this._data.imageEffectInfo.bgEffect[1].module,Number(this._data.imageEffectInfo.bgEffect[1].time),this._data.imageEffectInfo.bgEffect[1]),this._bgImageControl.addStaticEffect(this._data.imageEffectInfo.bgEffect[0].module,this._data.imageEffectInfo.bgEffect[0]);else{var i=this._data.imageEffectInfo.bgEffect[0]?this._data.imageEffectInfo.bgEffect[0]:this._data.imageEffectInfo.bgEffect[1];e=this._bgImageControl.changeImage(t,this._data.fastSpeedPlay,!1,i.module,Number(i.time),i)}else e=this._bgImageControl.changeImage(t,this._data.fastSpeedPlay,!1,EnumImageEffect.FADE_IN_OUT,this._data.imageEffectInfo.bgEffectTime);return this.setState(EnumGameState.BG_EFFECT_PLAYING),Number(e)},t.prototype.showOption=function(){0==this.isPaused()&&(this.showShareGroup(),PanelOpenManager.openPanel(EnumPanelID.GAME_FANG_DONG_SELECT),App.global.guide.showView(this._view.btnReview,EnumGuideType.REVIEW)),this.setFastSpeedPlay(!1),this.setState(EnumGameState.SELECT),this._view.boxDialog.visible=!1,this._view.boxName.visible=!1,this.showNextImage(!1),this._data.options&&this._data.options.length>3&&(this._view.boxButton.y=this._baseY-102*(this._data.options.length-3)+40),this._view.boxButton.visible=!0},t.prototype.showRoleEffect=function(e){void 0===e&&(e=0);var t=this._roleImageControl.showRole(this._data.fastSpeedPlay);this._data.imageEffectInfo.isSameEffect&&e>t&&(t=e),this.setState(EnumGameState.ROLE_EFFECT_PLAYING),this._data.fastSpeedPlay?this.updateTextDialog():t>0?App.timer.doTimeOnce(this,t,this.playSound):this.playSound()},t.prototype.playSound=function(e){void 0===e&&(e=0),this._data.bgmInfo.soundEffectURL&&e==this._data.bgmInfo.soundEffectType?(GameLog.log("播放音效:"+this._data.bgmInfo.soundEffectURL),0==e?(App.data.gameResourceCenter.playSound(this._data.bgmInfo.soundEffectURL,new FunctionVO(this.updateTextDialog,this)),this.setState(EnumGameState.SOUND_PLAYING)):App.data.gameResourceCenter.playSound(this._data.bgmInfo.soundEffectURL,null)):this.updateTextDialog()},t.prototype.playVoice=function(){0==this._data.fastSpeedPlay&&this._data.bgmInfo.voiceURL&&(GameLog.log("播放语音:"+this._data.bgmInfo.voiceURL),this._data.isPlayingVoice=App.data.gameResourceCenter.playVoice(this._data.bgmInfo.voiceURL,new FunctionVO(this.onVoiceComplete,this)),this._data.isPlayingVoice&&this.setState(EnumGameState.VOICE_TYPING_PLAYING))},t.prototype.updateTextDialog=function(){this._state!=EnumGameState.CAN_DO_NEXT&&this._state!=EnumGameState.AUTO_TIME&&null!=this._data&&(this._data.windowInfo.transform(this._view.boxDialog,this._view.imgDialogBox,this._view.txtDialog),this._data.windowInfo.transformName(this._view.boxName,this._view.txtName,this._view.imgName),this._view.boxButton.visible=this._view.boxDialog.visible&&(null==this._weChatView||null==this._weChatView.parent),this._view.boxDialog.visible?this._data.fastSpeedPlay?(this.setState(EnumGameState.CAN_DO_NEXT),this.setDialogText(this._data.windowInfo.label),this.showNextImage(),this.updateState(100)):0==this._data.windowInfo.labelSpeed?(this.setState(EnumGameState.CAN_DO_NEXT),this.setDialogText(this._data.windowInfo.label),this.showNextImage(),this.doAutoNext(),this.updateState(100)):(this.playVoice(),this._waitNum=0,App.timer.doTimeLoop(this,this._data.typingSpeed,this.onUpdateDialog,[this._data.windowInfo.label,this._data.windowInfo.label.length]),this._typingIndex=-1,this.setDialogText(""),this.onUpdateDialog(this._data.windowInfo.label,this._data.windowInfo.label.length),this.setState(EnumGameState.VOICE_TYPING_PLAYING),this.showNextImage(this._data.isAutoPlay?!0:!1)):(this.setState(EnumGameState.CAN_DO_NEXT),0==this._data.isPlayingVoice&&this.updateState(100),this.doAutoNext()))},t.prototype.doAutoNext=function(){this._data.survivalTime>0&&(App.timer.doTimeOnce(this,this._data.survivalTime,this.onVideoComplete),this.setState(EnumGameState.AUTO_TIME)),this.showNextImage()},t.prototype.setDialogText=function(e){this._view.txtDialog.text=e},t.prototype.setFastSpeedPlay=function(e){this._data.fastSpeedPlay!=e&&(this._data.fastSpeedPlay=e,this._data.fastSpeedPlay?App.sound.makeBgmDown():App.sound.makeBgmUp(),this.updateImgFlag())},t.prototype.setState=function(e){this._state=e},t.prototype.onVoiceComplete=function(){this._data&&(this._data.isPlayingVoice=!1,0==App.timer.hasTimer(this.onUpdateDialog,this)&&(this.setState(EnumGameState.CAN_DO_NEXT),this.showNextImage(),this.doAutoNext(),this.updateState()))},t.prototype.onUpdateDialog=function(e,t){return this._waitNum>0?void this._waitNum--:void(this._typingIndex>=t-1?(App.timer.clearTimer(this,this.onUpdateDialog),this.setDialogText(e),0==this._data.isPlayingVoice&&(this.setState(EnumGameState.CAN_DO_NEXT),this.showNextImage(),this.doAutoNext(),this.updateState(null==this._data.bgmInfo.voiceURL&&this._data.isAutoPlay?1500:500))):(this._typingIndex++,this.setDialogText(e.slice(0,this._typingIndex+1)),this._typingIndex<t-1&&-1!=EnumTypingSpeed.SYMBOL.indexOf(e[this._typingIndex])&&(this._waitNum=Math.ceil(EnumTypingSpeed.SYMBOL_TIME/this._data.typingSpeed))))},t.prototype.showNextImage=function(e){void 0===e&&(e=!0),e?0==this._data.survivalTime&&(this._view.boxNext.visible=!0,0==this._data.isAutoPlay&&0==this._data.fastSpeedPlay&&(App.global.guide.showView(this._view.boxNext,EnumGuideType.START_AUTOPLAY),App.global.guide.showView(this._view.boxNext,EnumGuideType.PRESS_JUMPREAD))):this._view.boxNext.visible=!1},t.prototype.updateState=function(e){void 0===e&&(e=500),this._state==EnumGameState.CAN_DO_NEXT&&(this._data.fastSpeedPlay||this._data.isAutoPlay||this._data.windowInfo.autoChange)&&0==this.isPaused()&&(0>=e?this.requestNext():App.timer.doTimeOnce(this,e,this.requestNext))},t.prototype.isPaused=function(){return PanelManager.showPanelCount>1||1==PanelManager.showPanelCount&&0==PanelManager.isShowing(PanelRegister.ALERT)},t.prototype.moveButtonToTop=function(e){e?App.layer.specialMenuLayer.addChild(this._view.boxButton):this._view.addChild(this._view.boxButton)},t.prototype.onSelectedOption=function(){this.hideShareGroup(),App.global.guide.changeGuideTo_stateN(EnumGuideType.OPEN_MENU2),App.global.guide.showView(this._view.btnMenu,EnumGuideType.OPEN_MENU2)},t.prototype.showShareGroup=function(){this.hideShareGroup(),App.global.canShare&&App.timer.doTimeOnce(this,1e3,this.playShareEffect)},t.prototype.playShareEffect=function(){var e=this;this._view.groupShare.visible=!0,egret.Tween.get(this._view.groupShare).to({x:this._groupShareX},500,egret.Ease.backOut).call(function(){App.global.guide.showView(e._view.btnShare,EnumGuideType.AVG_HELP),egret.Tween.removeTweens(e._view.groupShare)},this),this._view.imgGuang.x=-110,egret.Tween.get(this._view.imgGuang,{loop:!0}).to({x:110},800).call(function(){e._view.imgGuang.x=-110},this).wait(3e3)},t.prototype.hideShareGroup=function(e){var t=this;void 0===e&&(e=!0),this._view.groupShare.visible&&(egret.Tween.removeTweens(this._view.groupShare),e?(this._view.groupShare.alpha=1,egret.Tween.get(this._view.groupShare).to({alpha:0},500).call(function(){t._view.groupShare.alpha=1,t._view.groupShare.visible=!1,t._view.groupShare.x=Config.MAIN_WIDTH-t._view.boxButton.x,egret.Tween.removeTweens(t._view.groupShare),egret.Tween.removeTweens(t._view.imgGuang)},this)):(this._view.groupShare.visible=!1,this._view.groupShare.x=Config.MAIN_WIDTH-this._view.boxButton.x)),App.timer.clearTimer(this,this.playShareEffect)},t}(BaseGame);__reflect(GameFangDong.prototype,"GameFangDong");var RoleImageControl=function(){function e(){}return e.prototype.init=function(e){this._box=e,this._roleList=[]},e.prototype.remove=function(){if(this._roleList)for(var e=0,t=this._roleList.length;t>e;e++)this._roleList[e]&&this._roleList[e].remove()},e.prototype.stopEffect=function(){if(this._box)for(var e=0,t=this._box.numChildren;t>e;e++)this._box.getChildAt(e).stopEffect()},e.prototype.showRole=function(e){void 0===e&&(e=!1);for(var t,i,n,o,a=0,s=App.data.gameFangDongCenter,r=s.imageEffectInfo.roleList,h=0,p=r.length;p>h;h++)n=null,r[h]?(t=this.getRoleImage(h),null==t.parent&&this._box.addChild(t),n=s.imageEffectInfo.getRoleEffectByLayer(h,!0),i=s.imageEffectInfo.getRoleEffectByLayer(h,!1),r[h].updateImage(t,null==i||i.module!=EnumImageEffect.MOVE&&i.module!=EnumImageEffect.CHANGE_SCALE),t.url!=r[h].roleURL?a=i?t.changeImage(r[h].roleURL,e,!0,i.module,i.time,i):t.changeImage(r[h].roleURL,e,!0,EnumImageEffect.FADE_IN_OUT,500):i&&(a=t.changeImage(null,e,!0,i.module,i.time,i)),n&&t.addStaticEffect(n.module),t.index=r[h].index):this.hasShowRoleImage(h)&&(t=this.getRoleImage(h),i=s.imageEffectInfo.getRoleEffectByLayer(h,!1),i?(o=EnumImageEffect.getEffect(i.module),a=o?t.changeImage(null,e,!0,o.outName,i.time,i):t.changeImage(null,e,!0,EnumImageEffect.FADE_OUT,500,null)):a=t.changeImage(null,e,!0,EnumImageEffect.FADE_OUT,500,null),n&&t.addStaticEffect(n.module));return this.sortImageDepth(),Number(a)},e.prototype.sortImageDepth=function(){if(this._box.numChildren>1){for(var e=[],t=0,i=this._box.numChildren;i>t;t++)e.push(this._box.getChildAt(t));for(e.sort(this.compare),t=0,i=e.length;i>t;t++)this._box.addChild(e[t])}},e.prototype.compare=function(e,t){return e.index<t.index?-1:e>t?1:0},e.prototype.getRoleImage=function(e){return null==this._roleList[e]&&(this._roleList[e]=new BgImageControl),this._roleList[e]},e.prototype.hasShowRoleImage=function(e){return this._roleList[e]&&this._roleList[e].parent?!0:!1},e.prototype.dispose=function(){if(this._roleList){for(var e=0,t=this._roleList.length;t>e;e++)this._roleList[e]&&this._roleList[e].dispose();this._roleList.length=0,this._roleList=null}this._box=null},e}();__reflect(RoleImageControl.prototype,"RoleImageControl");var FangDongSelectButton=function(e){function t(){var t=e.call(this)||this;return t.skinName="ImageButtonSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.getChildAt(0).source=App.data.gameResourceCenter.getRes(EnumGameRes1.SELECT_BUTTON)},t.prototype.show=function(){this.touchEnabled=!1;var e=-this.width>>1;this.x=Config.MAIN_WIDTH-(Config.MAIN_WIDTH-this.width>>1),this.alpha=0,egret.Tween.get(this).wait(200*(this.data-1)).to({x:e,alpha:1},300,egret.Ease.sineOut).call(this.onShowComplete,this)},t.prototype.onShowComplete=function(e){void 0===e&&(e=!0),egret.Tween.removeTweens(this),this.touchEnabled=e},t.prototype.hide=function(e){void 0===e&&(e=0),this.alpha=1,egret.Tween.get(this).wait(e).to({alpha:0},500,egret.Ease.sineOut).call(this.onShowComplete,this,[!1])},t.prototype.dispose=function(){e.prototype.dispose.call(this),egret.Tween.removeTweens(this)},t}(BaseButton);__reflect(FangDongSelectButton.prototype,"FangDongSelectButton");var RoleImage=function(e){function t(){var t=e.call(this)||this;return t.init(),t}return __extends(t,e),t.prototype.init=function(){this._img=new eui.Image,this.addChild(this._img)},t.prototype.setImgData=function(e,t){this.url!=e.roleURL&&(this._url=e.roleURL,this._img.source=App.data.gameResourceCenter.getRes(this._url)),this.x=e.x,this.y=e.y,t||this.showEffect(e.effectType,e.effectTime)},Object.defineProperty(t.prototype,"url",{get:function(){return this._url},enumerable:!0,configurable:!0}),t.prototype.showEffect=function(e,t){void 0===t&&(t=1e3),e==EnumEffectType.CROSS_FADE&&ImageEffectUtil.fadeIn(this,t)},t.prototype.reset=function(e){this.parent&&(e?(this._img.source=null,this.parent.removeChild(this)):ImageEffectUtil.fadeOut(this,1e3,!0)),this._url=null},t.prototype.dispose=function(){this.reset(!0),this._img=null},t.prototype.remove=function(){this.parent&&this.parent.removeChild(this)},t}(eui.Group);__reflect(RoleImage.prototype,"RoleImage");var GameFangDongChatBaseItem=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.initData=function(e){},Object.defineProperty(t.prototype,"canNext",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.autoNext=function(){App.data.gameFangDongCenter.isAutoPlay&&App.timer.doTimeOnce(this,500,this.requestNext)},t.prototype.requestNext=function(){ProtocolFangDong.instance().send_chat_select(App.data.gameFangDongCenter.gameId)},t}(BaseUI);__reflect(GameFangDongChatBaseItem.prototype,"GameFangDongChatBaseItem");var GameFangDongChatTimeItem=function(e){function t(){return e.call(this,"GameFangDongChatTimeItemSkin")||this}return __extends(t,e),t.prototype.initData=function(e){e&&(this.txtTime.text=e.time)},t}(GameFangDongChatBaseItem);__reflect(GameFangDongChatTimeItem.prototype,"GameFangDongChatTimeItem");var GameFangDongChatItem=function(e){function t(){return e.call(this,"GameFangDongChatItemSkin")||this}return __extends(t,e),t.prototype.createComplete=function(){e.prototype.createComplete.call(this),this.imgLabelBg.scale9Grid=new egret.Rectangle(20,54,40,10)},t.prototype.initData=function(e){e&&(this.txtLabel.width=460,this.txtLabel.text=e.text,this.txtLabel.height>40&&(this.txtLabel.textAlign="left"),this.imgLabelBg.width=this.txtLabel.textWidth+50,this.imgLabelBg.height=this.txtLabel.textHeight+50,this.height=this.imgLabelBg.height)},Object.defineProperty(t.prototype,"canNext",{get:function(){return!1},enumerable:!0,configurable:!0}),t}(GameFangDongChatBaseItem);__reflect(GameFangDongChatItem.prototype,"GameFangDongChatItem");var GameFangDongChatVoiceItem=function(e){function t(){return e.call(this,"GameFangDongChatVoiceItemSkin")||this}return __extends(t,e),t.prototype.createComplete=function(){e.prototype.createComplete.call(this),this.imgVoice.scale9Grid=new egret.Rectangle(64,2,180,2)},t.prototype.initData=function(e){if(e){this._voiceComplete=!1,this._voiceURL=e.voiceURL,this.txtTime.text=e.time;var t=90+20*e.voiceLength;this.imgVoice.width=t>400?400:t,this.txtTime.text=e.voiceLength+'"',this.txtTime.x=this.imgVoice.x+this.imgVoice.width+8,this.imgRed.x=this.txtTime.x+this.txtTime.textWidth+4,this.imgVoice.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)}},t.prototype.onTouch=function(e){this.imgVoice.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.imgRed.visible&&App.data.gameResourceCenter.playVoice(this._voiceURL,new FunctionVO(this.onVoiceComplete,this)),this.imgRed.visible=!1},t.prototype.onVoiceComplete=function(){GameLog.log("微信语音播放结束"),this._voiceComplete=!0,e.prototype.autoNext.call(this)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.imgVoice.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)},Object.defineProperty(t.prototype,"canNext",{get:function(){return this._voiceComplete},enumerable:!0,configurable:!0}),t.prototype.autoNext=function(){this.onTouch()},t}(GameFangDongChatBaseItem);__reflect(GameFangDongChatVoiceItem.prototype,"GameFangDongChatVoiceItem");var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,i){function n(n){t.call(i,n,e)}if(RES.hasRes(e)){var o=RES.getRes(e);o?n(o):RES.getResAsync(e,n,this)}else RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,i,n){function o(e){t.call(n,e)}function a(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),i.call(n))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),RES.getResByUrl(e,o,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var GameFangDongChatView=function(e){function t(){var t=e.call(this)||this;return t.init(),t}return __extends(t,e),t.prototype.init=function(){this._view=new GameFangDongChatUI,this.addChild(this._view)},t.prototype.show=function(){var e=this;this._view.imgBg.source=App.data.gameResourceCenter.getRes("s1_img_chat_app_bg_png"),this.alpha=0,egret.Tween.get(this).to({alpha:1},500).call(function(){egret.Tween.removeTweens(e)}),this._view.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchBack,this)},t.prototype.onTouchBack=function(e){GameManager.exitGame(),Config.isLandscape&&App.setOrientation(egret.OrientationMode.LANDSCAPE),PanelOpenManager.openPanel(EnumPanelID.GAME_HALL)},t.prototype.dispose=function(){this._view&&(this._view.btnBack.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchBack,this),this._view.dispose(),this._view=null)},t.prototype.hide=function(){var e=this;this._view.btnBack.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchBack,this),this.alpha=1,egret.Tween.get(this).to({alpha:0},500).call(function(){for(egret.Tween.removeTweens(e);e._view.boxChat.numChildren;)e._view.boxChat.removeChildAt(0).dispose();e.parent&&e.parent.removeChild(e)})},t.prototype.addChatItem=function(e){var t=this,i=0;0==e.type?this._currentItem=new GameFangDongChatTimeItem:1==e.type?(this._currentItem=new GameFangDongChatItem,ProtocolFangDong.instance().send_chat_select(App.data.gameFangDongCenter.gameId)):(this._currentItem=new GameFangDongChatVoiceItem,0!=this._view.boxChat.numChildren&&(i=Math.floor(1e3*Math.random()+1e3))),this._currentItem.initData(e),this._view.boxChat.addChild(this._currentItem),0!=i?(this._currentItem.visible=!1,App.timer.doTimeOnce(this,i,function(){t._currentItem.visible=!0,App.sound.playSoundSwitchClient(EnumSoundId.RING_MESSAGE),App.data.gameFangDongCenter.isAutoPlay&&t._currentItem.autoNext()})):this._currentItem instanceof GameFangDongChatVoiceItem&&App.data.gameFangDongCenter.isAutoPlay&&this._currentItem.autoNext()},Object.defineProperty(t.prototype,"width",{get:function(){return this._view.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._view.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canNext",{get:function(){return this._currentItem?this._currentItem.canNext:!0},enumerable:!0,configurable:!0}),t}(eui.Group);__reflect(GameFangDongChatView.prototype,"GameFangDongChatView");var MainLayer=function(e){function t(){var t=e.call(this)||this;return t.init(),t.createChildren(),t}return __extends(t,e),t.prototype.showVideoLayer=function(e){this.videoLayer.visible=e,this.sceneLayer.visible=!e,this.mainLayer.visible=!e,this.specialMenuLayer.visible=!e,this.moduleLayer.visible=!e,this.commonLayer.visible=!e},t.prototype.init=function(){this.videoLoadingLayer=new LayerBase,this.sceneLayer=new LayerBase,this.sceneLayer.touchEnabled=!1,this.sceneLayer.touchChildren=!0,this.mainLayer=new LayerBase,this.mainLayer.touchEnabled=!1,this.mainLayer.touchChildren=!0,this.specialMenuLayer=new LayerBase,this.specialMenuLayer.touchEnabled=!1,this.specialMenuLayer.touchChildren=!0,this.moduleLayer=new LayerModule,this.moduleLayer.touchEnabled=!1,this.moduleLayer.touchChildren=!0,this.commonLayer=new LayerBase,this.commonLayer.touchEnabled=!1,this.commonLayer.touchChildren=!0,this.videoLayer=new LayerBase,this.videoLayer.touchEnabled=!1,this.videoLayer.touchChildren=!0,this.videoLayer.visible=!1,this.popLayer=new LayerBase,this.popLayer.touchEnabled=!1,this.popLayer.touchChildren=!0,this.tipLayer=new LayerBase,this.tipLayer.touchEnabled=!1,this.tipLayer.touchChildren=!0,this.effectLayer=new LayerBase,this.messageLayer=new LayerBase,this.messageLayer.touchEnabled=!1,this.messageLayer.touchChildren=!1
},t.prototype.createChildren=function(){this.addChild(this.videoLoadingLayer),this.addChild(this.sceneLayer),this.addChild(this.mainLayer),this.addChild(this.specialMenuLayer),this.addChild(this.moduleLayer),this.addChild(this.commonLayer),this.addChild(this.videoLayer),this.addChild(this.popLayer),this.addChild(this.tipLayer),this.addChild(this.effectLayer),this.addChild(this.messageLayer)},t.prototype.showModal=function(e,t,i){null==this._bgModal&&(this._bgModal=new h5_engine.GShape,this._bgModal.touchEnabled=!0,this._bgModalAlpha=0,this._bgModal.graphics.beginFill(0,1),this._bgModal.graphics.drawRect(0,0,100,100),this._bgModal.graphics.endFill(),this._bgModal.alpha=this._bgModalAlpha),this._bgModal.remove(),i?e.addChild(this._bgModal):e.addChildAt(this._bgModal,e.numChildren-1),this.updateModal(t),0==this._bgModal.hasEventListener(egret.TouchEvent.TOUCH_TAP)&&(App.stage.addEventListener(egret.Event.RESIZE,this.onResize,this),this._bgModal.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchModal,this))},t.prototype.updateModal=function(e){void 0===e&&(e=0),this._bgModal&&this._bgModal.parent&&(0==e&&(e=this._bgModalAlpha),this._bgModalAlpha=e,this._bgModal.alpha=this._bgModalAlpha,0!=App.layer.rotation?(this._bgModal.scaleX=.01*Config.SCREEN_HEIGHT,this._bgModal.scaleY=.01*Config.SCREEN_WIDTH):(this._bgModal.scaleX=.01*Config.SCREEN_WIDTH,this._bgModal.scaleY=.01*Config.SCREEN_HEIGHT))},t.prototype.showLockMask=function(){null==this._lockMask&&(this._lockMask=new h5_engine.GShape,this._lockMask.graphics.beginFill(0,0),this._lockMask.graphics.drawRect(0,0,100,100),this._lockMask.graphics.endFill(),this._lockMask.touchEnabled=!0),0==App.layer.rotation?(this._lockMask.scaleX=.01*Config.SCREEN_WIDTH,this._lockMask.scaleY=.01*Config.SCREEN_HEIGHT):(this._lockMask.scaleX=.01*Config.SCREEN_HEIGHT,this._lockMask.scaleY=.01*Config.SCREEN_WIDTH),this.commonLayer.addChild(this._lockMask)},t.prototype.hideLockMask=function(){this._lockMask&&this._lockMask.remove()},t.prototype.hideModal=function(){this._bgModal&&this._bgModal.parent&&(this._bgModal.parent.removeChild(this._bgModal),App.stage.removeEventListener(egret.Event.RESIZE,this.onResize,this),this._bgModal.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchModal,this))},t.prototype.onTouchModal=function(e){PanelManager.removeModalPanel()},t.prototype.showLoading=function(){null==this._httpLoading&&(this._httpLoading=new HttpLoading),this.popLayer.addChild(this._httpLoading),this._httpLoading.show()},t.prototype.hideLoading=function(){this._httpLoading&&this._httpLoading.hide()},t.prototype.onResize=function(e){this.updateModal()},t}(h5_engine.GDisplayObjectContainer);__reflect(MainLayer.prototype,"MainLayer");var GameHallItem=function(e){function t(){var t=e.call(this,"GameHallItemSkin")||this;return t._dispatcher=new DispatcherRegister,t._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onClick,t,t),t}return __extends(t,e),t.prototype.onClick=function(e){App.dispatcher.dispatchEvent(EventType.GAMEHALL_ITEM_CLICK),App.sound.playSoundSwitchClient(EnumSoundId.CLICK),egret.Tween.removeTweens(this);var t=Config.isLandscape?this.itemIndex*(this.width+5):0,i=Config.isLandscape?0:this.itemIndex*(this.height+5);egret.Tween.get(this).set({alpha:.8,scaleX:.8,scaleY:.8,x:t+60,y:i+40}).to({alpha:1,scaleX:1,scaleY:1,x:t,y:i},400,egret.Ease.backOut).call(this.onTweenOver,this)},t.prototype.onTweenOver=function(){egret.Tween.removeTweens(this),PanelOpenManager.removePanel(EnumPanelID.GAME_HALL),this.data.id!=EnumGameID.GAME2?(Config.isLandscape&&App.setOrientation(DeviceUtil.IsWeb&&DeviceUtil.isMobile?egret.OrientationMode.PORTRAIT:egret.OrientationMode.AUTO),PanelOpenManager.openPanel(EnumPanelID.HEROINES_DETAIL,this.data)):(App.sound.closeBgm(!0,!0),ProtocolCommon.sendBack(ProtocolHttpUrl.char_love_one_click,{},new FunctionVO(this.onClickLoveOneBack,this)))},t.prototype.onClickLoveOneBack=function(e){ResponseUtil.checkResponseData(e)&&(e.data&&(this.data.account=e.data),App.data.gameResourceCenter.hasResource()&&(DeviceUtil.isMobile&&DeviceUtil.IsWeb||DeviceUtil.IsNative)&&(PanelManager.disposePanelyByGameId(App.data.gameResourceCenter.gameId),GameManager.disposeGame(App.data.gameResourceCenter.gameId),App.data.gameResourceCenter.dispose()),GameManager.startGame(this.data.id,{id:this.data.id}))},t.prototype.setData=function(e,t,i){void 0===i&&(i=!1),this._isSingle=i,this.data=e,this.itemIndex=t,this.txtDesc.text=this.data.title,this.txtName.text="",this.txtName.x=this.txtDesc.x+this.txtDesc.width+20,this._isSingle&&0==Config.isLandscape?(this.imgBg.source="gamehall_single_"+e.id+"_png",this.groupInfo.bottom=30):(this.imgBg.source="gamehall_"+e.id+"_png",this.groupInfo.bottom=43),this.img_state.source=1==e.type?"gamehall_json.gamehall_relianzhong":"gamehall_json.gamehall_dengdai",this.boxNew.visible=e.is_new;var n=Config.isLandscape?t*(this.width+5):0,o=Config.isLandscape?0:t*(this.height+5);if(this.alpha=0,4>t){var a=500;Config.isLandscape?egret.Tween.get(this).set({alpha:0,x:n+400}).wait(t*a*.5).to({alpha:1,x:n},a,egret.Ease.sineOut):egret.Tween.get(this).set({alpha:0,y:o+400}).wait(t*a*.5).to({alpha:1,y:o},a,egret.Ease.sineOut)}else this.alpha=1,this.x=n,this.y=o},Object.defineProperty(t.prototype,"height",{get:function(){return this._isSingle&&0==Config.isLandscape?1096:551},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return 700},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){e.prototype.dispose.call(this),this._dispatcher.removeAllListeners(),this._dispatcher=void 0},t}(BaseUI);__reflect(GameHallItem.prototype,"GameHallItem");var Notice=function(){function e(){}return e.showNoticeTypeMsg=function(t,i,n,o,a,s){void 0===n&&(n=1),void 0===o&&(o=!0),void 0===a&&(a=null),void 0===s&&(s=0),0!=(t&this.TOP)?this.showTopMessage(i,e.TOP_COLOR,n):0!=(t&this.MIDDLE)?this.showMiddleMessage(i):0!=(t&this.MOUSE)?this.showMousePosMessage(i,e.MOUSE_COLOR,a):0!=(t&this.BOTTOM)?this.showBottomMessage(i,e.BOTTOM_COLOR,0,s):0!=(t&this.RIGHT)&&this.showCornerMessage(i)},e.show=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var n="";(null==n||""==n)&&(n="");null!=t&&t.length>0&&(n=StringUtil.substitute(n,t))},e.showTip=function(t,i,n,o){void 0===o&&(o=0);var a=e.getContentColor(n);switch(i){case e.TOP:e.showTopMessage(t,a);break;case e.MIDDLE:e.showMiddleMessage(t,a);break;case e.BOTTOM:e.showBottomMessage(t,a,0,o);break;case e.MOUSE:e.showMousePosMessage(t,a)}},e.getContentColor=function(t){if(void 0===t&&(t=0),null==e.ColorJsonAry){var i="";e.ColorJsonAry=JSON.parse(i)}if(e.ColorHash.has(t))return e.ColorHash.get(t);for(var n=0;n<e.ColorJsonAry.length;n++)if(t==e.ColorJsonAry[n].type){var o=e.ColorJsonAry[n].color;e.ColorHash.put(t,parseInt("0x"+o.substr(1)));break}return e.ColorHash.get(t)},e.showTopMessage=function(t,i,n){if(void 0===i&&(i=e.TOP_COLOR),void 0===n&&(n=1),null==this._topMessage&&(this._topMessage=new TopMessageView),1==n)this._topMessage.showTopMessage(t,i);else{var o=egret.getTimer(),a=App.timer.doTimeLoop(this,6e3,this.showTop,[o,t,i],!1);this._topCountHash.put(o,n),this._clearIdHash.put(o,a),this.showTop(o,t,i)}},e.showTop=function(e,t,i){var n=this._topCountHash.get(e);0==n?(App.timer.clearTimer(this,this._clearIdHash.get(e)),this._clearIdHash.del(e)):(this._topMessage.showTopMessage(t,i),this._topCountHash.put(e,n-1),n=this._topCountHash.get(e))},e.showMiddleMessage=function(t,i){void 0===i&&(i=e.MIDDLE_COLOR),null==this._middleMessage&&(this._middleMessage=new MiddleMessageView),this._middleMessage.showMiddleMessage(t,i)},e.showBottomCenterMessage=function(t,i,n,o){if(void 0===i&&(i=e.BOTTOM_COLOR),void 0===n&&(n=0),void 0===o&&(o=!0),n>0){var a=Number(this._tempHash.get(t)),s=egret.getTimer();if(a>0){var r=s-a;if(n>r)return}this._tempHash.put(t,s)}null==this._bottomMessage&&(this._bottomMessage=new BottomMessageView,App.layer.messageLayer.addChild(this._bottomMessage)),this._bottomMessage.show(t,i,o)},e.showBottomMessage=function(t,i,n,o){void 0===i&&(i=e.BOTTOM_COLOR),void 0===n&&(n=0),void 0===o&&(o=0),this.showCornerMessage(t,i)},e.showCornerMessage=function(t,i){void 0===i&&(i=e.CORNER_COLOR),this._cornerAry.push(t),e.cornerTimeId||(e.cornerTimeId=App.timer.doTimeOnce(this,100,this.showCornerMsg))},e.showCornerMsg=function(){e.cornerTimeId=null;this._cornerAry.length;null==this._cornerMessage&&(this._cornerMessage=new CornerMessageView(new FunctionVO(this.removeCornerView,this)),App.layer.messageLayer.addChildAt(this._cornerMessage,0)),this._cornerMessage.showCornerMessage()},Object.defineProperty(e,"cornerAry",{get:function(){return this._cornerAry},enumerable:!0,configurable:!0}),e.removeCornerView=function(){App.log.echo("cornerMessage已回收"+this._cornerMessage),this._cornerMessage&&(this._cornerMessage.dispose(),this._cornerMessage=null)},e.showMousePosMessage=function(t,i,n,o){void 0===i&&(i=e.MOUSE_COLOR),void 0===n&&(n=null),void 0===o&&(o=!0),o?(this._mouseMsgAry.push([t,i]),null==this._loopId&&(this.loopShowMouseMsg(n),this._loopId=App.timer.doTimeLoop(this,500,this.loopShowMouseMsg,[n]))):(null==this._mousePosMessage&&(this._mousePosMessage=new MousePosMessageView),this._mousePosMessage.showMousePosMessage(t,i))},e.showMouseMessage=function(t,i,n){void 0===n&&(n=e.MOUSE_COLOR);var o=this.getMousePosMessage();o.showMousePosMessage(t,n,i.stageX,i.stageY)},e.loopShowMouseMsg=function(e,t){if(0==this._mouseMsgAry.length)this._loopId&&(App.timer.clearTimer(this,this._loopId),this._loopId=null);else{var i=this._mouseMsgAry.shift(),n=i[0],o=i[1],a=this.getMousePosMessage();t?a.showMousePosMessage(n,o,t.stageX,t.stageY):a.showMousePosMessage(n,o)}},e.showLog=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];null==this._logView&&(this._logView=new LogView,App.layer.tipLayer.addChild(this._logView)),this._logView.addLog(e.join(","))},e.getMousePosMessage=function(){return this._mousePosMessagePool.length>0?this._mousePosMessagePool.pop():new MousePosMessageView},e.setMousePosMessagePool=function(e){this._mousePosMessagePool.push(e)},e.GUIDE=0,e.LEFT=1,e.RIGHT=2,e.TOP=4,e.MIDDLE=8,e.MOUSE=16,e.BOTTOM=32,e.BUFF=64,e.GMCMD=128,e.GUILD=256,e.TEAM=512,e.ALERT=1024,e.TOP_COLOR=16107597,e.MIDDLE_COLOR=15844864,e.BOTTOM_COLOR=16777215,e.MOUSE_COLOR=16724736,e.CORNER_COLOR=14602420,e.BUFF_COLOR=65280,e.MONEY_COLORS=["#009400"],e.LOSE_MONEY_IDS=[86,93,158,162,259],e.ColorHash=new HashMap,e._mousePosMessagePool=[],e._mouseMsgAry=[],e._clearIdHash=new HashMap,e._topCountHash=new HashMap,e._tempHash=new HashMap,e._cornerAry=[],e._attributeAry=[],e}();__reflect(Notice.prototype,"Notice");var LayerModule=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.showModal=function(){null==this._bgModal&&(this._bgModal=new h5_engine.GShape,this._bgModal.touchEnabled=!0),null==this._bgModal.parent&&(this.addChild(this._bgModal),this.updateModal(),App.stage.addEventListener(egret.Event.RESIZE,this.onResize,this),this._bgModal.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchModal,this))},t.prototype.updateModal=function(){this._bgModal&&this._bgModal.parent&&(this._bgModal.graphics.clear(),this._bgModal.graphics.beginFill(0,.5),this._bgModal.graphics.drawRect(0,0,Config.SCREEN_WIDTH,Config.SCREEN_HEIGHT),this._bgModal.graphics.endFill())},t.prototype.hideModal=function(){this._bgModal&&this._bgModal.parent&&(this._bgModal.parent.removeChild(this._bgModal),App.stage.removeEventListener(egret.Event.RESIZE,this.onResize,this),this._bgModal.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchModal,this))},t.prototype.onTouchModal=function(e){PanelManager.removeModalPanel()},t.prototype.onResize=function(e){this.updateModal()},t}(LayerBase);__reflect(LayerModule.prototype,"LayerModule");var GameHallCenter=function(){function e(){this.heroinesDataList=new HashMap}return e.prototype.updateHeroniesProps=function(e,t){var i=this.getHeroniesData(e);for(var n in t)i[n]=t[n];this.setHeroniesData(i)},e.prototype.setHeroniesData=function(e){this.heroinesDataList.put(e.id,e)},e.prototype.getHeroniesData=function(e){return this.heroinesDataList.get(e)},e}();__reflect(GameHallCenter.prototype,"GameHallCenter");var HeroinesData=function(){function e(){}return e.prototype.setPlayerNotBind=function(e){App.global.storage.setItem(EnumStorageType.PLAYER_NOT_BIND+this.id,e),e&&App.dispatcher.dispatchEvent(GameEvent.GAME_UNLOCK_SUCCESS,this.id)},e.prototype.forceToPhoneBind=function(){var e=App.global.storage.getItem(EnumStorageType.PHONE),t=App.global.storage.getItem(EnumStorageType.PLAYER_NOT_BIND+this.id);return t||!this.is_shop||e||Config.U8Login||Config.soEasy?!1:(PanelOpenManager.openPanel(EnumPanelID.TOURISTLOGIN,this.id,!1),!0)},e}();__reflect(HeroinesData.prototype,"HeroinesData");var GmAvgAttriView=function(e){function t(){return e.call(this,"GmAvgAttriSkin")||this}return __extends(t,e),t.prototype.setData=function(e,t){this.txtKey.text=e.split(".")[1],this.inputValue.text=t},t.prototype.getKey=function(){return"f."+this.txtKey.text},t.prototype.getValue=function(){return{value:this.inputValue.text}},t.prototype.getCondition=function(){return this.txtKey.text+":"+this.inputValue.text},t.prototype.remove=function(){this.txtKey.text="",this.inputValue.text="",e.prototype.remove.call(this)},Object.defineProperty(t.prototype,"width",{get:function(){return 645},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return 40},enumerable:!0,configurable:!0}),t}(BaseUI);__reflect(GmAvgAttriView.prototype,"GmAvgAttriView");var GmCenter=function(){function e(){}return e.instance=function(){return null==this._instance&&(this._instance=new e),this._instance},e.prototype.getChatIdByCS=function(e){return Number(this.chatIdHashMap.get(e))},e.prototype.getSectionByChapter=function(e){return this.csHashMap.get(e)},e.prototype.goToChar=function(e,t,i){var n=App.data.gameHallCenter.getHeroniesData(e);n.record_type=1,ProtocolCommon.sendBack("/Avg/DeBug/GoToChar",{heroine_id:e,chat_id:t,condition:i},new FunctionVO(this.onSettingBack,this))},e.prototype.onSettingBack=function(e){200==e.code&&GameManager.startGame(App.data.gameFangDongCenter.gameId,{id:App.data.gameFangDongCenter.gameId,saveId:0,isInGame:!0})},e.prototype.getVariable=function(e){ProtocolCommon.sendBack("/Avg/DeBug/GetVariable",{heroine_id:e},new FunctionVO(this.getChapterList,this))},e.prototype.getChapterList=function(t){200==t.code&&(this.dataList=t.data,this.parseChapterList(),App.dispatcher.dispatchEvent(e.INIT_GM_DATA))},e.prototype.parseChapterList=function(){this.csHashMap=new HashMap,this.chatIdHashMap=new HashMap,this.chapterList=[],this.chatidList=[],this.conditionNameList=[],this.conditionValueList=[];for(var e=this.dataList.chapter_list,t=0;t<e.length;t++){this.chatidList.push(e[t].id);var i=e[t].name;this.chatIdHashMap.put(i,e[t].id);var n=Number(i.split("-")[0]),o=Number(i.split("-")[1]),a=this.csHashMap.get(n);a||(a=[]),a.push(o),this.csHashMap.put(n,a)}this.chapterList=this.csHashMap.keys,this.chapterList.sort(function(e,t){return e-t}),this.startId=this.dataList.start_id;var s=this.dataList.condition;for(var r in s)this.conditionNameList.push(r),this.conditionValueList.push(s[r])},e.prototype.collectPlayerInfo=function(){GameLog.log("当前的浏览器信息navigator.userAgent.toLowerCase()：",navigator.userAgent.toLowerCase()),GameLog.log("指示当前的操作系统egret.Capabilities.os：",egret.Capabilities.os),GameLog.log("指示当前的运行类型egret.Capabilities.runtimeType：",egret.Capabilities.runtimeType),GameLog.log("视频是否正在播放Video.instance().paused：",Video.instance().paused+" ，播放路径Video.instance().src："+Video.instance().src),GameLog.log("赵小野数据App.data.game2Center.DataCenter：",App.data.game2Center.DataCenter),GameLog.log("房东数据App.data.gameFangDongCenter：",App.data.gameFangDongCenter),GameLog.log("用户数据App.global.userInfo：",App.global.userInfo)},e.INIT_GM_DATA="GmCenter.INIT_GM_DATA",e.SELECT_CHAPTER="GmCenter.SELECT_CHAPTER",e}();__reflect(GmCenter.prototype,"GmCenter");var LogicInterface=function(e){function t(){var t=e.call(this)||this;return t._errorHash=new Object,t._isCloseLog=!1,h5_engine.LogicInterface.instance=t,t.init(),t}return __extends(t,e),t.prototype.init=function(){this._isCloseLog=WebParams.closeLog},t.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this._isCloseLog){var i=this.getFormatLog(e);App.log.echo(i)}},t.prototype.logError=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0==this._isCloseLog){var i=e[0]+">>: "+e[1],n=this.getFormatLog(e);this._errorHash[i]||(this._errorHash[i]=i,App.log.error(n))}},t.prototype.logInfo=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.logDebug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.logWarn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.logStack=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.logXingneng=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.getFormatLog=function(e){var t=e.join(" "),i=new Date;i.setTime(ServerTime.serverTime);var n=DateUtil.format(i);return"["+n+"]>>: \r	"+t},t.getLogStr=function(e){var t="",i=new Date;return i.setTime(ServerTime.serverTime),"["+ServerTime.serverTime+","+DateUtil.format(i)+"]"+t+": "+e},t}(h5_engine.LogicInterface);__reflect(LogicInterface.prototype,"LogicInterface");var LogType=function(){function e(){}return e.TYPE_NET_RESLOVE_MAX=7,e.TYPE_NET_SEND_MAX=15,e.TYPE_NET_ERROR=16,e.TYPE_XING_NENG=13,e.TYPE_STACK=14,e.TYPE_GAME_ERROR=3,e.TYPE_GAME_LOGIN_ERROR=4,e.TYPE_UI_LOAD_ERROR=5,e.TYPE_UNKNOW_ERROR=3,e.TYPE_LOGIN_STEP=50,e.TYPE_LOGIN_CREATE_SHOW=51,e.TYPE_LOGIN_CREATE_START=52,e.CHANGE_MAP_LOAD_USE_TIME=6,e.TYPE_LOAD_=8,e.TYPE_USE_SKILL=9,e}();__reflect(LogType.prototype,"LogType");var MainPanel=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.resize=function(){},t}(h5_engine.GDisplayObjectContainer);__reflect(MainPanel.prototype,"MainPanel");var ListenEffect=function(e){function t(t,i,n){var o=e.call(this)||this;return o._diameter=t?t:386,o._alpha=i?i:.1,o._loopTime=n?n:950,o.touchEnabled=!1,o.touchChildren=!1,o}return __extends(t,e),t.prototype.createShape=function(){var e=new egret.Shape;return e.graphics.clear(),e.graphics.beginFill(16777215,this._alpha),e.graphics.drawCircle(0,0,.5*this._diameter),e.graphics.endFill(),e},t.prototype.play=function(){for(var e,t=0,i=4,n=this.numChildren;i>t;t++)n>t?e=this.getChildAt(t):(e=this.createShape(),this.addChild(e)),egret.Tween.removeTweens(e),e.alpha=0,e.scaleX=e.scaleY=.5,egret.Tween.get(e).wait(t*this._loopTime).set({alpha:0,scaleX:.5,scaleY:.5},e).to({alpha:1,scaleX:1.25,scaleY:1.25},this._loopTime).to({alpha:0,scaleX:2,scaleY:2},this._loopTime).wait(2*this._loopTime).call(this.onNext,this,[e])},t.prototype.onNext=function(e){egret.Tween.removeTweens(e),egret.Tween.get(e,{loop:!0}).set({alpha:0,scaleX:.5,scaleY:.5},e).to({alpha:1,scaleX:1.25,scaleY:1.25},this._loopTime).to({alpha:0,scaleX:2,scaleY:2},this._loopTime).wait(2*this._loopTime)},t.prototype.stop=function(){for(var e=0,t=this.numChildren;t>e;e++)egret.Tween.removeTweens(this.getChildAt(e))},t.prototype.dispose=function(){e.prototype.dispose.call(this);for(var t,i=0,n=this.numChildren;n>i;i++)t=this.removeChildAt(0),egret.Tween.removeTweens(t),t=null;this.remove()},t}(h5_engine.GSprite);__reflect(ListenEffect.prototype,"ListenEffect");var TouchEffect=function(e){function t(){var t=e.call(this)||this;return t.init("dianji_mc_json","dianji_tex_png","dianjiAnim"),t}return __extends(t,e),t.prototype.playOnce=function(){this.gotoAndPlay(1),this.once(egret.Event.COMPLETE,this.onPlayComplete,this)},t.prototype.onPlayComplete=function(e){this.remove(),this.stop(),this.dispose()},t.prototype.dispose=function(){ObjectPool.getPool(EnumEffectName.TouchEffect).push(this)},t}(GMovieClip);__reflect(TouchEffect.prototype,"TouchEffect");var VideoLoadingEffect=function(e){function t(){var t=e.call(this)||this;return t.init("VideoLoading_json","VideoLoading_png","VideoLoading"),t}return __extends(t,e),t}(GMovieClip);__reflect(VideoLoadingEffect.prototype,"VideoLoadingEffect");var ParticleEffect=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._isPlaying=!1,t}return __extends(t,e),t.prototype.initTexture=function(e,t){null==this._particle&&(this._particle=new particle.GravityParticleSystem(e,t)),this.addChild(this._particle),this._isPlaying&&this._particle.start()},t.prototype.init=function(e){this._name=e,App.res.createGroup(e,[e+"_json",e+"_png"]),App.res.loadGroup([e],new FunctionVO(this.onLoadComplete,this))},t.prototype.onLoadComplete=function(e){e==this._name&&this.initTexture(RES.getRes(this._name+"_png"),RES.getRes(this._name+"_json"))},t.prototype.play=function(){this._particle&&this._particle.start(),this._isPlaying=!0},t.prototype.stop=function(){this._particle&&this._particle.stop(),this._isPlaying=!1},t.prototype.dispose=function(){this.stop(),this._particle&&(this._particle=null),this.parent&&this.parent.removeChild(this)},t}(eui.Group);__reflect(ParticleEffect.prototype,"ParticleEffect");var MemoryItem=function(e){function t(){return e.call(this,"MemoryVideoSkin")||this}return __extends(t,e),t.prototype.showNetImg=function(e){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),App.dispatcher.addEventListener(MemoryEvent.CHANGE_BIZHI,this.onChangeBizhi,this),this.collectType==EnumVideoType.DONGTAI_BIZHI?this.imgPlay.visible=!1:this.collectType==EnumVideoType.XINTIAO_JIEJU&&1==e.type?this.imgPlay.visible=!1:this.imgPlay.visible=!0,this._collectId=e.id;var t=e.collect_image,i=e.title;this._isWallPaper=e.is_wallpaper,this.groupUse.visible=this._isWallPaper||1==Number(e.is_new),this.groupUse.visible&&(this.imgSign.source=this._isWallPaper?"memory_json.memory_using_png":"memory_json.memory_new_png"),this.groupBg.visible=!0,this.imgText.visible=!0,this.txtTitle.visible=!0,this.txtTitle.text=i,this.imgMask.graphics.clear(),this.imgMask.graphics.beginFill(0),this.imgMask.graphics.drawRoundRect(0,0,this.imgMask.width,this.imgMask.height,20,20),this.imgMask.graphics.endFill(),this.imgShow.mask=this.imgMask,this.imgShow.source=-1!=t.indexOf("/.")?"":t},t.prototype.onChangeBizhi=function(e){this.groupUse.visible=this._collectId==e,this._isWallPaper=this.groupUse.visible,this._isWallPaper&&(this.imgSign.source="memory_json.memory_using_png")},t.prototype.onClick=function(e){this.collectType!=EnumVideoType.HUIYI_SHIPIN&&App.sound.playSoundSwitchClient(EnumSoundId.CLICK),this.groupUse.visible&&(this.imgSign.source=this._isWallPaper?"memory_json.memory_using_png":"",this.groupUse.visible=this._isWallPaper),ProtocolCommon.instance().send_user_collect_info(this.collectType,this.uid,this._collectId,new FunctionVO(this.onVideoPlay,this))},t.prototype.onVideoPlay=function(e){var t=e.data.url;if(GameLog.log("data.data.url :: == "+t),4==e.data.type||this.collectType!=EnumVideoType.XINTIAO_JIEJU){var i=null,n=this.collectType==EnumVideoType.DONGTAI_BIZHI?!0:!1,o=this.collectType==EnumVideoType.DONGTAI_BIZHI?!0:!1;this.collectType==EnumVideoType.HUIYI_SHIPIN&&(i=new FunctionVO(this.onPlayEnd,this)),Video.instance().init(t,n,o,i,Video.TOP,null,Config.isLandscape),PanelOpenManager.openPanel(EnumPanelID.VIDEO_BUTTON,{type:this.collectType,uid:this.uid,collectId:this._collectId,using:this._isWallPaper})}else this.collectType==EnumVideoType.XINTIAO_JIEJU&&1==e.data.type&&PanelOpenManager.openPanel(EnumPanelID.FULL_SCREEN_IMAGE,{url:t})},t.prototype.onPlayEnd=function(){Video.instance().dispose()},t.prototype.remove=function(){e.prototype.remove.call(this),this.imgShow.source&&(RES.destroyRes(this.imgShow.source.toString()),this.imgShow.source=void 0),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),App.dispatcher.removeEventListener(MemoryEvent.CHANGE_BIZHI,this.onChangeBizhi,this)},t}(BaseUI);__reflect(MemoryItem.prototype,"MemoryItem");var ServerTime=function(){function e(){}return e.setServerTime=function(e){this._serverStartTime=e-egret.getTimer()},e.getServerTime=function(){return this._serverStartTime+egret.getTimer()},Object.defineProperty(e,"serverTime",{get:function(){return Math.floor(.001*this.getServerTime())},enumerable:!0,configurable:!0}),e._serverStartTime=0,e}();__reflect(ServerTime.prototype,"ServerTime");var BottomMessageView=function(e){function t(){var t=e.call(this)||this;return t._msgArr=[],t._colorArr=[],t._soundArr=[],t._showIndex=0,t._count=0,t._msgContainerArr=[],t._msgContainerPool=[],App.stage.addEventListener(egret.Event.RESIZE,t.setPos,t),t.setPos(),t.touchEnabled=t.touchChildren=!1,t}return __extends(t,e),t.prototype.setPos=function(){0==App.layer.rotation?(this.x=Config.SCREEN_WIDTH>>1,this.y=(Config.SCREEN_HEIGHT>>1)+(Config.isLandscape?0:30)):(this.x=Config.SCREEN_HEIGHT>>1,this.y=Config.SCREEN_WIDTH>>1+(Config.isLandscape?30:0))},t.prototype.show=function(e,i,n){void 0===i&&(i=Notice.BOTTOM_COLOR),void 0===n&&(n=!0),void 0!=e&&"undefined"!=e&&(this._msgArr.push(e),this._colorArr.push(i),this._soundArr.push(n),App.timer.doTimeOnce(this,t.DELAYTIME,this.addItem),this.addItem())},t.prototype.addItem=function(){var e=this._msgArr[this._showIndex];if(e){var i=this._colorArr[this._showIndex];this._count>=t.TOTALNUM&&this.removeItem(this._msgContainerArr[0]);var n=this.getMsgContainer(),o=n.getChildByName("textField");o.htmlText=e,o.textColor=i;var a=n.getChildByName("bgShape");a.graphics.clear(),a.graphics.beginFill(2302755,.9),a.graphics.drawRoundRect(0,0,o.textWidth+20,o.textHeight+10,40),a.graphics.endFill(),o.x=a.width-o.textWidth>>1,o.y=a.height-o.textHeight>>1,n.alpha=1,n.x=-a.width>>1,n.y=this._count*t.MSG_H,n.addChild(a),n.addChild(o),this.addChild(n),this._msgContainerArr.push(n),this._showIndex++,this._count++,this.refreshPos(),this._soundArr[this._showIndex]&&App.sound.playSoundSwitchClient(EnumSoundId.NOTICE),egret.Tween.get(n).wait(4e3).to({alpha:.01},1e3).call(this.removeItem,this,[n])}},t.prototype.removeItem=function(e){e&&e.parent?(this.removeChild(e),-1==this._msgContainerPool.indexOf(e)&&this._msgContainerPool.push(e),this._msgContainerArr.shift(),this._count--,this.refreshPos(),egret.Tween.removeTweens(e)):this.clearData(),this._count<=0&&this.clearData()},t.prototype.clearData=function(){this._msgArr=[],this._colorArr=[],this._soundArr=[],this._msgContainerArr=[],this._showIndex=0},t.prototype.refreshPos=function(){for(var e=0;e<this._msgContainerArr.length;e++){var i=this._msgContainerArr[e];i&&egret.Tween.get(i).to({y:e*t.MSG_H},100).wait(.05*e)}},t.prototype.getMsgContainer=function(){if(this._msgContainerPool.length>0)return this._msgContainerPool.pop();var e=new h5_engine.GDisplayObjectContainer,t=new h5_engine.GShape;t.name="bgShape",e.addChild(t);var i=new h5_engine.GTextField;return i.size=28,i.textAlign=egret.HorizontalAlign.CENTER,i.verticalAlign=egret.VerticalAlign.MIDDLE,i.name="textField",i.fontFamily="fzyc",e.addChild(i),e},t.TOTALNUM=1,t.DELAYTIME=300,t.MSG_H=50,t.MSG_W=50,t}(h5_engine.GSprite);__reflect(BottomMessageView.prototype,"BottomMessageView");var CornerMessageView=function(e){function t(t){var i=e.call(this)||this;return i._begin=!0,i._count=0,i._msgAry=[],i._textFieldAry=[],i._labelHeightAry=[],i._removeFun=t,App.dispatcher.addEventListener(EventType.STGAE_RESIZE,i.setPos,i),i.setPos(),i.touchEnabled=i.touchChildren=!1,i}return __extends(t,e),t.prototype.dispose=function(){if(this.removeAll(),this._labelPool){for(var e=0;e<this._labelPool.length;e++)this._labelPool[e]&&(this._labelPool[e].parent&&this._labelPool[e].parent.removeChild(this._labelPool[e]),this._labelPool[e]=null);this._labelPool=null}App.dispatcher.removeEventListener(EventType.STGAE_RESIZE,this.setPos,this)},t.prototype.showCornerMessage=function(){for(;Notice.cornerAry.length>0;){var e=Notice.cornerAry.shift();this.addLabelItem(e)}},t.prototype.addLabelItem=function(e){if(e){var t=this.getBaseTextField();t.alpha=1,t.textColor=Notice.CORNER_COLOR,t.size=19,t.htmlText=e,t.stroke=1,t.strokeColor=2171169,t.multiline=!0,t.wordWrap=!0,t.y=this.height-t.textHeight,t.height=28*t.numLines,this.addChild(t),++this._count,this._textFieldAry.push(t),this._labelHeightAry.push(t.height),this.refreshPos(),egret.Tween.get(t).wait(2e3).to({x:-t.textWidth},500,egret.Ease.cubicOut).call(this.removeLabelChild,this,[t])}},t.prototype.removeLabelChild=function(e){null==this._labelPool&&(this._labelPool=new Array),e&&e.parent?(this._labelPool.push(e),e.parent?e.parent.removeChild(e):(e.text="",e.dispose()),this._textFieldAry&&this._textFieldAry.shift(),this._labelHeightAry&&this._labelHeightAry.shift(),--this._count):(null!=this._removeFun&&(this._removeFun.exec(),this._removeFun=null),this._count=0),0==this._count&&null!=this._removeFun&&(this._removeFun.exec(),this._removeFun=null)},t.prototype.removeAll=function(){for(var e=0;e<this._textFieldAry.length;e++){var t=this._textFieldAry[e];t&&(t.parent&&t.parent.removeChild(t),t.text="",t.dispose(),t=null)}this._count=0,this._textFieldAry=[],this._labelHeightAry=[],this._msgAry=[]},t.prototype.setPos=function(){},t.prototype.refreshPos=function(){for(var e=0;e<this._textFieldAry.length;e++){for(var t=this._textFieldAry[e],i=0,n=e;n<this._labelHeightAry.length;n++)i+=this._labelHeightAry[n];t&&egret.Tween.get(t).to({y:this.height-i},100,egret.Ease.cubicOut)}},Object.defineProperty(t.prototype,"height",{get:function(){return 820},enumerable:!0,configurable:!0}),t.prototype.getBaseTextField=function(){return null==this._labelPool&&(this._labelPool=new Array),this._labelPool.length>0?this._labelPool.pop():new h5_engine.GTextField},t.TOTALNUM=7,t}(egret.DisplayObjectContainer);__reflect(CornerMessageView.prototype,"CornerMessageView");var LogView=function(e){function t(){var t=e.call(this)||this;return t.WIDTH=300,t.HEIGHT=300,t.init(),t}return __extends(t,e),t.prototype.init=function(){this.graphics.beginFill(0,.5),this.graphics.drawRect(0,0,this.WIDTH,this.HEIGHT),this.graphics.endFill(),this._txt=new egret.TextField,this.addChild(this._txt),this._txt.width=this.WIDTH,this._txt.height=this.HEIGHT,this._txt.size=20,this._isShow=!1,this._btn=new h5_engine.GSprite,this.addChild(this._btn),this._btn.graphics.beginFill(255,.7),this._btn.graphics.drawRect(0,0,30,80),this._btn.graphics.endFill(),this._btn.x=this.WIDTH,this._btn.y=this.HEIGHT-this._btn.height>>1,this._btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHideOrShow,this),this._btn.touchEnabled=!0,this.y=Config.SCREEN_HEIGHT-this.HEIGHT>>1,this.onHideOrShow()},t.prototype.onHideOrShow=function(){this.parent&&(this._isShow?this.x=-this.WIDTH:this.x=0,this._isShow=!this._isShow)},t.prototype.addLog=function(e){this._txt.appendText(e+"\n")},t}(h5_engine.GSprite);__reflect(LogView.prototype,"LogView");var MiddleMessageView=function(e){function t(){var t=e.call(this)||this;return t._msgAry=[],t._colorAry=[],t._count=0,t._showIndex=0,t._textFieldAry=[],t._imageAry=[],t._labelPool=[],t._imagePool=[],t._msgContainerPool=[],t._msgContainerAry=[],t._clearIdAry=[],t}return __extends(t,e),t.prototype.showMiddleMessage=function(e,i){App.layer.messageLayer.contains(this)||(App.layer.messageLayer.addChild(this),App.dispatcher.addEventListener(EventType.STGAE_RESIZE,this.setPos,this)),this._msgAry.push(e),this._colorAry.push(i),App.timer.doTimeOnce(this,t.DELAYTIME,this.addLabelItem)},t.prototype.addLabelItem=function(){if(this._count<t.TOTALNUM){var e=this._msgAry[this._showIndex];if(e){var i=this.getGDisplayObjectContainer();i.alpha=1;var n=this.getImage();n.name="image",n.alpha=1,n.source="notice_json.notice_bg2_png",n.height=22;var o=this.getBaseTextField();o.name="label",o.htmlText=e,o.size=16,o.textColor=this._colorAry[this._showIndex],o.textAlign=egret.HorizontalAlign.CENTER,o.verticalAlign=egret.VerticalAlign.MIDDLE,n.width=o.textWidth+80,o.x=n.width-o.textWidth>>1,o.y=n.height-16>>1,i.addChild(n),i.addChild(o),this.addChild(i),i.anchorOffsetX=n.width/2,i.anchorOffsetY=n.height/2,i.x=n.width/2,i.y=n.height/2,this._imageAry.push(n),this._textFieldAry.push(o),this._msgContainerAry.push(i),this.x=(Config.SCREEN_WIDTH-n.width)/2,this.y=.4*Config.SCREEN_HEIGHT,++this._showIndex,++this._count,this.refreshPos(),egret.Tween.get(i).to({scaleX:2,scaleY:2},100).call(this.scale2Time,this,[i])
}}},t.prototype.scale2Time=function(e){egret.Tween.get(e).wait(500).to({x:(this.width-e.width)/2,y:this._count*t.H,scaleX:1,scaleY:1},100).call(this.showTime,this,[e])},t.prototype.showTime=function(e){this.refreshPos(),App.timer.doTimeOnce(this,t.DELAYTIME,this.addLabelItem);var i=App.timer.doTimeOnce(this,4e3,this.scale1Time,[e],!1);this._clearIdAry.push(i)},t.prototype.scale1Time=function(e){App.timer.clearTimer(this,this._clearIdAry.shift()),egret.Tween.get(e).to({alpha:.01},1e3).call(this.removeImage,this,[e])},t.prototype.removeImage=function(e){var i=e.getChildByName("image");i&&i.parent&&i.parent.removeChild(i),i=null;var n=e.getChildByName("label");n&&n.parent&&n.parent.removeChild(n),n=null,this.removeLabelChild(e),this.refreshPos(),this._count<t.TOTALNUM&&this._count>0&&App.timer.doTimeOnce(this,t.DELAYTIME,this.addLabelItem),0==this._count&&(this._imageAry=[],this._textFieldAry=[],this._msgAry=[],this._colorAry=[],this._showIndex=0,App.layer.messageLayer.contains(this)&&(App.layer.messageLayer.removeChild(this),App.dispatcher.removeEventListener(EventType.STGAE_RESIZE,this.setPos,this)))},t.prototype.removeLabelChild=function(e){e&&e.parent?(e.parent.removeChild(e),this._msgContainerPool.push(e),e=null,this._msgContainerAry.shift(),--this._count):(this._textFieldAry=[],this._msgContainerAry=this._imageAry=this._msgAry=this._colorAry=[],this._count=this._showIndex=0,App.layer.messageLayer.contains(this)&&(App.dispatcher.removeEventListener(EventType.STGAE_RESIZE,this.setPos,this),App.layer.messageLayer.removeChild(this)))},t.prototype.getGDisplayObjectContainer=function(){return this._msgContainerPool.length>0?this._msgContainerPool.pop():new h5_engine.GDisplayObjectContainer},t.prototype.refreshPos=function(){for(var e=0;e<this._msgContainerAry.length;e++){var i=this._msgContainerAry[e];egret.Tween.get(i).to({y:e*t.H},300)}},t.prototype.getBaseTextField=function(){return this._labelPool.length>0?this._labelPool.pop():new h5_engine.GTextField},t.prototype.getImage=function(){return this._imagePool.length>0?this._imagePool.pop():new eui.Image},t.prototype.setPos=function(e){void 0===e&&(e=null),this.x=(Config.SCREEN_WIDTH-this.width)/2,this.y=.18*Config.SCREEN_HEIGHT},t.DELAYTIME=100,t.TOTALNUM=4,t.H=20,t}(h5_engine.GSprite);__reflect(MiddleMessageView.prototype,"MiddleMessageView");var MousePosMessageView=function(e){function t(){var t=e.call(this)||this;return App.dispatcher.addEventListener(EventType.STGAE_RESIZE,t.setPos,t),t}return __extends(t,e),t.prototype.setPos=function(e){void 0===e&&(e=null),this.x=Config.SCREEN_WIDTH-this.width>>1,this.y=Config.SCREEN_HEIGHT-this.height>>1},t.prototype.showMousePosMessage=function(e,i,n,o){if(void 0===n&&(n=0),void 0===o&&(o=0),!this._isLoading){this._isLoading=!0;var a=new h5_engine.GTextField;a.htmlText=e,a.textColor=i,a.size=20,a.textAlign=egret.HorizontalAlign.CENTER,a.verticalAlign=egret.VerticalAlign.MIDDLE,a.x=(this.width-a.textWidth)/2,this.addChild(a),App.layer.messageLayer.contains(this)||App.layer.messageLayer.addChild(this);var s;n?(this.x=n,this.y=o-20):this.setPos(),s=this.y-t.UPHEIGHT,egret.Tween.get(this).to({y:s},t.TIME).call(this.moveOver,this,[a])}},t.prototype.moveOver=function(e){e&&e.parent&&e.parent.removeChild(e),this&&this.parent&&(this._isLoading=!1,this._parent.contains(this)&&this._parent.removeChild(this),Notice.setMousePosMessagePool(this),this.setPos())},t.TIME=2500,t.UPHEIGHT=150,t}(h5_engine.GSprite);__reflect(MousePosMessageView.prototype,"MousePosMessageView");var TopMessageView=function(e){function t(){var t=e.call(this)||this;return t._msgAry=[],t._colorAry=[],t._showIndex=0,t._count=0,t._textFieldAry=[],t._clearIdAry=[],t._textFieldPool=[],null==t._bg&&(t._bg=new eui.Image("notice_json.notice_bg1_png"),t._bg.height=t.height,t.addChild(t._bg)),null==t._sh&&(t._sh=t.createShap(),t.addChild(t._sh)),t.mask=t._sh,App.dispatcher.addEventListener(EventType.STGAE_RESIZE,t.setPos,t),App.layer.messageLayer.contains(t)||App.layer.messageLayer.addChild(t),t}return __extends(t,e),t.prototype.showTopMessage=function(e,i){this._bg&&(this._bg.visible=!0),this.setPos(),this._msgAry.push(e),this._colorAry.push(i),App.timer.doTimeOnce(this,t.DELAYTIME,this.addLabelItem)},t.prototype.addLabelItem=function(){var e=this._msgAry[this._showIndex];if(null!=e){var t=this.getGTextField();t.alpha=1,t.textFlow=HtmlUtil.getHtmlStr(e),t.textColor=Notice.TOP_COLOR,t.size=16,t.textAlign=egret.HorizontalAlign.CENTER,t.verticalAlign=egret.VerticalAlign.MIDDLE,t.y=this.height-t.height>>1,null==this._preLabel?t.x=this.width:t.x=this._preLabel.x+this._preLabel.width<this.width?this.width:this._preLabel.x+this._preLabel.width+20,this._preLabel=t,this.addChild(t),++this._count,++this._showIndex,this._textFieldAry.push(t),this.showTime(t)}},t.prototype.getGTextField=function(){return this._textFieldPool.length>0?this._textFieldPool.pop():new h5_engine.GTextField},t.prototype.showTime=function(e){App.timer.doTimeOnce(this,t.DELAYTIME,this.addLabelItem);var i=App.timer.doTimeLoop(this,t.FRAME,this.moveTo,[e],!1);this._clearIdAry.push(i)},t.prototype.moveTo=function(e){e.x-=this.width/Math.floor(1e3/t.FRAME*t.TIME),e.x<=-e.width?(App.timer.clearTimer(this,this._clearIdAry.shift()),egret.Tween.get(e).to({alpha:.01},100).call(this.removeLabel,this,[e])):e.x<this.width-e.width&&this.addLabelItem()},t.prototype.removeLabel=function(e){if(!e||!e.parent){for(var i=0;i<this._textFieldAry.length;i++)e=this._textFieldAry[i],e&&e.parent&&(e.parent.removeChild(e),this._textFieldPool.push(e),e=null,--this._count);return this._textFieldAry=this._msgAry=this._colorAry=[],void(this._count=this._showIndex=0)}e.parent.removeChild(e),this._textFieldPool.push(e),e=null,this._textFieldAry.shift(),--this._count,this._count>0&&App.timer.doTimeOnce(this,t.DELAYTIME,this.addLabelItem),0==this._count&&(this._msgAry=[],this._colorAry=[],this._showIndex=0,this._preLabel=null,this._bg&&(this._bg.visible=!1))},t.prototype.setPos=function(e){void 0===e&&(e=null),this.y=200,this.x=Config.SCREEN_WIDTH-this.width>>1},t.prototype.createShap=function(){var e=new egret.Shape;return e.graphics.clear(),e.graphics.beginFill(0),e.graphics.drawRect(0,0,this.width,this.height),e.graphics.endFill(),e},Object.defineProperty(t.prototype,"width",{get:function(){return 640},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return 30},enumerable:!0,configurable:!0}),t.DELAYTIME=100,t.FRAME=20,t.TIME=6,t}(h5_engine.GSprite);__reflect(TopMessageView.prototype,"TopMessageView");var ServerTimeData=function(){function e(){this._startServerTime=0,this._endServerTime=0,this._spuleTime=0,this._method=void 0,this._thisArg=void 0,this._args=void 0}return e.getData=function(){return this.pool.getObject()},Object.defineProperty(e.prototype,"args",{get:function(){return this._args},set:function(e){this._args=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"method",{get:function(){return this._method},set:function(e){this._method=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"spuleTime",{get:function(){return this._spuleTime},set:function(e){this._spuleTime=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thisArg",{get:function(){return this._thisArg},set:function(e){this._thisArg=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endServerTime",{get:function(){return this._endServerTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startServerTime",{get:function(){return this._startServerTime},enumerable:!0,configurable:!0}),e.prototype.setTime=function(e,t){this._startServerTime=e,this._endServerTime=t},e.prototype.dispose=function(){this._method=void 0,this._thisArg=void 0,this._args=void 0,e.pool.push(this)},e.pool=new ObjectPool(e),e}();__reflect(ServerTimeData.prototype,"ServerTimeData");var TimeCenter=function(){function e(e){this._pool=[],this._normalHash=new HashMap,this._serverHash=new HashMap,this._currTimer=egret.getTimer(),this._currFrame=0,this._count=0,this._index=0,this._frametime=0,this._lastTime=0,this._fpsLastTime=0,this._fpsCount=0,e.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this)}return Object.defineProperty(e.prototype,"frametime",{get:function(){return this._frametime},enumerable:!0,configurable:!0}),e.prototype.onEnterFrame=function(e){this._currFrame++,this._currTimer=egret.getTimer(),this._frametime=this._currTimer-this._lastTime,this._lastTime=this._currTimer;var t=this._currTimer-this._fpsLastTime;if(t>1e3){var i=(this._currFrame-this._fpsCount)/(t/1e3);this._fpsCount=this._currFrame,this._fpsLastTime=this._currTimer,Config.currentGameFps=Math.floor(1e3*i)/1e3}for(var n=this._normalHash.values,o=0;o<n.length;o++)for(var a=n[o],s=a.values,r=a.keys,h=0;h<s.length;h++){var p=s[h],l=p.userFrame?this._currFrame:this._currTimer;if(l>=p.exeTime){var c=p.method,d=r[h],u=p.args,g=p.thisArg;if(p.repeat)for(;l>=p.exeTime&&a.has(d);)p.exeTime+=p.delay,FunctionApply.doExecute(c,g,u);else this.clearTimer(g,d),FunctionApply.doExecute(c,g,u)}}this.serverTimeHandler()},e.prototype.serverTimeHandler=function(){for(var e=ServerTime.serverTime,t=this._serverHash.values,i=0;i<t.length;i++)for(var n=t[i],o=n.values,a=0;a<o.length;a++){var s=o[a],r=s.endServerTime-e,h=s.thisArg;if(r!=s.spuleTime){s.spuleTime=r;var p=[s];s.args&&(p=p.concat(s.args)),FunctionApply.doExecute(s.method,s.thisArg,p)}0>=r&&this.clearTimer(h,s)}},e.prototype.create=function(e,t,i,n,o,a,s){void 0===a&&(a=null),void 0===s&&(s=!0);var r=void 0;if(s?(this.clearTimer(e,o),r=o):r=this._index++,1>n)return FunctionApply.doExecute(o,e,a),-1;var h=this._pool.length>0?this._pool.pop():new TimerHandler;h.thisArg=e,h.userFrame=t,h.repeat=i,h.delay=n,h.method=o,h.args=a,h.exeTime=n+(t?this._currFrame:this._currTimer);var p=this._normalHash.get(e);return p?p.put(r,h):(p=new HashMap,p.put(r,h),this._normalHash.put(e,p)),this._count++,r},e.prototype.doTimeOnce=function(e,t,i,n,o){return void 0===n&&(n=void 0),void 0===o&&(o=!0),this.create(e,!1,!1,t,i,n,o)},e.prototype.doTimeLoop=function(e,t,i,n,o){return void 0===n&&(n=void 0),void 0===o&&(o=!0),this.create(e,!1,!0,t,i,n,o)},e.prototype.doFrameOnce=function(e,t,i,n,o){return void 0===n&&(n=void 0),void 0===o&&(o=!0),this.create(e,!0,!1,t,i,n,o)},e.prototype.doFrameLoop=function(e,t,i,n,o){return void 0===n&&(n=void 0),void 0===o&&(o=!0),this.create(e,!0,!0,t,i,n,o)},e.prototype.serverTimeEnd=function(e,t,i,n,o){void 0===n&&(n=void 0),void 0===o&&(o=-1),this.clearTimer(e,t);var a=t,s=ServerTimeData.getData();o=-1==o?ServerTime.getServerTime():o,s.setTime(o,i),s.thisArg=e,s.method=t,s.args=n;var r=this._serverHash.get(e);r?r.put(a,s):(r=new HashMap,r.put(a,s),this._serverHash.put(e,r));var h=ServerTime.serverTime,p=s.endServerTime-h;s.spuleTime=p;var l=[s];return s.args&&(l=l.concat(s.args)),FunctionApply.doExecute(s.method,s.thisArg,l),a},Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),e.prototype.clearTimer=function(e,t){var i=this._normalHash.get(e);if(i){var n=i.get(t);n&&(n.clear(),this._count--,i.del(t),this._pool.push(n)),0==i.length&&this._normalHash.del(e)}var o=this._serverHash.get(e);if(o){var a=o.get(t);a&&(a.dispose(),this._count--,o.del(t)),0==o.length&&this._serverHash.del(e)}},e.prototype.hasTimer=function(e,t){var i=this._normalHash.get(t);if(i){var n=i.get(e);if(n)return!0}var o=this._serverHash.get(t);if(o){var a=o.get(e);if(a)return!0}return!1},e}();__reflect(TimeCenter.prototype,"TimeCenter");var TimerHandler=function(){function e(){this.thisArg=void 0,this.delay=0,this.repeat=!1,this.userFrame=!1,this.exeTime=0,this.method=void 0}return e.prototype.clear=function(){this.method=void 0,this.args=void 0},e}();__reflect(TimerHandler.prototype,"TimerHandler");var ArrayUtils=function(){function e(){}return e.arrayBufferToBase64=function(e,t){var i="",n={gif:"image/gif",jpeg:"image/jpeg",jpg:"image/jpeg",png:"image/png",mp3:"audio/mpeg",ogg:"audio/ogg",m4a:"audio/x-m4a",mp4:"video/mp4"},o=/^.*[_\.](\w+)$/.exec(e);if(null!=o&&n.hasOwnProperty(o[1])){for(var a=new Uint8Array(t),s=a.byteLength,r=0;s>r;r++)i+=String.fromCharCode(a[r]);return"data:"+n[o[1]]+";base64,"+window.btoa(i)}return!1},e.setCookie=function(e,t,i){var n=new Date;n.setTime(n.getTime()+24*i*60*60*1e3);var o="expires="+n.toUTCString();document.cookie=e+"="+t+"; "+o},e.PrefixInteger=function(e,t,i){return void 0===i&&(i="0"),e.length<t?(Array(t).join(i)+e).slice(-t):e},e.byteConversion=function(e){var t="";t=102.4>e?e.toFixed(2)+"B":104857.6>e?(e/1024).toFixed(2)+"KB":107374182.4>e?(e/1048576).toFixed(2)+"MB":(e/1073741824).toFixed(2)+"GB";var i=t+"",n=i.indexOf("."),o=i.substr(n+1,2);return"00"==o?i.substring(0,n)+i.substr(n+3,2):t},e}();__reflect(ArrayUtils.prototype,"ArrayUtils");var BreathEffect=function(){function e(){this._color=16777215,this._blur=2}return e.prototype.init=function(e){this._target&&App.timer.clearTimer(this,this.onUpdate),this._target=e},e.prototype.start=function(e,t){void 0===e&&(e=0),void 0===t&&(t=16777215),this._count=e,this._color=t,this._blur=2,null==this._filter?this._filter=new egret.GlowFilter(this._color,1,this._blur,this._blur,2,2):(this._filter.color=t,this._filter.blurX=this._filter.blurY=this._blur),this._toggle=!0,App.timer.doTimeLoop(this,60,this.onUpdate)},e.prototype.stop=function(){App.timer.clearTimer(this,this.onUpdate)},e.prototype.dispose=function(){this.stop(),this._target&&(this._target.filters=null,this._target=null),this._filter=null,ObjectPool.getPool(EnumEffectName.BreathEffect).push(this)},e.prototype.onUpdate=function(){this._toggle?this._blur++:this._blur--,this._blur>=20?this._toggle=!1:this._blur<=0&&(this._toggle=!0,this._count--),this._filter.blurX=this._filter.blurY=this._blur,this._target.filters=[this._filter],0==this._count&&this.stop()},Object.defineProperty(e.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),e}();__reflect(BreathEffect.prototype,"BreathEffect");var RecordItem=function(e){function t(t){var i=e.call(this,"RecordItemSkin")||this;return i.scheduleId=t,0==i.scheduleId?(i.scheduleId=6,i.imgBg.filters=FilterUtil.FILTER_DARK):i.imgBg.filters=null,i._dispatcher=new DispatcherRegister,i.txtDesc.text="",i}return __extends(t,e),t.prototype.show=function(e,t,i){this.imgMask.graphics.clear(),this.imgMask.graphics.beginFill(0),this.imgMask.graphics.drawRoundRect(0,0,this.imgMask.width,this.imgMask.height,20,20),this.imgMask.graphics.endFill(),this._uid=e,this._type=t,this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this,this),this.imgRecord.mask=this.imgMask,this._dispatcher.addEventListener(egret.Event.COMPLETE,this.onLoadComplete,this,this.imgRecord),i.thumbnail?(this._hasRecord=!0,this.imgRecord.source=i.thumbnail,this.txtNull.visible=!1,this.imgNocontent.visible=!1,6==this.scheduleId?this.txtDesc.text=StringUtil.format(new Date(1e3*i.time),"M月D日 h时m分")+"(自动存档)":this.txtDesc.text=StringUtil.format(new Date(1e3*i.time),"M月D日 h时m分"),this.imgText.visible=!0):(this._hasRecord=!1,this.imgRecord.source=void 0,this.txtNull.visible=!0,this.imgNocontent.visible=!0,6==this.scheduleId?(this.imgText.visible=!0,this.txtDesc.text="系统自动存档"):(this.imgText.visible=!1,this.txtDesc.text=""))},t.prototype.onLoadComplete=function(e){this.imgRecord.scaleY=this.imgRecord.width/this.imgRecord.texture.textureWidth},t.prototype.onClick=function(e){(0!=this._hasRecord||this._type!=EnumRecordType.READ)&&(this._type!=EnumRecordType.SAVE||6!=this.scheduleId)&&(this._type==EnumRecordType.SAVE?this._hasRecord?(App.sound.playSoundSwitchClient(EnumSoundId.BUBBLE),Alert.show(EnumAlertContent.SAVE_RECORD,"确定覆盖|取消覆盖",new FunctionVO(this.onCloseHandler,this))):(App.sound.playSoundSwitchClient(EnumSoundId.CLICK),ProtocolCommon.instance().send_chat_save_schedule(this._uid,this.scheduleId,new FunctionVO(this.onSaveSuccess,this))):this._hasRecord&&(App.sound.playSoundSwitchClient(EnumSoundId.BUBBLE),Alert.show(EnumAlertContent.READ_RECORD,"确定读取|取消读取",new FunctionVO(this.onCloseHandler1,this))))},t.prototype.onCloseHandler=function(e){e.type==Alert.OK&&ProtocolCommon.instance().send_chat_save_schedule(this._uid,this.scheduleId,new FunctionVO(this.onSaveSuccess,this))},t.prototype.onCloseHandler1=function(e){e.type==Alert.OK&&(PanelOpenManager.removePanel(EnumPanelID.ENDING),0==GameManager.isPlaying?ProtocolCommon.instance().send_heroine_version(this._uid,this.scheduleId):(PanelOpenManager.removePanel(EnumPanelID.RECORD),GameManager.startGame(this._uid,{id:this._uid,saveId:this.scheduleId,isInGame:!0})))},t.prototype.onSaveSuccess=function(e){ResponseUtil.checkResponseData(e)&&ProtocolCommon.instance().send_heroine_archive_list(this._uid)},t.prototype.hide=function(){this._dispatcher.removeAllListeners(),this.imgRecord.source&&(RES.destroyRes(this.imgRecord.source.toString()),this.imgRecord.source=void 0),this.txtDesc.text=""},t.prototype.dispose=function(){this._dispatcher=void 0,e.prototype.dispose.call(this)},t}(BaseUI);__reflect(RecordItem.prototype,"RecordItem");var ColorFilter=function(){function e(){}return e.getColorMatrixFilterArrByColorUint=function(e){var t=255,i=(e&t)/255,n=(e>>8&t)/255,o=(e>>16&t)/255,a=(e>>24&t)/255;return new egret.ColorMatrixFilter([o,0,0,0,0,0,n,0,0,0,0,0,i,0,0,0,0,0,a,0])},e.getColorMatrixFilterArrByColorString=function(e){var t=parseInt(e,16);return this.getColorMatrixFilterArrByColorUint(t)},e.getColorMatrix=function(e){var t=null,i=0/0,n=null,o=0/0,a=0/0,s=0/0,r=null,h=0/0,p=0/0,l=0/0,c=0/0,d=0/0,u=null,g=[],_=e[0];return 0!=_&&(_=2.55*_,t=new egret.ColorMatrixFilter([1,0,0,0,_,0,1,0,0,_,0,0,1,0,_,0,0,0,1,0]),g.push(t)),_=e[1],1!=_&&(_=(_+100)/100,i=128*(1-_),n=new egret.ColorMatrixFilter([_,0,0,0,i,0,_,0,0,i,0,0,_,0,i,0,0,0,1,0]),g.push(n)),_=e[2],1!=_&&(_=(_+100)/100,o=.3086*(1-_),a=.6094*(1-_),s=.082*(1-_),r=new egret.ColorMatrixFilter([o+_,a,s,0,0,o,a+_,s,0,0,o,a,s+_,0,0,0,0,0,1,0]),g.push(r)),_=e[3],0!=_&&(_=1.8*_,_=Math.min(180,Math.max(-180,_))/180*Math.PI,h=Math.cos(_),p=Math.sin(_),l=.213,c=.715,d=.072,u=new egret.ColorMatrixFilter([l+h*(1-l)+p*-l,c+h*-c+p*-c,d+h*-d+p*(1-d),0,0,l+h*-l+.143*p,c+h*(1-c)+.14*p,d+h*-d+p*-.283,0,0,l+h*-l+p*-(1-l),c+h*-c+p*c,d+h*(1-d)+p*d,0,0,0,0,0,1,0]),g.push(u)),g},e}();__reflect(ColorFilter.prototype,"ColorFilter");var DateUtil=function(){function e(){}return e.formatToTime=function(e){var t=Math.floor(e%60),i=Math.floor((e-t)/60%60),n=Math.floor((e-60*i-t)/3600),o=10>t?"0"+t.toString():t.toString(),a=10>i?"0"+i.toString():i.toString(),s=10>n?"0"+n.toString():n.toString();return s+":"+a+":"+o},e.formatToTime_V2=function(e,t){void 0===t&&(t=!0);var i=Math.floor(e%60),n=Math.floor((e-i)/60%60),o=Math.floor((e-60*n-i)/3600),a=0==n?"":n.toString()+"分",s=0==o?"":o.toString()+"小时";return t?s+a+i+"秒":a+i+"秒"},e.formatToTime_V3=function(e){var t=e%60,i=(e-t)/60%60,n=(e-60*i-t)/3600,o=0==i?"":i.toString()+"分",a=0==n?"":n.toString()+"小时";return a+o},e.formatToTime_V4=function(e){var t=Math.floor(e/86400),i=Math.floor(e%86400/3600),n=Math.floor(e%3600/60);return t+"天"+i+"小时"+n+"分"},e.formatToTime_V5=function(e){var t=Math.floor(e/86400),i=Math.floor(e/3600),n=Math.floor(e%3600/60);return t>0?t+"天":i>0?i+"小时":n>0?n+"分钟":"1分钟"},e.formatToTime_V6=function(e){var t=e%60,i=(e-t)/60%60,n=0==t?"":t.toString()+"分",o=0==i?"":i.toString()+"分";return o+n},e.formatToTime_V7=function(e){var t=new Date(1e3*e),i=t.getMinutes(),n=t.getHours(),o=0==i?"00":i.toString(),a=0==n?"00":n.toString();return a+":"+o},e.formatToTime_V8=function(e){var t=Math.floor(e%60),i=Math.floor((e-t)/60%60),n=10>t?"0"+t.toString():t.toString(),o=10>i?"0"+i.toString():i.toString();return o+":"+n},e.getTodayMaxUtc=function(){var e=new Date(ServerTime.serverTime);return e.setHours(23,59,59,999),Math.floor(.001*e.getTime())},e.format=function(e,t){void 0===e&&(e=void 0),void 0===t&&(t="年-月-日 时:分:秒"),e||(e=new Date);var i=e.getFullYear().toString(),n=(e.getMonth()+1).toString(),o=e.getDate().toString(),a=(e.getHours()>9?"":"0")+e.getHours(),s=(e.getMinutes()>9?"":"0")+e.getMinutes(),r=(e.getSeconds()>9?"":"0")+e.getSeconds();return t.replace("年",i).replace("月",n).replace("日",o).replace("时",a).replace("分",s).replace("秒",r)},e.formatTimeToMin2=function(e){var t="",i=new Date(1e3*e);return t=i.getFullYear()+"年"+(i.getMonth()+1)+"月"+i.getDate()+"日"+(i.getHours()<10?"0"+i.getHours():""+i.getHours())+":"+(i.getMinutes()<10?"0"+i.getMinutes():""+i.getMinutes())},e}();__reflect(DateUtil.prototype,"DateUtil");var DeviceUtil=function(){function e(){}return Object.defineProperty(e,"currentSetting",{get:function(){return 0==Config.isRelease?5:e.IsAndroid&&e.IsWeb?4:e.IsIos&&e.IsWeb?4:e.IsAndroid?1:e.IsIos?2:e.IsWeb?3:5},enumerable:!0,configurable:!0}),Object.defineProperty(e,"payType",{get:function(){return 0==Config.isRelease?"1":this.IsAndroid&&Config.U8Login?"u8":this.IsIos&&this.IsNative?"ios":Config.soEasy?"soeasy":H5_360_Sdk.getInstance().config360?"360":"alipay"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWebIOS",{get:function(){return this.IsWeb&&this.IsIos},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsWeb",{get:function(){return egret.Capabilities.runtimeType==egret.RuntimeType.WEB},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsNative",{get:function(){return egret.Capabilities.runtimeType==egret.RuntimeType.RUNTIME2||egret.Capabilities.runtimeType==egret.RuntimeType.NATIVE},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isMobile",{get:function(){return egret.Capabilities.isMobile},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsIos",{get:function(){return"iOS"==egret.Capabilities.os||"Mac OS"==egret.Capabilities.os},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsAndroid",{get:function(){return"Android"==egret.Capabilities.os},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsIpad",{get:function(){return-1!=navigator.userAgent.indexOf("iPad")?!0:!1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIPhoneX",{get:function(){var e=egret.Capabilities.boundingClientWidth/egret.Capabilities.boundingClientHeight;return e>=2?!0:!1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWeiXinBrowser",{get:function(){if(this.IsWeb){var e=navigator.userAgent.toLowerCase();return/micromessenger/.test(e)}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWeiBoBrowser",{get:function(){if(this.IsWeb){var e=navigator.userAgent.toLowerCase();return/weibo/.test(e)}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isQQInBrowser",{get:function(){if(this.IsWeb){var t=navigator.userAgent.toLowerCase();return e.IsIos&&/ qq/.test(t)&&0==/mqqbrowser/.test(t)||e.IsAndroid&&/mqqbrowser/.test(t)&&/qq/i.test(t.split("mqqbrowser")[1])}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ISQQBrower",{get:function(){if(this.IsWeb){var t=navigator.userAgent.toLowerCase();return e.IsIos&&0==/ qq/.test(t)&&/mqqbrowser/.test(t)||e.IsAndroid&&/mqqbrowser/.test(t)&&0==/qq/i.test(t.split("mqqbrowser")[1])}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsUCBrowser",{get:function(){return this.IsWeb&&navigator.userAgent.indexOf("UCBrowser")>-1?!0:!1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isSogouBrowser",{get:function(){var e=navigator.userAgent.toLowerCase();return this.IsWeb&&/sogoumobilebrowser/.test(e)?!0:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIEBrowser",{get:function(){return this.IsWeb&&(window.ActiveXObject||"ActiveXObject"in window)?!0:!1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isBaiduBrowser",{get:function(){var e=navigator.userAgent.toLowerCase();return this.IsWeb&&/baidubrowser/.test(e)?!0:!1},enumerable:!0,configurable:!0}),e}();__reflect(DeviceUtil.prototype,"DeviceUtil");var HeroniesLabelView=function(e){function t(){return e.call(this,"HeroniesLabelSkin")||this}return __extends(t,e),t.prototype.show=function(e){this.txtSign.text=e},t}(BaseUI);__reflect(HeroniesLabelView.prototype,"HeroniesLabelView");var FilterUtil=function(){function e(){}return e.getBlurFilterByQuality=function(e){void 0===e&&(e=0);var t=4*(e+1);return this.BLUR_FILTER.blurX!=t&&(this.BLUR_FILTER.blurX=this.BLUR_FILTER.blurY=t),this.BLUR_FILTER},e.getConfigColorMatrixFilter=function(t){var i=e.configColorMatrixDict.get(t);return i||(i=ColorFilter.getColorMatrixFilterArrByColorUint(t),this.configColorMatrixDict.put(t,i)),i},e.getConfigAdjustColorMatrixFilter=function(t,i,n,o){var a=t+"_"+i+"_"+n+"_"+o,s=e.adjustColorMatrixDict.get(a);if(null==s){var r=new h5_engine.AdjustColor;r.brightness=t,r.contrast=i,r.hue=n,r.saturation=o,r.AllValuesAreSet()&&(s=new egret.ColorMatrixFilter(r.CalculateFinalFlatArray()),e.adjustColorMatrixDict.put(a,s))}return s},e.addColorMatrixFilter=function(e,t){for(var i,n=e.filters||[],o=0,a=n.length;a>o;o++)if(n[o]instanceof egret.ColorMatrixFilter&&(i=n[o],i&&i.matrix.toString()==t.matrix.toString()))return;n.push(t),e.filters=n},e.removeColorMatrixFilter=function(e,t){for(var i,n=e.filters||[],o=0,a=n.length;a>o;o++)n[o]instanceof egret.ColorMatrixFilter&&(i=n[o],i&&i.matrix.toString()==t.matrix.toString()&&(n.splice(o,1),o--,a--));e.filters=n},e.gray=function(e,t){void 0===t&&(t=!0),t?this.addColorMatrixFilter(e,this.grayFilter):this.removeColorMatrixFilter(e,this.grayFilter)},e.FILTER_GRAY=[new egret.ColorMatrixFilter([.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0])],e.FILTER_DARK=[new egret.ColorMatrixFilter([.6,.3,.11,0,0,.6,.3,.11,0,0,.6,.3,.11,0,0,0,0,0,1,0])],e.FILTER_HighLight=[new egret.ColorMatrixFilter([1,0,0,0,50,0,1,0,0,50,0,0,1,0,50,0,0,0,1,0])],e.FILTER_RP=[new egret.ColorMatrixFilter([-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0])],e.FILTER_GREEN=[new egret.ColorMatrixFilter([0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0])],e.GF_COMMON=[new egret.GlowFilter(16381449,1,6,6,20,10,!1,!1)],e.FILTER_RED=[new egret.ColorMatrixFilter([1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0])],e.FILTER_BLUE=[new egret.ColorMatrixFilter([.01,.01,.01,0,0,.24,.24,.24,0,0,.3333,.3333,.3333,0,0,0,0,0,1,0])],e.FILTER_PURPLE=[new egret.ColorMatrixFilter([.4,.4,.4,0,0,.2,.2,.2,0,0,.4,.4,.4,0,0,0,0,0,1,0])],e.HIGH_LIGHT_FILTER=new egret.ColorMatrixFilter([1.6,0,0,0,0,0,1.6,0,0,0,0,0,1.6,0,0,0,0,0,1,0]),e.BLUR_FILTER=new egret.BlurFilter(4,4,1),e.blur_filter=new egret.BlurFilter(8,8,1),e.grayFilter=new egret.ColorMatrixFilter([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0]),e.adjustColorMatrixDict=new HashMap,e.configColorMatrixDict=new HashMap,e}();__reflect(FilterUtil.prototype,"FilterUtil");var ImageEffectUtil=function(){function e(){}return e.stopAllEffect=function(e){this.stopClock()},e.changeImage=function(e,t,i){void 0===i&&(i=1e3),egret.Tween.removeTweens(e),egret.Tween.removeTweens(t),egret.Tween.get(e).set({alpha:1}).to({alpha:0},i),egret.Tween.get(t).set({alpha:0}).to({alpha:0},i)},e.fadeOut=function(e,t,i){void 0===t&&(t=1e3),void 0===i&&(i=!1),egret.Tween.removeTweens(e),egret.Tween.get(e).to({alpha:0},t),i&&egret.Tween.get(e).call(function(){e.parent&&e.parent.removeChild(e)},this)},e.fadeIn=function(e,t,i){void 0===t&&(t=1e3),void 0===i&&(i=0),egret.Tween.removeTweens(e),egret.Tween.get(e).wait(i).to({alpha:1},t)},e.move=function(e,t,i,n,o){void 0===i&&(i=void 0),void 0===n&&(n=0),void 0===o&&(o=1e3),egret.Tween.removeTweens(e);var a={};void 0!=t&&(a.x=t),void 0!=i&&(a.y=i);var s=void 0;1==n?s=egret.Ease.cubicIn:2==n&&(s=egret.Ease.cubicOut),egret.Tween.get(e).to(a,o)},e.rotate=function(e,t,i,n){void 0===t&&(t=1),void 0===i&&(i=!0),void 0===n&&(n=500),0>=t&&(t=1),100>=n&&(n=100),egret.Tween.get(e).set({rotation:0}).to({rotation:360*t*(i?1:-1)})},e.clockOut=function(e,t,i,n){void 0===t&&(t=600),void 0===i&&(i=!0),void 0===n&&(n=null),null==this._clockMask&&(this._clockMask=new egret.Shape),null==this._clockOutObj&&(this._clockOutObj={});var o=Math.ceil(Math.sqrt(e.width*e.width+e.height*e.height))>>1;e.parent.addChild(this._clockMask),this._clockMask.x=Config.SCREEN_WIDTH>>1,this._clockMask.y=Config.SCREEN_HEIGHT>>1,this._clockOutObj.angle=0,this._clockOutObj.radius=o,this._clockOutObj.target=e,this._clockOutObj.showInTarget=n,this._clockOutObj.showInTime=t,egret.Tween.get(this._clockOutObj,{onChange:this.onChangeClockOut,onChangeObj:this}).to({angle:360},t,egret.Ease.sineIn).call(this.onCompleteClock,this,[this._clockOutObj]),this.updateClockMask(o,!0,0)},e.clockIn=function(e,t,i,n){void 0===t&&(t=600),void 0===i&&(i=0),void 0===n&&(n=!0),null==this._clockMask&&(this._clockMask=new egret.Shape),null==this._clockInObj&&(this._clockInObj={});var o=Math.ceil(Math.sqrt(e.width*e.width+e.height*e.height))>>1;e.parent.addChild(this._clockMask),this._clockMask.x=Config.SCREEN_WIDTH>>1,this._clockMask.y=Config.SCREEN_HEIGHT>>1,this._clockInObj.angle=359,this._clockInObj.radius=o,this._clockInObj.target=e,egret.Tween.get(this._clockInObj,{onChange:this.onChangeClockIn,onChangeObj:this}).to({angle:1},t,egret.Ease.sineIn).call(this.onCompleteClock,this,[this._clockInObj]),this.updateClockMask(o,!0,359)},e.stopClock=function(e){e?e&&e.target&&(egret.Tween.removeTweens(e),e.target=null,this._clockMask&&this._clockMask.parent&&this._clockMask.parent.removeChild(this._clockMask),e.showInTarget&&(this.clockIn(e.showInTarget,e.showInTime),e.showInTarget=null)):(this._clockInObj&&this._clockInObj.target&&(egret.Tween.removeTweens(this._clockInObj),this._clockInObj.target.alpha=0,this._clockInObj.target=null,this._clockMask&&this._clockMask.parent&&this._clockMask.parent.removeChild(this._clockMask)),this._clockOutObj&&this._clockOutObj.target&&(egret.Tween.removeTweens(this._clockOutObj),this._clockOutObj.target=null,this._clockMask&&this._clockMask.parent&&this._clockMask.parent.removeChild(this._clockMask)))},e.onChangeClockOut=function(){this.updateClockMask(this._clockOutObj.radius,!0,Math.floor(this._clockOutObj.angle))},e.onChangeClockIn=function(){this.updateClockMask(this._clockInObj.radius,!0,Math.floor(this._clockInObj.angle))},e.onCompleteClock=function(e){this.stopClock(e)},e.updateClockMask=function(e,t,i,n,o,a,s){void 0===n&&(n=0),void 0===o&&(o=0),void 0===a&&(a=270),void 0===s&&(s=0),GameLog.log("==>",i,a),this._clockMask.graphics.clear(),this._clockMask.graphics.lineStyle(0,s),this._clockMask.graphics.beginFill(s),this._clockMask.graphics.moveTo(n,o),i=Math.abs(i)>360?360:i;var r=Math.ceil(Math.abs(i)/45),h=i/r;h=h*Math.PI/180,a=a*Math.PI/180,this._clockMask.graphics.lineTo(n+e*Math.cos(a),o+e*Math.sin(a));for(var p,l,c,d,u,g=1;r>=g;g++)a+=h,p=a-h/2,l=n+e/Math.cos(h/2)*Math.cos(p),c=o+e/Math.cos(h/2)*Math.sin(p),d=n+e*Math.cos(a),u=o+e*Math.sin(a),this._clockMask.graphics.curveTo(l,c,d,u);360!=i&&this._clockMask.graphics.lineTo(n,o),this._clockMask.graphics.endFill()},e.shakeTween=function(e,t,i,n){if(void 0===t&&(t=2),void 0===i&&(i=4),void 0===n&&(n=32),!this.isShake){this.isShake=!0;var o=[0,0];App.timer.doTimeLoop(this,n,this.onUpdateShake,[e,e.x,e.y,o,i,t])}},e.onUpdateShake=function(e,t,i,n,o,a){n[this.shakeNum%2]=this.shakeNum++%4<2?0:o,this.shakeNum>4*a+1&&(App.timer.clearTimer(this,this.onUpdateShake),this.shakeNum=0,this.isShake=!1),e.x=n[0]+t,e.y=n[1]+i},e.startBreath=function(e,t,i){if(void 0===t&&(t=-1),void 0===i&&(i=16777215),null!=e){var n;this._breathHash.has(e)?n=this._breathHash.get(e):(n=ObjectPool.getObject(EnumEffectName.BreathEffect),this._breathHash.put(e,n)),n.init(e),n.start(t,i)}},e.stopBreath=function(e,t){if(void 0===t&&(t=!0),null!=e&&this._breathHash.has(e)){var i=this._breathHash.get(e);t?i.dispose():i.stop()}},e.isShake=!1,e.shakeNum=0,e._breathHash=new HashMap,e}();__reflect(ImageEffectUtil.prototype,"ImageEffectUtil");var InputTextUtil=function(){function e(){}return e.addNativeInputTextListener=function(e){DeviceUtil.IsNative&&(e.textDisplay.addEventListener(egret.FocusEvent.FOCUS_IN,this.onFocusIn,this),e.textDisplay.addEventListener(egret.FocusEvent.FOCUS_OUT,this.onFocusOut,this))},e.removeNativeInputTextListener=function(e){DeviceUtil.IsNative&&(e.textDisplay.removeEventListener(egret.FocusEvent.FOCUS_IN,this.onFocusIn,this),e.textDisplay.removeEventListener(egret.FocusEvent.FOCUS_OUT,this.onFocusOut,this))
},e.updateNativeText=function(t){e._target&&e._target.textTemp&&(e._target.textTemp.text=t,e._lastText=t)},e.onFocusIn=function(e){e.currentTarget.parent instanceof eui.TextInput&&(this._target=e.currentTarget.parent,this._target.textTemp.visible=!0,this._target.textDisplay.alpha=0,DeviceUtil.IsIos&&"　"==this._target.textDisplay.text&&(this._target.textDisplay.text="",App.timer.clearTimer(this,this.resetText)))},e.onFocusOut=function(t){t.currentTarget.parent==this._target&&this._target.textTemp&&(this._target.textTemp.visible=!1,this._target.textDisplay.alpha=1,DeviceUtil.IsIos?""==this._target.textDisplay.text&&(this._target.textDisplay.text="　",App.timer.doFrameOnce(this,1,this.resetText,[this._target,""])):e._lastText!=e._target.text&&(App.timer.doFrameOnce(this,1,this.resetText,[this._target,this._lastText]),this._target.text=e._lastText),this._lastText=null,this._target=null)},e.resetText=function(e,t){e.textDisplay.text=t,e.invalidateState()},e}();__reflect(InputTextUtil.prototype,"InputTextUtil");var ResPathUtil=function(){function e(){}return e.getCommonImageRes=function(t,i){return void 0===i&&(i=".png"),e.getVersionUrl("assets/base/image/"+t+i)},e.getCommonRes=function(t,i,n){return void 0===n&&(n=".png"),e.getVersionUrl("assets/base/"+(t?t+"/":"")+i+n)},e.getCommonVideoRes=function(t){return e.getVersionUrl("assets/base/video/"+t)},e.getGameRes=function(e,t){return Config.RESOURCE_PATH+"game/"+e+"/"+t},e.getGameResNoVer=function(t,i){return e.getVersionUrl(t+"/"+i)},e.getOpeningVideoRes=function(){return e.getCommonVideoRes("z6_1.mp4")},e.getCommonIconRes=function(t,i){var n="assets/common/"+t+"/"+i;return e.getVersionUrl(n)},e.getSoundPath1=function(t){var i="assets/game2/assets/xindong/music/"+t+".mp3";return e.getVersionUrl(i)},e.getSoundPath=function(t,i){void 0===i&&(i="base");var n="assets/"+i+"/music/sound/"+t+".mp3";return e.getVersionUrl(n)},e.getBgmPath=function(t,i){void 0===i&&(i="base");var n="assets/"+i+"/music/bgm/"+t+".mp3";return e.getVersionUrl(n)},e.getVersionUrl=function(e){return DeviceUtil.IsWeb?RES.getVersionController().getVirtualUrl(Config.RESOURCE_PATH+e)+"?v="+Config.version:RES.getVersionController().getVirtualUrl(Config.RESOURCE_PATH+e)},e}();__reflect(ResPathUtil.prototype,"ResPathUtil");var GameLoading=function(e){function t(){var t=e.call(this)||this;return t.is_arrive=!0,t._boyOffsetX=30,t._boyOffsetY=1147,t.init(),t}return __extends(t,e),t.prototype.init=function(){this._bgSp=new h5_engine.GShape,this._bgSp.graphics.beginFill(16777215),this._bgSp.graphics.drawRect(0,0,Config.SCREEN_WIDTH,Config.SCREEN_HEIGHT),this._bgSp.graphics.endFill(),this.addChild(this._bgSp),this._loadingView=new GameLoadingUI,Config.isLandscape&&(this._loadingView.width=Config.MAIN_HEIGHT,this._loadingView.height=Config.MAIN_WIDTH),this.addChild(this._loadingView);var e=RES.getRes("jindutiao2_ske_json"),t=RES.getRes("jindutiao2_tex_json"),i=RES.getRes("jindutiao2_tex_png");this._dragonbonesFactory=new dragonBones.EgretFactory,this._dragonbonesFactory.parseDragonBonesData(e),this._dragonbonesFactory.parseTextureAtlasData(t,i),this._boy_armature=this._dragonbonesFactory.buildArmatureDisplay("armatureName"),this._girl_armature=this._dragonbonesFactory.buildArmatureDisplay("armatureName"),this.addChild(this._boy_armature),this.addChild(this._girl_armature),this._boyOffsetX=Config.isLandscape?285:30,this._boyOffsetY=Config.isLandscape?587:1147,this._boy_armature.x=this._boyOffsetX,this._boy_armature.y=this._boyOffsetY,this._girl_armature.x=Config.isLandscape?925:670,this._girl_armature.y=this._boyOffsetY,this._boy_armature.animation.play("nanpao",-1),this._girl_armature.animation.gotoAndStopByFrame("nvhai",0),this._scrollRect=new egret.Rectangle,this._scrollRect.height=50,this.updateProgress("资源加载中",0)},t.prototype.show=function(e){egret.Tween.get(this).set({alpha:0}).to({alpha:1},500).call(this.onShowComplete,this)},t.prototype.onShowComplete=function(){this._index=0,this._list=DeviceUtil.isWebIOS?[EnumResGroupName.PRELOAD,EnumResGroupName.PRELOAD_SOUND]:[EnumResGroupName.PRELOAD],this._length=this._list.length,this.loadNext(null)},t.prototype.hide=function(){this._list=null,egret.Tween.get(this).to({alpha:0},1e3).call(this.onHideComplete,this)},t.prototype.onHideComplete=function(){App.dispatcher.dispatchEvent(PreloadEvent.HIDE_LOADING_COMPLETE),egret.Tween.removeTweens(this)},t.prototype.loadNext=function(e){e&&GameLog.log("加载初始化资源完成:"+e),this._index<this._list.length?(0==this._index?App.res.setMaxLoadingThread(App.res.DEFAULT_LOAD_THREAD):App.res.setMaxLoadingThread(1),App.res.loadGroup([this._list[this._index]],new FunctionVO(this.loadNext,this),new FunctionVO(this.onResourceProgress,this)),this._index++):(App.res.setMaxLoadingThread(App.res.DEFAULT_LOAD_THREAD),this.onResourceLoadComplete(e))},t.prototype.onResourceLoadComplete=function(e){this.updateProgress("资源加载完毕",1),this._boy_armature.animation.gotoAndPlayByFrame("nanzhanli",1,1),this._boy_armature.armature.proxy.addDBEventListener(dragonBones.EgretEvent.COMPLETE,this.onBoyComplete,this)},t.prototype.onBoyComplete=function(e){this._boy_armature.armature.proxy.removeDBEventListener(dragonBones.EgretEvent.COMPLETE,this.onBoyComplete,this),this._girl_armature.animation.gotoAndPlayByFrame("nvhaiwendao",1,1),this._girl_armature.armature.proxy.addDBEventListener(dragonBones.EgretEvent.COMPLETE,this.onGirlComplete,this)},t.prototype.onGirlComplete=function(e){this._girl_armature.armature.proxy.removeDBEventListener(dragonBones.EgretEvent.COMPLETE,this.onBoyComplete,this),App.dispatcher.dispatchEvent(PreloadEvent.PRELOAD_COMPLETE)},t.prototype.onResourceProgress=function(e){this._loadingView&&this.updateProgress("资源加载中",(this._index-1)/this._length+e.itemsLoaded/e.itemsTotal/this._length)},t.prototype.updateProgress=function(e,t){this._scrollRect.width=669*t,this._loadingView.imgProgress.scrollRect=this._scrollRect,e=1/3>=t?"正在偷瞄女孩":2/3>=t?"正在整理形象":"正在翻看恋爱秘籍",this._loadingView.txtLabel.text=e+" "+Math.floor(100*t)+"%",this._scrollRect.width<=510?this._boy_armature.x=this._boyOffsetX+this._scrollRect.width:510!=this._boy_armature.x&&(this._boy_armature.x=this._boyOffsetX+510)},t.prototype.dispose=function(){this._boy_armature&&(this._boy_armature.animation.stop(),this._boy_armature.parent&&this._boy_armature.parent.removeChild(this._boy_armature),this._boy_armature.dispose(),this._boy_armature=null),this._girl_armature&&(this._girl_armature.animation.stop(),this._girl_armature.parent&&this._girl_armature.parent.removeChild(this._girl_armature),this._girl_armature.dispose(),this._girl_armature=null),this._loadingView.imgProgress.scrollRect=null,this._scrollRect=null,this._bgSp&&(this._bgSp.remove(),this._bgSp.graphics.clear(),this._bgSp=null),this._loadingView&&(this._loadingView.dispose(),this._loadingView=void 0),this._dragonbonesFactory&&(this._dragonbonesFactory.clear(!0),this._dragonbonesFactory=null),this.remove()},t.prototype.needDispose=function(){return!0},t}(h5_engine.GDisplayObjectContainer);__reflect(GameLoading.prototype,"GameLoading",["IPanelDispose"]);var ResponseUtil=function(){function e(){}return e.checkResponseData=function(e,t){return void 0===t&&(t=!1),e&&200==Number(e.code)?!0:(t&&e&&202==Number(e.code)&&(App.global.clearRoleData(),App.dispatcher.dispatchEvent(LoginEvent.RELOGIN)),!1)},e}();__reflect(ResponseUtil.prototype,"ResponseUtil");var GameLogo=function(e){function t(){var t=e.call(this)||this;return t.init(),t}return __extends(t,e),t.prototype.init=function(){var e=RES.getRes(Config.isLandscape?"GZSlogoDHHB_ske_json":"GZSlogoDH2_ske_json"),t=RES.getRes(Config.isLandscape?"GZSlogoDHHB_tex_json":"GZSlogoDH2_tex_json"),i=RES.getRes(Config.isLandscape?"GZSlogoDHHB_tex_png":"GZSlogoDH2_tex_png");this._dragonbonesFactory=new dragonBones.EgretFactory,this._dragonbonesFactory.parseDragonBonesData(e),this._dragonbonesFactory.parseTextureAtlasData(t,i),this._armature=this._dragonbonesFactory.buildArmatureDisplay("armatureName"),this.addChild(this._armature),this._armature.x=(Config.SCREEN_WIDTH>>1)-(Config.isLandscape?20:0),this._armature.y=(Config.SCREEN_HEIGHT>>1)+(Config.isLandscape?80:0)},t.prototype.show=function(e){Config.hasTouch&&(this._sound=RES.getRes("logoyx_mp3"),this._sound.type=egret.Sound.MUSIC,this._sound.play(0,1)),this._armature.animation.gotoAndPlayByFrame("Z",1,1),this._armature.armature.proxy.addDBEventListener(dragonBones.EgretEvent.COMPLETE,this.onPlayComplete,this),egret.Tween.get(this).set({alpha:0}).to({alpha:1},1e3)},t.prototype.hide=function(){egret.Tween.get(this).to({alpha:0},1e3).call(this.onHideComplete,this)},t.prototype.onPlayComplete=function(e){this._armature.armature.proxy.removeDBEventListener(dragonBones.EgretEvent.COMPLETE,this.onPlayComplete,this),this._armature.animation.stop(),this.hide()},t.prototype.onHideComplete=function(){App.dispatcher.dispatchEvent(PreloadEvent.HIDE_LOGO_COMPLETE),egret.Tween.removeTweens(this)},t.prototype.dispose=function(){this.remove(),this._sound=null,this._armature&&(this._armature.parent&&this._armature.parent.removeChild(this._armature),this._armature.dispose(),this._armature=null),this._dragonbonesFactory&&(this._dragonbonesFactory.clear(!0),this._dragonbonesFactory=null),App.res.destoryGroup([Config.isLandscape?EnumResGroupName.LOGO1:EnumResGroupName.LOGO])},t.prototype.needDispose=function(){return!0},t}(h5_engine.GDisplayObjectContainer);__reflect(GameLogo.prototype,"GameLogo",["IPanelDispose"]);var StringUtil=function(){function e(){}return e.getTodayMaxUtc=function(){var e=new Date(ServerTime.serverTime);return e.setHours(23,59,59,999),.001*e.getTime()>>0},e.resloveFormatHMS=function(e){var t=new Date(1e3*e),i=t.getHours(),n=t.getMinutes(),o=t.getSeconds();return(10>i?"0"+i:""+i)+":"+(10>n?"0"+n:""+n)+":"+(10>o?"0"+o:""+o)},e.fillArray=function(e,t,i){void 0===i&&(i=null);var n=[],o=t.split(","),a=Math.min(e.length,o.length);if(t&&""!=t)for(var s=0;a>s;s++){var r=o[s];n[s]="true"==r?!0:"false"==r?!1:r}return n},e.convertTime=function(e,t){void 0===t&&(t=":");var i=e/3600>>0,n=e%3600/60>>0,o=e%60>>0;return(10>i?"0"+i:""+i)+t+(10>n?"0"+n:""+n)+t+(10>o?"0"+o:""+o)},e.formatTimeToMinSec=function(e){var t=Math.ceil(e/60),i=e%60,n=(t>=10?t:"0"+t)+":"+(i>=10?i:"0"+i);return n},e.formatTimeToMinSecWord=function(e){var t=Math.floor(e/60),i=e%60,n=(t>=10?t:"0"+t)+"分"+(i>=10?i:"0"+i)+"秒";return n},e.formatLeftTimeDHM=function(t){var i=t/86400>>0,n=t%86400/3600>>0;if(0==i&&0==n)return e.formatTimeToMinSecWord(t);var o=t%86400%3600/60>>0,a=(i>0?i+"天":"")+(n>0?n+"时":"")+(o>0?o+"分":"");return a},e.substitute=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(void 0==e||null==e)return"";var n,o=t.length,a=TypeUtil.isArray(t[0]);1==o&&a?(n=t[0],o=n.length):n=t;for(var s=0;o>s;s++)e=e.replace(new RegExp("\\{"+s+"\\}","g"),n[s]);return e},e.getLineBreakStr=function(e){return e=e.replace(new RegExp("\\\\n","g"),"br")},e.replacJosnStr=function(e){var t=/\'/g;return e=e.replace(t,'"')},e.formatMoney=function(e,t,i){return void 0===t&&(t="万"),void 0===i&&(i=1e4),e>=10*i?e%i==0?e/i+t:Number(e/i).toFixed(1)+t:e+""},e.formatNum=function(e,t,i){void 0===t&&(t=!0),void 0===i&&(i=!1);var n="";t&&e>=1e9?(e%1e8==0?e/=1e8:e=Number((e/1e8).toFixed(1)),n="亿"):t&&e>=1e5&&(e%1e4==0?e/=1e4:e=Number((e/1e4).toFixed(1)),n="万"),i&&(e=Math.floor(e));var o=e.toString();if(o.length>3){for(var a=[],s=0,r=o.length;r>0;)s=Math.max(r-3,0),a.unshift(o.slice(s,r)),r=s;o=a.join(",")}return o+n},e.formatNum1=function(e){return e>=1e8?(e/1e8>>0)+"亿":e>=1e4?Number(e/1e4>>0)+"万":e.toString()},e.formatTimeToMDWHM=function(t){var i="",n=new Date(1e3*t);return i=n.getMonth()+1+"月"+n.getDate()+"日(周"+e.getWeekDay(n.getDay())+")"+(n.getHours()<10?"0"+n.getHours():""+n.getHours())+":"+(n.getMinutes()<10?"0"+n.getMinutes():""+n.getMinutes())},e.getWeekDay=function(e){var t=["日","一","二","三","四","五","六"];return t[e]},e.getChieseNum=function(e){var t=["零","一","二","三","四","五","六","七","八","九","十"];return t[e]},e.getChieseNums=function(e){for(var t,i=["","十","百","千","万","十","百","千","亿"],n=e.toString().split("").reverse(),o="",a=0;a<n.length;a++)t=Number(n[a]),o=(0==a&&0==t?"":a>0&&0==t&&0==Number(n[a-1])?"":this.getChieseNum(t)+(0==t?i[0]:i[a]))+o;return 0==o.indexOf("一十")&&(o=o.substr(1)),o},e.getstringLen=function(e,t){void 0===t&&(t=2);var i=0;if(e){for(var n="",o=0;t>o;o++)n+="x";i=e.replace(/[^\x00-\xff]/g,n).length}return i},e.getIndexStr=function(e,t,i,n,o){if(void 0===i&&(i=";"),void 0===n&&(n=0),void 0===o&&(o=0),null==e||""==e||0>=t)return"";var a=e.split(i);if(null!=a){var s=a[t-1];return s}return""},e.format=function(e,t){void 0===e&&(e=null),void 0===t&&(t="Y-M-D h:m:s"),null==e&&(e=new Date);var i=e.getFullYear(),n=e.getMonth()+1,o=e.getDate(),a=(e.getHours()>9?"":"0")+e.getHours(),s=(e.getMinutes()>9?"":"0")+e.getMinutes(),r=(e.getSeconds()>9?"":"0")+e.getSeconds();return t.replace(new RegExp("Y"),i).replace(new RegExp("M"),n).replace(new RegExp("D"),o).replace(new RegExp("h"),a).replace(new RegExp("m"),s).replace(new RegExp("s"),r)},e.formatToTime_V10=function(e){var t=new Date(1e3*e),i=t.getHours()<10?"0"+t.getHours():""+t.getHours(),n=t.getMinutes()<10?"0"+t.getMinutes():""+t.getMinutes(),o=t.getSeconds()<10?"0"+t.getSeconds():""+t.getSeconds();return t.getMonth()+1+"月"+t.getDate()+"日 "+i+":"+n+":"+o},e.formatToTime_MD=function(e){var t=new Date(1e3*e);return t.getMonth()+1+"月"+t.getDate()+"日 "},e.getTextFlow=function(e,t,i,n){for(var o=[],a=Style.SIZE,s=!1,r=0;r<e.length;r++){i&&0!=i.length&&(a=i[r]),n&&0!=n.length&&(s=n[r]);var h=this.getTextElement(e[r],t[r],a,s);o.push(h)}return o},e.getTextFlow2=function(e,t,i,n){var o=[];i||(i=Style.SIZE),n||(n=!1);var a=this.getTextElement(e,t,i,n);return o.push(a),o},e.getTextElement=function(e,t,i,n){return void 0===i&&(i=Style.SIZE),n?{text:e+"",style:{size:i,textColor:t,bold:n}}:{text:e+"",style:{size:i,textColor:t}}},e}();__reflect(StringUtil.prototype,"StringUtil");var Style=function(){function e(){}return e.FONT="fzyc",e.SIZE=20,e.stroke=1,e.strokeColor=0,e}();__reflect(Style.prototype,"Style");var TouchEffectBinder=function(){function e(){this.init()}return e.prototype.init=function(){this._bindHash=new HashMap},e.prototype.onTouchBegin=function(e){App.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this._target=e.currentTarget;var t=this._bindHash.get(this._target);switch(t){case EnumTouchEffect.ADD_SCALE:this._target.scaleX=this._target.scaleY=1.1;break;case EnumTouchEffect.MIN_SCALE:this._target.scaleX=this._target.scaleY=.8;break;case EnumTouchEffect.ALPHA:this._target.alpha=.8}},e.prototype.onTouchEnd=function(e){if(App.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this._target){var t=this._bindHash.get(this._target);this.resetTarget(t),this._target=null}},e.prototype.resetTarget=function(e){if(null!=this._target)switch(e){case EnumTouchEffect.ADD_SCALE:case EnumTouchEffect.MIN_SCALE:this._target.scaleX=this._target.scaleY=1;break;case EnumTouchEffect.ALPHA:this._target.alpha=1}},e.prototype.bind=function(e,t){e&&(0==this._bindHash.has(e)&&e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this._bindHash.put(e,t))},e.prototype.unbind=function(e){if(e&&this._bindHash.has(e)){if(this._target==e){var t=this._bindHash.get(e);App.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.resetTarget(t),this._target=null}this._bindHash.remove(e),e.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this)}},e.prototype.unBindAll=function(){if(this._bindHash){for(var e,t,i=this._bindHash.keys,n=0,o=i.length;o>n;n++)e=i[n],e==this._target&&(t=this._bindHash.get(e),this.resetTarget(t)),e.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this);App.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this._bindHash.clear()}this._target=null},e.prototype.dispose=function(){this.unBindAll(),this._bindHash=null},e}();__reflect(TouchEffectBinder.prototype,"TouchEffectBinder");var UserAgreeItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onAddStage=function(t){e.prototype.onAddStage.call(this,t),this._isChanged&&(this._isChanged=!1,this.getLabel().text=this.data)},t.prototype.dataChanged=function(){this.parent?(this.getLabel().text=this.data,this._isChanged=!1):this._isChanged=!0},t.prototype.getLabel=function(){return this.txt||(this.txt=new eui.Label,this.txt.size=22,this.txt.lineSpacing=26,this.txt.width=560,this.txt.textColor=6710886,this.addChild(this.txt)),this.txt},t}(ItemRenderer);__reflect(UserAgreeItem.prototype,"UserAgreeItem");var BagItemCenter=function(){function e(){}return e}();__reflect(BagItemCenter.prototype,"BagItemCenter");var BaseCenter=function(){function e(){}return e}();__reflect(BaseCenter.prototype,"BaseCenter");var ProtocolHttpUrl=function(){function e(){}return Object.defineProperty(e,"ip",{get:function(){return this._ip?this._ip:Config.isRelease?Config.isHttps?"https://avg.dmgame.com":"http://csserver.kdfa.cn":Config.isHttps?"https://xdcs.aqgame.cn:3333":"http://192.168.0.121:8888"},set:function(e){this._ip=e},enumerable:!0,configurable:!0}),e._ip=null,e.loginSoeasy="/user/soeasy/login",e.loginVivo="/user/login/vivo/",e.loginXiaoMi="/user/login/xiaomi/",e.loginWanBa="/user/login/wanba/",e.register="/user/register/",e.login="/user/login/",e.android_login="/user/login/android/",e.ios_login="/user/login/iphone/",e.k7k7_login="/user/login/7k7k/",e.u8_login="/user/login/u8/",e.fitlerList="/game/attention/fitler/list/",e.h5_360="/user/login/360/",e.tel_code_send_handler="/user/tel/send/code",e.heroine_version="/heroine/version/number",e.user_token="/user/token",e.user_list="/heroine/list",e.heroine_info="/heroine/info",e.tel_login="/user/tel/login",e.user_info="/user/info",e.user_out="/user/logout",e.tourist_login="/user/tourist",e.tourist_login_ios="/user/tourist/iphone/",e.shop_please_pay="/shop/please/pay",e.Untied_old_phone="/user/unbind/tel/code",e.Untied_old_Newphone="/user/unbind/newtel",e.Untied_new_code="/user/unbind/new/tel/code",e.user_tel_bind_code="/user/tel/bind/code",e.user_tel_bind_user="/user/tel/bind/user",e.user_close_favorite="/user/close/favorite",e.user_favorite_list="/user/favorite/list",e.user_collect_kill="/user/collect/kill",e.user_collect_info="/user/collect/info",e.user_use_wallpaper="/user/use/wallpaper",e.user_cancel_wallpaper="/user/cancel/wallpaper",e.heroine_archive_list="/heroine/archive/list",e.char_love_one_click="/char/love_one/click",e.shop_is_shop="/shop/is_shop",e.ios_is_bought="/payment/apple/notify/",e.user_bind_name="/user/bind/name",e.get_avg_system_init="/Avg/System/Init",e.share_link="/share/link",e.game_version="/user/info",e.random_role_name="/user/name/random",e.chat_init="/chat/info",e.chat_select="/chat/select",e.bename="/chat/save/name",e.chat_review="/chat/history/dialogue",e.chat_save_schedule="/chat/save/schedule",e}();__reflect(ProtocolHttpUrl.prototype,"ProtocolHttpUrl");var ProtocolCommon=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.instance=function(){return null==this._instance&&(this._instance=new t),this._instance},t.prototype.sendLoginSoeasy=function(e,i){t.sendBack(ProtocolHttpUrl.loginSoeasy,e,i)},t.prototype.send_share_link=function(e,t,i){ProtocolGame2.sendBack(ProtocolHttpUrl.share_link,{heroine_id:e,chat_id:t},i)},t.prototype.send_get_avg_system_init=function(){t.sendBack(ProtocolHttpUrl.get_avg_system_init,{},new FunctionVO(this.receive_get_avg_system_init,this),!1)},t.prototype.receive_get_avg_system_init=function(e){ResponseUtil.checkResponseData(e)&&(App.global.userInfo.loginVideo=e.data.login_animation,App.global.userInfo.startVideo=e.data.splash_screen,App.dispatcher.dispatchEvent(LoginEvent.GET_AVG_SYSTEM_INIT))},t.prototype.send_u8_login=function(e,i){t.sendBack(ProtocolHttpUrl.u8_login,e,i)},t.prototype.send_android_login=function(e,i){t.sendBack(ProtocolHttpUrl.android_login,e,i)},t.prototype.send_ios_login=function(e,i){t.sendBack(ProtocolHttpUrl.ios_login,e,i)},t.prototype.send_user_token=function(){t.send(ProtocolHttpUrl.user_token,{},this.receive_user_token,this,!1)},t.prototype.receive_user_token=function(e){ResponseUtil.checkResponseData(e)?(App.global.userInfo.uid=Number(e.data),App.dispatcher.dispatchEvent(LoginEvent.CHECK_LOGIN_BACK,!0)):App.dispatcher.dispatchEvent(LoginEvent.CHECK_LOGIN_BACK,!1)},t.prototype.send_tel_code=function(e,i){t.sendBack(ProtocolHttpUrl.tel_code_send_handler,{tel:e},i)},t.prototype.send_tel_login=function(e,i,n,o){t.sendBack(ProtocolHttpUrl.tel_login,{tel:e,code:i,channel_id:n},o)},t.prototype.send_tourist_login=function(e,i){t.sendBack(ProtocolHttpUrl.tourist_login,{channel_id:e},i)},t.prototype.send_tourist_login_ios=function(e,i){t.sendBack(ProtocolHttpUrl.tourist_login_ios,{channel_id:e,user_name:IOSConfig.iosID},i)},t.prototype.send_login_out=function(e){t.sendBack(ProtocolHttpUrl.user_out,{},e)},t.prototype.send_heroineslist=function(e){t.sendBack(ProtocolHttpUrl.user_list,{version_id:Config.version},e)},t.prototype.send_heroinesDetail=function(e,i){t.sendBack(ProtocolHttpUrl.heroine_info,{heroine_id:e},i)},t.prototype.send_shop_please_pay=function(e,i,n){var o=DeviceUtil.currentSetting,a=DeviceUtil.payType;t.sendBack(ProtocolHttpUrl.shop_please_pay,{channel:a,type:e,good_id:i,setting:o,channel_id:App.global.userInfo.channelId},n)},t.prototype.send_alipay_switch=function(e,t,i){var n="/shop/alipay/switch?"+e;WebParams.openWindow(n,t)},t.prototype.send_heroine_version=function(e,i){void 0===i&&(i=-1),t.sendBack(ProtocolHttpUrl.heroine_version,{heroine_id:e,channel_id:App.global.userInfo.channelId?App.global.userInfo.channelId:"1"},new FunctionVO(this.onHttpVersionBack,this,i))},t.prototype.onHttpVersionBack=function(e,t){App.data.gameResourceCenter.parseData(e.data,t)},t.prototype.send_Untied_old_phone=function(e,i){GameLog.log("_code",e),null==e?t.sendBack(ProtocolHttpUrl.Untied_old_phone,{},i):t.sendBack(ProtocolHttpUrl.Untied_old_phone,{code:e},i)},t.prototype.send_Untied_old_Newphone=function(e,i,n){t.sendBack(ProtocolHttpUrl.Untied_old_Newphone,{phone:e,code:i},n)},t.prototype.send_Untied_new_code=function(e,i){t.sendBack(ProtocolHttpUrl.Untied_new_code,{phone:e},i)},t.prototype.send_tourist_bindphone=function(e,i,n){t.sendBack(ProtocolHttpUrl.user_tel_bind_user,{tel:e,code:i},n)},t.prototype.send_tourist_bindphone_code=function(e,i){t.sendBack(ProtocolHttpUrl.user_tel_bind_code,{tel:e},i)},t.prototype.send_user_close_favorite=function(e,i){t.sendBack(ProtocolHttpUrl.user_close_favorite,{heroine_id:e},i)},t.prototype.send_user_favorite_list=function(e,i,n,o){t.sendBack(ProtocolHttpUrl.user_favorite_list,{type:e,heroine_id:i,limit:n},o)},t.prototype.send_user_collect_info=function(e,i,n,o){t.sendBack(ProtocolHttpUrl.user_collect_info,{type:e,heroine_id:i,keep_id:n},o)},t.prototype.send_user_collect_kill=function(e,i,n){t.sendBack(ProtocolHttpUrl.user_collect_kill,{heroine_id:e,keep_id:i},n)},t.prototype.send_user_use_wallpaper=function(e,i,n){t.sendBack(ProtocolHttpUrl.user_use_wallpaper,{heroine_id:e,keep_id:i},n)},t.prototype.send_user_cancel_wallpaper=function(e,i,n){t.sendBack(ProtocolHttpUrl.user_cancel_wallpaper,{heroine_id:e,keep_id:i},n)},t.prototype.send_heroine_archive_list=function(e){t.sendBack(ProtocolHttpUrl.heroine_archive_list,{heroine_id:e},new FunctionVO(this.onRecordList,this))},t.prototype.onRecordList=function(e){App.dispatcher.dispatchEvent(RecordEvent.RECORD_LIST,e)},t.prototype.send_chat_save_schedule=function(e,i,n){t.sendBack(ProtocolHttpUrl.chat_save_schedule,{heroine_id:e,schedule_id:i},n)},t.prototype.send_ChatInfo=function(e,i,n){t.sendBack(ProtocolHttpUrl.chat_init,{heroine_id:e,schedule_id:i},n)},t}(ProtocolBase);__reflect(ProtocolCommon.prototype,"ProtocolCommon");var ProtocolFangDong=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.instance=function(){return null==this._instance&&(this._instance=new t),this._instance},t.prototype.send_random_name=function(){ProtocolBase.sendBack(ProtocolHttpUrl.random_role_name,{},new FunctionVO(this.receive_random_name,this))},t.prototype.receive_random_name=function(e){ResponseUtil.checkResponseData(e)&&App.dispatcher.dispatchEvent(GameEvent.GAME_RANDOM_NAME,e.data)},t.prototype.send_bename=function(e,t){ProtocolBase.sendBack(ProtocolHttpUrl.bename,{user_name:e,heroine_id:t},new FunctionVO(this.receive_bename,this))},t.prototype.receive_bename=function(e){ResponseUtil.checkResponseData(e)&&App.dispatcher.dispatchEvent(GameEvent.GAME_BENAME,e.data)},t.prototype.send_chat_init=function(e,t){void 0===t&&(t=0),ProtocolBase.sendBack(ProtocolHttpUrl.chat_init,{heroine_id:e,schedule_id:t,channel_id:App.global.userInfo.channelId},new FunctionVO(this.receive_chat_init,this))},t.prototype.receive_chat_init=function(e){ResponseUtil.checkResponseData(e)&&(App.data.gameFangDongCenter.parse(e.data),App.dispatcher.dispatchEvent(GameEvent.GAME_INIT))},t.prototype.send_chat_select=function(e,t){void 0===t&&(t=0),ProtocolBase.sendBack(ProtocolHttpUrl.chat_select,{heroine_id:e,options:t,channel_id:App.global.userInfo.channelId},new FunctionVO(this.receive_chat_select,this))},t.prototype.receive_chat_select=function(e){ResponseUtil.checkResponseData(e)&&(App.data.gameFangDongCenter.parse(e.data),App.dispatcher.dispatchEvent(GameEvent.GAME_NEXT))},t.prototype.send_chat_review=function(e,t){void 0===t&&(t=1),ProtocolBase.sendBack(ProtocolHttpUrl.chat_review,{heroine_id:e,limit:t},new FunctionVO(this.receive_chat_review,this))},t.prototype.receive_chat_review=function(e){ResponseUtil.checkResponseData(e)&&App.dispatcher.dispatchEvent(GameEvent.GAME_REVIEW_DATA,e.data)},t}(ProtocolBase);__reflect(ProtocolFangDong.prototype,"ProtocolFangDong");var ProtocolGame2=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.instance=function(){return null==this._instance&&(this._instance=new t),this._instance},t.prototype.send_channel_offer=function(e,i){t.sendCommom(ProtocolHttpUrlGame2.channel_new_offer,{channel_id:e},i)},t.prototype.send_upgrade_status=function(e){t.sendCommom(ProtocolHttpUrlGame2.upgradeStatus,{},e)},t.prototype.sendGame2NameBind=function(e,t){ProtocolBase.sendBack(ProtocolHttpUrl.user_bind_name,{name:e},t,!0,ProtocolHttpUrl.ip)},t.sendCommom=function(e,t,i,n){void 0===n&&(n=!1),t=this.extendObj(ProtocolHttp.httpHead,t),ProtocolBase.sendBack(e,t,i,n,null,!1)},t.extendObj=function(e,t){var i={};for(var n in t)i.hasOwnProperty(n)||(i[n]=t[n]);for(var n in e)i.hasOwnProperty(n)||("Authorization"==n?i[n]=App.data.game2Center.DataCenter.skey:i[n]=e[n]);return i.AuthorizationID=App.global.userInfo.uid,i},t}(ProtocolBase);__reflect(ProtocolGame2.prototype,"ProtocolGame2");var ProtocolHttpUrlGame2=function(){function e(){}return Object.defineProperty(e,"url",{get:function(){return Config.isRelease?Config.isHttps?"https://www.dmgame.com":DeviceUtil.IsNative?"http://www.dmgame.com:80":"http://47.104.85.224:3000":(Config.isHttps,"http://192.168.0.121:8087")},enumerable:!0,configurable:!0}),e.loginVivo="/user/login/vivo/",e.loginXiaoMi="/user/login/xiaomi/",e.loginWanBa="/user/login/wanba/",e.paymentWanbaDo="/payment/wanba/do/",e.userInviteGain="/user/invite/gain/",e.userSpecialGoods="/user/special/goods/",e.userSGR="/user/special/goods/refresh/",e.userSGB="/user/special/goods/buy/",e.register="/user/register/",e.login="/user/login/",e.k7k7_login="/user/login/7k7k/",e.guest="/user/guest/",e.logout="/user/logout/",e.gameinfo="/game/info/",e.chat="/chat/finish/",e.loves="/user/loves/",e.loveStart="/love/start/",e.loveFinish="/love/finish/",e.loveFinishNow="/love/finish/immediate/",e.works="/user/works/",e.workStart="/work/start/",e.workFinish="/work/finish/",e.workFinishNow="/work/finish/immediate/",e.workPromotion="/work/promotion/",e.userChats="/user/chats/",e.toolsBuy="/shop/tool/buy/",e.giftBuy="/shop/gift/buy/",e.bags="/user/bags/",e.prepare="/game/prepare/",e.upgrade="/game/level/upgrade/",e.videoBuy="/user/video/buy/",e.videoPlay="/video/play/",e.weiboComment="/weibo/comment/",e.weiboApprove="/weibo/approve/",e.useTool="/shop/tool/use/",e.giftForUser="/shop/ios/gift/to/user/",e.powerGain="/power/gain/",e.mailList="/mail/list/",e.mailLingqu="/mail/gain/",e.guide="/guide/will_do_guide/",e.guideDone="/guide/step_done/",e.randomName="/user/name/random/",e.nameBind="/user/name/bind/",e.protocalImg="/user/princeple/",e.tiliStatus="/user/power/status/",e.videoUrl="/video/url/",e.payStatusH5="/user/pay/status/",e.shareGain="/share/gain/",e.loginReward="/user/login/reward/",e.gainLoginReward="/user/login/reward/gain/",e.fpayReward="/user/fpay/reward/",e.inviteGain="/user/invite/gain/",e.rewardGin="/user/fpay/reward/gain/",e.videoList="/user/videos/",e.userCollections="/user/collections/",e.userBgiUnlock="/user/bgi/unlock/",e.userBgiSet="/user/bgi/set/",e.attention="/game/attention/",e.u8_login="/user/login/u8/",e.authorInfo="/game/author/info/",e.upgradeStatus="/client/upgrade/status/",e.getTotal_pay="/user/tpay/reward/gain/",e.dlc_getChapters="/extra/chapters/",e.dlc_getChaptersDetail="/extra/chapters/detail/",e.dlc_storyNex="/extra/story/next/",e.dlc_skip="/extra/story/skip/",e.dlc_storyFinish="/extra/story/finish/",e.lingqumonthly="/shop/gift/monthly/",e.fitlerList="/game/attention/fitler/list/",e.h5_360="/user/login/360/",e.fd_start_info="/fd/start/info/",e.channel_new_offer="/channel/new/offer/",e}();__reflect(ProtocolHttpUrlGame2.prototype,"ProtocolHttpUrlGame2");var Alert2UI=function(e){function t(){return e.call(this,"Alert2Skin")||this}return __extends(t,e),t}(BaseUI);__reflect(Alert2UI.prototype,"Alert2UI");var AlertUI=function(e){function t(){return e.call(this,"AlertSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(AlertUI.prototype,"AlertUI");var GameShare2UI=function(e){function t(){return e.call(this,"GameShare2Skin")||this}return __extends(t,e),t}(BaseUI);__reflect(GameShare2UI.prototype,"GameShare2UI");var GameShareUI=function(e){function t(){return e.call(this,"GameShareSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(GameShareUI.prototype,"GameShareUI");var RetryConnectUI=function(e){function t(){return e.call(this,"RetryConnectSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(RetryConnectUI.prototype,"RetryConnectUI");var EndingViewUI=function(e){function t(){return e.call(this,"EndingViewSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(EndingViewUI.prototype,"EndingViewUI");var GameHallChangePasswordUI=function(e){function t(){return e.call(this,"GameHallChangePasswordSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(GameHallChangePasswordUI.prototype,"GameHallChangePasswordUI");var GameHallSettingUI=function(e){function t(){return e.call(this,"GameHallSettingSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(GameHallSettingUI.prototype,"GameHallSettingUI");var GameHallUI=function(e){function t(){return e.call(this,"GameHallSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(GameHallUI.prototype,"GameHallUI");var GmUI=function(e){function t(){return e.call(this,"GmSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(GmUI.prototype,"GmUI");var GameLoadingUI=function(e){function t(){var t=e.call(this)||this;return t.euiSkinName="LoadingSkin",t}return __extends(t,e),t}(BaseUI);__reflect(GameLoadingUI.prototype,"GameLoadingUI");var LoadingResUI=function(e){function t(){return e.call(this,"LoadingResSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(LoadingResUI.prototype,"LoadingResUI");var GameOtherLoginUI=function(e){function t(){return e.call(this,"OtherLoginSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(GameOtherLoginUI.prototype,"GameOtherLoginUI");var LoginUI=function(e){function t(){return e.call(this,"LoginSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(LoginUI.prototype,"LoginUI");var TouristloginUI=function(e){function t(){return e.call(this,"TouristloginSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(TouristloginUI.prototype,"TouristloginUI");
var UserAgreementUI=function(e){function t(){return e.call(this,"UserAgreementSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(UserAgreementUI.prototype,"UserAgreementUI");var MemoryViewUI=function(e){function t(){return e.call(this,"MemoryViewSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(MemoryViewUI.prototype,"MemoryViewUI");var WindowView2UI=function(e){function t(){return e.call(this,"WindowView2Skin")||this}return __extends(t,e),t}(BaseView);__reflect(WindowView2UI.prototype,"WindowView2UI");var WindowViewUI=function(e){function t(){return e.call(this,"WindowViewSkin")||this}return __extends(t,e),t}(BaseView);__reflect(WindowViewUI.prototype,"WindowViewUI");var RecordUI=function(e){function t(){return e.call(this,"RecordSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(RecordUI.prototype,"RecordUI");var HeroinesDetailUI=function(e){function t(){return e.call(this,"HeroniesDetailSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(HeroinesDetailUI.prototype,"HeroinesDetailUI");var HeroniesBuyUI=function(e){function t(){return e.call(this,"HeroniesBuySkin")||this}return __extends(t,e),t}(BaseUI);__reflect(HeroniesBuyUI.prototype,"HeroniesBuyUI");var HeroniesSettingUI=function(e){function t(){return e.call(this,"HeroniesSettingSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(HeroniesSettingUI.prototype,"HeroniesSettingUI");var VideoButtonUI=function(e){function t(){var t=e.call(this,"VideoButtonSkin")||this;return t.btnBack.visible=!1,t.btnPlay.visible=!1,t.btnUse.visible=!1,t.btnShare.visible=!1,t}return __extends(t,e),t}(BaseUI);__reflect(VideoButtonUI.prototype,"VideoButtonUI");var GameFangDongBeNameUI=function(e){function t(){return e.call(this,"BenameSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(GameFangDongBeNameUI.prototype,"GameFangDongBeNameUI");var GameFangDongBuyUI=function(e){function t(){return e.call(this,"GameFangDongBuySkin")||this}return __extends(t,e),t}(BaseUI);__reflect(GameFangDongBuyUI.prototype,"GameFangDongBuyUI");var GameFangDongChatUI=function(e){function t(){return e.call(this,"GameFangDongChatSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(GameFangDongChatUI.prototype,"GameFangDongChatUI");var GameFangDongMenuUI=function(e){function t(){return e.call(this,"GameFangDongMenuSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(GameFangDongMenuUI.prototype,"GameFangDongMenuUI");var GameFangDongReviewUI=function(e){function t(){return e.call(this,"GameFangDongReviewSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(GameFangDongReviewUI.prototype,"GameFangDongReviewUI");var GameFangDongSelectViewUI=function(e){function t(){return e.call(this,"GameFangDongSelectViewSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(GameFangDongSelectViewUI.prototype,"GameFangDongSelectViewUI");var GameFangDongUI=function(e){function t(){return e.call(this,"GameFangDongSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(GameFangDongUI.prototype,"GameFangDongUI");var InputNameViewUI=function(e){function t(){return e.call(this,"InputNamePanelSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(InputNameViewUI.prototype,"InputNameViewUI");var LoadSceneUI=function(e){function t(){return e.call(this,"LoadSceneSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(LoadSceneUI.prototype,"LoadSceneUI");var LoginSceneUI=function(e){function t(){return e.call(this,"LoginSceneSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(LoginSceneUI.prototype,"LoginSceneUI");var ActPanelUI=function(e){function t(){return e.call(this,"ActPanelSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(ActPanelUI.prototype,"ActPanelUI");var BagsPanelUI=function(e){function t(){return e.call(this,"BagsPanelSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(BagsPanelUI.prototype,"BagsPanelUI");var UseToolPanelUI=function(e){function t(){return e.call(this,"useToolPanelSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(UseToolPanelUI.prototype,"UseToolPanelUI");var CallHistoryPanelUI=function(e){function t(){return e.call(this,"CallHistoryPanelSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(CallHistoryPanelUI.prototype,"CallHistoryPanelUI");var GameResourceCenter=function(){function e(){this._configURL="",this._baseURL="",this._gameId=0,this._version="",this.start_name="heroine_",this.MAX_RES_CHAPTER=2,this.SOUND_SUFFIX="_sound",this.IMAGE_SUFFIX="_image",this.FILTER_MASK_KEYS=["brush_mask_tex_png","img_black_mask_png","img_shade_mask_png","memory_mask_tex_png","img_circle_blur_mask_png","img_circle_mask_png"]}return e.prototype.parseData=function(e,t){var i=this;if(this.hasResource()){if(this.checkResource(Number(e.heroine_id),e.oss,e.version))return this.closeOtherPanel(),void GameManager.startGame(Number(e.heroine_id),{saveId:t,id:Number(e.heroine_id)});GameManager.disposeGame(this._gameId),this.dispose()}else GameManager.lasetGameId==EnumGameID.GAME2&&(DeviceUtil.isMobile&&DeviceUtil.IsWeb||DeviceUtil.IsNative)&&(PanelManager.disposePanelyByGameId(EnumGameID.GAME2),App.res.destoryGroup([AssetConst.LoadPanel]),App.res.destoryGroup(DeviceUtil.isWebIOS?AssetConst.SOUND_RES_LIST:AssetConst.ONLY_IMAGE_RES_LIST));var n=this.start_name+Number(e.heroine_id),o=RES.getResourceInfo(n);o?(o.url=e.oss+(DeviceUtil.IsNative?"":"?v="+e.version),RES.hasRes(n)&&RES.destroyRes(n)):RES.$addResourceData({name:this.start_name+Number(e.heroine_id),type:RES.ResourceItem.TYPE_JSON,url:e.oss+(DeviceUtil.IsNative?"":"?v="+e.version)}),App.nativeBridge.log("start load resource config:"+e.oss),GameLog.log("开始加载资源配置文件:"+e.oss),RES.getResAsync(n,function(n){n?(GameLog.log("加载资源配置文件成功:"+e.oss),i.parseJsonData(Number(e.heroine_id),e.version,e.oss,n),i.closeOtherPanel(),GameManager.startGame(i._gameId,{id:i._gameId,saveId:t})):Notice.showBottomCenterMessage("加载配置文件失败,请重试")},this)},e.prototype.closeOtherPanel=function(){PanelOpenManager.removePanel(EnumPanelID.HEROINES_DETAIL),PanelOpenManager.removePanel(EnumPanelID.GAME_FANG_DONG_BUY),PanelOpenManager.removePanel(EnumPanelID.RECORD)},e.prototype.parseJsonData=function(e,t,i,n){this._gameId=e,this._version=t,this._configURL=i;var o=i.lastIndexOf("/");this._baseURL=i.substr(0,o+1),this._chapterResGroupNameList=[],this._chapterResourceKeyList=[],this._hasLoadedChapterList=[];for(var a,s,r,h=this.start_name+this._gameId+"_",p=n.resources,l=0,c=p.length;c>l;l++)r=p[l],r.url=this._baseURL+r.url+"?v="+t,r.extra=1,r.root="",RES.$addResourceData(r);for(var l=0,c=n.groups.length;c>l;l++)s=n.groups[l],a=s.name==h+"ui"?0:Number(s.name.substr(h.length)),this._chapterResGroupNameList[a]=s.name,this._chapterResourceKeyList[a]=this.parseKeys(0==a?s.keys.split(",").concat(this.FILTER_MASK_KEYS):s.keys.split(",")),0!=a?(RES.createGroup(s.name+this.IMAGE_SUFFIX,this._chapterResourceKeyList[a][0],!1),RES.createGroup(s.name+this.SOUND_SUFFIX,this._chapterResourceKeyList[a][1],!1)):RES.createGroup(s.name,this._chapterResourceKeyList[a][0],!1)},e.prototype.parseKeys=function(e){for(var t=0,i=e.length;i>t&&-1==e[t].indexOf("_mp3");t++);return[e.slice(0,t),e.slice(t)]},e.prototype.hasChapterResource=function(e){return null==this._chapterResGroupNameList?!1:1==this._hasLoadedChapterList[e]},e.prototype.hasChapterResourceByNative=function(e){if(null==this._chapterResGroupNameList)return!1;if(0==e)return App.res.isGroupLoaded(this._chapterResGroupNameList[e]);var t=App.res.isGroupLoaded(this._chapterResGroupNameList[e]+this.IMAGE_SUFFIX);return Config.soundAsyncLoad&&(t=t&&App.res.isGroupLoaded(this._chapterResGroupNameList[e]+this.SOUND_SUFFIX)),t},e.prototype.setLoadedResourceChapter=function(e){this._chapterResGroupNameList&&this._hasLoadedChapterList&&(this._hasLoadedChapterList[0]=!0,this._hasLoadedChapterList[e]=!0,0!=e&&this.needActivateSound&&this.createActivateSound(e))},e.prototype.disposeFreeChapter=function(e){if(this.getChapterResLoadedCount()>this.MAX_RES_CHAPTER){for(var t=[],i=1,n=this._hasLoadedChapterList.length;n>i;i++)1==this._hasLoadedChapterList[i]&&t.push({chapter:i,dis:Math.abs(e-i)});for(t.sort(function(e,t){return e.dis<t.dis?-1:e.dis>t.dis?1:0}),t=t.slice(2),i=0,n=t.length;n>i;i++)this.disposeChapter(t[i].chapter)}},e.prototype.createActivateSound=function(e){if(this._chapterResGroupNameList){this._chapterResGroupNameList[e]+this.SOUND_SUFFIX;this._activateSoundList=this._chapterResourceKeyList[e][1].concat([])}},e.prototype.activateSound=function(){if(this.needActivateSound&&this._activateSoundList&&this._activateSoundList.length>0){for(var e,t,i=0,n=this._activateSoundList.length;n>i;i++)e=RES.getRes(this._activateSoundList[i]),t=e.play(),t.stop();this._activateSoundList.length=0,this._activateSoundList=null}},Object.defineProperty(e.prototype,"needActivateSound",{get:function(){return DeviceUtil.isWebIOS},enumerable:!0,configurable:!0}),e.prototype.getChapterGroupName=function(e){return this._chapterResGroupNameList?0==e?this._hasLoadedChapterList[0]?[]:[this._chapterResGroupNameList[0]]:this._hasLoadedChapterList[0]?Config.soundAsyncLoad?[this._chapterResGroupNameList[e]+this.SOUND_SUFFIX,this._chapterResGroupNameList[e]+this.IMAGE_SUFFIX]:[this._chapterResGroupNameList[e]+this.IMAGE_SUFFIX]:Config.soundAsyncLoad?[this._chapterResGroupNameList[e]+this.SOUND_SUFFIX,this._chapterResGroupNameList[e]+this.IMAGE_SUFFIX,this._chapterResGroupNameList[0]]:[this._chapterResGroupNameList[e]+this.IMAGE_SUFFIX,this._chapterResGroupNameList[0]]:null},e.prototype.disposeChapter=function(e,t){if(void 0===t&&(t=!1),DeviceUtil.IsWeb&&!DeviceUtil.isMobile&&0==t)return void GameLog.log("PC端网页不做资源释放");if(this._chapterResGroupNameList){var i,n=this._chapterResGroupNameList[e];n&&(0==e?i=RES.destroyRes(n):(i=RES.destroyRes(n+this.IMAGE_SUFFIX),Config.soundAsyncLoad&&(i=i&&RES.destroyRes(n+this.SOUND_SUFFIX)))),GameLog.log("释放资源章节:"+e+"["+i+"]"),this._hasLoadedChapterList[e]=!1}},e.prototype.getChapterResLoadedCount=function(){var e=0;if(this._hasLoadedChapterList)for(var t=0,i=this._hasLoadedChapterList.length;i>t;t++)1==this._hasLoadedChapterList[t]&&e++;return e},e.prototype.dispose=function(){if(this._chapterResGroupNameList){for(var e=0,t=this._chapterResGroupNameList.length;t>e;e++)this._hasLoadedChapterList[e]&&this._chapterResGroupNameList[e]&&this.disposeChapter(e,!0);this._hasLoadedChapterList=null,this._chapterResGroupNameList=null,this._chapterResourceKeyList=null}this._configURL&&(this._configURL="",this._configJson="",this._baseURL="",this._gameId=0,this._version="")},e.prototype.playBgmSound=function(e){if(Config.soundAsyncLoad)App.sound.playBgm(e,2e3,!0,!0);else{var t=RES.getResourceInfo(e);t&&App.sound.playBgm(t.root+t.url,2e3,!1,!0)}},e.prototype.playVoice=function(e,t){if(Config.soundAsyncLoad)return App.sound.playVoiceByKey(e,t);var i=RES.getResourceInfo(e);return i?App.sound.playVoice(i.root+i.url,t):!1},e.prototype.playSound=function(e,t){if(Config.soundAsyncLoad)App.sound.playSoundByKey(e,!1,0,1,t);else{var i=RES.getResourceInfo(e);i&&App.sound.playSound(i.root+i.url,!1,0,1,t)}},e.prototype.getRes=function(e){return RES.getRes(e)},e.prototype.checkResource=function(e,t,i){return this._gameId==e&&this._configURL==t&&this._version==i},e.prototype.hasResource=function(){return""!=this._configURL&&0!=this._gameId&&""!=this._version},Object.defineProperty(e.prototype,"gameId",{get:function(){return this._gameId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"configURL",{get:function(){return this._configURL},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseURL",{get:function(){return this._baseURL},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!0,configurable:!0}),e}();__reflect(GameResourceCenter.prototype,"GameResourceCenter");var DianhuaPanelUI=function(e){function t(){return e.call(this,"DianhuaPanelSKin")||this}return __extends(t,e),t}(BaseUI);__reflect(DianhuaPanelUI.prototype,"DianhuaPanelUI");var JietongPanelUI=function(e){function t(){return e.call(this,"JietongPanelSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(JietongPanelUI.prototype,"JietongPanelUI");var DlcMainDocUI=function(e){function t(){return e.call(this,"DlcMainDocSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(DlcMainDocUI.prototype,"DlcMainDocUI");var DlcMainGameOverUI=function(e){function t(){return e.call(this,"DlcMainGameOverSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(DlcMainGameOverUI.prototype,"DlcMainGameOverUI");var DlcMainGameUI=function(e){function t(){return e.call(this,"DlcMainGameSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(DlcMainGameUI.prototype,"DlcMainGameUI");var DlcMainPanelUI=function(e){function t(){return e.call(this,"DlcMainPanelSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(DlcMainPanelUI.prototype,"DlcMainPanelUI");var LibaoCDUI=function(e){function t(){return e.call(this,"LibaoCDSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(LibaoCDUI.prototype,"LibaoCDUI");var LibaoFinishUI=function(e){function t(){return e.call(this,"LibaoFinishSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(LibaoFinishUI.prototype,"LibaoFinishUI");var LibaomiaohuiPanelUI=function(e){function t(){return e.call(this,"LibaomiaohuiPanelSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(LibaomiaohuiPanelUI.prototype,"LibaomiaohuiPanelUI");var LibaoVideoPanelUI=function(e){function t(){return e.call(this,"LibaoVideoPanelSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(LibaoVideoPanelUI.prototype,"LibaoVideoPanelUI");var FinishLovePanelUI=function(e){function t(){return e.call(this,"FinishLovePanelSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(FinishLovePanelUI.prototype,"FinishLovePanelUI");var LovePanelUI=function(e){function t(){return e.call(this,"LovePanelSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(LovePanelUI.prototype,"LovePanelUI");var LoveProPanelUI=function(e){function t(){return e.call(this,"LoveProPanelSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(LoveProPanelUI.prototype,"LoveProPanelUI");var NoticeDialogPanelUI=function(e){function t(){return e.call(this,"NoticeDialogPanelSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(NoticeDialogPanelUI.prototype,"NoticeDialogPanelUI");var RedPacketPanelUI=function(e){function t(){return e.call(this,"RedPacketPanelSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(RedPacketPanelUI.prototype,"RedPacketPanelUI");var RedPacketRemindPanelUI=function(e){function t(){return e.call(this,"RedPacketRemindPanelSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(RedPacketRemindPanelUI.prototype,"RedPacketRemindPanelUI");var MailDataPanelUI=function(e){function t(){return e.call(this,"MailDataPanelSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(MailDataPanelUI.prototype,"MailDataPanelUI");var MailPanelUI=function(e){function t(){return e.call(this,"MailPanelSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(MailPanelUI.prototype,"MailPanelUI");var ProtocolPanelUI=function(e){function t(){return e.call(this,"ProtocalPanelSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(ProtocolPanelUI.prototype,"ProtocolPanelUI");var SetPanelUI=function(e){function t(){return e.call(this,"SetPanelSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(SetPanelUI.prototype,"SetPanelUI");var SharePanelUI=function(e){function t(){return e.call(this,"SharePanelSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(SharePanelUI.prototype,"SharePanelUI");var ShipinPanelUI=function(e){function t(){return e.call(this,"ShipinPanelSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(ShipinPanelUI.prototype,"ShipinPanelUI");var buyToolPanelUI=function(e){function t(){return e.call(this,"buyToolPanelSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(buyToolPanelUI.prototype,"buyToolPanelUI");var MysteriousShopUI=function(e){function t(){return e.call(this,"MysteriousShopSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(MysteriousShopUI.prototype,"MysteriousShopUI");var ShopDiamondPanelUI=function(e){function t(){return e.call(this,"ShopDiamondPanelSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(ShopDiamondPanelUI.prototype,"ShopDiamondPanelUI");var ShopGiftToolPanelUI=function(e){function t(){return e.call(this,"ShopGiftToolPanelSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(ShopGiftToolPanelUI.prototype,"ShopGiftToolPanelUI");var ShopGoldPanelUI=function(e){function t(){return e.call(this,"ShopGoldPanelSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(ShopGoldPanelUI.prototype,"ShopGoldPanelUI");var ShopUI=function(e){function t(){return e.call(this,"ShopPanelSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(ShopUI.prototype,"ShopUI");var WeiBoPanelUI=function(e){function t(){return e.call(this,"WeiBoPanelSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(WeiBoPanelUI.prototype,"WeiBoPanelUI");var WeixinPanelUI=function(e){function t(){return e.call(this,"WeixinPanelSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(WeixinPanelUI.prototype,"WeixinPanelUI");var FinishWorkPanelUI=function(e){function t(){return e.call(this,"FinishWorkPanelSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(FinishWorkPanelUI.prototype,"FinishWorkPanelUI");var WorkPanelUI=function(e){function t(){return e.call(this,"WorkPanelSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(WorkPanelUI.prototype,"WorkPanelUI");var WorkProPanelUI=function(e){function t(){return e.call(this,"WorkProPanelSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(WorkProPanelUI.prototype,"WorkProPanelUI");var MilletSDK=function(){function e(){this.millet=!1,this.init()}return e.getInstance=function(){if(e.instance_){if(!e.instance_.milletData)try{e.instance_.milletData=milletConfig}catch(t){}}else e.instance_=new e;return e.instance_},e.prototype.init=function(){try{"auth_millet"==window.auth_type&&(GameLog.log("auth_millet  初始化---"),this.millet=window.auth_type)}catch(e){}},e.prototype.login=function(e,t){login(e,t)},e.prototype.pay=function(e,t,i,n,o,a,s){void 0===s&&(s=1);var r=function(e){e?o.call(a):Notice.showBottomCenterMessage("支付失败")};paySome(e,t,i,n,r)},e.prototype.h5GamePay=function(e,t,i,n){void 0===n&&(n=1)},e}();__reflect(MilletSDK.prototype,"MilletSDK");var WanBaSDK=function(){function e(){this.init()}return e.getIntance=function(){return e.instance_||(e.instance_=new e),e.instance_},e.prototype.init=function(){try{this.wanBaData=window.auth_wanBa;var t=window;t.getOpenKey(function(t){GameLog.log("异步获取openkey-->"+JSON.stringify(t)),e.getIntance().wanBaData.openkey=t.data.openkey}),GameLog.log("获取到玩吧数据，WanBaSDK-->"+this.wanBaData);var i=function(e){var t=document.location.href,i=t.indexOf(e+"=");if(-1==i)return!1;var n=t.slice(e.length+i+1),o=n.indexOf("&");return-1!=o&&(n=n.slice(0,o)),n};this.gift=i("GIFT")}catch(n){}},e.prototype.showShareMenu=function(){try{if(1==this.wanBaData.platform);else{var e=0;"SQ"==this.wanBaData.qua.app||"QZ"==this.wanBaData.qua.app||"WX"==this.wanBaData.qua.app||"QQLive"==this.wanBaData.qua.app,mqq.ui.shareMessage({title:"心动女生",desc:"大家一起来玩吧",share_type:e,share_url:this.wanBaData.jumpurl,image_url:this.wanBaData.appicon,back:!0},function(e){GameLog.log("注册分享信息回调  ios->"+e)})}mqq.ui.shareArkMessage({title:"心动女生",desc:"大家一起来玩吧",share_url:this.wanBaData.jumpurl,image_url:this.wanBaData.appicon,back:!0},function(e){GameLog.log("注册分享信息回调  android->"+e)}),mqq.ui.showShareMenu()}catch(t){GameLog.log(t)}},e.prototype.collectSendToDesktop=function(t){try{GameLog.log("收藏发送到桌面-->"),mqq.ui.addShortcut({action:"web",title:"心动女生",icon:e.getIntance().wanBaData.appicon,url:e.getIntance().wanBaData.jumpurl,callback:t})}catch(i){GameLog.log(i)}},e}();__reflect(WanBaSDK.prototype,"WanBaSDK");var WanBaData=function(){function e(){}return e}();__reflect(WanBaData.prototype,"WanBaData");var LogCenter=function(){function e(){this.logHashMap=new HashMap,this.logTotalNum=0,this.logTotalCharLength=0}return e.prototype.inputMsgByType=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var n=this.logHashMap.get(e);null==n&&(n=[],this.logHashMap.put(e,n)),EnumLogType.indexArr[e]++;var o=EnumLogType.indexArr[e]+"、["+EnumLogType.typeArr[e]+"] "+t.join(" ")+"\n\n";n.push(o),this.logTotalNum++,this.logTotalCharLength+=o.length,n.length>=EnumLogType.maxArr[e]&&n.splice(10)},e.prototype.getMsgsByType=function(e){var t=[];return null!=this.logHashMap.get(e)&&(t=this.logHashMap.get(e)),t},e.prototype.getMsgsByRegExp=function(e,t){for(var i=[],n=new RegExp(t),o=this.getMsgsByType(e),a=0;a<o.length;a++)n.test(o[a])&&i.push(o[a]);return i},e}();__reflect(LogCenter.prototype,"LogCenter");var UserAgreeInfo=function(){function e(){this.content1="	欢迎您申请我司提供的在线网络游戏《心动女生》游戏帐号。为了保障您的合法权益，请您在申请《心动女生》游戏帐号前，详细阅读并同意“《心动女生》用户服务协议”所有内容。\n\n《心动女生》用户服务协议（简称为“本协议”）系由《心动女生》用户（在本条款中简称为“用户或您”）与本公司——深圳市正易龙科技有限公司（在本条款中简称为“我司或我们”）就《心动女生》商业化运营服务（以下统称为“产品和服务”）所订立的协议。如果您获得并使用我们所提供的产品和服务，本条款目的为告知您在申请帐号、进行游戏、购买和使用我们所提供的游戏产品和服务中，发生的其他任何可能影响您、我们或其他玩家权益时，应注意及遵守的事项。\n\n重要须知：\n\n在您决定成为《心动女生》正式用户前，您必须认真阅读和同意本用户条款。您必须在完全同意以下条款及其附加其他服务条款和管理制度的前提下，才能完成注册程序，成为《心动女生》用户后，才能使用我们所提供的服务。\n\n您一旦注册成为《心动女生》游戏的用户，表示您已经同意以下及后面的附加服务条款和管理制度。\n\n本条款的修改权和解释权归我司所有。\n\n1、服务内容\n\n1.1 服务名称及内容：《心动女生》游戏及我司提供的与《心动女生》游戏配套的网站服务，包括微信公众号、资讯等服务。\n\n1.2 服务提供方：深圳市正易龙科技有限公司\n\n1.3 服务条款的确认与接纳：\n\n我司同意按照本协议的规定及其不时发布的规则提供本协议规定的服务，为获得本服务，服务使用人(以下称“用户”)同意本协议的全部条款并按照页面上的提示完成全部的注册程序。用户在进行注册程序过程中点击“同意”按钮即表示用户完全接受本协议项下的全部条款，遵守以该注册用户名能够享受到的所有服务的条款及管理规则。\n\n用户在使用我司提供的各项服务之前，应仔细阅读本服务协议，特别是免除或者限制我司责任的免责条款及对用户的权利限制。如用户不同意本服务协议或随时对其的修改，请停止使用我司提供的服务。\n\n1.4 提示：我司仅提供相关的网络服务，除此之外与相关网络服务有关的设备(如电脑、调制解调器及其他与接入互联网有关的设备)及所需的费用(如为接入互联网而支付的电话费及上网费)均应由用户自行负担。\n",this.content2="2、用户规则\n\n2.1 用户注册规则\n\n2.1.1 用户须承诺在申请用户名时遵循如下规定：\n\n（1）用户名的注册及使用须遵守网络道德，遵守中华人民共和国的有关法律法规；\n\n（2）用户名中不得含有任何威胁、恐吓、漫骂、庸俗、亵渎、色情、淫秽、非法、反动、前后矛盾、攻击性、伤害性、骚扰性、诽谤性、辱骂性的或侵害他人知识产权的文字。不得涉及政治、国家领导人或宗教领导人，以及任何可能引起法律纠纷的文字。\n\n2.1.2 用户可以申请新的用户名，但不可以要求删除旧的用户名。\n\n2.1.3 我司根据需要，有权随时对含有相关词语的用户名予以保留注册。对已注册成功的用户，若含有我司禁止或保留注册词语的，我司亦保留强制更名或删除用户名的权利。\n\n2.1.4 我司仅面对个人用户，任何单位或其它组织均不允许注册成为《心动女生》游戏用户。\n\n2.2 用户密码管理规则\n\n2.2.1用户有义务妥善保管使用在注册《心动女生》网络游戏时获得的账号及密码，并为此账号及密码登入系统后所开始的一连串行为或活动负责。\n\n2.2.2为维护自身权益，用户必须保管好自己的用户名和密码，谨防被盗或泄露。因密码被盗或泄露造成的全部责任和损失均由用户本人承担，我司概不负责。\n\n2.2.3用户因忘记密码或密码被盗向我司提出修改密码请求时，必须提供完全正确的身份信息，否则我司有权本着为用户保密的原则不予告知。\n\n2.2.4若用户发现账号或密码遭他人非法使用或有异常使用的情形，应立即通知我们，并提交该账号为本人所有的有关证明，以便申请该账号的暂停使用，因此而造成的损失，我们不承担赔偿责任。但在用户根据法律规定申请报警立案的情况下，我们有义务协助警方查询。\n\n2.3 用户资料\n\n2.3.1 用户在申请使用《心动女生》游戏服务时，请按下列要求提供用户的资料：\n\n（1）用户同意于注册时提供完整、及时、详尽及真实的个人资料，包括真实的姓名及合法证件、联系方式。\n\n（2）不断更新注册资料，符合完整、及时、详尽、准确的要求。若用户所提供的资料与事实不符或所提供的资料业已变更而未更新或有任何误导之嫌而导致我们无法为用户提供或继续提供服务，我们不因此承担任何责任。\n\n2.3.2 我司采取如下措施对用户资料进行管理：\n\n（1）个人身份识别资料一经注册，除特殊情况下经我司许可外，用户无权进行单方面变更。\n\n（2）用户不可以使用任何第三方程序登陆或使用我们所提供的网络服务。用户不可以使用我们任何知识产权，来创造或提供相同或类似的网络服务，如仿真服务器等。用户不可以对我们服务器采取任何的Hack(非法攻击)行为，或是尝试着使我们服务器过度负荷。用户在拥有合法的账号下，可以在我们的服务器上传使用网络服务所必须的资料，资料的内容不得有如下：\n\n(a)侵犯任何第三者的知识产权、版权，或公众、私人权利；\n\n(b)违反任何法律或道德标准；\n\n(c)包含任何毁谤他人，性骚扰，种族歧视，或对孩童有不良影响的内容；\n\n(d)包含病毒、木马、定时炸弹等可能对我们系统造成伤害或影响其稳定性的内容。\n\n我们将会依照上传内容的严重性采取任何动作。用户在此授权我们执行任何有关用户上传的内容的知识产权。\n\n2.3.3 除用户自行填写的注册资料及用户购买的钻石外，其它在《心动女生》游戏上产生的游戏数据均由我司视相关功能或统计或增强游戏娱乐性之需要而生成，其所有权由我司享有。\n\n2.4 用户隐私保护条款\n\n2.4.1 尊重用户个人隐私是我司的基本原则。任何注册成为《心动女生》游戏的用户，我司均保证不会修改、不对外公开或向第三方提供用户注册资料及用户在使用网络服务时存储在《心动女生》游戏中具有隐私性的非公开内容，但下列情况除外：\n\n（1）事先获得用户的明确授权；\n\n（2）根据有关的法律法规要求；\n\n（3）按照相关政府主管部门的要求；\n\n（4）为维护社会公众的利益；\n\n（5）为维护我司的合法权益。\n\n2.4.2 我司可能会与第三方合作向用户提供相关的网络服务，在此情况下，如该第三方同意承担与我司同等的保护用户隐私的责任，则我司可将用户的注册资料等提供给该第三方。\n\n2.4.3 在不透露单个用户隐私资料的前提下，我司有权对整个用户数据库进行技术分析并对已进行分析、整理后的用户数据库进行商业上的利用。\n\n2.4.4 用户在《心动女生》游戏上产生的游戏数据的所有权均由我司享有，我司亦有权根据情况对相关游戏数据予以公开。\n\n2.4.5 尽管我司对用户的隐私权保护做了极大的努力，但是仍然不能保证现有的安全技术措施使用户的个人信息等不受任何形式的损害。\n\n2.5 用户使用规则\n\n2.5.1 用户注册成功后，必须保管好自己的用户名和密码，谨防被盗或泄露。此用户名及密码用于我司提供的《心动女生》游戏、网站及其它后续提供的服务。\n\n2.5.2 若用户将注册的用户名用于与他人在现实生活中进行交易或互易行为而产生的纠纷，我司概不负责。\n\n2.5.3 若用户连续六个月未使用、注册后三个月内再未使用过用户在《心动女生》游戏已注册的用户名，或注册用户名后一个月内从未登陆使用过的，我司保留收回用户的用户名、中断或终止该用户名服务的权利。\n\n2.5.4 用户在使用我司服务过程中，必须遵循以下规则：\n\n（1）遵守中国有关的法律和法规；\n\n（2）不得为任何非法目的而使用我司网站及《心动女生》游戏服务；\n\n（3）遵守所有与我司网站及《心动女生》游戏服务系统有关的网络协议、规定和程序；\n\n（4）用户不得利用本服务进行故意制作、传播计算机病毒等破坏性程序，不得针对本服务、与本服务连接的服务器或网络制造干扰、混乱，或违反连接本服务的网络的任何要求、程序、政策或规则；\n\n（5）不得利用我司网站及《心动女生》游戏服务系统传输、发表任何骚扰性的、中伤他人的、辱骂性的、恐吓性的、庸俗淫秽的或其他任何非法的信息资料；\n\n（6）不得利用我司网站及《心动女生》游戏服务进行任何不利于我司的行为；\n\n（7）就我司及合作商业伙伴的服务、产品、业务咨询应采取相应机构提供的沟通渠道，不得在公众场合发布有关我司及相关服务的负面宣传；\n\n（8）如发现任何非法使用用户帐号或帐号出现安全漏洞的情况，应立即通告我司，不得非法利用损害我司合法利益。\n\n2.5.5 用户违反2.6.4条款的，我司有权依据其制订并已公布的相关管理制度进行处罚，若给我司造成损失，或有其它损害我司利益的行为的，我司亦保留向用户追究法律责任及经济责任的权利。\n\n\n3、钻石\n\n3.1 钻石的介绍与发行\n\n3.1.1 钻石是在《心动女生》游戏中使用的虚拟货币，它是由我司发行，用户使用法定货币按一定比例购买，存在于游戏程序之外，以电磁记录方式存储于服务器内，并以特定数字单位表现的一种虚拟兑换工具。\n\n3.1.2 我司仅仅发行钻石，不提供任何形式的在《心动女生》游戏及相关网站上交易钻石的业务。我司亦采取了技术措施禁止了钻石在用户帐户之间的转移功能。\n\n3.1.3 我司发行钻石的范围为中华人民共和国境内。\n\n3.2 钻石的购买与价格\n\n3.2.1 用户可以通过下列方式购买钻石：\n\n（1）使用支付宝利用网上支付方式进行网上充值；\n\n（2）使用微信支付利用网上支付方式进行网上充值；\n\n（3）使用APP内购利用网上支付方式进行网上充值；\n\n（4）我司公布的其它可以使用的合法充值途径。\n\n3.2.2 除通过上述途径使用法定货币购买钻石外，我司不提供任何其它获得钻石的方式。\n\n3.2.3 钻石的单位购买价格为1元人民币购买5钻石。此单位购买价格经本协议确认后，除非经相关管理部门的批准，不再变更。\n\n3.2.4 用户必须经我司公布的正规渠道购买钻石，若使用非我司所制作的产品进行充值，或以非法的方式进行充值，而造成用户权益受损时，不得因此要求我司做任何补偿或赔偿，我司也将保有随时终止其账户资格及使用各项服务之权利。\n\n3.2.5 在使用我司充值系统时，用户必须仔细确认自身的账号，若因为自身输入错误、操作不当或不了解充值计费方式等因素，造成充错账号、选错充值种类等情形而损及自身权益的，所有损失均应由用户自行承担。\n\n3.2.6 用户充值成功后，亦不得要求退还产品，除非产品本身有瑕疵或无法使用。\n\n3.3 钻石的使用范围\n\n3.3.1 钻石的使用范围仅限于购买我司在《心动女生》游戏中所提供的虚拟服务，包括但不限于各种游戏道具，但不得用以支付、购买实物产品或兑换其它企业的任何产品和服务。\n\n3.3.2 钻石的使用范围并不仅限于购买我司当前提供的虚拟服务，我司随时有权在合法的范围内提供更多的其它虚拟服务。\n\n3.4 钻石的管理\n\n3.4.1 严禁用户利用钻石在《心动女生》游戏或网络或现实中进行任何非法活动，一经发现，《心动女生》游戏有权进行惩处，没收其钻石、停止使用资格直至删除用户帐户。\n\n3.4.2 《心动女生》游戏及我司网站不提供任何钻石转帐或交易系统，并禁止用户在《心动女生》游戏及我司网站等任何地方进行交易宣传或者含蓄的交易意向，严禁任何有偿转让钻石的行为，一经发现，《心动女生》游戏有权进行惩处，没收其钻石、停止使用资格直至删除用户帐户。\n\n3.4.3 用户在站外以其它形式进行的交易均不符合我司规定，所得权益不受我司保护，一经发现，立即对相关用户没收其钻石、停止使用资格直至删除用户帐户。\n\n3.4.4 严禁用户利用非法手段或作弊手段获取钻石,一经发现，《心动女生》游戏有权进行惩处，没收其钻石、停止使用资格直至删除用户帐户。\n\n3.4.5 我司有权对用户钻石的使用情况进行监控，并在发现用户有违反本协议或其它管理规则及法律法规时，对用户钻石的使用进行必要的限制，并对涉嫌违规用户可以采取没收其钻石、停止使用资格直至删除用户帐户的处理措施。\n\n4、用户权益保障措施\n\n4.1 权益保障\n\n4.1.1 用户帐号的合法权益我司通过密码、二级密码、密码保护、身份证验证等多种方式予以保护。\n\n4.1.2 用户可以随时查询自己的钻石数量、充值方式、充值时间等各种相关信息，用户钻石充值以及使用信息等相关记录都将自充值或使用之日起保留180天。\n\n4.1.3 用户的隐私我司均依据本协议第2.5条的规定予以严格保密。\n\n4.1.4 因我司违反本协议或相关法律法规等公司过错原因导致用户钻石损失的，由我司负责恢复用户损失的钻石。\n\n4.1.5 我司有责任并已实施使用了各种技术安全保障措施包括密码保护、服务器安全、数据加密、数据备份等方式以保障用户的合法权益。\n\n4.1.6 我司在对《心动女生》游戏进行管理的过程中，均有完善的用户协议及管理制度，对用户的管理与处罚均可做到有据可依。\n\n4.1.7 用户合法权益受到第三方不法侵害时，我司应积极协助进行取证并协调解决。\n\n4.1.8 用户之间在《心动女生》游戏产生争议的，我司均依照本协议及相关管理制度予以公正处理。\n\n4.1.9 我司全面终止《心动女生》游戏服务时，我司均依据本协议第5.3条的规定保障用户合法权益。\n\n4.2 申诉处理\n\n4.2.1 我司提供客服热线、客服邮箱、客服QQ三种方式随时接受用户投诉，上述三种联系方式于《心动女生》游戏及相关网站显著位置予以公示。\n\n4.2.2 对用户在钻石使用与帐号归属过程中与其它用户或第三方出现纠纷的，用户应出示与所注册的身份信息相一致的个人有效身份证件。我司在核实用户身份后，参照虚拟货币充值和转移记录，按照本协议及相关管理制度予以公正处理。\n\n4.2.3 用户对游戏作弊行为申诉的，按照《《心动女生》游戏作弊处罚制度》的相关规定进行处理。\n\n4.2.4 用户对不文明的游戏行为与言论申诉的，按《心动女生游戏文明游戏管理制度》的相关规定进行处理。\n\n4.2.5 用户对《心动女生》游戏的相关处罚申诉的，《心动女生》游戏依据本协议及相关管理制度、处罚事实与证据予以核查，并及时告知用户核查结果。\n\n5、服务的提供、变更、中断与终止\n\n5.1 服务的提供\n\n5.1.1 《心动女生》游戏中所有游戏客户端软件用户可以免费下载及使用，但不得有基于该软件的未经我司授权的任何商业行为。\n\n5.1.2 注册成《心动女生》游戏用户后，用户可享受《心动女生》游戏的免费及付费服务，购买及使用钻石。\n\n5.1.3 注册成《心动女生》游戏用户后，用户可登陆我司提供的配套网站和客户端，与其它用户进行自由沟通和交流。\n\n5.1.4 我司提供游戏服务的同时，有权制定与本协议有关的管理规则、游戏规则，有权对用户进行管理，有权通过技术手段查处作弊以及其它违规行为。\n\n5.2 服务的变更\n\n5.2.1 如因系统维护或升级的需要而暂停服务的，我司将尽可能事先进行通告。\n\n5.2.2 对于我司制订的所有规则，我司可在保证用户利益的前提下随时修改，修改后的规则我司将会在《心动女生》游戏配套网站上予以公告。规则修改后，若用户继续使用本协议所涉及的服务，则意味着用户同意规则的修改；否则，请终止本服务的使用。\n\n5.2.3 为保证《心动女生》游戏的公平性及可玩性，为保证《心动女生》游戏相关规则及其它游戏相关功能的有效实施，我司可在不影响用户正常使用游戏的情况下，采用必要的包括技术在内的措施对游戏进行改进或修改，对游戏功能予以修改、删除或增加，对我司这种改进或合理限制，用户应予以同意并遵守。\n\n5.2.4 我司可根据游戏相关功能的调整、规则的修改等对用户在《心动女生》游戏上的游戏数据予以相应的修改或删除。\n\n5.3 服务的中断及终止\n\n5.3.1 如发生下列任何一种情形，我司有权随时对用户进行必要限制，情节严重的可以中断或终止向用户提供本协议项下的服务而无需通知：\n\n（1）用户提供的个人资料不真实或使用他人资料的；\n\n（2）用户发表的言论违反国家法律规定及本服务相关管理规则的；\n\n（3）利用《心动女生》游戏服务系统漏洞作弊及非法开发和使用第三方软件（含外挂程序）的；\n\n（4）利用《心动女生》游戏服务系统进行赌博等非法活动的；\n\n（5）擅自转让游戏数据，及在《心动女生》游戏及配套网站上发布转让、交易信息的；\n\n（6）我司发现用户帐户异常情形，有地下交易或非法活动嫌疑的；\n\n（7）其它损害我司利益或违反本协议及本协议相关管理规则的行为。\n\n5.3.2 若因本协议及本协议相关管理规则的变更导致用户有异议或不满的，用户可自行终止服务或通知我司停止对用户服务，但我司无需承担任何责任。\n\n5.3.3 因5.3.1与5.3.2条款终止用户本协议项下服务、因其它原因用户自行要求终止本协议项下服务的，用户账号内未消费完的钻石不予退还。\n\n5.3.4 我司计划全面终止向所有用户提供《心动女生》游戏服务的，须提前60天予以公告。终止服务时，用户账号内未消费完的钻石可按购买价格扣除相应渠道成本后退回。\n\n5.3.5 《心动女生》游戏服务因停止服务接入、技术故障等我司自身原因连续中断服务30天的，视为5.3.4条所述的服务终止。\n\n5.3.6在本协议约定的情形下，我们就中断或停止或更改或终止向用户所提供的网络服务而可能产生的不便或损害，我们对用户本人或任何第三人均不负任何损害赔偿责任。\n\n6、知识产权保护\n\n6.1 我司及其关联公司依法享有本游戏的一切合法权属（包括但不限于知识产权）。本软件的全部著作权及一切其他知识产权，以及与本软件相关的所有信息内容，包括但不限于：音视频、文字表述机器组合、图片、图标、图示、色彩组合、界面设计、版面框架、印刷材料或电子文档等均受中国知识产权相关法律法规和有关的国际条约的保护。\n\n6.2 我司享有本游戏永久使用和播出（包括但不限于在移动互联网、数字电视、手机移动端等在内的有线、无线网络、各级视频播出机构）的权利或授权他人使用的权力等。如需商业使用，必须获得我司授权，并遵循国家相关法律、法规之规定。如因非法使用引起纠纷，一切后果由使用者承担。\n\n6.3 未经许可，任何媒体、网站或个人不得非法翻拍、录拍、转载、链接、转帖或以其他方式复制发布、发表本游戏图片、音视频素材。对不遵守本声明或其他违法、恶意使用本游戏文字、图片、音视频内容者，我司将依法行驶追究其法律责任及要求赔偿的权利。\n\n6.4 我司及其关联公司在涉及本游戏手游软件及相关各项服务中拥有专利权、商标权、著作权及其他知识产权。我司机器关联公司并未因为本协议或者因为向用户提供本软件及其相关服务而授予用户任何与本游戏手游相关的知识产权。\n\n6.5 我司发布的所有软件，包括《心动女生》游戏及《心动女生》游戏中所有游戏客户端软件均受中华人民共和国版权法保护，用户可以免费下载并使用，但未经我司许可，用户不得修改《心动女生》游戏的客户端程序；不得制作、传播或使用扰乱正常游戏秩序或有损我司利益的任何第三方软件。\n\n6.6 《心动女生》游戏服务的经营权属于我司所有，除非与我司另签协议，用户同意本服务仅供个人且仅于本服务平台范围内非商业性质的使用。用户同时承诺不经我司书面同意，不得利用本服务进行广告、销售、商业展示等商业性用途。\n\n6.7 用户发表于《心动女生》游戏及配套网站的所有内容仅代表用户自己的立场和观点，与我司无关，由用户本人承担一切法律责任。\n\n6.8 用户发表于《心动女生》游戏及配套网站的照片、文字著作权都属于用户本人所有，用户同时应保证该照片及文字无任何著作权属上的纠纷，因侵犯他人著作权导致的纠纷均由用户自行承担。\n\n6.9 用户同意将其上传的拥有著作权的照片、文字授予我司全球性、免许可费、非独家、可完全转授权、及永久有效的使用权利，我司可以为了展示、散布及推广张贴前述内容之特定目的，将前述内容以使用、复制、修改、改编、出版、翻译、据以创作衍生作品后用于其它增值业务。\n\n6.10 任何本游戏的注册用户均视为同意我司对侵权行为采取的一切法律措施。\n\n7、免责条款\n\n7.1 我司保证本服务中所有游戏程序均通过杀毒软件检测，保证不含任何病毒，并保证程序运行的安全性。由于用户使用不当造成的一切损失，均由用户本人承担。\n\n7.2 本服务涉及到互联网及移动通讯等服务，可能会受到各个环节不稳定因素的影响。因此服务存在因不可抗力、计算机病毒或黑客攻击、系统不稳定、用户所在位置、用户关机、GSM/EDGE/CDMA网络、互联网络、通信线路原因等造成的服务中断或不能满足用户要求的风险，我司不保证以下事宜：\n\n（1） 本服务将完全符合用户的要求；\n\n（2） 本服务将不受干扰、及时提供、安全可靠或不会出错。我司最大程度上保证本服务运行的稳定性、可靠性，但对于不可抗力或非公司过错原因导致的用户游戏数据或钻石损失、丢失或服务停止，我司不承担责任。\n\n7.3 因法律法规、政策及政府监管部门要求的变更，导致我司提供服务内容变更致使用户利益受损的，我司不承担责任。\n\n7.4 因用户自己原因造成用户名和密码被泄露或被盗而造成用户钻石或游戏数据损失的，我司不承担任何责任。\n\n7.5 用户若使用非本公司所制作的产品进行充值，或以非法的方式进行充值，责任由用户自行承担，我司同时保留采用必要法律手段追究用户法律责任的权利。\n\n7.6 用户因违反本协议、其他规章制度导致账号使用受限或完全冻结或删除造成的钻石或游戏数据损失的，我司不承担任何责任。\n\n7.7 我司需不时对硬件进行必要维护或《心动女生》游戏服务软件进行必要更新、管理，在此期间用户可能无法正常使用本协议提供的服务，我司无需对用户承担责任。\n\n7.8 我司仅提供《心动女生》游戏服务平台，任何使用该平台的用户之间或者用户与其它自然人、法人之间的纠纷均与我司无关。\n\n8、用户使用我司的网络服务的限制\n\n8.1	我司严禁用户利用、使用我们所提供的网络服务而做与使用该等服务无关的行为，包括但不仅限于妨害他人名誉或隐私权；或使用自己、匿名或冒用他人或我们名义散播诽谤、不实、威胁、不雅、猥亵、不法、攻击性或侵害他人权利的消息或文字，传播色情或其它违反社会公德的言论；传输或散布计算机病毒；从事广告或贩卖商品；从事不法交易或张贴虚假不实或引人犯罪的信息；或任何违反中华人民共和国法律或其它法令的行为，亦不得利用、使用该等服务的机会，与其它用户或他人进行非法的交涉或对话。 \n\n8.2	用户对我司服务管理人员所进行的询问应据实澄清，否则我们有权随时终止用户使用我们所提供的网络服务；我们发现不法或可疑的行为者，我们有权随时通报司法或相关机关处理，并有权同时向该机关呈报用户的基本资料及行为证据供该机关调查。用户因此所致产生的不便或困扰，不得向我们请求任何损害或补偿。\n\n8.3	用户应就其在使用我们所提供的网络服务过程中的的行为或活动自负责任，我们仅提供网络服务予用户自行执行，或与其它用户依照服务规则共同使用，我们就用户在使用其所提供的网络服务过程中的的行为或活动或交易不负任何责任。 \n\n8.4	下列行为将视为用户违反本协议之行为：\n\n(a)如果用户违反了本协议的任何约定；\n\n(b)如果用户使用任何第三方程序登陆游戏或使用网络服务；\n\n(c)我们发现用户所填的个人资料是不真实的；\n\n对于用户的违约行为，我们在游戏中将根据官方网站上所公布的我们的管理制度予以处分,同时我们保留追究用户其他责任的权利。 \n\n9、协议条款的修改及解释\n\n9.1 本协议的修改及解释权由我司享有。\n\n9.2 本协议的所有条款可由我司随时更新，本服务协议一旦发生变动，修改后的内容将会要求用户重新确认。修改后的服务协议经用户确认同意后即有效代替原来的服务协议。\n\n9.3 本协议修改后，若用户继续使用本协议所涉及的服务，则意味着用户同意本协议条款的修改；否则，请终止本服务的使用。\n\n10、法律与管辖\n\n10.1 本协议的订立、执行和解释及争议的解决均应适用中国法律。\n\n10.2 如双方就本协议内容或其执行发生任何争议，双方应尽量友好协商解决；协商不成时，任何一方均可向我司所在地的人民法院提起诉讼。\n\n11、关键字解释\n\n11.1 作弊：使用包括但不限于主动刷金币、被动刷金币、恶意耗时、互通消息、串通、利用作弊软件或程序漏洞等方式获得不正当利益、以及为了自己获得利益而损害他人利益的行为都被《心动女生》游戏定义为作弊行为。\n\n11.2 游戏数据：在《心动女生》游戏上由系统自动记录、统计、生成的相关资料，包括但不限于用户的经验值、积分、级别、登录时间、离开时间、在线时间统计、登陆IP等等，但不包括钻石。\n\n11.3 第三方软件：指用于在游戏中获取优势但不属于《心动女生》游戏软件的一部分的任何文件或程序。它包括但不限于用于从游戏中获取一般玩家无法获取的信息的程序，或是用于传送或修改任何游戏文件的程序。它通过分析游戏客户端程序或数据，并获得游戏的一些加密算法或者其他数据处理逻辑，或，修改游戏客户端程序在内存中映像的指令、指令顺序或数据，或，拦截游戏客户端向外发送或接收的数据资料，或，直接从游戏的数据文件或游戏程序本身中提取出一些数据供自己使用。\n\n12、风险承担\n\n用户同意使用我司所提供的网络服务是出于用户个人意愿，并愿自负任何风险，包括但不限于其因使用我们网络服务或自行由我们官方网站下载游戏或资料图片而导致用户或其所使用的计算机软、硬件的损害，或发生任何资料的流失等。\n\n13、对用户赔偿责任的排除及限制\n\n我司对于用户使用其网络服务或无法使用网络所导致的任何直接、间接、衍生的损害或所失利益不负任何损害赔偿责任。若依法无法完全排除损害赔偿责任时，我们的赔偿责任亦以用户就使用网络服务所支付给我司的价款为最高上限。\n\n14、损害赔偿\n\n用户若违反服务条款或相关法律法规，导致我司或其关系企业、受雇人、受托人、代理人及其它相关履行辅助人因此而受到损害或支出费用（包括但不限于因法律诉讼、行政程序等所支出的诉讼费用、律师费用、实际遭受损失的费用等），用户应负担损害赔偿责任。\n\n15、我司的终止权\n\n15.1用户应严格遵守本服务条款及有关法律法规的规定。我们对于用户是否违反服务条款有最终决定权。若我们经相关数据分析认定用户违反服务条款，我们可以随时终止用户的账号及密码使用权。\n\n15.2为避免争议，本协议涉及到的有关技术方面的问题，用户同意以我司系统所记载的数据作为判断标准，我们保证该数据的真实性且该数据未经政府有关部门要求，不向包括用户在内的任何人披露，以保护我们的商业安全。该检测数据是唯一的、排他的结果。\n\n16、其他\n\n同意本协议，使用我司提供的服务，意味着用户亦同意遵守与本服务相关的规则或协议。我司对《心动女生》游戏进行管理的所有规则及协议，均作为本协议的附件，与本协议具有同等法律效力。\n"
}return e}();__reflect(UserAgreeInfo.prototype,"UserAgreeInfo");var ButtonSkinInfo=function(){function e(){}return e.prototype.transform=function(){},e}();__reflect(ButtonSkinInfo.prototype,"ButtonSkinInfo");var GameFangDongCenter=function(){function e(){this.hasRead=!1,this._fastSpeedPlay=!1,this.isShowGmBtn=!1,this.windowInfo=new WindowSkinInfo}return e.prototype.init=function(e){this.gameId=Number(e),this.isPlayingVoice=!1,this.fastSpeedPlay=!1,null==this.bgmInfo?this.bgmInfo=new SoundInfo:this.bgmInfo.reset(),null==this.imageEffectInfo?this.imageEffectInfo=new ImageEffectInfo:this.imageEffectInfo.reset(),this.survivalTime=0,this.updateSetting(!0)},e.prototype.dispose=function(){this.nextSection=0,this.nextChapter=0,this.currentSection=0,this.currentChapter=0,this.nextSection=0},e.prototype.updateSetting=function(e){void 0===e&&(e=!1);var t=App.global.userInfo.uid;if(e)this.resetAutoPlay(),App.sound.isCloseBgm=App.global.storage.getItem(EnumStorageType.HERONIES_SETTING_BGM+t+"_"+this.gameId)?!0:!1,App.sound.isCloseSound=App.global.storage.getItem(EnumStorageType.HERONIES_SETTING_EFFECT+t+"_"+this.gameId)?!0:!1,App.sound.isCloseVoice=App.global.storage.getItem(EnumStorageType.HERONIES_SETTING_ROLESOUND+t+"_"+this.gameId)?!0:!1;else{var i=App.global.storage.getItem(EnumStorageType.HERONIES_SETTING_AUTOPLAY+t+"_"+this.gameId);this.isAutoPlay=i?!0:!1}var n=App.global.storage.getItem(EnumStorageType.HERONIES_SETTING_WORDSPEED+t+"_"+this.gameId);n||(n="2"),this.typingSpeed=EnumTypingSpeed.LIST[parseInt(n)]},e.prototype.resetAutoPlay=function(e){void 0===e&&(e=!1),App.global.storage.setItem(EnumStorageType.HERONIES_SETTING_AUTOPLAY+App.global.userInfo.uid+"_"+this.gameId,e?"1":""),this.isAutoPlay=e},e.prototype.parse=function(e){this.type=e.type;var t;e.chapter_name&&e.chapter_name.indexOf("-")&&(t=e.chapter_name.split("-"),this.currentChapter=Number(t[0]),this.currentSection=Number(t[1])),e.next_chapter_name&&e.next_chapter_name.indexOf("-")&&(t=e.next_chapter_name.split("-"),this.nextChapter=Number(t[0]),this.nextSection=Number(t[1])),this.type==EnumGameStepType.SHOP?(this.costMoney=Number(e.money),this.originalMoney=Number(e.original_money),this.start_time=Number(e.start_time),this.stop_time=Number(e.stop_time),e["interface"]&&this.bgmInfo.setBgmData(e["interface"].looping_audio)):this.type==EnumGameStepType.END?this.getNewMemory=e.is_new_memories:(this.type=EnumGameStepType.CHAT)&&this.parsechatData(e)},Object.defineProperty(e.prototype,"fastSpeedPlay",{get:function(){return this._fastSpeedPlay},set:function(e){this._fastSpeedPlay=e,this._fastSpeedPlay&&this.isAutoPlay&&this.resetAutoPlay()},enumerable:!0,configurable:!0}),e.prototype.parsechatData=function(e){if(this.chatType=Number(e.chat_type),this.id=e.id,this.getNewMemory=e.is_new_memories,this.hasGetMemoryNum=e.obtained,this.memoryTotal=e.total,this.hasRead=e.in_log,this.conditions=e.condition,this.options=e.options,this.isShowGmBtn=e.hasOwnProperty("condition"),this.isShowGmBtn){if(this.conditions["f.好感度"]){var t=Number(this.conditions["f.好感度"].value),i="";void 0!=this._lastHaoGanDu&&this._lastOptions&&this._lastOptions.length>0&&(i=" , 选项分数： ("+(t-this._lastHaoGanDu)+")"),GameLog.log(">>>>>>>>当前好感度 : ",t+i),this._lastHaoGanDu=t,this._lastOptions=this.options}if(this.conditions["f.结局分数"]){var n=Number(this.conditions["f.结局分数"].value);GameLog.log(">>>>>>>>结局分数：",n)}}e["interface"].survival_time?this.survivalTime=Number(e["interface"].survival_time):this.survivalTime=0,this.survivalTime=this.imageEffectInfo.parse(e["interface"],this.survivalTime),this.particleEffect=e["interface"].particle_effect,this.bgmInfo.setBgmData(e["interface"].looping_audio),this.bgmInfo.setSoundData(e["interface"].background_music),this.bgmInfo.setVoiceData(e["interface"].voice),this.endTitle=e.title,e["interface"].text_dia&&""!=e.depict?(this.windowInfo.dialogType=e["interface"].hasOwnProperty("text_dia_type")?Number(e["interface"].text_dia_type):1,this.windowInfo.url=e["interface"].text_dia.background,this.windowInfo.labelLeft=Number(e["interface"].text_dia.area_left),this.windowInfo.labelTop=Number(e["interface"].text_dia.area_top),this.windowInfo.labelWidth=Number(e["interface"].text_dia.text_width),this.windowInfo.labelHeight=Number(e["interface"].text_dia.text_height),this.windowInfo.labelRight=Number(e["interface"].text_dia.area_right),this.windowInfo.labelBottom=Number(e["interface"].text_dia.area_bottom),this.windowInfo.labelColor=parseInt("0x"+e["interface"].text_dia.color.slice(1)),this.windowInfo.label=e.depict,this.windowInfo.hasDialog=!0):this.windowInfo.hasDialog=!1,e["interface"].name_dia&&this.windowInfo.hasDialog?(this.windowInfo.hasName=!0,this.windowInfo.name=e["interface"].name_dia.name,this.windowInfo.nameColor=parseInt("0x"+e["interface"].name_dia.color.slice(1)),this.windowInfo.nameURL=e["interface"].name_dia.background,this.windowInfo.nameX=Number(e["interface"].name_dia.background_left),this.windowInfo.nameY=Number(e["interface"].name_dia.background_top)):this.windowInfo.hasName=!1,this.windowInfo.autoChange=e["interface"].auto_reading,this.windowInfo.labelSpeed=e["interface"].speed,this.chatType==EnumChatType.VIDEO?(this.videoURL=e["interface"].video,this.bgmInfo.bgMusicChanged=!0):this.chatType==EnumChatType.BENAME&&(this.windowInfo.hasDialog=!0,this.windowInfo.label="还有，我不是“那谁”，我叫",this.windowInfo.url=EnumGameRes1.DIALOG0,this.windowInfo.labelSpeed=0)},Object.defineProperty(e.prototype,"hasSelectOptions",{get:function(){return this.options&&this.options.length>0},enumerable:!0,configurable:!0}),e}();__reflect(GameFangDongCenter.prototype,"GameFangDongCenter");var H5_360_Sdk=function(){function e(){this.sdkUrl="http://h5.wan.360.cn/h5-cp-sdk-loader.js",this.config360=window["360_sdk_config"]}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.paySdk=function(){this.h5Game?GameLog.log("h5Game 有值"):(GameLog.log("h5Game 无值"),this.h5Game=new H5_GAME_360);var e=H5_GAME_360.CONST,t=this.pay360Param;GameLog.log(t),this.h5Game.emit(e.EVENT.BUY.START,t)},e}();__reflect(H5_360_Sdk.prototype,"H5_360_Sdk");var loadSingleScript=function(e,t){var i=document.createElement("script");i.async=!1,i.src=e,i.addEventListener("load",function(){i.parentNode.removeChild(i),t()},!1),document.body.appendChild(i)},H5_1758_Sdk=function(){function e(){this.sdkIndex="303",this.sdkUrl="//res.1758.com/sdk/js/1758sdk.js",this.hlmy_gw=egret.getOption("hlmy_gw"),this.userToken=egret.getOption("userToken"),this.appKey=egret.getOption("appKey"),GameLog.log("1758hlmy_gw"+this.hlmy_gw),GameLog.log("1758userToken"+this.userToken),GameLog.log("1758appKey"+this.appKey)}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.loadSdk=function(t){loadSingleScript(this.sdkUrl,function(){GameLog.log("H5_1758_Sdk >> 加载H5_1758_Sdk完成");var i=window.HLMY_SDK,n=e.getInstance().playerInfo;GameLog.log(n),e.getInstance().gid=n.userdata.uid,e.getInstance().hlmysdk=i,e.getInstance().hlmysdk.init({gid:e.getInstance().gid,appKey:e.getInstance().appKey,hlmy_gw:e.getInstance().hlmy_gw}),t()})},e}();__reflect(H5_1758_Sdk.prototype,"H5_1758_Sdk");var H5_3500_Sdk=function(){function e(){this.sdkIndex="10217",this.sdkUrl="http://www.3500.com/statics/js/lib.v1.js",this.game_token=egret.getOption("token"),this.game_uid=egret.getOption("uid")}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.loadSdk=function(t){loadSingleScript(this.sdkUrl,function(){GameLog.log("H5_3500_Sdk >> 加载H5_3500_Sdk完成"),GameLog.log("this.game_token"+this.game_token),GameLog.log("this.game_uid"+this.game_uid);var i=egret.getDefinitionByName("Game35");e.getInstance().game35=new i({uid:e.getInstance().game_uid,token:e.getInstance().game_token}),t()})},e}();__reflect(H5_3500_Sdk.prototype,"H5_3500_Sdk");var loadSingleScript=function(e,t){var i=document.createElement("script");i.async=!1,i.src=e,i.addEventListener("load",function(){i.parentNode.removeChild(i),t()},!1),document.body.appendChild(i)},H5_37117_Sdk=function(){function e(){this.sdkIndex="10303",this.sdkUrl="http://m.37117c.com/Scripts/GameLib.v1.js",this.game_id=130,this.Debug=!0,this.game_token=egret.getOption("Token"),GameLog.log("this.game_token    "+this.game_token),GameLog.log("this.game_uid      "+this.game_id),GameLog.log("this.Debug         "+this.Debug)}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.loadSdk=function(t){loadSingleScript(this.sdkUrl,function(){GameLog.log("H5_37117_Sdk >> 加载H5_37117_Sdk完成");var i=new Game37117({GameID:e.getInstance().game_id,Token:e.getInstance().game_token,Debug:e.getInstance().Debug});i.Ready(),t()})},e}();__reflect(H5_37117_Sdk.prototype,"H5_37117_Sdk");var loadSingleScript=function(e,t){var i=document.createElement("script");i.async=!1,i.src=e,i.addEventListener("load",function(){i.parentNode.removeChild(i),t()},!1),document.body.appendChild(i)},H5_4177_Sdk=function(){function e(){this.sdkIndex="10215",this.sdkUrl="http://passport.4177.com/game/h5sdk",this.open_id=egret.getOption("open_id"),this.channel=egret.getOption("channel"),this.app_id="10625",GameLog.log("open_id"+this.open_id),GameLog.log("channel"+this.channel)}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.loadSdk=function(t){loadSingleScript(this.sdkUrl,function(){GameLog.log("H5_4177_Sdk >> 加载H5_4177_Sdk完成");new aiaiusdk;e.getInstance().aiaiusdk=aiaiusdk;var i={app_id:e.getInstance().app_id,open_id:e.getInstance().open_id,channel:e.getInstance().channel};GameLog.log(i),GameLog.log(e.getInstance().aiaiusdk),e.getInstance().aiaiusdk.init(i),t()})},e}();__reflect(H5_4177_Sdk.prototype,"H5_4177_Sdk");var loadSingleScript=function(e,t){var i=document.createElement("script");i.async=!1,i.src=e,i.addEventListener("load",function(){i.parentNode.removeChild(i),t()},!1),document.body.appendChild(i)},Http=function(){function e(){}return e.post=function(e,t,i,n,o,a){GameLog.log("post url = "+e);var s=new egret.HttpRequest;if(s.responseType=egret.HttpResponseType.TEXT,s.open(e,egret.HttpMethod.POST),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t)if(t instanceof Object){var r=this.changeUrlCode(t);s.send(r)}else s.send(t);else s.send();i&&s.addEventListener(egret.Event.COMPLETE,i,n),o&&s.addEventListener(egret.IOErrorEvent.IO_ERROR,o,n),a&&s.addEventListener(egret.ProgressEvent.PROGRESS,a,n)},e.get=function(e,t,i,n,o){GameLog.log("get url = "+e);var a=new egret.HttpRequest;if(a.responseType=egret.HttpResponseType.TEXT,t){var s=this.changeUrlCode(t);a.open(e+"?"+s,egret.HttpMethod.GET)}else a.open(e,egret.HttpMethod.GET);a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send(),i&&a.addEventListener(egret.Event.COMPLETE,i,n),o&&a.addEventListener(egret.IOErrorEvent.IO_ERROR,o,n)},e.changeUrlCode=function(e){if(!e)return null;var t="";for(var i in e)t+=i+"="+e[i]+"&";return t.substr(0,t.length-1)},e}();__reflect(Http.prototype,"Http"),!window.platform&&Config.soEasy&&(window.platform=new SoEasySdk);var QingFengSdk=function(){function e(){this.sdkIndex="10448",this.sdkUrl="http://h5.520cai.com/Public/static/xigusdk/xgh5sdk.js",this.isNoticed=!1,this.game_appid=egret.getOption("game_appid"),this.sdkloginmodel=egret.getOption("sdkloginmodel")}return e.prototype.loadSdk=function(e){loadSingleScript(this.sdkUrl,function(){GameLog.log("QingFengSdk >> 加载清风游戏sdk完成"),e()})},e.prototype.noticeSdk=function(){this.isNoticed||0!=SoEasySdk.isCurChannel(SoEasySdk.channelList.qingFeng)&&(this.isNoticed=!0,xgGame.noticeSdk({game_appid:this.game_appid,sdkloginmodel:this.sdkloginmodel},function(e){GameLog.log("QingFengSdk >> 清风游戏公告:",e)}))},e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e}();__reflect(QingFengSdk.prototype,"QingFengSdk");var loadSingleScript=function(e,t){var i=document.createElement("script");i.async=!1,i.src=e,i.addEventListener("load",function(){i.parentNode.removeChild(i),t()},!1),document.body.appendChild(i)},ImageEffectInfo=function(){function e(){this.bgEffectTime=0,this.bgEffect=[],this.roleList=[],this.roleEffectList=[],this.isSameEffect=!1}return e.prototype.reset=function(){this.bgURL=null,this.bgEffectType=null,this.bgEffectTime=0,ObjectPool.getPool("RoleSkinInfo").pushArr(this.roleList),this.roleList.length=0,this.bgEffect.length=0,this.isSameEffect=!1},e.prototype.parse=function(e,t){if(this.isSameEffect=!1,this.bgEffectTime=0,this.parseBg(e),this.parseRole(e),this.bgEffect.length=0,this.roleEffectList.length=0,e.dynamic_effect&&e.dynamic_effect.length>0){for(var i,n,o=0,a=e.dynamic_effect.length;a>o;o++)i=e.dynamic_effect[o],"background"==i.type?-1!=EnumImageEffect.STATIC_EFFECT_LIST.indexOf(i.module)?this.bgEffect[0]=i:this.bgEffect[1]=i:"all"==i.type&&(-1!=EnumImageEffect.STATIC_EFFECT_LIST.indexOf(i.module)?this.bgEffect[0]=i:this.bgEffect[1]=i),i.hasOwnProperty("time")&&n&&n.isOutName(i.module)&&0==t&&(t=1);var s=this.bgEffect[1]?this.bgEffect[1].module:this.bgEffectTime>0?this.bgEffectType:null;for(o=0,a=e.dynamic_effect.length;a>o;o++)i=e.dynamic_effect[o],"all"==i.type?-1!=EnumImageEffect.STATIC_EFFECT_LIST.indexOf(i.module)?this.addRoleEffect(Number(i.layer),i,!0):(this.addRoleEffect(Number(i.layer),i,!1),i.module==s&&(this.isSameEffect=!0)):"erect_drawing"==i.type&&(-1!=EnumImageEffect.STATIC_EFFECT_LIST.indexOf(i.module)?this.addRoleEffect(Number(i.layer),i,!0):(this.addRoleEffect(Number(i.layer),i,!1),i.module==s&&(this.isSameEffect=!0))),i.hasOwnProperty("time")&&n&&n.isOutName(i.module)&&0==t&&(t=1)}else this.bgURLChanged&&this.needRemoveRole&&(this.isSameEffect=!0);return t},e.prototype.parseBg=function(e){this.bgURLChanged=!1,e.background?(this.bgURL!=e.background.image&&(this.bgEffectTime=Number(e.background.effect_time),this.bgURLChanged=!0),this.bgURL=e.background.image,this.bgEffectType=e.background.effect_way):null!=this.bgURL&&(this.bgURL=null,this.bgURLChanged=!0)},e.prototype.parseRole=function(e){if(this.needRemoveRole=!1,e.portrait)for(var t,i,n=(this.roleList.length,0),o=e.portrait.length;o>n;n++)i=e.portrait[n],i&&i.hasOwnProperty("image")?(t=this.roleList[n],null==t&&(t=ObjectPool.getPool("RoleSkinInfo").getObject(),this.roleList[n]=t),t.roleURL=i.image,t.alpha=i.opacity,t.x=Number(i.Start_X),t.y=Number(i.Start_Y),t.effectType=i.effect_way,t.effectTime=i.effect_time,t.scale=Number(i.Ratio),t.index=Number(i.layer)):(t=this.roleList[n],t&&(ObjectPool.getPool("RoleSkinInfo").push(this.roleList[n]),this.roleList[n]=null,this.needRemoveRole=!0));else{ObjectPool.getPool("RoleSkinInfo").pushArr(this.roleList);for(var n=0,o=this.roleList.length;o>n;n++)this.roleList[n]&&(this.roleList[n]=null,this.needRemoveRole=!0)}},e.prototype.addRoleEffect=function(e,t,i){this.roleEffectList[e]||(this.roleEffectList[e]=[]),this.roleEffectList[e][i?0:1]=t},e.prototype.getRoleEffectByLayer=function(e,t){return this.roleEffectList&&this.roleEffectList[e]?this.roleEffectList[e][t?0:1]:null},e.prototype.getBgEffect=function(e){return this.bgEffect?this.bgEffect[e?0:1]:null},e}();__reflect(ImageEffectInfo.prototype,"ImageEffectInfo");var ArrayTool=function(){function e(){}return e.copyArr=function(e){for(var t=[],i=e.length,n=0;i>n;n++)t[n]=e[n];return t},e.sortArr=function(e){for(var t=e.length,i=0;t>i;i++)for(var n=i+1;t>n;n++)if(e[i]>e[n]){var o=e[i];e[i]=e[n],e[n]=o}},e.getObjectLength=function(e){var t=0;for(var i in e)t++;return t},e.swap=function(e,t,i){var n=e[t];e[t]=e[i],e[i]=n},e.randSort=function(e){for(var t=e.length,i=0;t>i;i++)this.swap(e,i,NumberTool.getRandInt(0,t-1))},e.formatDate=function(e){var t=new Date(1e3*parseInt(e));return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()},e.formatDate1=function(t){var i=new Date(1e3*parseInt(t));return e.aze(i.getFullYear())+"-"+e.aze(i.getMonth()+1)+"-"+e.aze(i.getDate())},e.formatDate2=function(t){var i=new Date(1e3*parseInt(t));return e.aze(i.getHours())+":"+e.aze(i.getMinutes())+":"+e.aze(i.getSeconds())},e.aze=function(e){return e>9?""+e:"0"+e},e.deepCopy=function(t){var i;if("object"==typeof t)if(null===t)i=null;else if(void 0==t)i=void 0;else if(t instanceof Array){i=[];for(var n=0,o=t.length;o>n;n++)i.push(e.deepCopy(t[n]))}else{i={};for(var a in t)i[a]=e.deepCopy(t[a])}else i=t;return i},e}();__reflect(ArrayTool.prototype,"ArrayTool");var CommomBtn=function(){function e(){}return e.btnClick=function(e,t,i,n){void 0===n&&(n=1);var o=this.eventList[e.hashCode+""];null==o&&(o=new Array,this.eventList[e.hashCode+""]=o);for(var a=o.length,s=0;a>s;s++)if(o[s][0]==t&&o[s][1]==i)return;var r=new BtnClick(e,t,i,n);o.push([t,i,r])},e.removeClick=function(e,t,i){var n=this.eventList[e.hashCode+""];if(null!=n)for(var o=n.length,a=o-1;a>=0;a--)if(n[a][0]==t&&n[a][1]==i){var s=n[a][2];s.destoryMe(),n[a].length=0,n.splice(a,1)}},e.removeAll=function(){GameLog.log("CommonmBtn >> 移除所有事件");for(var e in this.eventList){var t=this.eventList[e];if(t)for(var i=t.length,n=i-1;n>=0;n--){var o=t[n][2];o.destoryMe(),t[n].length=0,t.splice(n,1)}}},e.eventList={},e}();__reflect(CommomBtn.prototype,"CommomBtn");var BtnClick=function(){function e(e,t,i,n){void 0===n&&(n=1),this.target=e,this.cb=t,this.thisObject=i,this.type=n,this.initAnchorOffset(),this.target.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.target.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)}return e.prototype.onTouchBegin=function(){App.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.playSound(),this.playOutAnim()},e.prototype.onTouchTap=function(){this.cb.apply(this.thisObject)},e.prototype.onTouchEnd=function(){this.playBackAnim(),App.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)},e.prototype.playSound=function(){switch(this.type){case 1:App.sound.playSoundSwitchClient1(SoundManager.button);break;case 2:App.sound.playSoundSwitchClient1(SoundManager.close);break;case 3:App.sound.playSoundSwitchClient1(SoundManager.page_switch)}},e.prototype.playOutAnim=function(){egret.Tween.get(this.target).set({scaleX:1,scaleY:1}).to({scaleX:1.05,scaleY:1.05},30)},e.prototype.playBackAnim=function(){egret.Tween.get(this.target).to({scaleX:1,scaleY:1},30)},e.prototype.initAnchorOffset=function(){this.target.anchorOffsetX!=this.target.width/2&&this.target.anchorOffsetY!=this.target.height/2&&(this.target.anchorOffsetX=this.target.width/2,this.target.anchorOffsetY=this.target.height/2,this.target.x=this.target.x+this.target.width/2,this.target.y=this.target.y+this.target.height/2)},e.prototype.destoryMe=function(){this.target.scaleX=1,this.target.scaleY=1,egret.Tween.removeTweens(this.target),this.target.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.target.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),App.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.target=null,this.cb=null,this.thisObject=null},e}();__reflect(BtnClick.prototype,"BtnClick");var DateTimer=function(e){function t(t,i){void 0===i&&(i=0);var n=e.call(this)||this;return n.delay=t,n.repeatCount=i,n}return __extends(t,e),t.prototype.start=function(){this.previous=egret.getTimer(),this.accTime=0,egret.startTick(this.update,this)},t.prototype.reset=function(){this.previous=egret.getTimer(),this.accTime=0,this.currentCount=0},t.prototype.stop=function(){egret.stopTick(this.update,this)},t.prototype.update=function(){for(this.curTime=egret.getTimer(),this.passTime=this.curTime-this.previous,this.previous=this.curTime,this.accTime+=this.passTime;this.accTime>=this.delay;)this.accTime-=this.delay,this.currentCount++,this.repeatCount>0&&this.currentCount==this.repeatCount&&(this.dispatchEvent(new egret.TimerEvent(egret.TimerEvent.TIMER_COMPLETE)),this.stop()),this.dispatchEvent(new egret.TimerEvent(egret.TimerEvent.TIMER));return!1},t}(egret.EventDispatcher);__reflect(DateTimer.prototype,"DateTimer");var NumberTool=function(){function e(){}return e.formatTime=function(e){return e>=0&&10>e?"0"+e:e+""},e.getRandInt=function(e,t){return Math.round(Math.random()*(t-e))+e},e.formatCapital=function(e){return 0>=e||e>=10?"":["一","二","三","四","五","六","七","八","九"][e-1]},e.formatMoney=function(e){return e>=1e4||-1e4>=e?Math.round(e/100)/100+"万":e+""},e}();__reflect(NumberTool.prototype,"NumberTool");var PayUtils=function(){function e(){}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.sendbuy=function(e,t){var i=ProtocolHttp.giftBuy;i=AddSomeMsgUtils.addSomeMsgByGiftBuy(i),i.gid=e;var n=window.channel;n&&(i.channel=n),H5_360_Sdk.getInstance().config360&&0!=H5_360_Sdk.getInstance().config360.time&&(i.channel="360"),MilletSDK.getInstance().millet&&(i.channel="xiaomi"),H5_Vivo_SDK.getInstance().vivoData&&(i.channel="vivo"),DeviceUtil.IsWeb&&(i.channel="web_alipay"),ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.giftBuy,i,new FunctionVO(t,this))},e.prototype.selectChannel=function(e){if(DeviceUtil.IsWeb){if(H5_360_Sdk.getInstance().config360&&0!=H5_360_Sdk.getInstance().config360.time)return H5_360_Sdk.getInstance().pay360Param=e.data.params,App.nativeBridge.sendPay(e),1;var t=e.data.aliparams,i=App.data.game2Center.DataCenter.setSelect(t);return WebParams.openWindow("/shop/web/switch/?url="+i),2}return 0},e}();__reflect(PayUtils.prototype,"PayUtils");var ResUtils=function(){function e(){this.initResVersion(),this.groupList=new Array,this.configList=new Array,RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceLoadProgress,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this)}return e.prototype.initResVersion=function(){},e.prototype.loadGroup=function(e,t,i,n,o){void 0===t&&(t=null),void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=1);var a=this.combGroupName(e);this.groupList[a]=[i,t,n],RES.loadGroup(a,o),GameLog.log("加载组资源-》"+a)},e.prototype.onResourceLoadComplete=function(e){var t=e.groupName;if(GameLog.log("加载资源组完成:",t),this.groupList[t]){var i=this.groupList[t][0],n=this.groupList[t][2];null!=i&&null!=n&&i.call(n),this.deleteCallBack(t)}},e.prototype.onResourceLoadProgress=function(e){var t=e.groupName;if(this.groupList[t]){var i=this.groupList[t][1],n=this.groupList[t][2];null!=i&&null!=n&&i.call(n,e)}},e.prototype.onResourceLoadError=function(e){GameLog.logError(e.groupName+"资源组加载失败")},e.prototype.isGroupLoaded=function(e){return RES.isGroupLoaded(e)},e.prototype.deleteCallBack=function(e){this.groupList[e]=null,delete this.groupList[e]},e.prototype.deleteAllCallBack=function(){for(var e in this.groupList)this.deleteCallBack(e)},e.prototype.destroyOneGrp=function(e){RES.destroyRes(e)},e.prototype.combGroupName=function(e){var t="";if("string"==typeof e)t=e;else{var i=e.length;if(i>1){for(var n=0;i>n;n++)t+="->"+e[n];RES.createGroup(t,e)}else t=e}return t},e}();__reflect(ResUtils.prototype,"ResUtils");var SoundManager=function(e){function t(){var t=e.call(this)||this;return t.soundList={},t._allowPlayEffect=!0,t._allowPlayBGM=!0,t._effectVolume=1,t._bgmVolume=.4,t}return __extends(t,e),t.prototype.playEffect=function(e,t,i){if(void 0===t&&(t=0),void 0===i&&(i=1),0!=this.allowPlayEffect){this._startTimeE=t,this._loopsE=i;var n=this.soundList[e];return null==n&&(n=RES.getRes(e),null!=n&&(this.soundList[e]=n)),n?(n.type=egret.Sound.EFFECT,n.play(t,i)):null}},t.prototype.stopEffect=function(e){e?(e.stop(),e=null):this.effectChannel&&(this.effectChannel.stop(),this.effectChannel=null)},t.prototype.playBGM=function(e,t,i){if(void 0===t&&(t=0),void 0===i&&(i=Number.MAX_VALUE),0!=this.allowPlayBGM&&null==this.bgmChannel){this._startTime=t,this._loops=i,this.stopBGM();var n=this.soundList[e+"_mp3"];if(null==n&&(n=RES.getRes(e+"_mp3"),n&&(this.soundList[e+"_mp3"]=n)),n)n.type=egret.Sound.MUSIC,this.bgmChannel=n.play(t,i),this.bgmChannel.volume=this._bgmVolume,this._isPlaying=!0;else{this.bgm=new egret.Sound,this.bgm.type=egret.Sound.MUSIC,this.bgm.addEventListener(egret.Event.COMPLETE,this.onLoadComplete,this);var o=ResPathUtil.getBgmPath(e);this.bgm.load(o),this._isPlaying=!0}}},t.prototype.onLoadComplete=function(e){e.currentTarget.removeEventListener(egret.Event.COMPLETE,this.onLoadComplete,this),this.bgm&&this._isPlaying&&(this.bgmChannel=this.bgm.play(this._startTime,this._loops),this.bgmChannel.volume=this._bgmVolume)},t.prototype.stopBGM=function(){this.bgmChannel&&(this.bgmChannel.stop(),this.bgmChannel=null),this._isPlaying=!1},Object.defineProperty(t.prototype,"allowPlayEffect",{get:function(){return this._allowPlayEffect},set:function(e){e?App.global.storage.setItem(EnumStorageType.G2_ALLOW_EFFECT,""):App.global.storage.setItem(EnumStorageType.G2_ALLOW_EFFECT,"1"),this._allowPlayEffect=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowPlayBGM",{get:function(){return"1"!=App.global.storage.getItem(EnumStorageType.G2_ALLOW_MUSIC)},set:function(e){e?App.global.storage.setItem(EnumStorageType.G2_ALLOW_MUSIC,""):App.global.storage.setItem(EnumStorageType.G2_ALLOW_MUSIC,"1"),this._allowPlayBGM=e,0==this._allowPlayBGM?this.stopBGM():this.playBGM(t.bgm)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"effectVolume",{get:function(){return this._effectVolume},set:function(e){this._effectVolume=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bgmVolume",{get:function(){return this._bgmVolume},set:function(e){this._bgmVolume=e,this.bgmChannel&&(this.bgmChannel.volume=this._bgmVolume)},enumerable:!0,configurable:!0}),t.prototype.windowFocusHandler=function(){DeviceUtil.IsWeb&&(App.stage.addEventListener(egret.Event.ACTIVATE,function(){0==App.data.game2Center.DataCenter.isVideoPlaying&&App.data.game2Center.SoundManager.playBGM(t.bgm)},this),App.stage.addEventListener(egret.Event.DEACTIVATE,function(){App.data.game2Center.SoundManager.stopBGM()},this))},t.bgm="Lovehome",t.button="return",t.click="g2_click",t.time_click="time_click",t.success="success",t.select="select",t.new_msg="new_msg",t.calling="calling",t.common_use="common_use",t.close="close2",t.working="working",t.work_done="work_done",t.love_done="love_done",t.dialogue_pop="dialogue_pop",t.wrong_answer="wrong_answer",t.sent_msg="sent_msg",t.levelup="levelup",t.page_switch="page_switch",t.number_add="number_add",t.number_reduce="number_reduce",t.library="library",t.canteen="canteen",t.shopping="shopping",t.park="park",t.gym="gym",t.cat="cat",t.carnie="carnie",t}(SingleClass);__reflect(SoundManager.prototype,"SoundManager");var StageUtils=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"stageWidth",{get:function(){return Config.SCREEN_WIDTH},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stageHeight",{get:function(){return Config.SCREEN_HEIGHT},enumerable:!0,configurable:!0}),t.prototype.fitScreen=function(){var e=egret.Capabilities.boundingClientWidth/egret.Capabilities.boundingClientHeight;e>2436/1125||4/3>e?App.stage.scaleMode=egret.StageScaleMode.SHOW_ALL:e>=2&&(App.stage.scaleMode=egret.StageScaleMode.FIXED_HEIGHT),H5_Vivo_SDK.getInstance().vivoData&&H5_Vivo_SDK.getInstance().getEarInfo()&&H5_Vivo_SDK.getInstance().getEarInfo().result&&parseInt(H5_Vivo_SDK.getInstance().getEarInfo().width)/parseInt(H5_Vivo_SDK.getInstance().getEarInfo().height)>2&&(App.stage.scaleMode=egret.StageScaleMode.FIXED_HEIGHT)},t.prototype.fitBgIPhoneX=function(e){if(DeviceUtil.isIPhoneX){var t=e.height/e.width;e.width=this.stageWidth,e.height=e.width*t}},t.prototype.fullSomeToStage=function(e,t,i){if(void 0===t&&(t=1280),void 0===i&&(i=720),!(this.stageHeight<=720)||DeviceUtil.isIPhoneX){var n=this.stageWidth,o=this.stageHeight,a=n/t,s=o/i;a>s?e.scaleX=e.scaleY=a:e.scaleX=e.scaleY=s}},t}(SingleClass);__reflect(StageUtils.prototype,"StageUtils");var StringTool=function(){function e(){}return e.formatWrap=function(e,t){var i="",n=Math.ceil(e.length/t);if(n>1){var o=void 0;for(o=0;n>o;o++)i+=n-1>o?e.substr(o*t,t)+"\n":e.substr(o*t,e.length)}else i=e;return i},e.trim=function(e,t){void 0===t&&(t=!1);var i;return i=e.replace(/(^\s+)|(\s+$)/g,""),t&&(i=i.replace(/\s/g,"")),i},e.formatStrLen=function(e,t){void 0===t&&(t=10);var i=this.getStrLength(e);return i>t?e.substr(0,Math.round(t/2)-1)+"...":e},e.getStrLength=function(e){for(var t=0,i=0,n=0;n<e.length;n++)i=e.charCodeAt(n),i>127||i>=65&&90>=i?t+=2:t++;return t},e.formatClock=function(e){var t;if(60>e)t=10>e?"00:0"+e:"00:"+e;else{var i=Math.floor(e/60),n=Math.floor(e%60);10>i&&(t=10>n?"0"+i+":0"+n:"0"+i+":"+n),i>=10&&60>i&&(t=10>n?i+":0"+n:i+":"+n),0==i&&(t=10>n?"00:0"+n:"00:"+n)}return t},e}();__reflect(StringTool.prototype,"StringTool");var TalkManager=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sound=new egret.Sound,t}return __extends(t,e),t.prototype.playSound=function(e,t,i,n,o){void 0===t&&(t=null),void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=null),GameLog.log("准备播放语音");try{this.complete=t,this.error=i,this.loaded=n,this.thisObject=o,this.sound.addEventListener(egret.Event.COMPLETE,this.onLoadComplete,this),this.sound.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onSoundError,this),Config.isHttps&&(e=e.replace("http://","https://")),this.sound.load(e)}catch(a){console.error(a)}},t.prototype.onLoadComplete=function(e){GameLog.log("语音加载完成"),this.channel&&(this.channel.stop(),this.channel=null),this.sound=e.target,this.sound.type=egret.Sound.MUSIC,this.channel=this.sound.play(0,1),this.channel.addEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this),this.loaded&&this.thisObject&&this.loaded.call(this.thisObject)},t.prototype.tryPlaySound=function(){this.channel&&0==this.channel.position&&(this.channel.stop(),this.channel.removeEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this),this.channel=this.sound.play(0,1),this.channel.addEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this))},t.prototype.onSoundComplete=function(e){this.complete&&this.thisObject&&this.complete.call(this.thisObject),this.stopSound()},t.prototype.onSoundError=function(e){this.sound.removeEventListener(egret.Event.COMPLETE,this.onLoadComplete,this),this.sound.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onSoundError,this),Notice.showBottomCenterMessage("声音加载失败，请检查您的网络后重试"),this.error&&this.thisObject&&this.error.call(this.thisObject),this.stopSound()},t.prototype.stopSound=function(){GameLog.log("停止加载语音"),this.channel&&(this.channel.stop(),this.channel=null),this.sound.close(),this.sound.removeEventListener(egret.Event.COMPLETE,this.onLoadComplete,this),this.sound.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onSoundError,this),this.complete=null,this.error=null,this.loaded=null,this.thisObject=null},t}(SingleClass);__reflect(TalkManager.prototype,"TalkManager");var H5_Vivo_SDK=function(){function e(){this.appid="e7efe8904625515afd226b727a5a5039",this.appkey="ae87bb76942e9523e505dce7f754e27a","auth_vivo"==window.auth_type&&(this.vivoData=window.auth_type)}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.Vivo_login=function(t,i){return console.info("Vivo_login"),window.isSupportH5Game?void VivoGame.call("login",function(n){console.info(n),e.getInstance().gameInfo=JSON.parse(n),t.call(i)}):(Notice.showBottomCenterMessage("授权失败!"),void GameLog.log("isSupportH5Game 失败"))},e.prototype.getEarInfo=function(){return window.getEarInfo?{result:window.getEarInfo.result,width:window.getEarInfo.width,height:window.getEarInfo.height}:null},e.prototype.Vivo_pay=function(e,t,i){GameLog.log("支付通过vivo payinfo->"+JSON.stringify(e)),GameLog.log("支付通过vivo payinfo->"+e),VivoGame.call("pay",e,function(e){switch(GameLog.log("支付返回vivo -》"+e+"-->errorCode="+JSON.parse(e).errorCode),JSON.parse(e).errorCode){case"0":Notice.showBottomCenterMessage("支付成功"),t.call(i);
break;case"-1":Notice.showBottomCenterMessage("支付取消");break;case"-2":Notice.showBottomCenterMessage("其他错误");break;case"-3":Notice.showBottomCenterMessage("参数错误");break;case"-4":Notice.showBottomCenterMessage("支付结果请求超时");break;case"-5":Notice.showBottomCenterMessage("非足额支付（充值成功，未完成支付）");break;case"-6":Notice.showBottomCenterMessage("初始化失败")}})},e.prototype.Vivo_payState=function(){var e={};ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.u8_login,e,new FunctionVO(this.Vivo_payBack,this))},e.prototype.Vivo_payBack=function(e){},e.prototype.Vivo_change=function(){VivoGame.call("requestOrientation",{orientation:"0"},function(){GameLog.log("横屏切换")})},e}();__reflect(H5_Vivo_SDK.prototype,"H5_Vivo_SDK");var Game2=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this)},t.prototype.show=function(t){e.prototype.show.call(this,t),0==Config.isLandscape&&App.setOrientation(egret.OrientationMode.LANDSCAPE),WebParams.ip=ProtocolHttpUrlGame2.url,App.sound.enabled=!1,App.res.loadGroup([AssetConst.LoadPanel],new FunctionVO(this.onLoadResComplete,this),null),App.data.game2Center.DataCenter.isFirstEnterGame=!0},t.prototype.hide=function(){e.prototype.hide.call(this),PanelOpenManager.removePanel(EnumPanelID.G2_SetPanel),PanelOpenManager.removePanel(EnumPanelID.G2_GAME_SCENE),App.data.game2Center.SoundManager.stopBGM(),App.sound.enabled=!0,WebParams.ip=ProtocolHttpUrl.ip,0==Config.isLandscape&&(DeviceUtil.IsWeb&&DeviceUtil.isMobile?App.setOrientation(egret.OrientationMode.PORTRAIT):App.setOrientation(egret.OrientationMode.AUTO)),App.data.game2Center.DataCenter.isFirstEnterGame=!1},t.prototype.onLoadResComplete=function(e){this.startCreateScene()},t.prototype.startCreateScene=function(){App.data.game2Center.init(),PanelOpenManager.openPanel(EnumPanelID.G2_GAME_LOAD_SCENE)},t}(BaseGame);__reflect(Game2.prototype,"Game2");var AssetConst=function(){function e(){}return e.Login="login",e.LoadPanel="load_res",e.Font="font",e.Main="main",e.Work="work",e.Message="message",e.ShangCheng="shangcheng",e.Video="video",e.Music="music",e.ANIM="anim",e.Bgm="bgm",e.Share="share",e.Act="act",e.Dlc="dlc",e.Config="config",e.RedPacket="redpacket",e.SOUND_RES_LIST=[e.Login,e.Font,e.Main,e.Work,e.Video,e.Message,e.ANIM,e.ShangCheng,e.Share,e.Act,e.Dlc,e.Config,e.RedPacket,e.Bgm,e.Music],e.ONLY_IMAGE_RES_LIST=[e.Login,e.Font,e.Main,e.Work,e.Video,e.Message,e.ANIM,e.ShangCheng,e.Share,e.Act,e.Dlc,e.Config,e.RedPacket],e}();__reflect(AssetConst.prototype,"AssetConst");var EventConst=function(){function e(){}return e.WaitTime="EventConst.WaitTime",e.WorkWaitTime="EventConst.WorkWaitTime",e.guide="EventConst.GUIDE",e.payBack="EventConst.PAYBACK",e.UPDATE_SIWEI="EventConst.UPDATE_SIWEI",e.UPDATE_RED_TIP="EventConst.UPDATE_RED_TIP",e.UPDATE_LIBAO="EventConst.UPDATE_LIBAO",e.GIFTFORUSER="EventConst.GIFTFORUSER",e.PLAY_WEB_VIDEO="EventConst.PLAY_WEB_VIDEO",e.UPDATE_LEFT_TIMES="EventConst.UPDATE_LEFT_TIMES",e.UPDATE_FIRST_PAY="EventConst.UPDATE_FIRST_PAY",e.TURN_DIAMOND_PAGE="EventConst.TURN_DIAMOND_PAGE",e.CHECK_UPGRADE="EventConst.CHECK_UPGRADE",e.REQ_GAME_INFO="EventConst.REQ_GAME_INFO",e.REQ_LOGIN_REWARD="EventConst.REQ_LOGIN_REWARD",e.REQ_GUIDE_DONE="EventConst.REQ_GUIDE_DONE",e.UPDATE_SHOU_CHONG="EventConst.UPDATE_SHOU_CHONG",e.QUIT_GAME="EventConst.QUIT_GAME",e.U8LOGIN="EventConst.U8LOGIN",e.HTTP_ERROR="EventConst.HTTP_ERROR",e.U8LoginFail="EventConst.U8LoginFail",e.REQ_IOS_ID_LOGIN="EventConst.REQ_IOS_ID_LOGIN",e.REQ_OFFICIAL_LOGIN="EventConst.REQ_OFFICIAL_LOGIN",e.REQ_UPDATE_BAGS="EventConst.REQ_UPDATE_BAGS",e.BUY_LOVE_CD="EventConst.BUY_LOVE_CD",e.BUY_LIBAO_VIDEO_SUCCESS="EventConst.BUY_LIBAO_VIDEO_SUCCESS",e.DLC_CHANGE_CHAPTER_DETAIL="EventConst.DLC_CHANGE_CHAPTER_DETAIL",e.SHOW_IMG_INFO_SOURCE="EventConst.SHOW_IMG_INFO_SOURCE",e.VIDEO_PLAY_FISNISH="EventConst.VIDEO_PLAY_FISNISH",e.BUY_MONTH_CARDS_SUCCESS="EventConst.BUY_MONTH_CARDS_SUCCESS",e.UPDATE_BAG_XIN="EventConst.UPDATE_BAG_XIN",e.INIT_BAG="EventConst.INIT_BAG",e.UPDATE_ACT_VIEW6="EventConst.UPDATE_ACT_VIEW6",e.ADD_WORD_ITEM="EventConst.ADD_WORD_ITEM",e.UPDATE_LIMIT_NUM="EventConst.UPDATE_LIMIT_NUM",e.UPDATE_SHOP_GIFT_GOLD="EventConst.UPDATE_SHOP_GIFT_GOLD",e.UPDATE_SHIPIN_GOLD="EventConst.UPDATE_SHIPIN_GOLD",e.UPDATE_SHOP_GOLD="EventConst.UPDATE_SHOP_GOLD",e}();__reflect(EventConst.prototype,"EventConst");var LanConst=function(){function e(){}return e.dialog0_00="提示",e.act0_00="领取成功，奖励已放入背包中",e.act1_00="领取成功，奖励已放入背包中",e.video0_00="确定要解锁视频吗?",e.video0_01="确定要解锁背景吗?",e.video0_02="确定设置当前为背景吗?",e.mail0_00="领取成功",e.http0_00="请求超时，请稍候再试",e.http0_01="返回数据有误",e.http0_02="网络无法连接，请检查您的网络后重试",e}();__reflect(LanConst.prototype,"LanConst");var SceneConst=function(){function e(){}return e.LoadScene="LoadScene",e.LoginScene="LoginScene",e.GameScene="GameScene",e}();__reflect(SceneConst.prototype,"SceneConst");var DataCenter=function(){function e(){this.isFirstEnterGame=!1,this.UserInfo=new UserInfo,this.ConfigInfo=new ConfigInfo,this.Work=[],this.isPower=!1,this.mail=[],this.lottery_result=0,this.skey="",this.dianhuaGuide=!1,this.weixinGuide=!1,this.shipinGuide=!1,this.loveGuide=!1,this.workGuide=!1,this.bagGuide=!1,this.weiboGuide=!1,this.weixinWaitTimeEnd=0,this.login_reward=0,this.accumulative_recharge=0,this.first_gift=!1,this.is_first_login=!1,this.isVideoPlaying=!1,this.h5_360=!1,this.actAwardInfo=new ActAwardInfo,this.Video={mem:"",fav:"",bgi:""}}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.destoryMe=function(){e.instance=null},e.prototype.setOpenWindon=function(e){window.open("/shop/web/switch/?url="+e,"AliPay","height=750,innerHeight=750,width=800,innerWidth=800,top="+(window.screen.availHeight-780)/2+",left="+(window.screen.availWidth-810)/2+",toolbar=no,menubar=no,scrollbars=auto,resizable=yes,location=yes,status=no")},e.prototype.setSelect=function(e){for(var t,i,n,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,s=e.length,r="";s>a;){if(t=255&e.charCodeAt(a++),a==s){r+=o.charAt(t>>2),r+=o.charAt((3&t)<<4),r+="==";break}if(i=e.charCodeAt(a++),a==s){r+=o.charAt(t>>2),r+=o.charAt((3&t)<<4|(240&i)>>4),r+=o.charAt((15&i)<<2),r+="=";break}n=e.charCodeAt(a++),r+=o.charAt(t>>2),r+=o.charAt((3&t)<<4|(240&i)>>4),r+=o.charAt((15&i)<<2|(192&n)>>6),r+=o.charAt(63&n)}return r},e.prototype.readGameInfo=function(e){var t=ProtocolHttpData.gameInfo;if(t=e,this.Wechat=t.data.wechat,this.Tel=t.data.tel,this.Love=this.UserInfo.parseLoveData(t.data.love),this.Work=this.UserInfo.parseWorkData(t.data.work),this.Shop=t.data.shop,this.Bags=t.data.back,this.Weibo=t.data.weibo,this.isPower=e.data.power.can_get_power,this.keybuy=e.data.keybuy,this.guide=e.data.guide,this.mail=e.data.mail,this.login_reward=e.data.login_reward,this.first_gift=e.data.first_gift,this.is_first_login=e.data.is_first_login,this.act_decade=e.data.act_decade,this.UserInfo.nickName=t.data.userinfo.nick_name,this.UserInfo.bgi=t.data.userinfo.bgi,this.UserInfo.id=t.data.userinfo.uid,this.UserInfo.days=t.data.userinfo.days,this.UserInfo.diamond=t.data.userinfo.diamond,this.UserInfo.gold=t.data.userinfo.gold,this.UserInfo.hearts=t.data.userinfo.hearts,this.UserInfo.power=t.data.userinfo.power,this.UserInfo.wc_wait=t.data.userinfo.wc_wait,t.data.work&&t.data.work[0]&&(this.UserInfo.workCount=t.data.work[0].left_times),this.ConfigInfo.main_event=t.data.config.main_event,this.ConfigInfo.avilable_event=t.data.config.avilable_event,this.ConfigInfo.days=t.data.config.days,this.ConfigInfo.hearts=t.data.config.hearts,this.ConfigInfo.video=t.data.config.video,this.ConfigInfo.girl_name=t.data.config.girl_name,e.data.tel.nexttel&&e.data.tel.nexttel.length>0?(this.UserInfo.nextTel=!0,this.UserInfo.tel_main=!1):(this.UserInfo.nextTel=!1,this.UserInfo.tel_main=!0),e.data.wechat.nextwechat&&e.data.wechat.nextwechat.length>0?(this.UserInfo.nextWechat=!0,this.UserInfo.wechat_main=!1):(this.UserInfo.nextWechat=!1,this.UserInfo.wechat_main=!0),this.total_pay=e.data.total_pay,GameLog.log("累计充值：",this.total_pay),1==e.data.total_pay.onoff)for(var i=this.total_pay.rewards.length,n=this.total_pay.rewards,o=0;i>o;o++)1==n[o].status&&(this.accumulative_recharge=1);else this.accumulative_recharge=-1;e.data.month_cards&&(this.month_cards=e.data.month_cards),e.data.red_packet&&(this.red_packet=e.data.red_packet),e.data.lottery_result&&(this.lottery_result=e.data.lottery_result)},e.prototype.preLoadImg=function(e,t){var i=new eui.Image(e.data.wechat.head);i.x=-100,i.y=-100,i.alpha=0,t.addChild(i);var n=new eui.Image(e.data.tel.head);n.x=-100,n.y=-100,n.alpha=0,t.addChild(n),e.data.love.map(function(e){var i=new eui.Image(e.pic);i.x=-100,i.y=-100,i.alpha=0,t.addChild(i)}),e.data.work.map(function(e){var i=new eui.Image(e.pic);i.x=-100,i.y=-100,i.alpha=0,t.addChild(i)}),e.data.shop.giftpcak.map(function(e){var i=new eui.Image(e.pic);i.x=-100,i.y=-100,i.alpha=0,t.addChild(i)}),e.data.shop.tools.map(function(e){var i=new eui.Image(e.pic);i.x=-100,i.y=-100,i.alpha=0,t.addChild(i)}),e.data.shop.diamonds.map(function(e){var i=new eui.Image(e.pic);i.x=-100,i.y=-100,i.alpha=0,t.addChild(i)}),e.data.shop.golds.map(function(e){var i=new eui.Image(e.pic);i.x=-100,i.y=-100,i.alpha=0,t.addChild(i)}),e.data.shop.limitpack.map(function(e){var i=new eui.Image(e.pic);i.x=-100,i.y=-100,i.alpha=0,t.addChild(i)}),e.data.back.map(function(e){var i=new eui.Image(e.pic);i.x=-100,i.y=-100,i.alpha=0,t.addChild(i)}),e.data.video.fav.map(function(e){var i=new eui.Image(e.preview);i.x=-100,i.y=-100,i.alpha=0,t.addChild(i)}),e.data.video.mem.map(function(e){var i=new eui.Image(e.preview);i.x=-100,i.y=-100,i.alpha=0,t.addChild(i)})},e}();__reflect(DataCenter.prototype,"DataCenter");var ActTabs;!function(e){e[e.NewAct=0]="NewAct",e[e.LoginReward=1]="LoginReward",e[e.CannotRev=2]="CannotRev"}(ActTabs||(ActTabs={}));var RevRewardStatus;!function(e){e[e.CanRev=0]="CanRev",e[e.AlreadyRev=1]="AlreadyRev",e[e.CannotRev=2]="CannotRev"}(RevRewardStatus||(RevRewardStatus={}));var LoginRewardStatus;!function(e){e[e.NoRedTip=0]="NoRedTip",e[e.RedTip=1]="RedTip",e[e.HideBtn=-1]="HideBtn"}(LoginRewardStatus||(LoginRewardStatus={}));var VideoType=function(){function e(){}return e.mem="1",e.fav="2",e}();__reflect(VideoType.prototype,"VideoType");var GuestType=function(){function e(){}return e.YES="1",e.NO="0",e}();__reflect(GuestType.prototype,"GuestType");var SCGainStatus;!function(e){e[e.NoBuy=-1]="NoBuy",e[e.HasBuy=0]="HasBuy",e[e.HasGain=1]="HasGain"}(SCGainStatus||(SCGainStatus={}));var CallStatus;!function(e){e[e.Free=0]="Free",e[e.Waiting=1]="Waiting"}(CallStatus||(CallStatus={}));var ShopPage;!function(e){e[e.XianGou=0]="XianGou",e[e.GouMai=1]="GouMai",e[e.Diamond=2]="Diamond",e[e.Gold=3]="Gold",e[e.DaoJu=4]="DaoJu"}(ShopPage||(ShopPage={}));var ClientConfig=function(){function e(){}return e.attention=0,e.video=1,e.inviteCode=1,e}();__reflect(ClientConfig.prototype,"ClientConfig");var IOSConfig=function(){function e(){}return e.channel="",e.iosID="",e}();__reflect(IOSConfig.prototype,"IOSConfig");var GlobalConfig=function(){function e(){}return Object.defineProperty(e,"version_obj",{get:function(){if(e._version_obj)return e._version_obj;var t={lib_version:"1.7.4",main_version:"1.9.1",res_version:"1.7.4"};return window&&window.manifest&&(t.lib_version=window.manifest.lib_version,t.main_version=window.manifest.main_version,t.res_version=window.manifest.res_version),Config.isRelease||(t.main_version="测试"+t.main_version),e._version_obj=t,e._version_obj},enumerable:!0,configurable:!0}),e}();__reflect(GlobalConfig.prototype,"GlobalConfig");var ActAwardInfo=function(){function e(){this.content="\n活动规则：\n活动期间，累计充值达到对应档位将获得额外奖励，奖励叠加（例如充值{0}元可领取所有累计充值奖励）"}return e}();__reflect(ActAwardInfo.prototype,"ActAwardInfo");var ConfigInfo=function(){function e(){this.days=0,this.hearts=0,this.video="",this.girl_name=""}return e}();__reflect(ConfigInfo.prototype,"ConfigInfo");var UserInfo=function(){function e(){this.nickName="",this.days=0,this.diamond=0,this.gold=0,this.hearts=0,this.power=0,this.wc_wait=0,this.nextTel=!1,this.nextWechat=!1,this.weChatFinish=!0,this.nextWeibo=!1,this.workCount=0,this.tel_main=!1,this.wechat_main=!1,this.randNum=3,this._loveCheckTime=0,this._workCheckTime=0}return e.prototype.parseLoveData=function(e){if(e)for(var t=e.length,i=0;t>i;i++){var n=e[i].wait;void 0!=n&&n>0?(e[i].endTime=ServerTime.serverTime+n,e.is_available&&(e.endTime<this._loveCheckTime||0==App.timer.hasTimer(this.checkLoveRed,this))&&(this._loveCheckTime=e.endTime,App.timer.doTimeOnce(this,1e3*(this._loveCheckTime-ServerTime.serverTime),this.checkLoveRed))):e[i].endTime=0}return e},e.prototype.updateLoveData=function(e){var t=e.lid,i=e.data;if(0!=i.cd)for(var n=App.data.game2Center.DataCenter.Love,o=0,a=n.length;a>o;o++)if(n[o].lid==t)return n[o].wait=i.wait,n[o].endTime=ServerTime.serverTime+i.wait,void((n[o].endTime<this._loveCheckTime||0==App.timer.hasTimer(this.checkLoveRed,this))&&(this._loveCheckTime=n[o].endTime,App.timer.doTimeOnce(this,1e3*(this._loveCheckTime-ServerTime.serverTime),this.checkLoveRed)))},e.prototype.checkLoveRed=function(){App.dispatcher.dispatchEvent(EventConst.UPDATE_RED_TIP)},e.prototype.parseWorkData=function(e){if(e)for(var t=e.length,i=0;t>i;i++){var n=e[i].wait;void 0!=n&&n>0?(e[i].endTime=ServerTime.serverTime+n,e.is_available&&(e.endTime<this._workCheckTime||0==App.timer.hasTimer(this.checkWorkRed,this))&&(this._workCheckTime=e.endTime,App.timer.doTimeOnce(this,1e3*(this._workCheckTime-ServerTime.serverTime),this.checkWorkRed))):e[i].endTime=0}return e},e.prototype.updateWorkData=function(e){var t=e.data;if(0!=t.cd){var i=App.data.game2Center.DataCenter.Work;i[0].exps=t.exps,i[0].wait=t.wait,i[0].left_times=t.left_times,i[0].endTime=ServerTime.serverTime+t.wait,(i[0].endTime<this._workCheckTime||0==App.timer.hasTimer(this.checkWorkRed,this))&&(this._workCheckTime=i[0].endTime,App.timer.doTimeOnce(this,1e3*(this._workCheckTime-ServerTime.serverTime),this.checkWorkRed))}},e.prototype.checkWorkRed=function(){App.dispatcher.dispatchEvent(EventConst.UPDATE_RED_TIP)},e.prototype.isCanLove=function(){var e=App.data.game2Center.DataCenter.Love;if(e){for(var t=(PanelManager.isShowing(PanelRegister.G2_LovePanel),e.length),i=App.data.game2Center.DataCenter.UserInfo.power,n=0;t>n;n++){var o=e[n].cons_power,a=e[n].is_available,s=e[n].endTime;if(1==a&&i>=o){if(App.data.game2Center.DataCenter.keybuy.wulengque.hasbuy)return!0;if(s<=ServerTime.serverTime)return!0}}return!1}},e.prototype.isCanWork=function(){var e=App.data.game2Center.DataCenter.Work;if(e)for(var t=(PanelManager.isShowing(PanelRegister.G2_WorkPanel),e.length),i=0;t>i;i++){var n=e[0].endTime,o=e[0].left_times,a=e[0].exps>=e[0].upgrade_exp;if(0==e[i].locked&&o>0){if(App.data.game2Center.DataCenter.keybuy.wulengque.hasbuy)return!0;if(a)return!0;if(n<=ServerTime.serverTime)return!0}}return!1},e.prototype.isHaveActiveItem=function(){var e=App.data.game2Center.DataCenter.Bags;if(e)for(var t=e.length,i=0;t>i;i++)if(e[i].initiative)return!0;return!1},e}();__reflect(UserInfo.prototype,"UserInfo");var ProtocolHttp=function(){function e(){}return e.httpHead={Authorization:""},e.register={username:"",passwd:"",guest:"",channel_id:0},e.login={username:"",passwd:"",channel_id:0},e.guest={username:"",channel:""},e.logout={username:""},e.chat={id:0,pid:0,sid:0,instant:0},e.loveStart={lid:0},e.loveFinish={lid:0},e.workStart={wid:0},e.workFinish={wid:0},e.toolsBuy={gid:0,count:0},e.giftBuy={gid:0},e}();__reflect(ProtocolHttp.prototype,"ProtocolHttp");var ProtocolHttpData=function(){function e(){}return e.register={info:"",code:0,data:{skey:"",user:""}},e.login={info:"",code:0,data:{skey:"",user:""}},e.guest={info:"",code:0,data:{skey:"",user:""}},e.logout={info:"",code:0,data:{}},e.gameInfo={info:"",code:0,data:{tel:[],love:[],work:[],shop:[],back:[],video:[],weibo:[],power:{},config:{update_time:{},avilable_event:[],event_id:0,oid:0,main_event:[],days:0,mark:{},create_time:{},video:"",girl_name:"",hearts:0,id:0},wechat:{0:{update_time:{},uid:0,start_id:0,days:0,create_time:{},chat_id:0,dialog:[],id:0,types:0}},userinfo:{bgi:"",update_time:"",elove_id:{},echat_id:0,gold:0,evideo_id:{},eback_id:{},days:0,power:0,event_id:1,create_time:{},eweibo_id:{},hearts:0,id:0,ework_id:{},uid:0,user_name:"",diamond:0,wc_wait:0,nick_name:""}}},e.messageInfo={chat_id:0,create_time:null,days:0,dialog:[],id:0,start_id:0,types:0,uid:0,update_time:null},e.dialog={audio:"",pid:0,reply:0,role:0,says:"",score:0,sid:0,status:0},e.tel={chat_id:0,create_time:"",days:0,dialog:[],id:0,start_id:0,types:0,uid:0,update_time:""},e.wechat={chat_id:0,create_time:"",days:0,dialog:[],id:0,start_id:0,types:0,uid:0,update_time:""},e.attention={info:"success",code:200,data:{qq:"123123",update_time:null,title:"至亲爱的玩家",content:"心动女生将于2017年12月3日进行停服,给同学们带来的不便,敬请谅解",create_time:null,wechat:"123123",id:1}},e}();__reflect(ProtocolHttpData.prototype,"ProtocolHttpData");var dlc_getChapters_S=function(){function e(){}return e}();__reflect(dlc_getChapters_S.prototype,"dlc_getChapters_S");var ChapterInfo=function(){function e(){}return e}();__reflect(ChapterInfo.prototype,"ChapterInfo");var ChapterDetail=function(){function e(){}return e}();__reflect(ChapterDetail.prototype,"ChapterDetail");var dlc_getChaptersDetail_S=function(){function e(){}return e}();__reflect(dlc_getChaptersDetail_S.prototype,"dlc_getChaptersDetail_S");var dlc_storyNex_S=function(){function e(){}return e}();__reflect(dlc_storyNex_S.prototype,"dlc_storyNex_S");var dlc_storyNexInfo=function(){function e(){}return e}();__reflect(dlc_storyNexInfo.prototype,"dlc_storyNexInfo");var dlc_storyFinish_S=function(){function e(){}return e}();__reflect(dlc_storyFinish_S.prototype,"dlc_storyFinish_S");var LoadingAnim=function(e){function t(){var t=e.call(this)||this;return t.config("loadingAnim_json","loadingAnim_png","loadingAnim"),t}return __extends(t,e),t}(BaseMovieClip);__reflect(LoadingAnim.prototype,"LoadingAnim");var UpgradeAnim=function(e){function t(){var t=e.call(this)||this;return t.config("upgradeAnim_json","upgradeAnim_png","upgradeAnim"),t}return __extends(t,e),t}(BaseMovieClip);__reflect(UpgradeAnim.prototype,"UpgradeAnim");var ConfirmDialog=function(e){function t(){var t=e.call(this)||this;return t.skinName="ConfirmDialogSkin",t}return __extends(t,e),t}(BaseDialog);__reflect(ConfirmDialog.prototype,"ConfirmDialog");var DlcConfirmDialog=function(e){function t(){var t=e.call(this)||this;return t.skinName="DlcConfirmDialogSkin",t.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onTouch,t),t}return __extends(t,e),t.prototype.setBuyLove=function(e){this.contentLabel.text="       你的碎片数为"+e+"。"},t.prototype.onTouch=function(e){switch(this.destoryMe(),e.target){case this.shopBtn:App.dispatcher.dispatchEvent(G2_GameSceneEvent.SHOW_SCENE_ANIMATION),PanelOpenManager.removePanel(EnumPanelID.G2_DlcMainDoc),PanelOpenManager.openPanel(EnumPanelID.G2_MysteriousShop);break;case this.loveBtn:PanelOpenManager.openPanel(EnumPanelID.G2_LovePanel),PanelOpenManager.removePanel(EnumPanelID.G2_DlcMainDoc)}},t}(BaseDialog);__reflect(DlcConfirmDialog.prototype,"DlcConfirmDialog");var GameOverDialog=function(e){function t(){var t=e.call(this)||this;return t.skinName="GameOverDialogSkin",t.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onTouch,t),t}return __extends(t,e),t.prototype.childrenCreated=function(){(0==ClientConfig.attention||Config.IsApplyIOS)&&(this.qqLabel.text="")},t.prototype.onTouch=function(e){switch(e.target){case this.closeBtn:this.destoryMe()}},t}(BaseDialog);__reflect(GameOverDialog.prototype,"GameOverDialog");var NoticeDialog=function(e){function t(){var t=e.call(this)||this;return t.skinName="NoticeDialogSkin",t}return __extends(t,e),t.prototype.setNoticeTitle=function(e){this.noticeLabel.text=e},t.prototype.setWx=function(e,t){e&&t&&""!=e&&""!=t?this.wxLabel.text="公众号:"+e+"    客服QQ:"+t:this.wxLabel.text=""},t}(BaseDialog);__reflect(NoticeDialog.prototype,"NoticeDialog");var PlayVideoDialog=function(e){function t(){var t=e.call(this)||this;return t.skinName="PlayVideoDialogSkin",t}return __extends(t,e),t.prototype.show=function(t){void 0===t&&(t=!0),this.blackBg.visible=t,e.prototype.show.call(this)},t}(BaseDialog);__reflect(PlayVideoDialog.prototype,"PlayVideoDialog");var ShareGainDialog=function(e){function t(){var t=e.call(this)||this;return t.skinName="ShareGainDialogSkin",t}return __extends(t,e),t.prototype.setGain=function(){this.diamondIcon.visible=!0,this.gainLabel.visible=!0,this.noGainLabel.visible=!1,this.gainLabel.text="获得5钻石"},t.prototype.setNoGain=function(){this.diamondIcon.visible=!1,this.gainLabel.visible=!1,this.noGainLabel.visible=!0,this.noGainLabel.text="每日首次分享可获得钻石奖励哟!"},t}(BaseDialog);__reflect(ShareGainDialog.prototype,"ShareGainDialog");var SureDialog=function(e){function t(){var t=e.call(this)||this;return t.skinName="SureDialogSkin",t}return __extends(t,e),t}(BaseDialog);__reflect(SureDialog.prototype,"SureDialog");var LoadingLock=function(e){function t(){var t=e.call(this)||this;return t.skinName="LoadingLockSkin",t.percentWidth=100,t.percentHeight=100,t}return __extends(t,e),t.prototype.lock=function(e,t,i){void 0===e&&(e=null),void 0===t&&(t=null),void 0===i&&(i=!0)},t.prototype.unlock=function(){},t.prototype.startOverTimer=function(){App.timer.doTimeOnce(this,1e4,this.onTimerComplete)},t.prototype.stopOverTimer=function(){App.timer.clearTimer(this,this.onTimerComplete)},t.prototype.onTimerComplete=function(){null!=this.callBack&&null!=this.thisObject&&this.callBack.call(this.thisObject),this.unlock()},t.prototype.lockScreen=function(){null==this.screenRect?(0==App.layer.rotation?this.screenRect=new eui.Rect(App.data.game2Center.StageUtils.stageWidth,App.data.game2Center.StageUtils.stageHeight,0):this.screenRect=new eui.Rect(App.data.game2Center.StageUtils.stageHeight,App.data.game2Center.StageUtils.stageWidth,0),this.screenRect.alpha=0):0==App.layer.rotation?(this.screenRect.width=App.data.game2Center.StageUtils.stageWidth,this.screenRect.height=App.data.game2Center.StageUtils.stageHeight):(this.screenRect.width=App.data.game2Center.StageUtils.stageHeight,this.screenRect.height=App.data.game2Center.StageUtils.stageWidth),App.layer.commonLayer.addChild(this.screenRect)},t.prototype.unLockScreen=function(){this.screenRect&&this.screenRect.parent&&this.screenRect.parent.removeChild(this.screenRect)},t}(eui.Component);__reflect(LoadingLock.prototype,"LoadingLock");var LockTool=function(){function e(){this.group=new eui.Group,this.group.width=App.data.game2Center.StageUtils.stageWidth,this.group.height=App.data.game2Center.StageUtils.stageHeight,this.group.percentWidth=100,this.group.percentHeight=100,this.group.touchEnabled=!0,this.group.touchThrough=!0}return e.prototype.lock=function(e,t,i){void 0===t&&(t=null),void 0===i&&(i=null),this.cb=t,this.thisObj=i,e.addChild(this.group),this.cb&&this.thisObj&&this.group.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)},e.prototype.onTouch=function(){GameLog.log("aaaaaaaaaaaaaa"),this.cb&&this.thisObj&&this.cb.apply(this.thisObj),this.hide()},e.prototype.hide=function(){this.group&&this.group.parent&&this.group.parent.removeChild(this.group),this.group.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.hide,this),this.cb=null,this.thisObj=null},e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e}();__reflect(LockTool.prototype,"LockTool");var MessageSelectEnum;!function(e){e[e.one=0]="one",e[e.two=1]="two",e[e.there=2]="there",e[e.four=3]="four"}(MessageSelectEnum||(MessageSelectEnum={}));var MessageList=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.configListeners()},t.prototype.configListeners=function(){this.msg1&&this.msg1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.msg2&&this.msg2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.msg3&&this.msg3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.msg4&&this.msg4.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)},t.prototype.setOK=function(e,t){this.ok=e,this.thisObject=t},t.prototype.showMsg=function(e){App.sound.playSoundSwitchClient1(SoundManager.dialogue_pop),e&&2==e.length&&(this.skinName="Message2ListSkin",this.msg1.text=e[0].says,this.msg2.text=e[1].says),e&&3==e.length&&(this.skinName="Message3ListSkin",this.msg1.text=e[0].says,this.msg2.text=e[1].says,this.msg3.text=e[2].says),e&&4==e.length&&(this.skinName="Message4ListSkin",this.msg1.text=e[0].says,this.msg2.text=e[1].says,this.msg3.text=e[2].says,this.msg4.text=e[3].says),this.validateNow(),this.configListeners()},t.prototype.onTouch=function(e){var t;switch(e.target){case this.msg1:t=MessageSelectEnum.one;break;case this.msg2:t=MessageSelectEnum.two;break;case this.msg3:t=MessageSelectEnum.there;break;case this.msg4:t=MessageSelectEnum.four;break;default:t=MessageSelectEnum.one}this.ok&&this.thisObject&&this.ok.call(this.thisObject,t)},t.prototype.hide=function(){this.parent&&this.parent.removeChild(this)},t}(eui.Component);__reflect(MessageList.prototype,"MessageList");var MyVideo=function(e){function t(){var t=e.call(this)||this;if(t.enable(),t.rect=new eui.Rect(App.data.game2Center.StageUtils.stageWidth,App.data.game2Center.StageUtils.stageHeight,0),t.rect.percentWidth=100,t.rect.percentHeight=100,DeviceUtil.isMobile&&DeviceUtil.IsWeb){if(DeviceUtil.IsIpad)return t;if(DeviceUtil.IsAndroid&&DeviceUtil.IsUCBrowser)return t;var i=window.innerHeight,n=window.innerWidth,o=document.getElementById("myVideo");o.style.transform="rotate(90deg) scale("+i/n+")"}return t}return __extends(t,e),t.prototype.enable=function(){var e=document.getElementById("myVideo");e.addEventListener("play",function(){egret.log("play")}),e.addEventListener("ended",this.stopVideo,this),e.addEventListener("pause",function(){egret.log("pause")}),e.addEventListener("error",function(){egret.log("error"),t.getInstance().stop()})},t.prototype.stopVideo=function(){egret.log("end"),t.getInstance().stop()},t.prototype.play=function(e){App.data.game2Center.DataCenter.isVideoPlaying=!0,App.layer.popLayer.addChild(this.rect),App.data.game2Center.SoundManager.stopBGM();var t=document.getElementById("myVideo");t.src=e,t.autoplay="autoplay",t.play(),t.style.display="inline"},t.prototype.stop=function(){App.data.game2Center.DataCenter.isVideoPlaying=!1,t.getInstance().rect.parent&&t.getInstance().rect.parent.removeChild(t.getInstance().rect),App.data.game2Center.SoundManager.playBGM(SoundManager.bgm);var e=document.getElementById("myVideo");e.style.display="none",e.pause(),App.dispatcher.dispatchEvent(EventConst.VIDEO_PLAY_FISNISH)},t}(SingleClass);__reflect(MyVideo.prototype,"MyVideo");var TipsHeat;!function(e){function t(e){i(e)}function i(e){var t=new eui.Group;t.width=100,t.height=100;var i=0==App.layer.rotation?App.data.game2Center.StageUtils.stageWidth:App.data.game2Center.StageUtils.stageHeight,n=0==App.layer.rotation?App.data.game2Center.StageUtils.stageHeight:App.data.game2Center.StageUtils.stageWidth;t.x=(i-t.width)/2,t.y=(n-t.height)/2;var o=new eui.Label;o.height=40,o.text=""+e,o.fontFamily="fzyc",o.x=t.width,o.y=t.height/2-15;var a=new eui.Image;e>=0?a.texture=RES.getRes("main2_tili_png"):a.texture=RES.getRes("weixin2_xinsui_png"),a.width=50,a.height=50,a.x=(t.width-a.width)/2,a.y=(t.height-a.height)/2,t.addChild(a),t.addChild(o),App.layer.effectLayer&&App.layer.effectLayer.addChild(t),GameLog.log("xy",t.x,t.y),egret.Tween.get(t).set({x:t.x,y:t.y}).to({x:20,y:20},1e3).call(function(){egret.Tween.removeTweens(t),t&&t.parent&&t.parent.removeChild(t)})}e.showHeat=t}(TipsHeat||(TipsHeat={}));var AddSomeMsgUtils=function(){function e(){}return e.addSomeMsgByGiftBuy=function(e){if(WanBaSDK.getIntance().wanBaData){var t=WanBaSDK.getIntance().wanBaData;e.openid=t.openid,e.openkey=t.openkey,e.zoneid=t.platform,e.channel="wanba",e.Authorization=App.data.game2Center.DataCenter.skey}return e},e}();__reflect(AddSomeMsgUtils.prototype,"AddSomeMsgUtils");var RoleSkinInfo=function(){function e(){this.index=0}return e.prototype.updateImage=function(e,t){void 0===t&&(t=!1),e&&(e.setBaseX(this.x,t),e.setBaseY(this.y,t),e.setBaseScale(this.scale,t))},e}();__reflect(RoleSkinInfo.prototype,"RoleSkinInfo");var SoundInfo=function(){function e(){this.bgMusicChanged=!1,this.bgMusicVolume=1,this.bgMusicVolumeChanged=!1}return e.prototype.reset=function(){this.bgMusicVolume=1,this.bgMusicVolumeChanged=!1,this.bgMusicURL=null,this.bgMusicChanged=!1,this.soundEffectURL=null,this.voiceURL=null},e.prototype.setBgmData=function(e){e?this.bgMusicURL!=e.music&&(this.bgMusicURL=e.music,this.bgMusicChanged=!0):(this.bgMusicURL=null,this.bgMusicChanged=!0),e&&e.music&&e.volume!=this.bgMusicVolume&&(this.bgMusicVolume=e.volume,this.bgMusicVolumeChanged=!0)},e.prototype.setSoundData=function(e){e&&e.music?(this.soundEffectType=e.hasOwnProperty("type")?e.type:"0",this.soundEffectURL=e.music):(this.soundEffectType=-1,this.soundEffectURL=null)},e.prototype.setVoiceData=function(e){e?this.voiceURL=e:this.voiceURL=null},e}();__reflect(SoundInfo.prototype,"SoundInfo");var WindowSkinInfo=function(){function e(){this.labelSize=32,this.labelColor=3355442,this.hasDialog=!1,this.hasName=!1,this.labelSpeed=0,this.autoChange=!1,this.dialogType=1}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},set:function(e){var t;if(e&&-1!=e.indexOf("</font>")){e=e.replace(/<(\/?br.*?\/)>|\\n/g,"\n");var i,n,o=egret.XML.parse("<data>"+e+"</data>");t="";for(var a=0,s=o.children.length;s>a;a++)n=o.children[a],1==n.nodeType&&(i=n.attributes,i.hasOwnProperty("size")&&(this.labelSize=i.size),i.hasOwnProperty("color")&&(this.labelColor=parseInt("0x"+String(i.color).slice(1))),t+=n.children[0].text)}else t=e;this._label!=t?(this._label=t,this.labelChanged=!0):this.labelChanged=!1},enumerable:!0,configurable:!0}),e.prototype.transform=function(e,t,i){e.visible=this.hasDialog,this.hasDialog&&(t.source=App.data.gameResourceCenter.getRes(this.url),i.textColor=this.labelColor,i.size=this.labelSize)},e.prototype.transformName=function(e,t,i){e.visible=this.hasName,this.hasName&&(t.text=this.name,i.source=this.nameURL)},e}();__reflect(WindowSkinInfo.prototype,"WindowSkinInfo");var Game2Center=function(){function e(){}return e.prototype.init=function(){this.mediatorCenter.gameMediator},Object.defineProperty(e.prototype,"mediatorCenter",{get:function(){return null==this._mediatorCnter&&(this._mediatorCnter=new Game2MediatorCenter),this._mediatorCnter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gameSceneCenter",{get:function(){return null==this._gameSceneCenter&&(this._gameSceneCenter=new GameSceneCenter),this._gameSceneCenter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"DataCenter",{get:function(){return DataCenter.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"StageUtils",{get:function(){return StageUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SoundManager",{get:function(){return SoundManager.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"TalkManager",{get:function(){return TalkManager.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"LoadingLock",{get:function(){return null==this._loadingLock&&(this._loadingLock=new LoadingLock),this._loadingLock},enumerable:!0,configurable:!0}),e}();__reflect(Game2Center.prototype,"Game2Center");var DlcMainPanelInfoItem=function(e){function t(t){var i=e.call(this)||this;return i.skinName="DlcMainPanelInfoItemSkin",i}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.showBg.mask=this.rectMa,this.addEvent()},t.prototype.update=function(e){this.dataInfo=e,this.setDataInfo(this.dataInfo)},t.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this)},t.prototype.touchHandle=function(e){switch(e.target){case this.showInfoImg:App.dispatcher.dispatchEvent(EventConst.SHOW_IMG_INFO_SOURCE,this.dataInfo)
}},t.prototype.setDataInfo=function(e){e&&(e.locked?(this.showInfoImg.visible=!1,this.showOffImg.visible=!0,this.title.text=e.name):(this.showInfoImg.visible=!0,this.showOffImg.visible=!1,this.showBg.source=e.preview))},t.prototype.dispose=function(){this.dataInfo=null,this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this)},t}(eui.Component);__reflect(DlcMainPanelInfoItem.prototype,"DlcMainPanelInfoItem");var DlcMainPanelItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="DlcMainPanelItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.chapterInfo=this.data,this.setData(this.chapterInfo)},t.prototype.init=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this),this.touchHandle(null)},t.prototype.touchHandle=function(e){var t=this;this.chapterInfo&&!this.chapterInfo.locked&&ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.dlc_getChaptersDetail,{Authorization:App.data.game2Center.DataCenter.skey,cid:this.chapterInfo.id},new FunctionVO(function(e){200==e.code&&(ProtocolHttpData.gameChapterId=t.chapterInfo.id,ProtocolHttpData.dlc_ChatStartInfo=e.data.story,ProtocolHttpData.dlc_chaptersData.data.detail=e.data.detail,App.dispatcher.dispatchEvent(EventConst.DLC_CHANGE_CHAPTER_DETAIL))},this))},t.prototype.setData=function(e){e.id==ProtocolHttpData.gameChapterId?this.bgPanel.source="dlc_kuang_2_png":this.bgPanel.source="dlc_kuang_1_png",this.titleShow.text=e.title,e.locked?(this.startGrp.visible=!1,this.lockImg.visible=!0):(this.startGrp.visible=!0,this.lockImg.visible=!1),this.setStarNum(e.score)},t.prototype.setStarNum=function(e){for(var t=0,i=this.startGrp.numChildren;i>t;t++){var n=this.startGrp.getChildAt(t);0==e?n.source="dlc_big_start_3_png":e-2>=0?(n.source="dlc_big_start_1_png",e-=2):e-1>=0&&(n.source="dlc_big_start_2_png",e-=1)}},t}(eui.ItemRenderer);__reflect(DlcMainPanelItem.prototype,"DlcMainPanelItem");var DlcUtils=function(){function e(){}return e.addSomeOneBtnTouchScale=function(e,t){void 0===t&&(t=1.1);var i=e.scaleX,n=e.scaleY,o=function(){e.scaleX=e.scaleY=t},a=function(){e.scaleX=i,e.scaleY=n},s=function(){e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,o,this),e.addEventListener(egret.TouchEvent.TOUCH_END,a,this),e.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,a,this)},r=function(){e.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,o,this),e.removeEventListener(egret.TouchEvent.TOUCH_END,a,this),e.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,a,this)};s(),e.addEventListener(egret.Event.REMOVED_FROM_STAGE,r,this)},e}();__reflect(DlcUtils.prototype,"DlcUtils");var DlcVideoMgr=function(){function e(){}return e.stopVideo=function(){},e.playVideoByUrl=function(e,t){var i=this;void 0===t&&(t=null);var n={ossvid:e};ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.videoUrl,n,new FunctionVO(function(e){App.dispatcher.dispatchEvent(EventConst.PLAY_WEB_VIDEO,e.data.url,t?t:new FunctionVO(i.onPlayVideoComplete,i),EnumVideoType.XIN_DONG1)},this))},e.onPlayVideoComplete=function(){Video.instance().dispose(),App.data.game2Center.SoundManager.playBGM(SoundManager.bgm)},e}();__reflect(DlcVideoMgr.prototype,"DlcVideoMgr");var ActPage0UI=function(e){function t(){var t=e.call(this)||this;return t.skinName="ActPage0UISkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.show=function(e){},t.prototype.updateView=function(){for(var e,t=App.data.game2Center.DataCenter.loginRewardInfo,i=t.data.length,n=this.scrollerGroup.numChildren,o=n-1;o>=1;o--)e=this.scrollerGroup.getChildAt(o),e.destoryMe();for(var a,o=0;i>o;o++)a=new DayRewardUI,this.scrollerGroup.addChild(a),a.updateView(t.data[o]);this.scroller&&this.scroller.verticalScrollBar&&(this.scroller.verticalScrollBar.autoVisibility=!1,this.scroller.verticalScrollBar.visible=!1)},t.prototype.dispose=function(){for(var e,t=this.scrollerGroup.numChildren,i=t-1;i>=1;i--)e=this.scrollerGroup.getChildAt(i),e.destoryMe()},t}(eui.Component);__reflect(ActPage0UI.prototype,"ActPage0UI");var ActPage1UI=function(e){function t(){var t=e.call(this)||this;return t.skinName="ActPage1UISkin",t}return __extends(t,e),t.prototype.show=function(e){},t.prototype.childrenCreated=function(){CommomBtn.btnClick(this.chongzhiBtn,this.onChongZhi,this)},t.prototype.onChongZhi=function(){PanelOpenManager.removePanel(EnumPanelID.G2_ActPanel),PanelOpenManager.openPanel(EnumPanelID.G2_ShopDiamondPanel,null,!1)},t.prototype.updateView=function(){this.dateLabel.text="活动时间:"+App.data.game2Center.DataCenter.act_decade.sdate+"-"+App.data.game2Center.DataCenter.act_decade.edate},t.prototype.dispose=function(){CommomBtn.removeClick(this.chongzhiBtn,this.onChongZhi,this)},t}(eui.Component);__reflect(ActPage1UI.prototype,"ActPage1UI");var ActPage2UI=function(e){function t(){var t=e.call(this)||this;return t.skinName="ActPage2UISkin",t}return __extends(t,e),t.prototype.show=function(e){},t.prototype.childrenCreated=function(){this.rewardImgList=[this.rewardImg0,this.rewardImg1,this.rewardImg2],this.rewardLabelList=[this.rewardLabel0,this.rewardLabel1,this.rewardLabel2];for(var e=0;3>e;e++)this.rewardImgList[e].source="",this.rewardLabelList[e].text="";this.priceLabel.text="",CommomBtn.btnClick(this.lingquBtn,this.reqRewardGain,this),CommomBtn.btnClick(this.chongzhiBtn,this.onChongZhi,this)},t.prototype.updateView=function(){this.reqFpayReward()},t.prototype.reqFpayReward=function(){ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.fpayReward,{},new FunctionVO(this.revFpayReward,this))},t.prototype.revFpayReward=function(e){if(200==e.code){for(var t=0;3>t;t++)this.rewardImgList[t].source=e.data["package"][t].pic,this.rewardLabelList[t].text=e.data["package"][t].cname+"x"+e.data["package"][t].num;this.priceLabel.text=e.data.price+"",e.data.status==SCGainStatus.NoBuy?(this.lingquBtn.visible=!1,this.chongzhiBtn.visible=!0):e.data.status==SCGainStatus.HasBuy?(this.lingquBtn.visible=!0,this.lingquBtn.enabled=!0,this.chongzhiBtn.visible=!1):(this.lingquBtn.visible=!0,this.lingquBtn.enabled=!1,this.chongzhiBtn.visible=!1),this.id=e.data.id}else Notice.showBottomCenterMessage(e.info)},t.prototype.onChongZhi=function(){PanelOpenManager.removePanel(EnumPanelID.G2_ActPanel),PanelOpenManager.openPanel(EnumPanelID.G2_ShopDiamondPanel,null,!1)},t.prototype.reqRewardGain=function(){var e={gid:this.id};ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.rewardGin,e,new FunctionVO(this.revReqRewardGain,this))},t.prototype.revReqRewardGain=function(e){200==e.code?(this.lingquBtn.enabled=!1,App.data.game2Center.DataCenter.first_gift=!0,App.dispatcher.dispatchEvent(EventConst.BUY_MONTH_CARDS_SUCCESS),App.dispatcher.dispatchEvent(EventConst.UPDATE_RED_TIP),App.data.game2Center.DataCenter.UserInfo.gold=e.data.gold,App.data.game2Center.DataCenter.UserInfo.power=e.data.power,App.data.game2Center.DataCenter.UserInfo.diamond=e.data.diamond,App.data.game2Center.DataCenter.UserInfo.hearts=e.data.hearts,App.dispatcher.dispatchEvent(EventConst.UPDATE_SIWEI),App.dispatcher.dispatchEvent(EventConst.REQ_UPDATE_BAGS),Notice.showBottomCenterMessage(LanConst.act1_00)):Notice.showBottomCenterMessage(e.info)},t.prototype.dispose=function(){CommomBtn.removeClick(this.lingquBtn,this.reqRewardGain,this),CommomBtn.removeClick(this.chongzhiBtn,this.onChongZhi,this)},t}(eui.Component);__reflect(ActPage2UI.prototype,"ActPage2UI");var ActPage3UI=function(e){function t(){var t=e.call(this)||this;return t.skinName="ActPage3UISkin",t}return __extends(t,e),t.prototype.show=function(e){},t.prototype.childrenCreated=function(){},t.prototype.updateView=function(){this.lingquBtn.visible=!1,this.reqPowerStatus()},t.prototype.reqPowerStatus=function(){var e={};ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.tiliStatus,e,new FunctionVO(this.revPowerStatus,this))},t.prototype.revPowerStatus=function(e){200==e.code?(App.data.game2Center.DataCenter.isPower=e.data.can_get_power,App.data.game2Center.DataCenter.isPower?(this.lingquBtn.visible=!0,CommomBtn.btnClick(this.lingquBtn,this.reqPowerGain,this)):this.lingquBtn.visible=!1):Notice.showBottomCenterMessage("网络请求异常")},t.prototype.reqPowerGain=function(){var e={};ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.powerGain,e,new FunctionVO(this.revPowerGain,this))},t.prototype.revPowerGain=function(e){200==e.code?(Notice.showBottomCenterMessage("领取成功"),App.data.game2Center.DataCenter.UserInfo.power=App.data.game2Center.DataCenter.UserInfo.power+e.data.power,App.data.game2Center.DataCenter.isPower=!1,this.lingquBtn.visible=!1,CommomBtn.removeClick(this.lingquBtn,this.reqPowerGain,this),App.dispatcher.dispatchEvent(EventConst.UPDATE_SIWEI),App.dispatcher.dispatchEvent(EventConst.UPDATE_RED_TIP)):Notice.showBottomCenterMessage(e.info)},t.prototype.dispose=function(){CommomBtn.removeClick(this.lingquBtn,this.reqPowerGain,this)},t}(eui.Component);__reflect(ActPage3UI.prototype,"ActPage3UI");var ActPage4UI=function(e){function t(){var t=e.call(this)||this;return t.skinName="ActPage4UISkin",t}return __extends(t,e),t.prototype.show=function(e){this.inputLabel.textDisplay&&(this.inputLabel.textDisplay.size=50,this.inputLabel.textTemp.size=50),InputTextUtil.addNativeInputTextListener(this.inputLabel)},t.prototype.childrenCreated=function(){this.inputLabel.text="",this.inputLabel.textDisplay&&(this.inputLabel.textDisplay.size=50),CommomBtn.btnClick(this.okBtn,this.reqInviteGain,this)},t.prototype.updateView=function(){this.inputLabel.text=""},t.prototype.reqInviteGain=function(){var e={code:this.inputLabel.text};ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.inviteGain,e,new FunctionVO(this.revInviteGain,this))},t.prototype.revInviteGain=function(e){200==e.code?(this.inputLabel.text="",App.data.game2Center.DataCenter.UserInfo.gold=e.data.gold,App.data.game2Center.DataCenter.UserInfo.power=e.data.power,App.data.game2Center.DataCenter.UserInfo.diamond=e.data.diamond,App.data.game2Center.DataCenter.UserInfo.hearts=e.data.hearts,App.dispatcher.dispatchEvent(EventConst.UPDATE_SIWEI),Notice.showBottomCenterMessage("兑换成功，奖励已放入背包中")):(this.inputLabel.text="",Notice.showBottomCenterMessage(e.info))},t.prototype.dispose=function(){CommomBtn.removeClick(this.okBtn,this.reqInviteGain,this),InputTextUtil.removeNativeInputTextListener(this.inputLabel)},t}(eui.Component);__reflect(ActPage4UI.prototype,"ActPage4UI");var ActPage5UI=function(e){function t(){var t=e.call(this)||this;return t.skinName="ActPage5UISkin",t}return __extends(t,e),t.prototype.show=function(e){},t.prototype.updateView=function(){var e=App.data.game2Center.DataCenter.total_pay;GameLog.log(e),this.sDate=this.getDate(e.sdate),this.eDate=this.getDate(e.edate);var t=e.rewards.length;Config.soEasy&&SoEasySdk.shieldChannel()&&(App.data.game2Center.DataCenter.actAwardInfo.content=App.data.game2Center.DataCenter.actAwardInfo.content.replace("QQ：202963048",""));var i;i=t>0?StringUtil.substitute(App.data.game2Center.DataCenter.actAwardInfo.content,e.rewards[t-1].pay_money):StringUtil.substitute(App.data.game2Center.DataCenter.actAwardInfo.content,1288),this.contentLabel.text="活动时间："+this.sDate+"-"+this.eDate+"\n"+i;for(var n,o=this.scrollerGroup.numChildren,a=o-1;a>=1;a--)n=this.scrollerGroup.getChildAt(a),n.destoryMe();for(var s,a=0;t>a;a++)s=new ActAccumulativeRecharge,this.scrollerGroup.addChild(s),s.updateView(e.rewards[a],a);this.scroller&&this.scroller.verticalScrollBar&&(this.scroller.verticalScrollBar.autoVisibility=!1,this.scroller.verticalScrollBar.visible=!1)},t.prototype.getDate=function(e){var t=this.find(e,".",1),i=this.find(e,".",2),n=i-t-1,o=e.substr(t+1,n),a=e.substr(i+1),s=o.indexOf("0"),r=a.indexOf("0");0==s&&(o=o.substr(s+1)),0==r&&(a=a.substr(r+1));var h=o+"月"+a+"日";return h},t.prototype.find=function(e,t,i){for(var n=e.indexOf(t),o=i-1,a=0;o>a;a++)n=e.indexOf(t,n+1);return n},t.prototype.dispose=function(){for(var e,t=this.scrollerGroup.numChildren,i=t-1;i>=1;i--)e=this.scrollerGroup.getChildAt(i),e.destoryMe()},t}(eui.Component);__reflect(ActPage5UI.prototype,"ActPage5UI");var ActPage6UI=function(e){function t(){var t=e.call(this)||this;return t.skinName="ActPage6UISkin",t}return __extends(t,e),t.prototype.show=function(e){},t.prototype.childrenCreated=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)},t.prototype.hide=function(){App.timer.clearTimer(this,this.onTimer),this.open_window=null},t.prototype.updateView=function(){this.btn.enabled=!0,-1==App.data.game2Center.DataCenter.month_cards.time_to_end?this.dayLab.visible=!1:(this.dayLab.text="剩余"+App.data.game2Center.DataCenter.month_cards.time_to_end+"天",this.dayLab.visible=!0),GameLog.log("购买"+App.data.game2Center.DataCenter.month_cards),1==App.data.game2Center.DataCenter.month_cards.month_cards?(this.btn.label="30 元",this.redTip.visible=!0):0==App.data.game2Center.DataCenter.month_cards.month_cards?(this.btn.label="领 取",this.redTip.visible=!0):-1==App.data.game2Center.DataCenter.month_cards.month_cards&&(this.btn.label=" ",this.redTip.visible=!1,this.btn.enabled=!1)},t.prototype.onTouch=function(e){switch(e.target){case this.btn:1==App.data.game2Center.DataCenter.month_cards.month_cards?this.monthCardBuy():0==App.data.game2Center.DataCenter.month_cards.month_cards&&this.lingquFree()}},t.prototype.monthCardBuy=function(){GameLog.log("keybuy",App.data.game2Center.DataCenter.keybuy);var e=App.data.game2Center.DataCenter.keybuy.month_cards;if(Config.U8Login)return void App.nativeBridge.sendU8PayOld("libao",e);if(Config.soEasy)return void platform.payOrder(App.data.game2Center.DataCenter.keybuy.month_cards.id);if(DeviceUtil.IsAndroid&&DeviceUtil.IsNative){var t=e["package"],i=e.price,n="解锁"+t[0].cname+"功能";t.length>1&&(n+=",加送"+t[1].num+t[1].cname);var o={name:t[0].cname,price:i+"元",desc:n};App.nativeBridge.sendAndroidPay(e.id,o)}else{var a={gid:0};a=AddSomeMsgUtils.addSomeMsgByGiftBuy(a),a.gid=App.data.game2Center.DataCenter.keybuy.month_cards.id;var s=window.channel;s&&(a.channel=s),egret.log("ios下单+1"),egret.log(a.gid),MilletSDK.getInstance().millet&&(a.channel="xiaomi"),H5_Vivo_SDK.getInstance().vivoData&&(a.channel="vivo"),DeviceUtil.IsWeb&&(H5_360_Sdk.getInstance().config360&&0!=H5_360_Sdk.getInstance().config360.time?a.channel="360":a.channel="web_alipay"),!DeviceUtil.IsWeb||Config.soEasy||H5_360_Sdk.getInstance().config360||(this.open_window=WebParams.openWindow(WebParams.defaultURL)),ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.giftBuy,a,new FunctionVO(this.buyBack,this))}},t.prototype.buyBack=function(e){if(200==e.code){if(DeviceUtil.IsWeb){if(this.order_id=e.data.order_id,H5_360_Sdk.getInstance().config360&&0!=H5_360_Sdk.getInstance().config360.time)H5_360_Sdk.getInstance().pay360Param=e.data.params,H5_360_Sdk.getInstance().order_id=e.data.order_id,H5_360_Sdk.getInstance().paySdk(),GameLog.log("360支付订单号"+this.order_id);else{var t=e.data.aliparams,i=App.data.game2Center.DataCenter.setSelect(t);WebParams.openWindow("/shop/web/switch/?url="+i,this.open_window)}return void this.getBuy()}DeviceUtil.IsNative&&DeviceUtil.IsIos&&"rmb"==App.data.game2Center.DataCenter.keybuy.month_cards.coin_type?App.nativeBridge.sendIOSPay(e.data.order_id,e.data.product_id):"rmb"==App.data.game2Center.DataCenter.keybuy.month_cards.coin_type?App.nativeBridge.sendPay(e):"diamond"==App.data.game2Center.DataCenter.keybuy.month_cards.coin_type&&(Notice.showBottomCenterMessage("购买成功"),App.data.game2Center.DataCenter.keybuy.month_cards.hasbuy=!0)}else 981==e.code?App.nativeBridge.sendPay(e):Notice.showBottomCenterMessage(""+e.info)},t.prototype.lingquFree=function(){var e={};ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.lingqumonthly,e,new FunctionVO(this.revlingquFree,this))},t.prototype.revlingquFree=function(e){200==e.code&&(this.btn.enabled=!1,App.data.game2Center.DataCenter.month_cards.month_cards=e.data.month_cards,App.data.game2Center.DataCenter.UserInfo.gold=e.data.gold,App.data.game2Center.DataCenter.UserInfo.diamond=e.data.diamond,App.dispatcher.dispatchEvent(EventConst.UPDATE_SIWEI),App.dispatcher.dispatchEvent(EventConst.UPDATE_RED_TIP),App.dispatcher.dispatchEvent(EventConst.UPDATE_ACT_VIEW6))},t.prototype.getBuy=function(){ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.payStatusH5,{order_id:this.order_id},new FunctionVO(this.payBack,this))},t.prototype.payBack=function(e){200==e.code?(Notice.showBottomCenterMessage("支付成功"),App.dispatcher.dispatchEvent(EventConst.REQ_GAME_INFO),App.data.game2Center.LoadingLock.unlock()):(this.t=0,this._needSendBuy=!0,App.timer.clearTimer(this,this.onTimer),App.timer.doTimeLoop(this,3e3,this.onTimer))},t.prototype.onTimer=function(){return this.t+=3,this.t>=600?(GameLog.log("-------------10分钟内支付失败"),void App.timer.clearTimer(this,this.onTimer)):void(this._needSendBuy&&(this._needSendBuy=!1,ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.payStatusH5,{order_id:this.order_id},new FunctionVO(this.onPaySuccess,this,!0))))},t.prototype.onPaySuccess=function(e){200==e.code?(Notice.showBottomCenterMessage("支付成功"),App.dispatcher.dispatchEvent(EventConst.REQ_GAME_INFO),App.timer.clearTimer(this,this.onTimer),App.data.game2Center.LoadingLock.unlock()):(GameLog.log("-------------未支付，继续检测----------"),this._needSendBuy=!0)},t.prototype.dispose=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)},t}(eui.Component);__reflect(ActPage6UI.prototype,"ActPage6UI");var ActPage7UI=function(e){function t(){var t=e.call(this)||this;return t.skinName="ActPage7UISkin",t}return __extends(t,e),t.prototype.show=function(e){this.imgBg.source=e.images,this.txtTime.text="活动时间："+StringUtil.format(new Date(1e3*e.start_time),"Y年M月D日")+" - "+StringUtil.format(new Date(1e3*e.stop_time),"Y年M月D日")},t.prototype.dispose=function(){},t}(eui.Component);__reflect(ActPage7UI.prototype,"ActPage7UI");var Game2MediatorCenter=function(){function e(){}return Object.defineProperty(e.prototype,"loginMediator",{get:function(){return null==this._loginMediator&&(this._loginMediator=new LoginMediator),0==this._loginMediator.hasRegister&&this._loginMediator.onRegister(),this._loginMediator},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gameMediator",{get:function(){return null==this._gameMediator&&(this._gameMediator=new GameMediator),0==this._gameMediator.hasRegister&&this._gameMediator.onRegister(),this._gameMediator},enumerable:!0,configurable:!0}),e}();__reflect(Game2MediatorCenter.prototype,"Game2MediatorCenter");var ActAccumulativeRecharge=function(e){function t(){var t=e.call(this)||this;return t.skinName="ActAccumulativeRechargeSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.contentLabel.text=""},t.prototype.updateView=function(e,t){this.idNum=e.id;var i=e.pay_money+"元  ";if(e.gift&&e.gift["package"])for(var n=e.gift["package"],o=0;o<n.length;o++)i+=n[o].cname+"*"+n[o].num+"  ";this.contentLabel.text=i;var a=e.status;1==a?(this.yiLingquBtn.visible=!1,this.lingquBtn.visible=!0,this.lingquBtn.showRed(!0),this.lingquBtn.btn.enabled=!0,CommomBtn.btnClick(this.lingquBtn,this.reqLoginReward,this)):-1==a?(this.yiLingquBtn.visible=!0,this.lingquBtn.visible=!1):0==a&&(this.yiLingquBtn.visible=!1,this.lingquBtn.visible=!0,this.lingquBtn.showRed(!1),this.lingquBtn.btn.enabled=!1,CommomBtn.removeClick(this.lingquBtn,this.reqLoginReward,this))},t.prototype.reqLoginReward=function(){GameLog.log("DayRewardUI >> 请求第"+this.idNum+"条奖励");var e={tid:this.idNum};ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.getTotal_pay,e,new FunctionVO(this.revLoginReward,this))},t.prototype.revLoginReward=function(e){if(200==e.code){this.yiLingquBtn.visible=!0,this.lingquBtn.visible=!1;for(var t=App.data.game2Center.DataCenter.total_pay,i=t.rewards.length,n=0;i>n;n++){var o=t.rewards[n];if(this.idNum==o.id){t.rewards[n].status=-1,App.data.game2Center.DataCenter.total_pay.rewards[n].status=-1;break}}App.data.game2Center.DataCenter.accumulative_recharge=0;for(var n=0;i>n;n++){var o=t.rewards[n];if(1==o.status){App.data.game2Center.DataCenter.accumulative_recharge=1;break}}App.dispatcher.dispatchEvent(EventConst.REQ_UPDATE_BAGS),App.data.game2Center.DataCenter.UserInfo.gold=e.data.gold,App.data.game2Center.DataCenter.UserInfo.diamond=e.data.diamond,App.data.game2Center.DataCenter.UserInfo.power=e.data.power,App.dispatcher.dispatchEvent(EventConst.UPDATE_SIWEI),App.dispatcher.dispatchEvent(EventConst.BUY_MONTH_CARDS_SUCCESS)}},t.prototype.destoryMe=function(){this.parent&&this.parent.removeChild(this)},t}(eui.Component);__reflect(ActAccumulativeRecharge.prototype,"ActAccumulativeRecharge");var ActKeLingQuBtn=function(e){function t(){var t=e.call(this)||this;return t.skinName="ActLingQuBtnSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.showRed=function(e){this.redTip.visible=e},t}(eui.Component);__reflect(ActKeLingQuBtn.prototype,"ActKeLingQuBtn");var ActLingQuBtn=function(e){function t(){var t=e.call(this)||this;return t.skinName="ActLingQuBtnSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.showRed=function(e){this.redTip.visible=e},t}(eui.Component);__reflect(ActLingQuBtn.prototype,"ActLingQuBtn");var DayRewardUI=function(e){function t(){var t=e.call(this)||this;return t.skinName="DayRewardUISkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.rewardImgList=[this.rewardImg0,this.rewardImg1,this.rewardImg2],this.rewardLabelList=[this.rewardLabel0,this.rewardLabel1,this.rewardLabel2];for(var e=0;3>e;e++)this.rewardImgList[e].source="",this.rewardLabelList[e].text=""},t.prototype.updateView=function(e){var t=["零","一","二","三","四","五","六","七","八","九","十","十一","十二","十三","十四","十五"];this.days=e.days,this.dayLabel.text="第"+t[this.days]+"天";for(var i=e.gift["package"],n=0;n<i.length;n++)this.rewardImgList[n].source=i[n].pic,this.rewardLabelList[n].text=i[n].cname+"x"+i[n].num;var o=e.status;o==RevRewardStatus.CanRev?(this.yiLingquBtn.visible=!1,this.lingquBtn.visible=!0,this.lingquBtn.showRed(!0),this.lingquBtn.btn.enabled=!0,CommomBtn.btnClick(this.lingquBtn,this.reqLoginReward,this)):o==RevRewardStatus.AlreadyRev?(this.yiLingquBtn.visible=!0,this.lingquBtn.visible=!1):o==RevRewardStatus.CannotRev&&(this.yiLingquBtn.visible=!1,this.lingquBtn.visible=!0,this.lingquBtn.showRed(!1),this.lingquBtn.btn.enabled=!1,CommomBtn.removeClick(this.lingquBtn,this.reqLoginReward,this))},t.prototype.reqLoginReward=function(){GameLog.log("DayRewardUI >> 请求第"+this.days+"天奖励");var e={days:this.days};ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.gainLoginReward,e,new FunctionVO(this.revLoginReward,this))},t.prototype.revLoginReward=function(e){if(200==e.code){this.yiLingquBtn.visible=!0,this.lingquBtn.visible=!1;for(var t=App.data.game2Center.DataCenter.loginRewardInfo,i=t.data.length,n=0;i>n;n++){var o=t.data[n];if(this.days==o.days){t.data[n].status=RevRewardStatus.AlreadyRev;break}}for(var a=0,s=0,n=0;i>n;n++){var o=t.data[n];o.status==RevRewardStatus.CannotRev?a++:o.status==RevRewardStatus.CanRev&&s++}s>0?App.data.game2Center.DataCenter.login_reward=LoginRewardStatus.RedTip:a>0?App.data.game2Center.DataCenter.login_reward=LoginRewardStatus.NoRedTip:App.data.game2Center.DataCenter.login_reward=LoginRewardStatus.HideBtn,App.data.game2Center.DataCenter.UserInfo.gold=e.data.gold,App.data.game2Center.DataCenter.UserInfo.power=e.data.power,App.data.game2Center.DataCenter.UserInfo.diamond=e.data.diamond,App.data.game2Center.DataCenter.UserInfo.hearts=e.data.hearts,App.dispatcher.dispatchEvent(EventConst.UPDATE_SIWEI),App.dispatcher.dispatchEvent(EventConst.REQ_UPDATE_BAGS),App.dispatcher.dispatchEvent(EventConst.BUY_MONTH_CARDS_SUCCESS),Notice.showBottomCenterMessage(LanConst.act0_00)}else Notice.showBottomCenterMessage(e.info)},t.prototype.destoryMe=function(){this.parent&&this.parent.removeChild(this),this.rewardImgList.length=0,this.rewardLabelList.length=0,CommomBtn.removeClick(this.lingquBtn,this.reqLoginReward,this)},t}(eui.Component);__reflect(DayRewardUI.prototype,"DayRewardUI");var BagsGroupItem=function(e){function t(){return e.call(this,"BagsGroupItemSkin")||this}return __extends(t,e),t.prototype.show=function(t){e.prototype.show.call(this,t),t&&(this.transData=t,this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this,this),this._dispatcher.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.hide,this,this))},t.prototype.onTouch=function(){App.sound.playSoundSwitchClient1(SoundManager.button),PanelOpenManager.openPanel(EnumPanelID.G2_UseToolPanel,this.transData)},t.prototype.onTouchBack=function(e){200==e.code?Notice.showBottomCenterMessage("使用成功"):Notice.showBottomCenterMessage(""+e.info)},t.prototype.setImg=function(e){e&&""!=e&&(this.daojuImg.source=e)},t.prototype.setTypeText=function(e){e&&""!=e&&(this.typeLabel.text=e)},t.prototype.setToolsCount=function(e){e&&""!=e&&(this.countLabel.text="x "+e)},t}(BaseView);__reflect(BagsGroupItem.prototype,"BagsGroupItem");var EnumAlertContent=function(){function e(){}return e.SAVE_RECORD="要放弃这段经历，保留新的经历吗？",e.READ_RECORD="当前你与寇雅之间发生的故事都会被覆盖，确定要从这段经历开始吗？",e.RESTART_AVG_KOUYA="当前你与寇雅之间发生的故事都会被覆盖，确定要与寇雅<font color='#FF1616'>重新开始</font>吗？",e.BUY_LOVE_ITEM="<font color='#8d6b6a'>背包里缺少道具<font color='#f84d5d'>{0}</font>,是否花费<font color='#f84d5d'>{1}金币</font>直接购买？</font>",e.BUY_USE_DIAMOND="<font color='#8d6b6a'>您确定花费<font color='#f84d5d'>{0}钻石</font>购买？</font>",e.BUY_USE_RMB="<font color='#8d6b6a'>您确定花费<font color='#f84d5d'>¥{0}</font>购买？</font>",e}();__reflect(EnumAlertContent.prototype,"EnumAlertContent");var BeibaoBtn=function(e){function t(){return e.call(this,"beibaoBtnSkin")||this}return __extends(t,e),t.prototype.createComplete=function(){e.prototype.createComplete.call(this)},t.prototype.show=function(t){e.prototype.show.call(this,t),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this,this),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this,this),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this,this),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchout,this,this)},t.prototype.onTouch=function(){App.sound.playSoundSwitchClient1(SoundManager.button),this.getData()},t.prototype.getData=function(){ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.bags,{},new FunctionVO(this.dataBack,this))},t.prototype.dataBack=function(e){200==e.code?(App.data.game2Center.DataCenter.Bags=e.data,App.dispatcher.dispatchEvent(G2_GameSceneEvent.HIDE_SCENE_ANIMATION,EnumPanelID.G2_BagsPanel)):Notice.showBottomCenterMessage(""+e.info)},t.prototype.onTouchBegin=function(){this.scaleX=1.1,this.scaleY=1.1},t.prototype.onTouchEnd=function(){this.scaleX=1,this.scaleY=1},t.prototype.onTouchout=function(){this.scaleX=1,this.scaleY=1},t.prototype.showRedPoint=function(e){e?(this.red.visible=!0,egret.Tween.get(this.red,{loop:!0}).set({scaleX:.9,scaleY:.9}).to({scaleX:1.1,scaleY:1.1},800).to({scaleX:.9,scaleY:.9},800)):(egret.Tween.removeTweens(this.red),this.red.visible=!1)},t}(BaseView);__reflect(BeibaoBtn.prototype,"BeibaoBtn");var EnumChannel=function(){function e(){}return e.C_DEFAULT="1773",e.C_360="1741",e.C_OPPO="1745",e.C_VIVO="1746",e.C_UC="1744",e.C_UC1="1780",e}();__reflect(EnumChannel.prototype,"EnumChannel");var EnumChatType=function(){function e(){}return e.CHAT=1,e.WECHAT_DIALOG=2,e.WECHAT=3,e.VIDEO=4,e.OPTION=5,e.BENAME=6,e.END_VIDEO=7,e.END_IMAGE=8,e}();__reflect(EnumChatType.prototype,"EnumChatType");var EnumConfig=function(){function e(){}return e.getValue=function(e,t){return e>>t&1},e.isRelease=0,e.isDebug=1,e.isHttps=2,e.soEasy=3,e.hasTouch=4,e.skipVideo=5,e.skipGuide=6,e.CONFIG=["isRelease","isDebug","isHttps","soEasy","hasTouch","skipVideo","skipGuide"],e}();__reflect(EnumConfig.prototype,"EnumConfig");var EnumEffectName=function(){function e(){}return e.TouchEffect="TouchEffect",e.BreathEffect="BreathEffect",e}();__reflect(EnumEffectName.prototype,"EnumEffectName");var EnumEffectType=function(){function e(){}return e.NONE="none",e.CROSS_FADE="crossfade",e.CROSS_FADE_IN_THEN_OUT="cross_fade_in_then_out",e.MOVE="LayerNormalMoveModule",e.CLOCK="clock",e.SHAKE1="LayerJumpActionModule",e.SHAKE2="LayerJumpOnceActionModule",e.SHAKE3="LayerWaveActionModule",e.SHAKE4="LayerVibrateActionModule",e}();__reflect(EnumEffectType.prototype,"EnumEffectType");var EnumErrorCode=function(){function e(){}return e.getErrorText=function(e){return this.Error_List[e]},e.Error_List={201:"用户未登录",202:"用户登录已过期或未登录",203:"手机号码格式有误",204:"用户状态暂时禁用",205:"用户状态封号",206:"短信发送失败,错误码:",207:"距上次短信发送时间未达60秒",208:"验证码过期",209:"验证码有误",210:"要求用户重新获取验证码",211:"女主已购买无需再次购买",212:"7k7k支付拉取失败,请重试",213:"支付宝支付拉取失败,请重试",214:"微信支付拉取失败,请重试",215:"玩吧QQ支付拉取失败,请重试",216:"360支付拉取失败,请重试",217:"216支付拉取失败,请重试",218:"订单不存在",219:"交易回调鉴权失败",220:"交易服务器连接失败",801:"传入值有误",802:"登录账号格式有误",803:"密码格式有误",804:"昵称在黑名单中",805:"昵称长度不符合",806:"用户已经注册",807:"用户不存在",808:"用户状态不正常",809:"目标账号不存在",810:"已绑定手机号",811:"手机号已被绑定",812:"您传入的兑换码不存在",813:"已被兑换",814:"目标女主不存在",815:"没有目标女主的进度",816:"您已经收藏了目标节点,请勿重新收藏",817:"不可收藏当前节点",818:"尚未收藏数据",819:"您尚未收藏该节点",820:"聊天节点数据不存在",821:"服务端未接收到文件上传",822:"OSS故障"},e}();__reflect(EnumErrorCode.prototype,"EnumErrorCode");var LoveBox=function(e){function t(){var t=e.call(this,"LoveBoxSkin")||this;return t.cdTime=0,t}return __extends(t,e),t.prototype.show=function(t){e.prototype.show.call(this,t),this.hideCDImg(),CommomBtn.btnClick(this.startBtn,this.startBtnTouch,this,1),this._dispatcher.addEventListener(EventConst.UPDATE_RED_TIP,this.onUpdateRedTip,this)},t.prototype.hide=function(){e.prototype.hide.call(this),this.hideCDImg(),this.removeTimer(),CommomBtn.removeClick(this.startBtn,this.startBtnTouch,this)},t.prototype.onUpdateRedTip=function(){var e=App.data.game2Center.DataCenter.Love,t=e[this.type];this.setData(t,this.type)},t.prototype.setData=function(e,t){this.setImg(e.pic),this.showBtn(!0),0==e.need_tool?this.showDaoju(!1):this.showDaoju(!0),this.setTiliText(e.cons_power),this.setXinText(e.score),this.setTypeText(e.title),0==e.cd?this.showCD(!1):(this.showCD(!0),this.setTimeText(e.cd,e.wait,e.endTime)),this.setType(t),0==e.need_tool?this.showDaoju(!1):(this.showDaoju(!0),this.setDaojuText(e.tool_name)),App.data.game2Center.DataCenter.UserInfo.days>=e.available_days?this.showBtn(!0):(this.showBtn(!1),this.setKaifangText(e.available_days))},t.prototype.startBtnTouch=function(){GameLog.log("type",this.type);var e=App.data.game2Center.DataCenter.Love;this.transData=e[this.type],this.sendHttp()},t.prototype.showBtn=function(e){e?(this.startBtn.visible=!0,this.kaifangGroup.visible=!1):(this.startBtn.visible=!1,this.kaifangGroup.visible=!0)},t.prototype.setKaifangText=function(e){""!=e&&(this.kaifangLabel.text="游戏内时间第"+e+"天开放")},t.prototype.setTypeText=function(e){""!=e&&(this.typeLabel.text=e)},t.prototype.setTiliText=function(e){""!=e&&(this.tiliLabel.text=e)},t.prototype.setDaojuText=function(e){""!=e&&(this.daojuLabel.text=e)},t.prototype.showDaoju=function(e){e?this.daojuGroup.visible=!0:this.daojuGroup.visible=!1},t.prototype.showCD=function(e){e?this.cdGroup.visible=!0:this.cdGroup.visible=!1},t.prototype.setXinText=function(e){e&&""!=e&&(this.xinLabel.text=e)},t.prototype.setTimeText=function(e,t,i){if(i<=ServerTime.serverTime){if(this.cdTime=e,GameLog.log("cd",e),e&&""!=e){if(60>e&&(this.timeLabel.text=e+"分钟"),e>=60&&120>e){var n=e-60;0==n&&(this.timeLabel.text="1小时"),n>0&&(this.timeLabel.text="1小时"+n+"分钟")}if(e>=120&&180>e){var n=e-120;0==n&&(this.timeLabel.text="2小时"),n>0&&(this.timeLabel.text="2小时"+n+"分钟")}}}else this.removeTimer(),App.timer.serverTimeEnd(this,this.timerFunc,i),this.showCDImg()},t.prototype.setWaitText=function(e){if(e){var t=Math.floor(e/60),i=Math.floor(e%60),n=Math.floor(e/60/60);if(1>t&&(10>e?this.timeLabel.text="00:0"+e:this.timeLabel.text="00:"+e),t>=1&&60>t&&(10>i?this.timeLabel.text=t+":0"+i:this.timeLabel.text=t+":"+i),n>=1){var o=e-3600*n,a=Math.floor(o/60),s=Math.floor(o%60);10>a?10>s?this.timeLabel.text=n+":0"+a+":0"+s:this.timeLabel.text=n+":0"+a+":"+s:10>s?this.timeLabel.text=n+":"+a+":0"+s:this.timeLabel.text=n+":"+a+":"+s
}}},t.prototype.timerFunc=function(e){e.spuleTime>0?this.setWaitText(e.spuleTime):(this.removeTimer(),this.transData&&(this.cdTime=this.transData.cd),GameLog.log("cd",this.cdTime),this.setTimeText(this.cdTime,0,0),this.hideCDImg())},t.prototype.removeTimer=function(){App.timer.clearTimer(this,this.timerFunc)},t.prototype.setImg=function(e){e&&""!=e&&(this.typeImg.source=e)},t.prototype.setType=function(e){this.type=e},t.prototype.sendHttp=function(){var e=ProtocolHttp.loveStart;e.lid=this.transData.lid,ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.loveStart,e,new FunctionVO(this.sendBack,this))},t.prototype.sendBack=function(e){200==e.code?this.transData&&this.transData.duration?PanelOpenManager.openPanel(EnumPanelID.G2_LoveProPanel,this.transData):Notice.showBottomCenterMessage("数据错误"):811==e.code||812==e.code?this.askBuyLoveTool():Notice.showBottomCenterMessage(""+e.info),809!=e.code||App.data.game2Center.DataCenter.keybuy.wulengque.hasbuy||PanelOpenManager.openPanel(EnumPanelID.G2_LibaoCDPanel)},t.prototype.askBuyLoveTool=function(){var e=this;if(this.transData.need_tool>0){var t=App.data.game2Center.DataCenter.Shop.tools,i=0,n=this.transData.tool_name,o=this.transData.tool_id,a=this.transData.need_tool;for(var s in t){var r=t[s];if(r.id==this.transData.tool_id){i=r.price;break}}var h=StringUtil.substitute(EnumAlertContent.BUY_LOVE_ITEM,n,i);Alert.show2(h,"",new FunctionVO(function(t){t.type==Alert.OK&&e.sendBuyLoveTool(o,a)},this),"",!0)}},t.prototype.sendBuyLoveTool=function(e,t){var i=e,n=ProtocolHttp.toolsBuy;n.gid=i,n.count=t,ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.toolsBuy,n,new FunctionVO(this.revBuyLoveTool,this))},t.prototype.revBuyLoveTool=function(e){if(GameLog.log("tool",e),200==e.code){App.data.game2Center.DataCenter.UserInfo.diamond=e.data.diamond,App.data.game2Center.DataCenter.UserInfo.gold=e.data.gold,App.data.game2Center.DataCenter.UserInfo.hearts=e.data.hearts,App.data.game2Center.DataCenter.UserInfo.power=e.data.power,GameLog.log("BuyToolPanel >> 购买返回，剩余限购次数:",e.data.left_times);var t={id:this.transData.tool_id,left_times:e.data.left_times};App.dispatcher.dispatchEvent(EventConst.UPDATE_LEFT_TIMES,t),App.dispatcher.dispatchEvent(EventConst.UPDATE_SIWEI),App.dispatcher.dispatchEvent(EventConst.UPDATE_LIMIT_NUM,e.data.left_times);var i=App.data.game2Center.DataCenter.Shop.tools;this.transData.tool_id,this.transData.need_tool;for(var n in i){var o=i[n];if(o.id==this.transData.tool_id){o.left_times=e.data.left_times;break}}Notice.showBottomCenterMessage("购买成功"),App.dispatcher.dispatchEvent(EventConst.UPDATE_SHOP_GIFT_GOLD,App.data.game2Center.DataCenter.UserInfo.gold)}else Notice.showBottomCenterMessage(""+e.info)},t.prototype.showCDImg=function(){0==App.data.game2Center.DataCenter.keybuy.wulengque.hasbuy&&(App.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.hideCDImg,this),this.cdBtn.visible=!0,this.cdBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCDBtnTouch,this))},t.prototype.hideCDImg=function(){App.stage.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.hideCDImg,this),this.cdBtn.visible=!1,this.cdBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onCDBtnTouch,this)},t.prototype.onCDBtnTouch=function(e){this.hideCDImg(),this.showLiBao()},t.prototype.showLiBao=function(){0==App.data.game2Center.DataCenter.keybuy.wulengque.hasbuy&&PanelOpenManager.openPanel(EnumPanelID.G2_LibaoCDPanel)},t}(BaseView);__reflect(LoveBox.prototype,"LoveBox");var LoveBoxType;!function(e){e[e.one=0]="one",e[e.two=1]="two",e[e.there=2]="there",e[e.four=3]="four",e[e.five=4]="five",e[e.six=5]="six",e[e.seven=6]="seven",e[e.eight=7]="eight",e[e.nine=8]="nine",e[e.ten=9]="ten"}(LoveBoxType||(LoveBoxType={}));var EnumGameID=function(){function e(){}return e.FANG_DONG=1,e.GAME2=2,e}();__reflect(EnumGameID.prototype,"EnumGameID");var EnumGameRes1=function(){function e(){}return e.DIALOG0="s1_img_dialog0_png",e.MENU_BUTTON="s1_btn_menu_png",e.REVIEW_BUTTON="s1_btn_review_png",e.NEXT_WORD="s1_img_next_png",e.AUTO_PLAYING="s1_auto_png",e.FAST_SPEED_PLAY="s1_img_fast_png",e.NAME_BG="s1_img_name_bg_png",e.SELECT_BG="s1_img_select_bg_png",e.SELECT_BUTTON="s1_btn_select_png",e.SAVE_ICON="s1_icon_save_png",e.READ_ICON="s1_icon_read_png",e.CONTINUE_ICON="s1_icon_continue_png",e.MENU_BASE_BUTTON="s1_btn_menu_base_png",e.BACK_BUTTON="s1_btn_back_png",e.SETTING_BUTTON="s1_btn_setting_png",e.RANDOM_BUTTON="s1_btn_random_name_png",e.INPUT_BG="s1_img_input_bg_png",e}();__reflect(EnumGameRes1.prototype,"EnumGameRes1");var EnumGameState=function(){function e(){}return e.INIT=0,e.START_VIDEO=1,e.CAN_DO_NEXT=2,e.VOICE_TYPING_PLAYING=3,e.VIDEO_PLAYING=4,e.BENAME=5,e.SELECT=6,e.AUTO_TIME=7,e.BG_EFFECT_PLAYING=8,e.ROLE_EFFECT_PLAYING=9,e.SOUND_PLAYING=10,e.WAIT_WECHAT=11,e}();__reflect(EnumGameState.prototype,"EnumGameState");var CallHistoryListItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="CallHistoryListItemSkin",t.leftMessage.addEventListener(egret.TouchEvent.TOUCH_TAP,t.talkImgTouch,t),t}return __extends(t,e),t.prototype.talkImgTouch=function(){if(this.data.audio){var e=this.data.audio;App.data.game2Center.TalkManager.playSound(e)}},t.prototype.dataChanged=function(){if(this.oldData!=this.data){if(this.data&&0==this.data.role&&(this.setLeftMessage(this.data.says),this.leftMessage.setZhuName(App.data.game2Center.DataCenter.ConfigInfo.girl_name),this.leftMessage.showName(!0),this.leftMessage.showTalk(!0)),this.data&&1==this.data.role){App.data.game2Center.DataCenter.UserInfo.nickName;this.setRightMessage(this.data.says),this.rightMessage.setHearts(this.data.score)}this.oldData=this.data}},t.prototype.setLeftMessage=function(e){e&&""!=e&&(this.leftMessage.visible=!0,this.rightMessage.visible=!1,this.leftMessage.setText(e),this.leftMessage.setImg(App.data.game2Center.DataCenter.Wechat.head))},t.prototype.setRightMessage=function(e){e&&""!=e&&(this.leftMessage.visible=!1,this.rightMessage.visible=!0,this.rightMessage.setZhuName(App.data.game2Center.DataCenter.UserInfo.nickName),this.rightMessage.setText(e))},t}(eui.ItemRenderer);__reflect(CallHistoryListItem.prototype,"CallHistoryListItem");var EnumGameStepType=function(){function e(){}return e.SHOP="shop",e.CHAT="chat",e.END="end",e}();__reflect(EnumGameStepType.prototype,"EnumGameStepType");var EnumGuideType=function(){function e(){}return e.OPEN_MENU=0,e.AVG_MENU_SAVE=1,e.REVIEW=2,e.DETAIL_MEMORY=3,e.AVG_HELP=4,e.START_AUTOPLAY=5,e.PRESS_JUMPREAD=6,e.END_SHARE=7,e.DETAIL_READ=8,e.OPEN_MENU2=9,e.AVG_MENU_READ=10,e.MAX_NUM=11,e.STATE_N="n",e.STATE_0="0",e.STATE_1="1",e}();__reflect(EnumGuideType.prototype,"EnumGuideType");var CallListItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="CallListItemSkin",t.talkLabel.fontFamily="fzyc",t.numLabel.fontFamily="fzyc",t}return __extends(t,e),t.prototype.dataChanged=function(){this.oldData!=this.data&&(GameLog.log("callList",this.data),this.data.history.dialog&&this.data.history.dialog.length>0&&(this.talkLabel.text=this.data.history.dialog[0].says),this.numLabel.text=this.data.num,this.oldData=this.data)},t}(eui.ItemRenderer);__reflect(CallListItem.prototype,"CallListItem");var EnumImageEffect=function(){function e(){}return e.getEffect=function(e){return null==this.EFFECT_LIST&&this.initEffect(),this.EFFECT_LIST[e]},e.initEffect=function(){this.EFFECT_LIST={},this.addEffect(this.NONE,this.NONE_IN,this.NONE_OUT,this.NONE_IN),this.addEffect(this.FADE_IN_OUT,this.FADE_IN,this.FADE_OUT,this.FADE_IN,null,!1),this.addEffect(this.FADE_IN_OUT_BLACK,this.FADE_IN_BLACK,this.FADE_OUT,this.FADE_IN_BLACK),this.addEffect(this.MOVE_IN_OUT,this.MOVE_IN,this.MOVE_OUT,this.MOVE_IN),this.addEffect(this.FLASH_IN_OUT,this.FLASH_IN,this.FLASH_OUT,this.FLASH_IN,this.FLASH_IN),this.addEffect(this.CUT_IMAGE_IN_OUT,this.CUT_IMAGE_IN,this.CUT_IMAGE_OUT,this.CUT_IMAGE_IN,this.CUT_IMAGE_IN),this.addEffect(this.CUT_TWO_IMAGE_IN_OUT,this.CUT_TWO_IMAGE_IN,this.CUT_TWO_IMAGE_OUT,this.CUT_TWO_IMAGE_IN,this.CUT_TWO_IMAGE_IN),this.addEffect(this.BLACK_MOVE_IN_OUT,this.BLACK_MOVE_IN,this.BLACK_MOVE_OUT,this.BLACK_MOVE_IN,this.BLACK_MOVE_IN),this.addEffect(this.BRUSH_IN_OUT,this.BRUSH_IN,this.BRUSH_OUT,this.BRUSH_IN,this.FADE_IN),this.addEffect(this.SPREAD_IN_OUT,this.SPREAD_IN,this.SPREAD_OUT,this.SPREAD_IN,this.SPREAD_IN),this.addEffect(this.CLOCK_IN_OUT,this.CLOCK_IN,this.CLOCK_OUT,this.NONE_IN,this.CLOCK_IN_MASK,!1,this.CLOCK_IN_OUT),this.addEffect(this.CLOCK_IN_OUT_BLACK,this.CLOCK_IN,this.CLOCK_OUT,this.CLOCK_IN,this.CLOCK_IN),this.addEffect(this.MERGE_IN_OUT,this.MERGE_IN,this.MERGE_OUT,this.MERGE_IN,null,!1),this.addEffect(this.SHADE_IN_OUT,this.SHADE_IN,this.SHADE_OUT,this.SHADE_IN,this.SHADE_IN,!1),this.addEffect(this.MOVE_BLACK_MASK_IN_OUT,this.MOVE_BLACK_MASK_IN,this.MOVE_BLACK_MASK_OUT,this.MOVE_BLACK_MASK_IN,this.MOVE_BLACK_MASK_IN,!1)},e.addEffect=function(e,t,i,n,o,a,s){void 0===a&&(a=!0);var r=new EffectName(e,n,i,o,s,a);this.EFFECT_LIST[e]=this.EFFECT_LIST[t]=this.EFFECT_LIST[i]=r},e.isInEffectName=function(e){var t=this.getEffect(e);return t&&t.isInName(e)?!0:!1},e.isOutEffectName=function(e){var t=this.getEffect(e);return t&&t.isOutName(e)?!0:!1},e.NONE="none",e.NONE_IN="none_in",e.NONE_OUT="none_out",e.FADE_IN_OUT="crossfade",e.FADE_IN="fade_in",e.FADE_OUT="fade_out",e.FADE_IN_OUT_BLACK="crossfade_black",e.FADE_IN_BLACK="fade_in_black",e.MOVE_IN_OUT="move_in_out",e.MOVE_OUT="move_out",e.MOVE_IN="move_in",e.MOVE_BLACK_MASK_IN_OUT="move_black_mask_in_out",e.MOVE_BLACK_MASK_OUT="move_black_mask_out",e.MOVE_BLACK_MASK_IN="move_black_mask_in",e.FLASH_IN_OUT="flash_in_out",e.FLASH_IN="flash_in",e.FLASH_OUT="flash_out",e.CUT_IMAGE_IN_OUT="cut_image_in_out",e.CUT_IMAGE_IN="cut_image_in",e.CUT_IMAGE_OUT="cut_image_out",e.CUT_TWO_IMAGE_IN_OUT="cut_two_image_in_out",e.CUT_TWO_IMAGE_IN="cut_two_image_in",e.CUT_TWO_IMAGE_OUT="cut_two_image_out",e.BLACK_MOVE_IN_OUT="black_move_in_out",e.BLACK_MOVE_OUT="black_move_out",e.BLACK_MOVE_IN="black_move_in",e.BRUSH_IN_OUT="brush_in_out",e.BRUSH_OUT="brush_out",e.BRUSH_IN="brush_in",e.SPREAD_IN_OUT="spread_in_out",e.SPREAD_OUT="spread_out",e.SPREAD_IN="spread_in",e.CLOCK_IN_OUT="clock_in_out",e.CLOCK_IN_MASK="clock_in_mask",e.CLOCK_IN_OUT_BLACK="clock_in_out_black",e.CLOCK_IN="clock_in",e.CLOCK_OUT="clock_out",e.MERGE_IN_OUT="merge_in_out",e.MERGE_IN="merge_in",e.MERGE_OUT="merge_out",e.SHADE_IN_OUT="shade_in_out",e.SHADE_IN="shade_in",e.SHADE_OUT="shade_out",e.CHANGE_SCALE="change_scale",e.MOVE="move",e.LOOP_MOVE="loop_move",e.SHAKE="shake",e.CLEAR="clear",e.MEMORY="memory",e.DARK="dark",e.BLUR="blur",e.WHITE_IMAGINATION="white_imagination",e.FLASH_WHITE_LIGHT="flash_white_light",e.FLASH_BLACK_LIGHT="flash_black_light",e.SHAKE_BLUR="shake_blur",e.APART_SHAKE="apart_shake",e.HIDE_EFFECT_LIST=[e.FADE_OUT,e.MOVE_OUT,e.FLASH_OUT,e.CUT_IMAGE_OUT,e.BLACK_MOVE_OUT,e.CLOCK_OUT,e.CLOCK_IN_OUT,e.NONE_OUT,e.CUT_TWO_IMAGE_OUT,e.SHADE_OUT,e.MERGE_OUT,e.SPREAD_OUT,e.BRUSH_OUT,e.SHADE_OUT,e.MOVE_BLACK_MASK_OUT],e.NO_CHANGE_EFFECT_LIST=[e.CHANGE_SCALE,e.MOVE,e.LOOP_MOVE,e.MEMORY,e.DARK,e.BLUR,e.SHAKE_BLUR,e.FLASH_WHITE_LIGHT,e.WHITE_IMAGINATION,e.CLEAR,e.FLASH_BLACK_LIGHT,e.APART_SHAKE],e.STATIC_EFFECT_LIST=[e.MEMORY,e.DARK,e.BLUR,e.WHITE_IMAGINATION,e.SHAKE_BLUR,e.APART_SHAKE],e}();__reflect(EnumImageEffect.prototype,"EnumImageEffect");var EffectName=function(){function e(e,t,i,n,o,a){void 0===a&&(a=!0),this.name=e,this.inName=t,this.outName=i,this.defaultInName=n?n:EnumImageEffect.FADE_IN,this.inWaitTime=a,this.showOutName=o}return e.prototype.isInName=function(e){return this.inName==e},e.prototype.isOutName=function(e){return this.outName==e},e}();__reflect(EffectName.prototype,"EffectName");var EnumLogType=function(){function e(){}return e.typeArr=["info","error","debug","warn","echo","性能","local"],e.showArr=[300,100,100,100,100,10,1],e.maxArr=[1e4,1e4,1e3,1e3,2e3,2e3,1e3],e.indexArr=[0,0,0,0,0,0,0],e.INFO=0,e.ERROR=1,e.DEBUG=2,e.WARN=3,e.ECHO=4,e.XINGNENG=5,e.LOCAL_LOG=6,e}();__reflect(EnumLogType.prototype,"EnumLogType");var LeftMessage=function(e){function t(){return e.call(this,"LeftMessageSkin")||this}return __extends(t,e),t.prototype.createComplete=function(){this.text.fontFamily="fzyc",this.zhuname.fontFamily="fzyc"},t.prototype.setText=function(e){e&&""!=e&&(this.text.text=StringTool.formatWrap(e,25),this.labelBG.width=this.text.width+50)},t.prototype.setZhuName=function(e){e&&""!=e&&(this.zhuname.text=e)},t.prototype.showName=function(e){e?this.zhuname.visible=!0:this.zhuname.visible=!1},t.prototype.showTalk=function(e){e?this.talkImg.visible=!0:this.talkImg.visible=!1},t.prototype.setImg=function(e){this.zhuImg.source=e},t.prototype.showTalkAnim=function(){this.talkImg.visible=!0,egret.Tween.get(this.talkImg,{loop:!0}).set({scaleX:1,scaleY:1}).to({scaleX:1.3,scaleY:1.3},500).to({scaleX:1,scaleY:1},500)},t.prototype.hideTalkAnim=function(){this.talkImg.visible=!1,egret.Tween.removeTweens(this.talkImg)},t}(BaseUI);__reflect(LeftMessage.prototype,"LeftMessage");var MessageListItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="MessageListItemSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){if(this.oldData!=this.data){if(this.data.msg&&0==this.data.msg.role&&this.setLeftMessage(this.data.msg.says),this.data.msg&&1==this.data.msg.role){App.data.game2Center.DataCenter.UserInfo.nickName;this.setRightMessage(this.data.msg.says),this.setRightScore(this.data.msg.score)}this.oldData=this.data}},t.prototype.setLeftMessage=function(e){e&&""!=e&&(this.leftMessage.visible=!0,this.rightMessage.visible=!1,this.leftMessage.setText(e),this.leftMessage.setZhuName(App.data.game2Center.DataCenter.ConfigInfo.girl_name),this.leftMessage.setImg(App.data.game2Center.DataCenter.Wechat.head),this.height=this.leftMessage.height)},t.prototype.setRightMessage=function(e){e&&""!=e&&(this.leftMessage.visible=!1,this.rightMessage.visible=!0,this.rightMessage.setText(e),this.rightMessage.setZhuName(App.data.game2Center.DataCenter.UserInfo.nickName),this.height=this.rightMessage.height)},t.prototype.setRightScore=function(e){""!=e&&this.rightMessage.setHearts(e)},t}(eui.ItemRenderer);__reflect(MessageListItem.prototype,"MessageListItem");var RightMessage=function(e){function t(){return e.call(this,"RightMessageSkin")||this}return __extends(t,e),t.prototype.createComplete=function(){e.prototype.createComplete.call(this),this.myLabel.fontFamily="fzyc",this.text.fontFamily="fzyc"},t.prototype.setText=function(e){e&&""!=e&&(this.text.text=StringTool.formatWrap(e,25),this.labelBG.width=this.text.width+50)},t.prototype.showName=function(e){e?this.myLabel.visible=!0:this.myLabel.visible=!1},t.prototype.setHearts=function(e){""!=e&&(e>=0?(this.heartlabel.text=e,this.jiaGroup.visible=!0,this.jianGroup.visible=!1):(this.jianheartlabel.text=""+-1*e,this.jiaGroup.visible=!1,this.jianGroup.visible=!0))},t.prototype.setZhuName=function(e){""!=e&&(this.myLabel.text=e)},t}(BaseUI);__reflect(RightMessage.prototype,"RightMessage");var EnumMoveEnd=function(){function e(){}return e.LEFT="left",e.RIGHT="right",e.MIDDLE="middle",e}();__reflect(EnumMoveEnd.prototype,"EnumMoveEnd");var WebParams=function(){function e(){}return Object.defineProperty(e,"param",{get:function(){return this._param},set:function(e){this._param=e,null==this._param&&(this._param={})},enumerable:!0,configurable:!0}),e.openWindow=function(t,i){var n;return n=t!=e.defaultURL?e.ip+t:t,i?void(i.location.href=n):window.open(n,"_blank")},Object.defineProperty(e,"ip",{get:function(){return null==this._ip?Config.isRelease?Config.isHttps?"https://xdh5.aqgame.cn:3443":"http://47.104.85.224:13000":Config.isHttps?"https://xdcs.aqgame.cn:3333":"http://192.168.0.35:8888":this._ip},set:function(e){this._ip=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"configPack",{get:function(){return this.param.cfgpack?this.param.cfgpack:""},enumerable:!0,configurable:!0}),Object.defineProperty(e,"port",{get:function(){return this.param.port?this.param.port:this.param.svrport?this.param.svrport:""},enumerable:!0,configurable:!0}),Object.defineProperty(e,"loginid",{get:function(){if(null==this.tmp_debugloginid){var t=e.param.loginid;if(!t)return null==this.tmp_debugloginid&&(this.tmp_debugloginid="999"+egret.getTimer()+1e4*Math.random()),this.tmp_debugloginid;this.debugloginid=t}return this.debugloginid},enumerable:!0,configurable:!0}),Object.defineProperty(e,"webid",{get:function(){return this.param.webid?this.param.webid:""},enumerable:!0,configurable:!0}),Object.defineProperty(e,"account",{get:function(){return this.param.account?this.param.account:""},enumerable:!0,configurable:!0}),Object.defineProperty(e,"sign",{get:function(){return this.param.sign?this.param.sign:""},enumerable:!0,configurable:!0}),Object.defineProperty(e,"zoneid",{get:function(){return this.param.zoneid?this.param.zoneid:""},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isadultStr",{get:function(){return this.param.isadult?this.param.isadult:""},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isadult",{get:function(){return"1"==this.param.isadult},enumerable:!0,configurable:!0}),Object.defineProperty(e,"agent",{get:function(){return this.param.agent?this.param.agent:""},enumerable:!0,configurable:!0}),Object.defineProperty(e,"hfagent",{get:function(){return this.param.hfagent?this.param.hfagent:""},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ad",{get:function(){return this.param.ad?this.param.ad:""},enumerable:!0,configurable:!0}),Object.defineProperty(e,"loginexeurl",{get:function(){return this.param.loginexeurl?this.param.loginexeurl:""},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pfviptype",{get:function(){var e=this.param.pfviptype,t=parseInt(e);return t},enumerable:!0,configurable:!0}),Object.defineProperty(e,"proVer",{get:function(){return this.param.prover?this.param.prover:""},enumerable:!0,configurable:!0}),Object.defineProperty(e,"resVer",{get:function(){return this.param.resver?this.param.resver:""},enumerable:!0,configurable:!0}),Object.defineProperty(e,"cfgver",{get:function(){return this.param.cfgver?this.param.cfgver:""},enumerable:!0,configurable:!0}),Object.defineProperty(e,"time",{get:function(){return this.param.time?this.param.time:""},enumerable:!0,configurable:!0}),Object.defineProperty(e,"adregtime",{get:function(){return this.param.adregtime?this.param.adregtime:""},enumerable:!0,configurable:!0}),Object.defineProperty(e,"showlogin",{get:function(){return this.param.showlogin?this.param.showlogin:""},enumerable:!0,configurable:!0}),Object.defineProperty(e,"agent_plusdata",{get:function(){return this.param.agent_plusdata},enumerable:!0,configurable:!0}),Object.defineProperty(e,"agent_coldatas",{get:function(){return this.param.agent_coldatas},enumerable:!0,configurable:!0}),Object.defineProperty(e,"agentAppendData",{get:function(){return this.param.agent_append_data},enumerable:!0,configurable:!0}),Object.defineProperty(e,"agentAppendSign",{get:function(){return this.param.agent_append_sign},enumerable:!0,configurable:!0}),Object.defineProperty(e,"cdn",{get:function(){return this.param.cdn?this.param.cdn:""},enumerable:!0,configurable:!0}),Object.defineProperty(e,"closerecharge",{get:function(){return this.param.closerecharge?this.param.closerecharge:0},enumerable:!0,configurable:!0}),Object.defineProperty(e,"rechargeurl",{get:function(){return this.param.rechargeurl?this.param.rechargeurl:this.defaultURL},enumerable:!0,configurable:!0}),Object.defineProperty(e,"fcmurl",{get:function(){return this.param.fcmurl?this.param.fcmurl:this.defaultURL},enumerable:!0,configurable:!0}),Object.defineProperty(e,"closeLog",{get:function(){return null!=this.param.closelog&&1==this.param.closelog?!0:!1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"weblogurl",{get:function(){return this.param.weblogurl?this.param.weblogurl:null},enumerable:!0,configurable:!0}),Object.defineProperty(e,"closeLoginLog",{get:function(){return null!=this.param.closeLoginLog&&1==this.param.closeLoginLog?!0:!1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"closeWebLog",{get:function(){return null!=this.param.closeweblog&&1==this.param.closeweblog?!0:!1},enumerable:!0,configurable:!0}),e.setLoadLog=function(t,i,n){for(var o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];var s=t?"加载结束":"加载开始";s=s+">>"+n+" "+o.join(" "),e.sendWebLog(LogType.TYPE_LOAD_,s,i)},e.setLoginWebLog=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];var o=">>"+t+" "+i.join(" ");e.sendWebLog(LogType.TYPE_LOGIN_STEP,o)},e.getDateTime=function(e){var t=e.getHours(),i=e.getMinutes(),n=e.getSeconds(),o=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+(10>t?"0"+t:""+t)+":"+(10>i?"0"+i:""+i)+":"+(10>n?"0"+n:""+n)+":"+e.getMilliseconds();return o},e.sendWebLog=function(e,t,i,n,o){void 0===i&&(i=""),void 0===n&&(n=""),void 0===o&&(o="")},e.callJs=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];try{}catch(n){GameLog.logError(n.stack)}},e.defaultURL="http://xdns.dmgame.com",e.appid=1105226930,e.tmp_debugloginid=null,e.debugloginid=null,e.isFlag=!1,e}();__reflect(WebParams.prototype,"WebParams");var MailDataGroupItem=function(e){function t(){return e.call(this,"MailDataGroupItemSkin")||this}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.onEnable=function(){},t.prototype.onRemove=function(){},t.prototype.setImage=function(e){""!=e&&(this.giftImage.source=e)},t.prototype.setName=function(e){""!=e&&(this.giftName.text=e)},t.prototype.setCount=function(e){""!=e&&(this.giftCount.text="x"+e)},t}(BaseUI);__reflect(MailDataGroupItem.prototype,"MailDataGroupItem");var EnumRecordType=function(){function e(){}return e.SAVE=0,e.READ=1,e}();__reflect(EnumRecordType.prototype,"EnumRecordType");var MailListItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="MailListItemSkin",t.addEventListener(egret.TouchEvent.TOUCH_TAP,t.itemTouch,t),t}return __extends(t,e),t.prototype.dataChanged=function(){this.oldData!=this.data&&(this.text.text=this.data.title,this.oldData=this.data)},t.prototype.itemTouch=function(){App.sound.playSoundSwitchClient1(SoundManager.button),PanelOpenManager.openPanel(EnumPanelID.G2_MailDataPanel,this.data,!1),PanelOpenManager.removePanel(EnumPanelID.G2_MailPanel)},t}(eui.ItemRenderer);__reflect(MailListItem.prototype,"MailListItem");var EnumRegExp=function(){function e(){}return e.PHONE_REGULAR_EXPRESSION="^(13[0-9]|14[5|9]|15[0-3|5-9]|16[6]|17[0|8]|18[0|9]|19[8|9])\\d{8}$",e.PHONE_VERIF_CODE="^d{6}$",e}();__reflect(EnumRegExp.prototype,"EnumRegExp");var ProtocolItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onAddStage=function(t){e.prototype.onAddStage.call(this,t),this._isChanged&&(this._isChanged=!1,this.getLabel().text=this.data)},t.prototype.dataChanged=function(){this.parent?(this.getLabel().text=this.data,this._isChanged=!1):this._isChanged=!0},t.prototype.getLabel=function(){return this.txt||(this.txt=new eui.Label,this.txt.x=19,this.txt.y=19,this.txt.size=24,this.txt.lineSpacing=5,this.txt.fontFamily="fzyc",this.txt.width=727,this.txt.textColor=7293771,this.addChild(this.txt)),this.txt},t}(ItemRenderer);__reflect(ProtocolItem.prototype,"ProtocolItem");var EnumResGroupName=function(){function e(){}return e.PRELOAD="preload",e.PRELOAD_SOUND="proloadSound",e.LOADING="loading",e.LOGO="logo",e.LOGO1="logo1",e}();__reflect(EnumResGroupName.prototype,"EnumResGroupName");var EnumSoundId=function(){function e(){}return e.BGM="Lovehome",e.CLICK="click",e.NOTICE="notice",e.BUBBLE="bubble",e.PANEL_CLOSE="panelClose",e.WRITE="write",e.SCROLL_PAPER="scrollPaper",e.MESSAGE="message",e.HEART="heart",e.FILM="film",e.RING_MESSAGE="ringMessage",e}();__reflect(EnumSoundId.prototype,"EnumSoundId");var EnumTouchEffect=function(){function e(){}return e.ADD_SCALE="add_scale",e.MIN_SCALE="min_scale",e.ALPHA="alpha",e}();__reflect(EnumTouchEffect.prototype,"EnumTouchEffect");var EnumTypingSpeed=function(){function e(){}return e.FAST=75,e.NORMAL=100,e.SLOW=130,e.LIST=[e.NORMAL,e.SLOW,e.NORMAL,e.FAST],e.SYMBOL_TIME=400,e.SYMBOL="，。？！、;",e}();__reflect(EnumTypingSpeed.prototype,"EnumTypingSpeed");var ShiPinScrollerItem=function(e){function t(){return e.call(this,"ShiPinScrollerItemSkin")||this}return __extends(t,e),t.prototype.show=function(t){e.prototype.show.call(this,t),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this,this),this._dispatcher.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.hide,this,this)},t.prototype.hide=function(){e.prototype.hide.call(this)},t.prototype.onOK=function(e){e.type==Alert.OK&&ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.userBgiSet,{bid:this.transData.id},new FunctionVO(this.setBgBack,this))},t.prototype.onOK2=function(e){e.type==Alert.OK&&ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.userBgiUnlock,{bid:this.transData.id},new FunctionVO(this.bgBack,this))},t.prototype.onOK3=function(e){e.type==Alert.OK&&ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.videoBuy,{vid:this.transData.id},new FunctionVO(this.buyBack,this))},t.prototype.onTouch=function(){App.sound.playSoundSwitchClient1(SoundManager.button),GameLog.log("item",this.transData);var e=this.transData;if(2==e.types){if(1==e.use_status)return;0==e.locked?Alert.show2(LanConst.video0_02,"",new FunctionVO(this.onOK,this),LanConst.dialog0_00):Alert.show2(LanConst.video0_01,"",new FunctionVO(this.onOK2,this),LanConst.dialog0_00)}if(1==e.types)if(0==e.locked){var t={ossvid:e.ossvid};ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.videoUrl,t,new FunctionVO(this.videoUrlBack,this)),GameLog.log(e.ossvid)}else Alert.show2(LanConst.video0_00,"",new FunctionVO(this.onOK3,this),LanConst.dialog0_00);else if(0==e.types)if(0==e.locked){var t={ossvid:e.ossvid};ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.videoUrl,t,new FunctionVO(this.videoUrlBack,this))}else Notice.showBottomCenterMessage("第"+e.days+"天开放")},t.prototype.setBgBack=function(e){return 200==e.code?(ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.userCollections,{},new FunctionVO(this.revVideoList,this)),App.dispatcher.dispatchEvent(G2_GameSceneEvent.CHANGE_BG,this.transData.uri+"_bg"),void Notice.showBottomCenterMessage("设置成功")):void Notice.showBottomCenterMessage(""+e.info)},t.prototype.bgBack=function(e){200==e.code?(ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.userCollections,{},new FunctionVO(this.revVideoList,this)),Notice.showBottomCenterMessage("购买成功")):Notice.showBottomCenterMessage(""+e.info)},t.prototype.revVideoList=function(e){200==e.code?(App.data.game2Center.DataCenter.Video.mem=e.data.mem,App.data.game2Center.DataCenter.Video.fav=e.data.fav,App.data.game2Center.DataCenter.Video.bgi=e.data.bgi,App.dispatcher.dispatchEvent(EventConst.UPDATE_LIBAO)):Notice.showBottomCenterMessage(e.info)},t.prototype.videoUrlBack=function(e){var t=this;if(200==e.code)if(DeviceUtil.IsWeb&&DeviceUtil.isMobile){var i=new PlayVideoDialog;i.setContent("观看视频"),i.setOk(function(){App.dispatcher.dispatchEvent(EventConst.PLAY_WEB_VIDEO,e.data.url,new FunctionVO(t.onPlayVideoComplete,t))},this),i.show(!1)}else App.dispatcher.dispatchEvent(EventConst.PLAY_WEB_VIDEO,e.data.url,new FunctionVO(this.onPlayVideoComplete,this));else Notice.showBottomCenterMessage(""+e.info)},t.prototype.onPlayVideoComplete=function(){Video.instance().dispose(),App.data.game2Center.SoundManager.playBGM(SoundManager.bgm)},t.prototype.buyBack=function(e){if(200==e.code){this.transData.locked=0;for(var t=0;t<e.data.fav.length;t++)e.data.fav[t].id==this.transData.id&&(this.transData.ossvid=e.data.fav[t].ossvid);App.data.game2Center.DataCenter.Video=e.data,this.showPlay(!0),this.showMask(!1),this.showLock(!1),this.showGoldGroup(!1),App.data.game2Center.DataCenter.UserInfo.gold=App.data.game2Center.DataCenter.UserInfo.gold-this.transData.price,App.dispatcher.dispatchEvent(EventConst.UPDATE_SHIPIN_GOLD,App.data.game2Center.DataCenter.UserInfo.gold)}else Notice.showBottomCenterMessage(""+e.info)},t.prototype.urlBack=function(e){200==e.code?App.dispatcher.dispatchEvent(EventConst.PLAY_WEB_VIDEO,e.data,new FunctionVO(this.onPlayVideoComplete,this)):Notice.showBottomCenterMessage(""+e.info)},t.prototype.setData=function(e){this.transData=e},t.prototype.setGoldText=function(e){""!=e&&(this.goldText.text=e)},t.prototype.setVideoImg=function(e,t,i){if(void 0===t&&(t=!1),void 0===i&&(i=!1),e&&""!=e){if(t)return i?void(this.videoImg.source=e+"_b_png"):void(this.videoImg.source=e+"_png");this.videoImg.source=e}},t.prototype.setIconImg=function(e){this.iconImg.source=e},t.prototype.showMask=function(e){},t.prototype.showRectMask=function(e){this.rectMask.visible=e},t.prototype.showLock=function(e){e?this.lockImg.visible=!0:this.lockImg.visible=!1},t.prototype.showGoldGroup=function(e){e?this.goldGroup.visible=!0:this.goldGroup.visible=!1},t.prototype.showPlay=function(e){e?this.playImg.visible=!0:this.playImg.visible=!1},t.prototype.showDate=function(e){e?this.dateGroup.visible=!0:this.dateGroup.visible=!1},t.prototype.setDateText=function(e){""!=e?this.dateText.text=e:this.dateText.text=""},t.prototype.setTypeText=function(e){this.typeText.text=e},t}(BaseView);__reflect(ShiPinScrollerItem.prototype,"ShiPinScrollerItem");var EnumVideoType=function(){function e(){}return e.DONGTAI_BIZHI=1,e.HUIYI_SHIPIN=2,e.XINTIAO_JIEJU=3,e.AVG_SHIPIN=4,e.XIN_DONG1=5,e.XIN_DONG1_VIDEO=6,e}();__reflect(EnumVideoType.prototype,"EnumVideoType");var DaojuListItem=function(e){function t(){var t=e.call(this,"DaojuListItemSkin")||this;return t.buyGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,t.buyBtnTouch,t),t}return __extends(t,e),t.prototype.setData=function(e){this.recData=e},t.prototype.setCName=function(e){e&&""!=e&&(this.cName.text=e)},t.prototype.setEName=function(e){this.eName.text=""},t.prototype.setImg=function(e){e&&""!=e&&(this.daojuImg.source=e)},t.prototype.setMiaoShu=function(e,t){0==t?this.miaoshuLabel.text=e:this.miaoshuLabel.textFlow=[{text:"送给女生可获得",style:{textColor:11711667}},{text:t+"",style:{textColor:16025188}},{text:"亲密度",style:{textColor:11711667}}]},t.prototype.setGold=function(e){e&&""!=e&&(this.goldLabel.text=e)},t.prototype.setBuyLimit=function(e,t,i){e?this.buyLimitLabel.text="今日可购买:"+i+"/"+t:this.buyLimitLabel.text=""},t.prototype.buyBtnTouch=function(){App.sound.playSoundSwitchClient1(SoundManager.button),PanelOpenManager.openPanel(EnumPanelID.G2_BuyToolPanel,this.recData)},t}(BaseView);__reflect(DaojuListItem.prototype,"DaojuListItem");var EnumWindowType=function(){function e(){}return e.TYPE_0=0,e.TYPE_1=1,e.TYPE_2=2,e.TYPE_3=3,e.TYPE_4=4,e}();__reflect(EnumWindowType.prototype,"EnumWindowType");var MysteriousShopItem=function(e){function t(){return e.call(this,"MysteriousShopItemSkin")||this}return __extends(t,e),t.prototype.show=function(e){e&&(this.dataConfig=e,1==e.status?this.isSouOver.visible=!0:this.isSouOver.visible=!1,"diamond"==e.coin_type?this.iconType.source="shop2_zhuanshi_png":this.iconType.source="shop2_jinbi2_png",this.iconImg.source=e["package"][0].pic,this.titleStr.text=e["package"][0].cname+"X"+e["package"][0].num,this.contextText.text=e.des+"",this.numStr.text=e.price+"",this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchUs,this,this))},t.prototype.touchUs=function(){var e=this.dataConfig;if(1==e.status)return void Notice.showBottomCenterMessage("已售罄");var t="确定花费";t+=e.price,t+="diamond"==e.coin_type?"钻石":"金币",t+="购买 "+e.title+"吗？",Alert.show2(t,"",new FunctionVO(function(t){t.type==Alert.OK&&App.dispatcher.dispatchEvent(G2_GameSceneEvent.BUY_SHENMISHOP,e)},this),LanConst.dialog0_00)},t}(BaseView);__reflect(MysteriousShopItem.prototype,"MysteriousShopItem");var ShopDiamondsListItem=function(e){function t(){return e.call(this,"ShopDiamondsListItemSkin")||this}return __extends(t,e),t.prototype.setData=function(e){this.transData=e},t.prototype.createComplete=function(){"rmb"==this.transData.coin_type&&this.showtype(2),"diamond"==this.transData.coin_type&&this.showtype(1),this.setImg(this.transData.pic),this.setPrice(this.transData.price),e.prototype.createComplete.call(this)
},t.prototype.show=function(t){e.prototype.show.call(this,t),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.diamondsItemTouch,this)},t.prototype.hide=function(){e.prototype.hide.call(this),this.open_window=null,App.timer.clearTimer(this,this.onTimer),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.diamondsItemTouch,this),this.updateCallBack=null},t.prototype.diamondsItemTouch=function(){App.sound.playSoundSwitchClient1(SoundManager.button),this.sendGiftBuy()},t.prototype.sendGiftBuy=function(){if(Config.U8Login)return void App.nativeBridge.sendU8PayOld("diamond",this.transData);if(Config.soEasy)return void platform.payOrder(this.transData.id);if(DeviceUtil.IsAndroid&&DeviceUtil.IsNative){var e=this.transData["package"][0],t=this.transData.price,i={name:"购买"+e.num+e.cname,price:t+"元",desc:"只需"+t+"元即可获得"+e.num+e.cname};App.nativeBridge.sendAndroidPay(this.transData.id,i)}else{var n=ProtocolHttp.giftBuy;n=AddSomeMsgUtils.addSomeMsgByGiftBuy(n),n.gid=this.transData.id;var o=window.channel;o&&(n.channel=o),MilletSDK.getInstance().millet&&(n.channel="xiaomi"),H5_Vivo_SDK.getInstance().vivoData&&(n.channel="vivo"),DeviceUtil.IsWeb&&(H5_360_Sdk.getInstance().config360&&0!=H5_360_Sdk.getInstance().config360.time?n.channel="360":n.channel="web_alipay"),!DeviceUtil.IsWeb||Config.soEasy||H5_360_Sdk.getInstance().config360||(this.open_window=WebParams.openWindow(WebParams.defaultURL)),ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.giftBuy,n,new FunctionVO(this.buyDiamondsBack,this))}},t.prototype.buyDiamondsBack=function(e){if(GameLog.log(e),200==e.code){if(DeviceUtil.IsWeb){if(this.order_id=e.data.order_id,H5_360_Sdk.getInstance().config360&&0!=H5_360_Sdk.getInstance().config360.time)H5_360_Sdk.getInstance().pay360Param=e.data.params,H5_360_Sdk.getInstance().order_id=e.data.order_id,H5_360_Sdk.getInstance().paySdk(),GameLog.log("360支付订单号"+this.order_id);else{var t=e.data.aliparams,i=App.data.game2Center.DataCenter.setSelect(t);WebParams.openWindow("/shop/web/switch/?url="+i,this.open_window)}return void this.getBuy()}DeviceUtil.IsNative&&DeviceUtil.IsIos&&"rmb"==this.transData.coin_type?App.nativeBridge.sendIOSPay(e.data.order_id,e.data.product_id):"rmb"==this.transData.coin_type?App.nativeBridge.sendPay(e):"diamond"==this.transData.coin_type&&(Notice.showBottomCenterMessage("购买成功"),App.data.game2Center.DataCenter.UserInfo.diamond=e.data.diamond,App.data.game2Center.DataCenter.UserInfo.gold=e.data.gold,App.data.game2Center.DataCenter.UserInfo.hearts=e.data.hearts,App.data.game2Center.DataCenter.UserInfo.power=e.data.power,this.updateCallBack.exec(),App.dispatcher.dispatchEvent(EventConst.UPDATE_SIWEI))}else 981==e.code?App.nativeBridge.sendPay(e):Notice.showBottomCenterMessage(""+e.info)},t.prototype.showtype=function(e){switch(e){case 1:this.zhuanshiImg.visible=!0,this.renminbiImg.visible=!1;break;case 2:this.zhuanshiImg.visible=!1,this.renminbiImg.visible=!0}},t.prototype.setImg=function(e){""!=e&&(this.daojuImg.source=e)},t.prototype.setPrice=function(e){""!=e&&(this.goldLabel.text=e)},t.prototype.setFirstPay=function(e){this.transData.first_pay=e,this.doubleImg.visible=e},t.prototype.getBuy=function(){ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.payStatusH5,{order_id:this.order_id},new FunctionVO(this.payBack,this))},t.prototype.payBack=function(e){200==e.code?(Notice.showBottomCenterMessage("支付成功"),App.dispatcher.dispatchEvent(EventConst.REQ_GAME_INFO),App.data.game2Center.LoadingLock.unlock()):(this.t=0,this._needSendBuy=!0,App.timer.clearTimer(this,this.onTimer),App.timer.doTimeLoop(this,3e3,this.onTimer))},t.prototype.onTimer=function(){return this.t+=3,this.t>=600?(GameLog.log("-------------10分钟内支付失败"),void App.timer.clearTimer(this,this.onTimer)):void(this._needSendBuy&&(this._needSendBuy=!1,ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.payStatusH5,{order_id:this.order_id},new FunctionVO(this.onPaySuccess,this,!0))))},t.prototype.onPaySuccess=function(e){200==e.code?(Notice.showBottomCenterMessage("支付成功"),App.dispatcher.dispatchEvent(EventConst.REQ_GAME_INFO),App.timer.clearTimer(this,this.onTimer),App.data.game2Center.LoadingLock.unlock()):(GameLog.log("-------------未支付，继续检测----------"),this._needSendBuy=!0)},t}(BaseView);__reflect(ShopDiamondsListItem.prototype,"ShopDiamondsListItem");var ShopGoldListItem=function(e){function t(){return e.call(this,"ShopGoldListItemSkin")||this}return __extends(t,e),t.prototype.setData=function(e){this.transData=e},t.prototype.createComplete=function(){"rmb"==this.transData.coin_type&&this.showtype(2),"diamond"==this.transData.coin_type&&this.showtype(1),this.setImg(this.transData.pic),this.setPrice(this.transData.price),e.prototype.createComplete.call(this)},t.prototype.show=function(t){e.prototype.show.call(this,t),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.diamondsItemTouch,this)},t.prototype.hide=function(){e.prototype.hide.call(this),this.open_window=null,App.timer.clearTimer(this,this.onTimer),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.diamondsItemTouch,this),this.updateCallBack=null},t.prototype.diamondsItemTouch=function(){var e=this;App.sound.playSoundSwitchClient1(SoundManager.button);var t=StringUtil.substitute(EnumAlertContent.BUY_USE_DIAMOND,this.transData.price);Alert.show2(t,"",new FunctionVO(function(t){t.type==Alert.OK&&e.sendGiftBuy()},this),"",!0)},t.prototype.sendGiftBuy=function(){var e=ProtocolHttp.giftBuy;e=AddSomeMsgUtils.addSomeMsgByGiftBuy(e),e.gid=this.transData.id;var t=window.channel;t&&(e.channel=t),MilletSDK.getInstance().millet&&(e.channel="xiaomi"),H5_Vivo_SDK.getInstance().vivoData&&(e.channel="vivo"),DeviceUtil.IsWeb&&(H5_360_Sdk.getInstance().config360&&0!=H5_360_Sdk.getInstance().config360.time?e.channel="360":e.channel="web_alipay"),!DeviceUtil.IsWeb||Config.soEasy||H5_360_Sdk.getInstance().config360||(this.open_window=WebParams.openWindow(WebParams.defaultURL)),ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.giftBuy,e,new FunctionVO(this.buyDiamondsBack,this))},t.prototype.buyDiamondsBack=function(e){if(200==e.code){if(DeviceUtil.IsWeb){if(this.order_id=e.data.order_id,H5_360_Sdk.getInstance().config360&&0!=H5_360_Sdk.getInstance().config360.time)H5_360_Sdk.getInstance().pay360Param=e.data.params,H5_360_Sdk.getInstance().order_id=e.data.order_id,H5_360_Sdk.getInstance().paySdk(),GameLog.log("360支付订单号"+this.order_id);else{var t=e.data.aliparams,i=App.data.game2Center.DataCenter.setSelect(t);WebParams.openWindow("/shop/web/switch/?url="+i,this.open_window)}return void this.getBuy()}DeviceUtil.IsNative&&DeviceUtil.IsIos&&"rmb"==this.transData.coin_type?App.nativeBridge.sendIOSPay(e.data.order_id,e.data.product_id):"rmb"==this.transData.coin_type?App.nativeBridge.sendPay(e):"diamond"==this.transData.coin_type&&(Notice.showBottomCenterMessage("购买成功"),App.data.game2Center.DataCenter.UserInfo.diamond=e.data.diamond,App.data.game2Center.DataCenter.UserInfo.gold=e.data.gold,App.data.game2Center.DataCenter.UserInfo.hearts=e.data.hearts,App.data.game2Center.DataCenter.UserInfo.power=e.data.power,this.updateCallBack&&this.updateCallBack.exec(),App.dispatcher.dispatchEvent(EventConst.UPDATE_SIWEI))}else 981==e.code?App.nativeBridge.sendPay(e):Alert.show2("钻石数量不足，是否充值钻石？","",new FunctionVO(function(e){e.type==Alert.OK&&PanelOpenManager.openPanel(EnumPanelID.G2_ShopDiamondPanel,null,!1)},this))},t.prototype.showtype=function(e){switch(e){case 1:this.zhuanshiImg.visible=!0,this.renminbiImg.visible=!1;break;case 2:this.zhuanshiImg.visible=!1,this.renminbiImg.visible=!0}},t.prototype.setImg=function(e){""!=e&&(this.daojuImg.source=e)},t.prototype.setPrice=function(e){""!=e&&(this.goldLabel.text=e)},t.prototype.getBuy=function(){ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.payStatusH5,{order_id:this.order_id},new FunctionVO(this.payBack,this))},t.prototype.payBack=function(e){200==e.code?(Notice.showBottomCenterMessage("支付成功"),App.dispatcher.dispatchEvent(EventConst.REQ_GAME_INFO),App.data.game2Center.LoadingLock.unlock()):(this.t=0,this._needSendBuy=!0,App.timer.clearTimer(this,this.onTimer),App.timer.doTimeLoop(this,3e3,this.onTimer))},t.prototype.onTimer=function(){return this.t+=3,this.t>=600?(GameLog.log("-------------10分钟内支付失败"),void App.timer.clearTimer(this,this.onTimer)):void(this._needSendBuy&&(this._needSendBuy=!1,ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.payStatusH5,{order_id:this.order_id},new FunctionVO(this.onPaySuccess,this,!0))))},t.prototype.onPaySuccess=function(e){200==e.code?(Notice.showBottomCenterMessage("支付成功"),App.dispatcher.dispatchEvent(EventConst.REQ_GAME_INFO),App.timer.clearTimer(this,this.onTimer),App.data.game2Center.LoadingLock.unlock()):(GameLog.log("-------------未支付，继续检测----------"),this._needSendBuy=!0)},t}(BaseView);__reflect(ShopGoldListItem.prototype,"ShopGoldListItem");var EventType=function(){function e(){}return e.STGAE_RESIZE="EventType.STGAE_RESIZE",e.BUY_SUCCESS="EventType.BUY_SUCCESS",e.BIND_PHONE_SUCCESS="EventType.BIND_PHONE_SUCCESS",e.SHOP_IS_SHOP="EventType.SHOP_IS_SHOP",e.GAMEHALL_ITEM_CLICK="EventType.GAMEHALL_ITEM_CLICK",e}();__reflect(EventType.prototype,"EventType");var ShopXiangouListItem=function(e){function t(){return e.call(this,"ShopXiangouListItemSkin")||this}return __extends(t,e),t.prototype.setData=function(e){this.transData=e},t.prototype.createComplete=function(){"rmb"==this.transData.coin_type&&this.showtype(2),"diamond"==this.transData.coin_type&&this.showtype(1),this.setImg(this.transData.pic),this.setPrice(this.transData.price),e.prototype.createComplete.call(this)},t.prototype.show=function(t){e.prototype.show.call(this,t),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.diamondsItemTouch,this)},t.prototype.hide=function(){e.prototype.hide.call(this),this.open_window=null,App.timer.clearTimer(this,this.onTimer),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.diamondsItemTouch,this),this.updateCallBack=null},t.prototype.diamondsItemTouch=function(){var e=this;if(App.sound.playSoundSwitchClient1(SoundManager.button),"rmb"==this.transData.coin_type&&this.sendGiftBuy(),"diamond"==this.transData.coin_type){var t=StringUtil.substitute(EnumAlertContent.BUY_USE_DIAMOND,this.transData.price);Alert.show2(t,"",new FunctionVO(function(t){t.type==Alert.OK&&e.sendGiftBuy()},this),"",!0)}},t.prototype.sendGiftBuy=function(){if(Config.U8Login&&"rmb"==this.transData.coin_type)return void App.nativeBridge.sendU8PayOld("libao",this.transData);if(Config.soEasy&&"rmb"==this.transData.coin_type)return void platform.payOrder(this.transData.id);if(DeviceUtil.IsAndroid&&DeviceUtil.IsNative&&"rmb"==this.transData.coin_type){var e=this.transData["package"],t=this.transData.price,i={name:e[0].cname,price:t+"元",desc:"解锁"+e[0].cname+"功能,加送"+e[1].num+e[1].cname};App.nativeBridge.sendAndroidPay(this.transData.id,i)}else{var n=ProtocolHttp.giftBuy;n=AddSomeMsgUtils.addSomeMsgByGiftBuy(n),n.gid=this.transData.id;var o=window.channel;o&&(n.channel=o),MilletSDK.getInstance().millet&&(n.channel="xiaomi"),H5_Vivo_SDK.getInstance().vivoData&&(n.channel="vivo"),DeviceUtil.IsWeb&&(H5_360_Sdk.getInstance().config360&&0!=H5_360_Sdk.getInstance().config360.time?n.channel="360":n.channel="web_alipay"),!DeviceUtil.IsWeb||Config.soEasy||H5_360_Sdk.getInstance().config360||(this.open_window=WebParams.openWindow(WebParams.defaultURL)),ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.giftBuy,n,new FunctionVO(this.buyDiamondsBack,this))}},t.prototype.buyDiamondsBack=function(e){if(200==e.code){if(DeviceUtil.IsWeb){if(this.order_id=e.data.order_id,H5_360_Sdk.getInstance().config360&&0!=H5_360_Sdk.getInstance().config360.time)H5_360_Sdk.getInstance().pay360Param=e.data.params,H5_360_Sdk.getInstance().order_id=e.data.order_id,H5_360_Sdk.getInstance().paySdk(),GameLog.log("360支付订单号"+this.order_id);else{var t=e.data.aliparams,i=App.data.game2Center.DataCenter.setSelect(t);WebParams.openWindow("/shop/web/switch/?url="+i,this.open_window)}return void this.getBuy()}DeviceUtil.IsNative&&DeviceUtil.IsIos&&"rmb"==this.transData.coin_type?App.nativeBridge.sendIOSPay(e.data.order_id,e.data.product_id):"rmb"==this.transData.coin_type?App.nativeBridge.sendPay(e):"diamond"==this.transData.coin_type&&(Notice.showBottomCenterMessage("购买成功"),App.data.game2Center.DataCenter.UserInfo.diamond=e.data.diamond,App.data.game2Center.DataCenter.UserInfo.gold=e.data.gold,App.data.game2Center.DataCenter.UserInfo.hearts=e.data.hearts,App.data.game2Center.DataCenter.UserInfo.power=e.data.power,this.updateCallBack&&this.updateCallBack.exec(),App.dispatcher.dispatchEvent(EventConst.UPDATE_SIWEI),App.dispatcher.dispatchEvent(EventConst.REQ_UPDATE_BAGS))}else 981==e.code?App.nativeBridge.sendPay(e):817==e.code?Notice.showBottomCenterMessage(e.info):Alert.show2("钻石数量不足，是否充值钻石？","",new FunctionVO(function(e){e.type==Alert.OK&&PanelOpenManager.openPanel(EnumPanelID.G2_ShopDiamondPanel,null,!1)},this))},t.prototype.showtype=function(e){switch(e){case 1:this.zhuanshiImg.visible=!0,this.renminbiImg.visible=!1;break;case 2:this.zhuanshiImg.visible=!1,this.renminbiImg.visible=!0}},t.prototype.setImg=function(e){""!=e&&(this.daojuImg.source=e)},t.prototype.setPrice=function(e){""!=e&&(this.goldLabel.text=e)},t.prototype.getBuy=function(){ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.payStatusH5,{order_id:this.order_id},new FunctionVO(this.payBack,this))},t.prototype.payBack=function(e){200==e.code?(Notice.showBottomCenterMessage("支付成功"),App.dispatcher.dispatchEvent(EventConst.REQ_GAME_INFO),App.data.game2Center.LoadingLock.unlock()):(this.t=0,this._needSendBuy=!0,App.timer.clearTimer(this,this.onTimer),App.timer.doTimeLoop(this,3e3,this.onTimer))},t.prototype.onTimer=function(){return this.t+=3,this.t>=600?(GameLog.log("-------------10分钟内支付失败"),void App.timer.clearTimer(this,this.onTimer)):void(this._needSendBuy&&(this._needSendBuy=!1,ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.payStatusH5,{order_id:this.order_id},new FunctionVO(this.onPaySuccess,this,!0))))},t.prototype.onPaySuccess=function(e){200==e.code?(Notice.showBottomCenterMessage("支付成功"),App.dispatcher.dispatchEvent(EventConst.REQ_GAME_INFO),App.timer.clearTimer(this,this.onTimer),App.data.game2Center.LoadingLock.unlock()):(GameLog.log("-------------未支付，继续检测----------"),this._needSendBuy=!0)},t}(BaseView);__reflect(ShopXiangouListItem.prototype,"ShopXiangouListItem");var ShopDiamondItem=function(e){function t(){return e.call(this,"ShopDiamondItemSKin")||this}return __extends(t,e),t.prototype.setPrice=function(e){this.priceLabel.text=e+""},t.prototype.diamondNum=function(e){this.priceLabel.text=e+""},t.prototype.setImg=function(e){this.diamondImage.source=e},t.prototype.setNum=function(e){this.diamondLabel.text="x"+e},t.prototype.setFirstPay=function(e){this.transData.first_pay=e,this.doubleImage.visible=e},t.prototype.setData=function(e){this.transData=e,this.setImg(this.transData.new_pic),this.setPrice(this.transData.price),this.setNum(this.transData["package"][0].num)},t.prototype.show=function(t){e.prototype.show.call(this,t),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.diamondsItemTouch,this)},t.prototype.hide=function(){e.prototype.hide.call(this),this.open_window=null,App.timer.clearTimer(this,this.onTimer),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.diamondsItemTouch,this)},t.prototype.diamondsItemTouch=function(){App.sound.playSoundSwitchClient1(SoundManager.button),this.sendGiftBuy()},t.prototype.sendGiftBuy=function(){if(Config.U8Login)return void App.nativeBridge.sendU8PayOld("diamond",this.transData);if(Config.soEasy)return void platform.payOrder(this.transData.id);if(DeviceUtil.IsAndroid&&DeviceUtil.IsNative){var e=this.transData["package"][0],t=this.transData.price,i={name:"购买"+e.num+e.cname,price:t+"元",desc:"只需"+t+"元即可获得"+e.num+e.cname};App.nativeBridge.sendAndroidPay(this.transData.id,i)}else{var n=ProtocolHttp.giftBuy;n=AddSomeMsgUtils.addSomeMsgByGiftBuy(n),n.gid=this.transData.id;var o=window.channel;o&&(n.channel=o),MilletSDK.getInstance().millet&&(n.channel="xiaomi"),H5_Vivo_SDK.getInstance().vivoData&&(n.channel="vivo"),DeviceUtil.IsWeb&&(H5_360_Sdk.getInstance().config360&&0!=H5_360_Sdk.getInstance().config360.time?n.channel="360":n.channel="web_alipay"),!DeviceUtil.IsWeb||Config.soEasy||H5_360_Sdk.getInstance().config360||(this.open_window=WebParams.openWindow(WebParams.defaultURL)),ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.giftBuy,n,new FunctionVO(this.buyDiamondsBack,this))}},t.prototype.buyDiamondsBack=function(e){if(GameLog.log(e),200==e.code){if(DeviceUtil.IsWeb&&"rmb"==this.transData.coin_type){if(this.order_id=e.data.order_id,H5_360_Sdk.getInstance().config360&&0!=H5_360_Sdk.getInstance().config360.time)H5_360_Sdk.getInstance().pay360Param=e.data.params,H5_360_Sdk.getInstance().order_id=e.data.order_id,H5_360_Sdk.getInstance().paySdk(),GameLog.log("360支付订单号"+this.order_id);else{var t=e.data.aliparams,i=App.data.game2Center.DataCenter.setSelect(t);WebParams.openWindow("/shop/web/switch/?url="+i,this.open_window)}return void this.getBuy()}DeviceUtil.IsNative&&DeviceUtil.IsIos&&"rmb"==this.transData.coin_type?App.nativeBridge.sendIOSPay(e.data.order_id,e.data.product_id):"rmb"==this.transData.coin_type?App.nativeBridge.sendPay(e):"diamond"==this.transData.coin_type&&(Notice.showBottomCenterMessage("购买成功"),App.data.game2Center.DataCenter.UserInfo.diamond=e.data.diamond,App.data.game2Center.DataCenter.UserInfo.gold=e.data.gold,App.data.game2Center.DataCenter.UserInfo.hearts=e.data.hearts,App.data.game2Center.DataCenter.UserInfo.power=e.data.power,App.dispatcher.dispatchEvent(EventConst.UPDATE_SIWEI))}else 981==e.code?App.nativeBridge.sendPay(e):Notice.showBottomCenterMessage(""+e.info)},t.prototype.getBuy=function(){ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.payStatusH5,{order_id:this.order_id},new FunctionVO(this.payBack,this))},t.prototype.payBack=function(e){200==e.code?(Notice.showBottomCenterMessage("支付成功"),App.dispatcher.dispatchEvent(EventConst.REQ_GAME_INFO),App.data.game2Center.LoadingLock.unlock()):(this.t=0,this._needSendBuy=!0,App.timer.clearTimer(this,this.onTimer),App.timer.doTimeLoop(this,3e3,this.onTimer))},t.prototype.onTimer=function(){return this.t+=3,this.t>=600?(GameLog.log("-------------10分钟内支付失败"),void App.timer.clearTimer(this,this.onTimer)):void(this._needSendBuy&&(this._needSendBuy=!1,ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.payStatusH5,{order_id:this.order_id},new FunctionVO(this.onPaySuccess,this,!0))))},t.prototype.onPaySuccess=function(e){200==e.code?(Notice.showBottomCenterMessage("支付成功"),App.dispatcher.dispatchEvent(EventConst.REQ_GAME_INFO),App.timer.clearTimer(this,this.onTimer),App.data.game2Center.LoadingLock.unlock()):(GameLog.log("-------------未支付，继续检测----------"),this._needSendBuy=!0)},t}(BaseView);__reflect(ShopDiamondItem.prototype,"ShopDiamondItem");var G2_GameSceneEvent=function(){function e(){}return e.LevelUpGuide="G2_GameSceneEvent.LevelUpGuide",e.SETGAMECONFIG="G2_GameSceneEvent.SETGAMECONFIG",e.SHOW_SCENE_ANIMATION="G2_GameSceneEvent.show_scene_animation",e.HIDE_SCENE_ANIMATION="G2_GameSceneEvent.hide_scene_animation",e.BUY_SHENMISHOP="G2_GameSceneEvent.buy_shenmishop",e.CHANGE_BG="G2_GameSceneEvent.change_bg",e.CHANGEBUYLIMIT="G2_GameSceneEvent.changeBuyLimit",e.SETBUYPART="G2_GameSceneEvent.setBuyPart",e.SETGOLDTEXT="G2_GameSceneEvent.setGoldText",e.SETDIAMONDTEXT="G2_GameSceneEvent.setDiaMondText",e.REQ_UPGRADE_STATUS="G2_GameSceneEvent.req_upgrade_status",e}();__reflect(G2_GameSceneEvent.prototype,"G2_GameSceneEvent");var ShopGiftPart=function(e){function t(){return e.call(this,"ShopGiftPartSkin")||this}return __extends(t,e),t.prototype.init=function(){var e=App.data.game2Center.DataCenter.Shop,t=e.limitpack;this.giftGrp.removeChildren(),this.giftScroller.viewport&&(this.giftScroller.viewport.scrollV=0),this.setBuyPart(t[0]),this.giftItem=[];for(var i in e.giftpcak)t.push(e.giftpcak[i]);for(var n=0;n<t.length;n++)this.giftItem[n]=new ShopGiftToolItem,this.giftItem[n].setImgPlace("gift"),this.giftItem[n].type=1,this.giftItem[n].setData(t[n]),this.giftItem[n].setImg(t[n].new_pic),this.giftItem[n].setGold(t[n].price),this.giftItem[n].setVisible(!1),this.giftItem[n].limitGrp.visible=!1,this.giftGrp.addChild(this.giftItem[n])},t.prototype.setBuyPart=function(e){this.giftPart.setData(e),this.giftPart.sureGift=1,this.giftPart.limitGrp.visible=!1,this.giftPart.contentGrp.visible=!1,this.giftPart.setGiftLimit(),this.giftPart.showHuijia(!0),this.giftPart.showHuijian(!0)},t.prototype.changeLimit=function(e,t){for(var i=App.data.game2Center.DataCenter.Shop,n=i.giftpcak,o=i.limitpack,a=0;a<n.length;a++)if(e==n[a].id&&n[a].is_limit)return void(App.data.game2Center.DataCenter.Shop.giftpcak[a].left_times=t);for(var a=0;a<o.length;a++)if(e==o[a].id&&o[a].is_limit)return void(App.data.game2Center.DataCenter.Shop.limitpack[a].left_times=t)},t.prototype.dispose=function(){if(this.giftPart.dispose(),this.giftItem)for(var t=0;t<this.giftItem.length;t++)this.giftItem[t]&&this.giftItem[t].dispose(),this.giftItem[t]=void 0;e.prototype.dispose.call(this)},t}(BaseUI);__reflect(ShopGiftPart.prototype,"ShopGiftPart");var ShopGiftToolItem=function(e){function t(){var t=e.call(this,"ShopGiftToolItemSkin")||this;return t.type=-1,t}return __extends(t,e),t.prototype.show=function(t){e.prototype.show.call(this,t),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.buyBtnTouch,this,this)},t.prototype.setInfo=function(e){},t.prototype.setImgPlace=function(e){"tool"==e?this.daojuImg.x=2:"gift"==e&&(this.daojuImg.x=0)},t.prototype.setData=function(e){this.recData=e},t.prototype.setCName=function(e){e&&""!=e&&(this.nameLabel.text=e)},t.prototype.setImg=function(e){e&&""!=e&&(this.daojuImg.source=e)},t.prototype.setMiaoShu=function(e,t){0==t?this.contentLabel.text=e:this.contentLabel.textFlow=[{text:"送给女生可获得",style:{textColor:11711667}},{text:t+"",style:{textColor:16025188}},{text:"亲密度",style:{textColor:11711667}}]},t.prototype.setGold=function(e){e&&""!=e&&(this.goldLabel.text=e)},t.prototype.setBuyLimit=function(e,t,i){e?(this.limitLabel.text="今日可购买:"+i+"/"+t,this.limitGrp.visible=!0):(this.limitLabel.text="",this.limitGrp.visible=!1)},t.prototype.buyBtnTouch=function(e){App.sound.playSoundSwitchClient1(SoundManager.button),App.dispatcher.dispatchEvent(G2_GameSceneEvent.SETBUYPART,this.recData,this.type)},t.prototype.setVisible=function(e){1==e?(this.limitGrp.visible=!0,this.nameGrp.visible=!0,this.zhuanshiImg.visible=!1,this.renminbiImg.visible=!1):0==e&&(this.nameGrp.visible=!1,this.goldImage.visible=!1,"rmb"==this.recData.coin_type&&this.showtype(2),"diamond"==this.recData.coin_type&&this.showtype(1))},t.prototype.showtype=function(e){switch(e){case 1:this.zhuanshiImg.visible=!0,this.renminbiImg.visible=!1;break;case 2:this.zhuanshiImg.visible=!1,this.renminbiImg.visible=!0}},t}(BaseView);__reflect(ShopGiftToolItem.prototype,"ShopGiftToolItem");var GameEvent=function(){function e(){}return e.GAME_INIT="GameEvent.game_init",e.GAME_NEXT="GameEvent.game_next",e.GAME_RES_LOADED="GameEvent.game_res_loaded",e.GAME_RANDOM_NAME="GameEvent.game_random_name",e.GAME_BENAME="GameEvent.game_bename",e.GAME_CONTINE="GameEvent.game_contine",e.GAME_REVIEW_DATA="GameEvent.game_review_data",e.GAME_UNLOCK_SUCCESS="GameEvent.game_unlock_success",e.SELECTED_OPTION="EventType.SELECTED_OPTION",e}();__reflect(GameEvent.prototype,"GameEvent");var ShopGiftToolPart=function(e){function t(){var t=e.call(this,"ShopGiftToolPartSkin")||this;return t.count=1,t.sureGift=0,t.sureTool=0,t}return __extends(t,e),t.prototype.setData=function(e){this.recData=e,this.count=1,this.init(),this.jiaBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.jiaBtnTouchBegin,this),this.jianBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.jianBtnTouchBegin,this),App.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),CommomBtn.btnClick(this.buyButton,this.okTouch,this,1),CommomBtn.btnClick(this.jiaBtn,this.jiaTouch,this,1),CommomBtn.btnClick(this.jianBtn,this.jianTouch,this,1)},t.prototype.init=function(){this.showHuijia(!1),this.showHuijian(!0),this.setCountLabel(this.count),this.setTitleLabel(this.recData.cname),this.setGoldLabel(this.recData.price),this.setGiftImg(this.recData.new_pic),this.recData.des?(this.setGiftTool(!0),this.setContentLabel(this.recData.des,this.recData.quantity)):this.setGiftTool(!1),this.recData.coin_type?this.recData.coin_type&&"rmb"==this.recData.coin_type?this.payImage.source="shop2_renminbi_png":this.recData.coin_type&&"diamond"==this.recData.coin_type&&(this.payImage.source="shop2_zhuanshi_png"):this.payImage.source="main2_jinbi_png"},t.prototype.setToolLimit=function(){this.recData.is_limit?(this.limitGrp.visible=!0,this.setMaxCount(this.recData.left_times,this.recData.buy_times),(this.count==this.recData.left_times||this.recData.left_times<=1)&&this.showHuijia(!0),this.recData.left_times<=0?this.buyButton.enabled=!1:this.buyButton.enabled=!0):(this.limitGrp.visible=!1,this.buyButton.enabled=!0)},t.prototype.setGiftLimit=function(){this.recData.is_limit?((this.count==this.recData.left_times||this.recData.left_times<=1)&&this.showHuijia(!0),this.recData.left_times<=0?this.buyButton.enabled=!1:this.buyButton.enabled=!0):(this.limitGrp.visible=!1,this.buyButton.enabled=!0)},t.prototype.setBuyLimit=function(e,t,i){e?(this.limitLabel.text="今日可购买:"+i+"/"+t,this.limitGrp.visible=!0):(this.limitLabel.text="",this.limitGrp.visible=!1)},t.prototype.setGiftTool=function(e){1==e?(this.contentGrp.visible=!0,this.limitGrp.visible=!0):0==e&&(this.contentGrp.visible=!1,this.limitGrp.visible=!1)},t.prototype.dispose=function(){this.open_window=null,this.jiaBtn.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.jiaBtnTouchBegin,this),this.jianBtn.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.jianBtnTouchBegin,this),App.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),CommomBtn.removeClick(this.buyButton,this.okTouch,this),CommomBtn.removeClick(this.jiaBtn,this.jiaTouch,this),CommomBtn.removeClick(this.jianBtn,this.jianTouch,this),App.timer.clearTimer(this,this.onTimer),e.prototype.dispose.call(this)},t.prototype.okTouch=function(){if(this.recData&&this.recData.id)if(this.recData.coin_type)this.sendGiftBuy();else{GameLog.log("146345  "+this.sureGift),GameLog.log("13251....  "+this.sureTool);var e=this.recData.id,t=ProtocolHttp.toolsBuy;t.gid=e,t.count=this.count,ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.toolsBuy,t,new FunctionVO(this.buyBtnTouchBack,this)),GameLog.log("BuyToolPanel >> 发送购买道具，购买个数:",this.count)}},t.prototype.sendGiftBuy=function(){if(Config.U8Login&&"rmb"==this.recData.coin_type)return void App.nativeBridge.sendU8PayOld("libao",this.recData);if(Config.soEasy&&"rmb"==this.recData.coin_type)return void platform.payOrder(this.recData.id);if(DeviceUtil.IsAndroid&&DeviceUtil.IsNative&&"rmb"==this.recData.coin_type){var e=this.recData["package"],t=this.recData.price,i={name:e[0].cname,price:t+"元",desc:"解锁"+e[0].cname+"功能,加送"+e[1].num+e[1].cname};App.nativeBridge.sendAndroidPay(this.recData.id,i)}else{var n=ProtocolHttp.giftBuy;n=AddSomeMsgUtils.addSomeMsgByGiftBuy(n),n.gid=this.recData.id;var o=window.channel;o&&(n.channel=o),MilletSDK.getInstance().millet&&(n.channel="xiaomi"),H5_Vivo_SDK.getInstance().vivoData&&(n.channel="vivo"),DeviceUtil.IsWeb&&(H5_360_Sdk.getInstance().config360&&0!=H5_360_Sdk.getInstance().config360.time?n.channel="360":n.channel="web_alipay"),"rmb"!=this.recData.coin_type||!DeviceUtil.IsWeb||Config.soEasy||H5_360_Sdk.getInstance().config360||(this.open_window=WebParams.openWindow(WebParams.defaultURL)),ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.giftBuy,n,new FunctionVO(this.buyDiamondsBack,this))}},t.prototype.buyDiamondsBack=function(e){if(200==e.code){if(this.count=1,this.setCountLabel(this.count),this.setGoldLabel(this.recData.price),DeviceUtil.IsWeb&&"rmb"==this.recData.coin_type){if(this.order_id=e.data.order_id,H5_360_Sdk.getInstance().config360&&0!=H5_360_Sdk.getInstance().config360.time)H5_360_Sdk.getInstance().pay360Param=e.data.params,H5_360_Sdk.getInstance().order_id=e.data.order_id,H5_360_Sdk.getInstance().paySdk(),GameLog.log("360支付订单号"+this.order_id);else{var t=e.data.aliparams,i=App.data.game2Center.DataCenter.setSelect(t);WebParams.openWindow("/shop/web/switch/?url="+i,this.open_window)}return void this.getBuy()}if(DeviceUtil.IsNative&&DeviceUtil.IsIos&&"rmb"==this.recData.coin_type)App.nativeBridge.sendIOSPay(e.data.order_id,e.data.product_id);else if("rmb"==this.recData.coin_type)App.nativeBridge.sendPay(e);else if("diamond"==this.recData.coin_type){Notice.showBottomCenterMessage("购买成功"),App.data.game2Center.DataCenter.UserInfo.diamond=e.data.diamond,App.data.game2Center.DataCenter.UserInfo.gold=e.data.gold,App.data.game2Center.DataCenter.UserInfo.hearts=e.data.hearts,App.data.game2Center.DataCenter.UserInfo.power=e.data.power;var n=App.data.game2Center.DataCenter.UserInfo.gold+"",o=App.data.game2Center.DataCenter.UserInfo.diamond+"";App.dispatcher.dispatchEvent(G2_GameSceneEvent.SETGOLDTEXT,n),App.dispatcher.dispatchEvent(G2_GameSceneEvent.SETDIAMONDTEXT,o),App.dispatcher.dispatchEvent(EventConst.UPDATE_SIWEI),App.dispatcher.dispatchEvent(EventConst.REQ_UPDATE_BAGS),this.recData.left_times&&(this.recData.left_times=e.data.left_times,App.dispatcher.dispatchEvent(G2_GameSceneEvent.CHANGEBUYLIMIT,this.recData.id,this.recData.left_times),this.recData.left_times<=0&&(this.buyButton.enabled=!1))}}else 981==e.code?App.nativeBridge.sendPay(e):817==e.code?Notice.showBottomCenterMessage(e.info):Alert.show2("钻石数量不足，是否充值钻石？","",new FunctionVO(function(e){e.type==Alert.OK&&PanelOpenManager.openPanel(EnumPanelID.G2_ShopDiamondPanel,null,!1)},this))},t.prototype.buyBtnTouchBack=function(e){if(GameLog.log("tool",e),200==e.code){this.count=1,this.setCountLabel(this.count),this.setGoldLabel(this.recData.price),App.data.game2Center.DataCenter.UserInfo.diamond=e.data.diamond,App.data.game2Center.DataCenter.UserInfo.gold=e.data.gold,App.data.game2Center.DataCenter.UserInfo.hearts=e.data.hearts,App.data.game2Center.DataCenter.UserInfo.power=e.data.power;var t=App.data.game2Center.DataCenter.UserInfo.gold+"",i=App.data.game2Center.DataCenter.UserInfo.diamond+"";App.dispatcher.dispatchEvent(G2_GameSceneEvent.SETGOLDTEXT,t),App.dispatcher.dispatchEvent(G2_GameSceneEvent.SETDIAMONDTEXT,i),GameLog.log("BuyToolPanel >> 购买返回，剩余限购次数:",e.data.left_times);var n={id:this.recData.id,left_times:e.data.left_times};App.dispatcher.dispatchEvent(EventConst.UPDATE_LEFT_TIMES,n),App.dispatcher.dispatchEvent(EventConst.UPDATE_SIWEI),this.recData.left_times?(this.showXiangouGroup(!0),this.recData.left_times=e.data.left_times,this.setMaxCount(this.recData.left_times,this.recData.buy_times),this.recData.left_times<=0?this.buyButton.enabled=!1:this.buyButton.enabled=!0,1==this.sureGift&&0==this.sureTool||0==this.sureGift&&1==this.sureTool&&App.dispatcher.dispatchEvent(G2_GameSceneEvent.CHANGEBUYLIMIT,this.recData.id,this.recData.left_times)):this.buyButton.enabled=!0,Notice.showBottomCenterMessage("购买成功"),App.dispatcher.dispatchEvent(G2_GameSceneEvent.SETGOLDTEXT,t),App.dispatcher.dispatchEvent(G2_GameSceneEvent.SETDIAMONDTEXT,i),App.dispatcher.dispatchEvent(EventConst.REQ_UPDATE_BAGS)}else Notice.showBottomCenterMessage(""+e.info)},t.prototype.setXiangou=function(e){this.recData.is_limit&&(this.showXiangouGroup(!0),this.recData.left_times=e,this.setMaxCount(this.recData.left_times,this.recData.buy_times))},t.prototype.canelTouch=function(){this.close()},t.prototype.jiaTouch=function(){return this.recData.price*(this.count+1)>App.data.game2Center.DataCenter.UserInfo.gold?void this.showHuijia(!0):(this.count+=1,this.showHuijian(!1),void(this.recData.is_limit?(this.count>=this.recData.left_times?(this.showHuijia(!0),this.count=this.recData.left_times):this.showHuijia(!1),this.setCountLabel(this.count),this.setGoldLabel(this.recData.price*this.count),this.count==this.recData.left_times&&this.showHuijia(!0)):(this.setCountLabel(this.count),this.setGoldLabel(this.recData.price*this.count))))},t.prototype.jianTouch=function(){this.showHuijia(!1),this.count>1?(this.count-=1,1==this.count?this.showHuijian(!0):this.showHuijian(!1)):(this.count=1,this.showHuijian(!0)),this.setCountLabel(this.count),this.setGoldLabel(this.recData.price*this.count)
},t.prototype.jiaBtnTouchBegin=function(){var e=this;egret.Tween.get(this.jiaBtn,{loop:!0}).wait(250).call(function(){e.jiaTouch()},this)},t.prototype.jianBtnTouchBegin=function(){var e=this;egret.Tween.get(this.jianBtn,{loop:!0}).wait(250).call(function(){e.jianTouch()},this)},t.prototype.onStageTouchEnd=function(){egret.Tween.removeTweens(this.jiaBtn),egret.Tween.removeTweens(this.jianBtn)},t.prototype.bgTouch=function(){this.close()},t.prototype.setGiftImg=function(e){e&&""!=e&&(this.giftImg.source=e)},t.prototype.setGoldLabel=function(e){null!=e&&(this.goldLabel.text=e)},t.prototype.setContentLabel=function(e,t){""!=e&&(0==t?this.contentLabel.text=e:this.contentLabel.textFlow=[{text:"送给女生可获得",style:{textColor:11711667}},{text:t+"",style:{textColor:16025188}},{text:"亲密度",style:{textColor:11711667}}])},t.prototype.setTitleLabel=function(e){""!=e&&(this.titleLabel.text=e)},t.prototype.setCountLabel=function(e){""!=e&&(this.countLabel.text=e)},t.prototype.showXiangouGroup=function(e){e?this.xiangouGroup.visible=!0:this.xiangouGroup.visible=!1},t.prototype.setMaxCount=function(e,t){t&&""!=t&&(this.maxcountLabel.text=e+"/"+t)},t.prototype.showHuijia=function(e){e?this.nojiaBtn.visible=!0:this.nojiaBtn.visible=!1},t.prototype.showHuijian=function(e){e?this.nojianBtn.visible=!0:this.nojianBtn.visible=!1},t.prototype.close=function(){this.count=1},t.prototype.getBuy=function(){ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.payStatusH5,{order_id:this.order_id},new FunctionVO(this.payBack,this))},t.prototype.payBack=function(e){200==e.code?(Notice.showBottomCenterMessage("支付成功"),App.dispatcher.dispatchEvent(EventConst.REQ_GAME_INFO),App.data.game2Center.LoadingLock.unlock()):(this.t=0,this._needSendBuy=!0,App.timer.clearTimer(this,this.onTimer),App.timer.doTimeLoop(this,3e3,this.onTimer))},t.prototype.onTimer=function(){return this.t+=3,this.t>=600?(GameLog.log("-------------10分钟内支付失败"),void App.timer.clearTimer(this,this.onTimer)):void(this._needSendBuy&&(this._needSendBuy=!1,ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.payStatusH5,{order_id:this.order_id},new FunctionVO(this.onPaySuccess,this,!0))))},t.prototype.onPaySuccess=function(e){200==e.code?(Notice.showBottomCenterMessage("支付成功"),App.dispatcher.dispatchEvent(EventConst.REQ_GAME_INFO),App.timer.clearTimer(this,this.onTimer),App.data.game2Center.LoadingLock.unlock()):(GameLog.log("-------------未支付，继续检测----------"),this._needSendBuy=!0)},t}(BaseUI);__reflect(ShopGiftToolPart.prototype,"ShopGiftToolPart");var ShopToolPart=function(e){function t(){return e.call(this,"ShopToolPartSkin")||this}return __extends(t,e),t.prototype.init=function(){var e=App.data.game2Center.DataCenter.Shop,t=e.tools;this.toolGrp.removeChildren(),this.setBuyPart(t[0]),this.toolScroller.viewport&&(this.toolScroller.viewport.scrollV=0),this.toolsItem=[];for(var i=0;i<t.length;i++)this.toolsItem[i]=new ShopGiftToolItem,this.toolsItem[i].setImgPlace("tool"),this.toolsItem[i].type=0,this.toolsItem[i].setData(t[i]),this.toolsItem[i].setImg(t[i].new_pic),this.toolsItem[i].setGold(t[i].price),this.toolsItem[i].setVisible(!0),this.toolsItem[i].setCName(t[i].cname),this.toolsItem[i].setMiaoShu(t[i].des,t[i].quantity),this.toolsItem[i].setBuyLimit(t[i].is_limit,t[i].buy_times,t[i].left_times),this.toolGrp.addChild(this.toolsItem[i])},t.prototype.setBuyPart=function(e){this.toolPart.setData(e),this.toolPart.sureTool=1,this.toolPart.setToolLimit()},t.prototype.changeBuyLimit=function(e,t){var i=0,n=App.data.game2Center.DataCenter.Shop,o=n.tools;for(i=0;i<o.length;i++)if(e==o[i].id){App.data.game2Center.DataCenter.Shop.tools[i].left_times=t,o[i].left_times=t,this.toolsItem[i].setBuyLimit(o[i].is_limit,o[i].buy_times,o[i].left_times);break}},t.prototype.dispose=function(){if(this.toolPart.dispose(),this.toolsItem)for(var t=0;t<this.toolsItem.length;t++)this.toolsItem[t]&&this.toolsItem[t].dispose(),this.toolsItem[t]=void 0;e.prototype.dispose.call(this)},t}(BaseUI);__reflect(ShopToolPart.prototype,"ShopToolPart");var ShopGoldItem=function(e){function t(){return e.call(this,"ShopGoldItemSkin")||this}return __extends(t,e),t.prototype.setPrice=function(e){this.priceLabel.text=e+""},t.prototype.goldNum=function(e){this.priceLabel.text=e+""},t.prototype.setImg=function(e){this.goldImage.source=e+""},t.prototype.setNum=function(e){this.goldLabel.text="x"+e},t.prototype.setData=function(e){this.transData=e,this.setImg(this.transData.new_pic),this.setPrice(this.transData.price),this.setNum(this.transData["package"][0].num)},t.prototype.show=function(t){e.prototype.show.call(this,t),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.diamondsItemTouch,this,this)},t.prototype.hide=function(){e.prototype.hide.call(this),this.open_window=null},t.prototype.diamondsItemTouch=function(){var e=this;App.sound.playSoundSwitchClient1(SoundManager.button);var t=StringUtil.substitute(EnumAlertContent.BUY_USE_DIAMOND,this.transData.price);Alert.show2(t,"",new FunctionVO(function(t){t.type==Alert.OK&&e.sendGiftBuy()},this),"",!0)},t.prototype.sendGiftBuy=function(){var e=ProtocolHttp.giftBuy;e=AddSomeMsgUtils.addSomeMsgByGiftBuy(e),e.gid=this.transData.id;var t=window.channel;t&&(e.channel=t),MilletSDK.getInstance().millet&&(e.channel="xiaomi"),H5_Vivo_SDK.getInstance().vivoData&&(e.channel="vivo"),ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.giftBuy,e,new FunctionVO(this.buyDiamondsBack,this))},t.prototype.buyDiamondsBack=function(e){200==e.code?"diamond"==this.transData.coin_type&&(Notice.showBottomCenterMessage("购买成功"),App.data.game2Center.DataCenter.UserInfo.diamond=e.data.diamond,App.data.game2Center.DataCenter.UserInfo.gold=e.data.gold,App.data.game2Center.DataCenter.UserInfo.hearts=e.data.hearts,App.data.game2Center.DataCenter.UserInfo.power=e.data.power,App.dispatcher.dispatchEvent(EventConst.UPDATE_SIWEI)):981==e.code?App.nativeBridge.sendPay(e):Alert.show2("钻石数量不足，是否充值钻石？","",new FunctionVO(function(e){e.type==Alert.OK&&PanelOpenManager.openPanel(EnumPanelID.G2_ShopDiamondPanel,null,!1)},this))},t.prototype.getBuy=function(){ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.payStatusH5,{order_id:this.order_id},new FunctionVO(this.payBack,this))},t.prototype.payBack=function(e){200==e.code?(Notice.showBottomCenterMessage("支付成功"),App.dispatcher.dispatchEvent(EventConst.REQ_GAME_INFO),App.data.game2Center.LoadingLock.unlock()):(this.t=0,this._needSendBuy=!0,App.timer.clearTimer(this,this.onTimer),App.timer.doTimeLoop(this,3e3,this.onTimer))},t.prototype.onTimer=function(){return this.t+=3,this.t>=600?(GameLog.log("-------------10分钟内支付失败"),void App.timer.clearTimer(this,this.onTimer)):void(this._needSendBuy&&(this._needSendBuy=!1,ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.payStatusH5,{order_id:this.order_id},new FunctionVO(this.onPaySuccess,this,!0))))},t.prototype.onPaySuccess=function(e){200==e.code?(Notice.showBottomCenterMessage("支付成功"),App.dispatcher.dispatchEvent(EventConst.REQ_GAME_INFO),App.timer.clearTimer(this,this.onTimer),App.data.game2Center.LoadingLock.unlock()):(GameLog.log("-------------未支付，继续检测----------"),this._needSendBuy=!0)},t}(BaseView);__reflect(ShopGoldItem.prototype,"ShopGoldItem");var LoginEvent=function(){function e(){}return e.CHECK_LOGIN_BACK="LoginEvent.check_login_back",e.GET_PHONE_CODE_BACK="LoginEvent.get_phone_code_back",e.GAME_START="LoginEvent.game_start",e.GAME_LOGIN_RESET="LoginEvent.game_login_reset",e.GAME_INTERFACE_DIFFERENTIATION="LoginEvent.game_Interface_differentiation",e.GET_AVG_SYSTEM_INIT="LoginEvent.get_avg_system_init",e.RELOGIN="LoginEvent.relogin",e.GET_DEVICE_CODE_BACK="LoginEvent.get_device_code_back",e}();__reflect(LoginEvent.prototype,"LoginEvent");var WeiboListItem=function(e){function t(){var t=e.call(this)||this;return t.touchType=0,t.isTouch=!1,t.boyTalk=[],t.girlTalk=[],t.huifu=[],t.contentImgWidth=350,t.contentImgHeight=240,t.skinName="WeiboListItemSkin",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoveStage,t),t}return __extends(t,e),t.prototype.onAddStage=function(e){this.pinlunImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.pinlunTouch,this),this.zanImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.zanTouch,this),this.updateView()},t.prototype.onRemoveStage=function(e){this.pinlunImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.pinlunTouch,this),this.zanImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.zanTouch,this)},t.prototype.dataChanged=function(){this.parent&&this.updateView()},t.prototype.updateView=function(){if(this.oldData!=this.data&&null!=this.data){this.phoneText.text=this.data.phone,this.contentLabel.text=this.data.content.content,this.contentImg.source=this.data.content.pic,this.setDate(this.data.days),""!=this.data.content.pic&&(this.contentImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onContentImgTouch,this),this.contentImg.width=this.contentImgWidth,this.contentImg.height=this.contentImgHeight);for(var e=this.data.content.approve,t="",i=0;i<e.length;i++)t=t+e[i]+"  ";this.zanlabel.text=t,this.girlName.text=App.data.game2Center.DataCenter.ConfigInfo.girl_name,this.headImg.source=App.data.game2Center.DataCenter.Weibo.weibo_head;var n=this.data.is_approve,o=this.data.is_reply;"1"==n&&"1"==o?(this.zanImg.visible=!1,this.pinlunImg.visible=!1):("0"==n&&"0"==o&&(this.zanImg.visible=!0,this.pinlunImg.visible=!0),"0"==n&&"1"==o&&(this.zanImg.visible=!0,this.pinlunImg.visible=!1),"1"==n&&"0"==o&&(this.zanImg.visible=!1,this.pinlunImg.visible=!0)),this.huifuGroup.removeChildren();var a=this.data.content.comment,s=this.data.pos;this.pos=s;for(var r=0;s>r;r++){var h=a[r],p=new eui.Label,l=h.match(/(\S*)@(\S*)@(\S*)#(\S*)#/),c=h.match(/(\S*)#(\S*)#/),d=[];if(l)for(var i=1;i<l.length;i++){var u=l[i];"_girl"==u&&(u=App.data.game2Center.DataCenter.ConfigInfo.girl_name),"_boy:"==u&&(u=App.data.game2Center.DataCenter.UserInfo.nickName+":"),"_boy"==u&&(u=App.data.game2Center.DataCenter.UserInfo.nickName);var g=5612765;g=i%2==0?5066061:5612765,d.push({text:u,style:{size:24,textColor:g,fontFamily:"fzyc"}})}else for(var i=1;i<c.length;i++){var u=c[i];"_girl"==u&&(u=App.data.game2Center.DataCenter.ConfigInfo.girl_name),"_boy:"==u&&(u=App.data.game2Center.DataCenter.UserInfo.nickName+":"),"_boy"==u&&(u=App.data.game2Center.DataCenter.UserInfo.nickName);var g=5612765;g=i%2==0?5066061:5612765,d.push({text:u,style:{size:24,textColor:g,fontFamily:"fzyc"}})}p.textFlow=d,p.y=35*r,this.huifuGroup.addChild(p)}var _=this.data.talks;this.boyTalk=[];for(var i=0;i<_.length;i++)"1"==_[i].role&&this.boyTalk.push(_[i]),"0"==_[i].role&&this.girlTalk.push(_[i]);this.oldData=this.data}},t.prototype.pinlunTouch=function(){if(App.sound.playSoundSwitchClient1(SoundManager.button),2==this.boyTalk.length){var e=this.boySay(this.boyTalk);this.callBackFunction&&this.callBackFunction.exec(1,e,this.selectHandler,this)}if(3==this.boyTalk.length){var e=this.boySay(this.boyTalk);this.callBackFunction&&this.callBackFunction.exec(1,e,this.selectHandler,this)}},t.prototype.selectHandler=function(e){this.callBackFunction&&this.callBackFunction.exec(2),this.sendTalk=this.boyTalk[e],this.sendPinlun()},t.prototype.zanTouch=function(){App.sound.playSoundSwitchClient1(SoundManager.button);var e={id:0};e.id=this.data.id,ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.weiboApprove,e,new FunctionVO(this.zanBack,this))},t.prototype.zanBack=function(e){if(GameLog.log(e),200==e.code){var t=e.data.hearts;TipsHeat.showHeat(t);var i=App.data.game2Center.DataCenter.UserInfo.hearts;App.data.game2Center.DataCenter.UserInfo.hearts=i+t,this.tianjiazan(""+App.data.game2Center.DataCenter.UserInfo.nickName),this.zanImg.visible=!1,this.callBackFunction&&this.callBackFunction.exec(3,App.data.game2Center.DataCenter.UserInfo.hearts,App.data.game2Center.DataCenter.ConfigInfo.hearts)}else Notice.showBottomCenterMessage(""+e.info)},t.prototype.tianjiazan=function(e){var t=","+e;this.zanlabel.appendText(t);for(var i=App.data.game2Center.DataCenter.Weibo,n=0;n<i.data.length;n++)i.data[n].id==this.data.id&&(i.data[n].is_approve="1",i.data[n].content.approve.push(""+App.data.game2Center.DataCenter.UserInfo.nickName));App.data.game2Center.DataCenter.Weibo=i},t.prototype.tianjiaPinlun=function(e){var t=new eui.Label,i=e.match(/(\S*)@(\S*)@(\S*)#(\S*)#/),n=e.match(/(\S*)#(\S*)#/),o=[];if(i)for(var a=1;a<i.length;a++){var s=i[a];"_girl"==s&&(s=App.data.game2Center.DataCenter.ConfigInfo.girl_name),"_boy:"==s&&(s=App.data.game2Center.DataCenter.UserInfo.nickName+":");var r=5612765;r=a%2==0?5066061:5612765,o.push({text:s,style:{size:24,textColor:r,fontFamily:"fzyc"}})}else for(var a=1;a<n.length;a++){var s=n[a];"_girl"==s&&(s=App.data.game2Center.DataCenter.ConfigInfo.girl_name),"_boy:"==s&&(s=App.data.game2Center.DataCenter.UserInfo.nickName+":");var r=5612765;r=a%2==0?5066061:5612765,o.push({text:s,style:{size:24,textColor:r,fontFamily:"fzyc"}})}t.textFlow=o,t.y=35*this.pos,this.huifuGroup.addChild(t);for(var h,a=0;a<this.girlTalk.length;a++)GameLog.log("girl",this.girlTalk[a],"send",this.sendTalk),this.sendTalk.reply==this.girlTalk[a].pid&&(h=this.girlTalk[a]);for(var p=App.data.game2Center.DataCenter.Weibo,a=0;a<p.data.length;a++)p.data[a].id==this.data.id&&(p.data[a].content.comment.splice(this.pos-1,0,e),h&&(p.data[a].content.comment.splice(this.pos,0,h.says),GameLog.log("girlhuifu",h),p.data[a].pos=p.data[a].content.comment.length),GameLog.log("data",p.data),p.data[a].is_reply="1");GameLog.log("weibo",p),App.data.game2Center.DataCenter.Weibo=p},t.prototype.sendPinlun=function(){var e={id:0,pid:0,sid:0};e.id=this.data.id,e.pid=this.sendTalk.pid,e.sid=this.sendTalk.sid,ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.weiboComment,e,new FunctionVO(this.pinlunBack,this))},t.prototype.pinlunBack=function(e){if(200==e.code){var t=e.data.hearts;TipsHeat.showHeat(t);var i=App.data.game2Center.DataCenter.UserInfo.hearts;App.data.game2Center.DataCenter.UserInfo.hearts=i+t,this.tianjiaPinlun(this.sendTalk.says),this.pinlunImg.visible=!1,this.callBackFunction&&this.callBackFunction.exec(3,App.data.game2Center.DataCenter.UserInfo.hearts,App.data.game2Center.DataCenter.ConfigInfo.hearts)}else Notice.showBottomCenterMessage(""+e.info)},t.prototype.boySay=function(e){for(var t=[],i=0;i<e.length;i++)for(var n=e[i].says.match(/(\S*)#(\S*)#/),o=2;o<n.length;o++){var a=n[o],s=new Object;s.says=a,t.push(s)}return t},t.prototype.onContentImgTouch=function(){var e=this,t=new eui.Rect(0==App.layer.rotation?App.data.game2Center.StageUtils.stageWidth:App.data.game2Center.StageUtils.stageHeight,0==App.layer.rotation?App.data.game2Center.StageUtils.stageHeight:App.data.game2Center.StageUtils.stageWidth,0);t.alpha=.8,App.layer.tipLayer.addChild(t);var i=new eui.Image(this.contentImg.source),n=this.contentImg.parent.localToGlobal(this.contentImg.x,this.contentImg.y);i.x=n.x,i.y=n.y,i.width=this.contentImgWidth,i.height=this.contentImgHeight,App.layer.tipLayer.addChild(i),egret.Tween.get(this).wait(50).call(function(){var n,o,a=0==App.layer.rotation?App.data.game2Center.StageUtils.stageWidth:App.data.game2Center.StageUtils.stageHeight,s=0==App.layer.rotation?App.data.game2Center.StageUtils.stageHeight:App.data.game2Center.StageUtils.stageWidth,r=a/s,h=e.contentImg.texture.textureWidth/e.contentImg.texture.textureHeight;h>=r?(n=a,o=a/e.contentImg.texture.textureWidth*e.contentImg.texture.textureHeight):(o=s,n=s/e.contentImg.texture.textureHeight*e.contentImg.texture.textureWidth);var p=a-n>>1,l=s-o>>1;egret.Tween.get(i).to({x:p,y:l,width:n,height:o},300),App.stage.once(egret.TouchEvent.TOUCH_TAP,function(){t.parent&&t.parent.removeChild(t),t=null,i.parent&&i.parent.removeChild(i),i=null},e)},this)},t.prototype.setDate=function(e){var t=App.data.game2Center.DataCenter.UserInfo.days-e;0==t?this.dateLabel.text="今天":this.dateLabel.text=t+"天前"},t}(eui.ItemRenderer);__reflect(WeiboListItem.prototype,"WeiboListItem");var MemoryEvent=function(){function e(){}return e.CHANGE_BIZHI="MemoryEvent.change_bizhi",e}();__reflect(MemoryEvent.prototype,"MemoryEvent");var SendMessage=function(e){function t(){return e.call(this,"SendMessageSkin")||this}return __extends(t,e),t.prototype.createComplete=function(){},t.prototype.setText=function(e){this.msgLabel.text=StringTool.formatStrLen(e,42)},t.prototype.showGold=function(e){e?(this.goldGroup.visible=!0,this.labelGroup.visible=!1):(this.goldGroup.visible=!1,this.labelGroup.visible=!0)},t.prototype.setGoldText=function(e){this.goldLabel.text=e},t.prototype.showInput=function(e){e?(this.sendGroup.visible=!0,this.unsendGroup.visible=!1):(this.sendGroup.visible=!1,this.unsendGroup.visible=!0)},t}(BaseUI);__reflect(SendMessage.prototype,"SendMessage");var PreloadEvent=function(){function e(){}return e.HIDE_LOGO_COMPLETE="PreloadEvent.hide_logo_complete",e.PRELOAD_COMPLETE="PreloadEvent.preload_complete",e.HIDE_LOADING_COMPLETE="PreloadEvent.hide_loading_complete",e.PLAY_COMPLETE_START_VIDEO="PreloadEvent.play_complete_start_video",e}();__reflect(PreloadEvent.prototype,"PreloadEvent");var RecordEvent=function(){function e(){}return e.RECORD_LIST="RecordEvent.record_list",e}();__reflect(RecordEvent.prototype,"RecordEvent");var WorkBox=function(e){function t(){var t=e.call(this,"WorkBoxSkin")||this;return t.cdTime=0,t}return __extends(t,e),t.prototype.show=function(t){e.prototype.show.call(this,t),this.hideCDImg(),CommomBtn.btnClick(this.startBtn,this.startBtnTouch,this,1),CommomBtn.btnClick(this.shenzhiBtn,this.shenzhiBtnTouch,this,1),this._dispatcher.addEventListener(EventConst.UPDATE_RED_TIP,this.onUpdateRedTip,this)},t.prototype.hide=function(){e.prototype.hide.call(this),this.hideCDImg(),this.removeTimer(),CommomBtn.removeClick(this.startBtn,this.startBtnTouch,this),CommomBtn.removeClick(this.shenzhiBtn,this.shenzhiBtnTouch,this)},t.prototype.onUpdateRedTip=function(){var e=App.data.game2Center.DataCenter.Work,t=e[this.type];this.setData(t,this.type)},t.prototype.setData=function(e,t){0==t?(this.showJinyan(!0),this.showShengzhi(!1),this.showGongzuo(!0),this.showSuo(!1),this.setShengyuType(!0),this.setEXP(e.exps,e.upgrade_exp),this.setCishu(e.left_times),0==e.cd?this.showCD(!1):(this.showCD(!0),this.setTimeText(e.cd,e.wait,e.endTime))):1==t?(this.showJinyan(!1),this.showShengzhi(!0),this.showGongzuo(!1),this.showSuo(!1),this.setShengyuType(!1),this.setCishu(e.times),this.showCD(!1)):(this.showJinyan(!1),this.showShengzhi(!1),this.showGongzuo(!1),this.showSuo(!0),this.setShengyuType(!1),this.setCishu(e.times),this.showCD(!1)),this.setGoldText(e.gain_gold),this.setJinyanText(e.gain_exp),this.setImg(e.pic),this.setTypeText(e.title),this.setType(t)},t.prototype.startBtnTouch=function(){GameLog.log("type",this.type);var e=App.data.game2Center.DataCenter.Work;this.transData=e[this.type],this.sendHttp()},t.prototype.shenzhiBtnTouch=function(){GameLog.log("type",this.type);var e=App.data.game2Center.DataCenter.Work;this.transData=e[this.type],this.shengzhiHttp()},t.prototype.setTypeText=function(e){e&&""!=e&&(this.typeLabel.text=e)},t.prototype.showCD=function(e){e?this.cdGroup.visible=!0:this.cdGroup.visible=!1},t.prototype.setGoldText=function(e){""!=e&&(this.goldLabel.text=e)},t.prototype.setCishu=function(e){this.cishuLabel.text=e},t.prototype.showSuo=function(e){e?this.suoGroup.visible=!0:this.suoGroup.visible=!1},t.prototype.showGongzuo=function(e){e?this.startBtn.visible=!0:this.startBtn.visible=!1},t.prototype.showShengzhi=function(e){e?this.shenzhiBtn.visible=!0:this.shenzhiBtn.visible=!1},t.prototype.showJinyan=function(e){e?this.jinyanGroup.visible=!0:this.jinyanGroup.visible=!1},t.prototype.setEXP=function(e,t){this.setJinyantiaoText(e,t),this.setJinyanJindu(e,t)},t.prototype.setJinyantiaoText=function(e,t){t&&""!=t&&(this.jinyantiaoLabel.text=e+"/"+t)},t.prototype.setJinyanJindu=function(e,t){t&&""!=t&&(e/t>1?this.jindutiao.width=this.jindutiaodi.width:this.jindutiao.width=e/t*this.jindutiaodi.width)},t.prototype.setJinyanText=function(e){e&&""!=e&&(this.jinyanLabel.text=e)},t.prototype.setWorkNum=function(e){e&&""!=e&&(this.cishuLabel.text=e)},t.prototype.setShengyuType=function(e){e?this.shenyutype.text="剩余次数：":this.shenyutype.text="工作次数："},t.prototype.setTimeText=function(e,t,i){if(i<=ServerTime.serverTime){if(this.cdTime=e,GameLog.log("cd",e),e&&""!=e){if(60>e&&(this.timeLabel.text=e+"分钟"),e>=60&&120>e){var n=e-60;0==n&&(this.timeLabel.text="1小时"),n>0&&(this.timeLabel.text="1小时"+n+"分钟")}if(e>=120&&180>e){var n=e-120;0==n&&(this.timeLabel.text="2小时"),n>0&&(this.timeLabel.text="2小时"+n+"分钟")}}}else this.removeTimer(),App.timer.serverTimeEnd(this,this.timerFunc,i),this.showCDImg()},t.prototype.setWaitText=function(e){if(e){var t=Math.floor(e/60),i=Math.floor(e%60),n=Math.floor(e/60/60);if(1>t&&(10>e?this.timeLabel.text="00:0"+e:this.timeLabel.text="00:"+e),t>=1&&60>t&&(10>i?this.timeLabel.text=t+":0"+i:this.timeLabel.text=t+":"+i),n>=1){var o=e-3600*n,a=Math.floor(o/60),s=Math.floor(o%60);10>a?10>s?this.timeLabel.text=n+":0"+a+":0"+s:this.timeLabel.text=n+":0"+a+":"+s:10>s?this.timeLabel.text=n+":"+a+":0"+s:this.timeLabel.text=n+":"+a+":"+s}}},t.prototype.timerFunc=function(e){e.spuleTime>0?this.setWaitText(e.spuleTime):this.timerComFunc()},t.prototype.timerComFunc=function(){this.removeTimer(),this.transData&&(this.cdTime=this.transData.cd),GameLog.log("cd",this.cdTime),this.setTimeText(this.cdTime,0,0),this.hideCDImg()},t.prototype.removeTimer=function(){App.timer.clearTimer(this,this.timerFunc)},t.prototype.setImg=function(e){e&&""!=e&&(this.typeImg.source=e)},t.prototype.setType=function(e){this.type=e},t.prototype.sendHttp=function(){var e=ProtocolHttp.workStart;e.wid=this.transData.id,ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.workStart,e,new FunctionVO(this.sendBack,this))},t.prototype.sendBack=function(e){200==e.code?this.transData&&this.transData.duration?PanelOpenManager.openPanel(EnumPanelID.G2_WorkProPanel,this.transData):Notice.showBottomCenterMessage("数据错误"):Notice.showBottomCenterMessage(""+e.info),809!=e.code||App.data.game2Center.DataCenter.keybuy.wulengque.hasbuy||PanelOpenManager.openPanel(EnumPanelID.G2_LibaoCDPanel)},t.prototype.shengzhiHttp=function(){var e=App.data.game2Center.DataCenter.Work;if(e&&e[0]){var t=ProtocolHttp.workStart;t.wid=this.transData.id,ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.workPromotion,t,new FunctionVO(this.shengzhiBack,this))}},t.prototype.shengzhiBack=function(e){GameLog.log("shengzhi",e),200==e.code?(App.data.game2Center.DataCenter.Work=e.data,App.dispatcher.dispatchEvent(EventConst.ADD_WORD_ITEM)):Notice.showBottomCenterMessage(""+e.info)},t.prototype.showCDImg=function(){0==App.data.game2Center.DataCenter.keybuy.wulengque.hasbuy&&(App.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.hideCDImg,this),this.cdBtn.visible=!0,this.cdBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCDBtnTouch,this))},t.prototype.hideCDImg=function(){App.stage.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.hideCDImg,this),this.cdBtn.visible=!1,this.cdBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onCDBtnTouch,this)},t.prototype.onCDBtnTouch=function(e){this.hideCDImg(),this.showLiBao()},t.prototype.showLiBao=function(){0==App.data.game2Center.DataCenter.keybuy.wulengque.hasbuy&&PanelOpenManager.openPanel(EnumPanelID.G2_LibaoCDPanel)},t}(BaseView);__reflect(WorkBox.prototype,"WorkBox");var WorkBoxType;!function(e){e[e.one=0]="one",e[e.two=1]="two",e[e.there=2]="there",e[e.four=3]="four",e[e.five=4]="five",e[e.six=5]="six",e[e.seven=6]="seven",e[e.eight=7]="eight",e[e.nine=8]="nine",e[e.ten=9]="ten"}(WorkBoxType||(WorkBoxType={}));var VideoEvent=function(){function e(){}return e.REPLAYVIDEO="VideoEvent.REPLAYVIDEO",e}();__reflect(VideoEvent.prototype,"VideoEvent");var ClientDataManager=function(){function e(){}return Object.defineProperty(e.prototype,"logDataCenter",{get:function(){return this._log||(this._log=new LogCenter),this._log},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bagItemDataCenter",{get:function(){return this._bagItemCenter||(this._bagItemCenter=new BagItemCenter),this._bagItemCenter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gameHallCenter",{get:function(){return this._gameHallCenter||(this._gameHallCenter=new GameHallCenter),this._gameHallCenter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gameResourceCenter",{get:function(){return this._gameResourceCenter||(this._gameResourceCenter=new GameResourceCenter),this._gameResourceCenter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gameFangDongCenter",{get:function(){return null==this._gameFangDongCenter&&(this._gameFangDongCenter=new GameFangDongCenter),this._gameFangDongCenter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"game2Center",{get:function(){return null==this._game2Center&&(this._game2Center=new Game2Center),this._game2Center},enumerable:!0,configurable:!0}),e}();__reflect(ClientDataManager.prototype,"ClientDataManager");var GameMediator=function(e){function t(){return e.call(this)||this}return __extends(t,e),Object.defineProperty(t.prototype,"gameScene",{get:function(){return PanelManager.getPanel(PanelRegister.G2_GAME_SCENE)},enumerable:!0,configurable:!0}),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.addEvent(EventConst.GIFTFORUSER,this.reqGiftForUser,this),this.addEvent(EventConst.PLAY_WEB_VIDEO,this.playWebVideo,this),this.addEvent(EventConst.REQ_LOGIN_REWARD,this.reqLoginReward,this),this.addEvent(EventConst.QUIT_GAME,this.onQuitGame,this),this.addEvent(EventConst.REQ_UPDATE_BAGS,this.reqUpdateBags,this)},t.prototype.playWebVideo=function(e,t,i){void 0===i&&(i=EnumVideoType.XIN_DONG1_VIDEO),App.data.game2Center.SoundManager.stopBGM(),Video.instance().init(e,!1,!1,t,Video.TOP,null,Config.isLandscape?!1:!0),PanelOpenManager.openPanel(EnumPanelID.VIDEO_BUTTON,{type:i})},t.prototype.reqLoves=function(){var e={};ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.loves,e,new FunctionVO(this.revLoves,this))},t.prototype.revLoves=function(e){if(200==e.code){var t=e.data;App.data.game2Center.DataCenter.Love=t,PanelOpenManager.openPanel(EnumPanelID.G2_LovePanel,t)}},t.prototype.reqUpdateBags=function(){var e={};ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.bags,e,new FunctionVO(this.revUpdateBags,this))},t.prototype.revUpdateBags=function(e){200==e.code?(App.data.game2Center.DataCenter.Bags=e.data,App.dispatcher.dispatchEvent(EventConst.INIT_BAG),App.dispatcher.dispatchEvent(EventConst.UPDATE_RED_TIP)):Notice.showBottomCenterMessage(""+e.info)},t.prototype.reqGiftForUser=function(e){var t=JSON.parse(e);if(200==t.code){var i={order_id:t.data.order_id,receipt:t.data.receipt};ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.giftForUser,i,new FunctionVO(this.revGiftForUser,this))}else Notice.showBottomCenterMessage(""+t.info)},t.prototype.revGiftForUser=function(e){200==e.code?(App.dispatcher.dispatchEvent(EventConst.REQ_GAME_INFO),Notice.showBottomCenterMessage("购买成功")):Notice.showBottomCenterMessage(""+e.info)},t.prototype.reqShareGain=function(){var e={};ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.shareGain,e,new FunctionVO(this.revShareGain,this))},t.prototype.revShareGain=function(e){if(200==e.code){App.data.game2Center.DataCenter.UserInfo.diamond=e.data.diamond,App.data.game2Center.DataCenter.UserInfo.gold=e.data.gold,App.data.game2Center.DataCenter.UserInfo.power=e.data.power,App.data.game2Center.DataCenter.UserInfo.hearts=e.data.hearts,this.gameScene&&this.gameScene.setConfig();var t=new ShareGainDialog;t.setGain(),t.show()}else{var t=new ShareGainDialog;t.setNoGain(),t.show()}},t.prototype.reqLoginReward=function(e){void 0===e&&(e=0),ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.loginReward,{},new FunctionVO(function(t){200==t.code?(App.data.game2Center.DataCenter.loginRewardInfo=t,PanelOpenManager.openPanel(EnumPanelID.G2_ActPanel,e)):Notice.showBottomCenterMessage(t.info)},this))},t.prototype.reqGameInfo=function(){if(PanelManager.isShowing(PanelRegister.G2_GAME_SCENE)){var e={};ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.gameinfo,e,new FunctionVO(this.revGameInfo,this))}},t.prototype.revGameInfo=function(e){200==e.code?(App.data.game2Center.DataCenter.readGameInfo(e),App.dispatcher.dispatchEvent(EventConst.payBack),App.dispatcher.dispatchEvent(EventConst.UPDATE_RED_TIP),App.dispatcher.dispatchEvent(EventConst.UPDATE_LIBAO),App.dispatcher.dispatchEvent(EventConst.UPDATE_FIRST_PAY),App.dispatcher.dispatchEvent(EventConst.UPDATE_SIWEI),App.dispatcher.dispatchEvent(EventConst.BUY_MONTH_CARDS_SUCCESS)):Notice.showBottomCenterMessage(e.info)},t.prototype.onQuitGame=function(){App.data.game2Center.SoundManager.stopBGM(),CommomBtn.removeAll(),App.data.game2Center.DataCenter.destoryMe(),App.data.game2Center.TalkManager.stopSound()},t.NAME="GameMediator",t.SHOW_GAME_SCENE="SHOW_GAME_SCENE",t}(Mediator);__reflect(GameMediator.prototype,"GameMediator");var FunctionOpenManager=function(){function e(){}return e.prototype.isFunctionOpen=function(e,t){return void 0===t&&(t=!0),!1},e}();__reflect(FunctionOpenManager.prototype,"FunctionOpenManager");var ActBtn=function(e){function t(){return e.call(this,"ActBtnSkin")||this}return __extends(t,e),t.prototype.show=function(t){e.prototype.show.call(this,t)},t.prototype.showRedPoint=function(e){e?(this.red.visible=!0,egret.Tween.removeTweens(this.red),egret.Tween.get(this.red,{loop:!0}).set({scaleX:.9,scaleY:.9}).to({scaleX:1.1,scaleY:1.1},800).to({scaleX:.9,scaleY:.9},800)):(egret.Tween.removeTweens(this.red),this.red.visible=!1)},t}(BaseView);__reflect(ActBtn.prototype,"ActBtn");var DianhuaBtn=function(e){function t(){return e.call(this,"dianhuaBtnSkin")||this}return __extends(t,e),t.prototype.show=function(t){e.prototype.show.call(this,t),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this,this),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this,this),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this,this),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchout,this,this)},t.prototype.onTouch=function(){App.sound.playSoundSwitchClient1(SoundManager.button),App.dispatcher.dispatchEvent(G2_GameSceneEvent.HIDE_SCENE_ANIMATION,EnumPanelID.G2_DianhuaPanel)},t.prototype.onTouchBegin=function(){this.scaleX=1.1,this.scaleY=1.1},t.prototype.onTouchEnd=function(){this.scaleX=1,this.scaleY=1},t.prototype.onTouchout=function(){this.scaleX=1,this.scaleY=1},t.prototype.showRedPoint=function(e){e?(this.red.visible=!0,egret.Tween.get(this.red,{loop:!0}).set({scaleX:.9,scaleY:.9}).to({scaleX:1.1,scaleY:1.1},800).to({scaleX:.9,scaleY:.9},800)):(egret.Tween.removeTweens(this.red),this.red.visible=!1)},t}(BaseView);__reflect(DianhuaBtn.prototype,"DianhuaBtn");var GongzuoBtn=function(e){function t(){return e.call(this,"gongzuoBtnSkin")||this}return __extends(t,e),t.prototype.show=function(t){e.prototype.show.call(this,t),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this,this),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this,this),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this,this),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchout,this,this)},t.prototype.onTouch=function(){App.sound.playSoundSwitchClient1(SoundManager.button),App.dispatcher.dispatchEvent(G2_GameSceneEvent.HIDE_SCENE_ANIMATION,EnumPanelID.G2_WorkPanel)},t.prototype.onTouchBegin=function(){this.scaleX=1.1,this.scaleY=1.1},t.prototype.onTouchEnd=function(){this.scaleX=1,this.scaleY=1},t.prototype.onTouchout=function(){this.scaleX=1,this.scaleY=1},t.prototype.showRedPoint=function(e){e?(this.red.visible=!0,egret.Tween.get(this.red,{loop:!0}).set({scaleX:.9,scaleY:.9}).to({scaleX:1.1,scaleY:1.1},800).to({scaleX:.9,scaleY:.9},800)):(egret.Tween.removeTweens(this.red),this.red.visible=!1)},t}(BaseView);__reflect(GongzuoBtn.prototype,"GongzuoBtn");var LianaiBtn=function(e){function t(){return e.call(this,"lianaiBtnSkin")||this
}return __extends(t,e),t.prototype.show=function(t){e.prototype.show.call(this,t),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this,this),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this,this),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this,this),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchout,this,this)},t.prototype.onTouch=function(){App.sound.playSoundSwitchClient1(SoundManager.button),App.dispatcher.dispatchEvent(G2_GameSceneEvent.HIDE_SCENE_ANIMATION,EnumPanelID.G2_LovePanel)},t.prototype.onTouchBegin=function(){this.scaleX=1.1,this.scaleY=1.1},t.prototype.onTouchEnd=function(){this.scaleX=1,this.scaleY=1},t.prototype.onTouchout=function(){this.scaleX=1,this.scaleY=1},t.prototype.showRedPoint=function(e){e?(this.red.visible=!0,egret.Tween.get(this.red,{loop:!0}).set({scaleX:.9,scaleY:.9}).to({scaleX:1.1,scaleY:1.1},800).to({scaleX:.9,scaleY:.9},800)):(egret.Tween.removeTweens(this.red),this.red.visible=!1)},t}(BaseView);__reflect(LianaiBtn.prototype,"LianaiBtn");var QRCodeBtn=function(e){function t(){return e.call(this,"QRCodeBtnSkin")||this}return __extends(t,e),t.prototype.showTip=function(){this.tip.visible=!0},t.prototype.hideTip=function(){this.tip.visible=!1},t}(BaseView);__reflect(QRCodeBtn.prototype,"QRCodeBtn");var RedPacketBtn=function(e){function t(){return e.call(this,"RedPacketBtnSkin")||this}return __extends(t,e),t.prototype.showTip=function(){this.tip.visible=!0},t.prototype.hideTip=function(){this.tip.visible=!1},t}(BaseView);__reflect(RedPacketBtn.prototype,"RedPacketBtn");var SecretShopBtn=function(e){function t(){var i=e.call(this,"SecretShopBtnSkin")||this;return i.heartCha=!1,t.instance=i,i}return __extends(t,e),t.getInstance=function(){return t.instance},t.prototype.childrenCreated=function(){},t.prototype.onEnable=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this);this.setTime=setInterval(this.heartChange,800)},t.prototype.heartChange=function(){0==t.getInstance().heartCha?(egret.Tween.get(t.getInstance().red).set({scaleX:.9,scaleY:.9}).to({scaleX:1.1,scaleY:1.1},800),t.getInstance().heartCha=!0):1==t.getInstance().heartCha&&(egret.Tween.get(t.getInstance().red).set({scaleX:1.1,scaleY:1.1}).to({scaleX:.9,scaleY:.9},800),t.getInstance().heartCha=!1)},t.prototype.onTouch=function(){PanelOpenManager.openPanel(EnumPanelID.G2_DlcMainDoc),clearInterval(this.setTime),this.red.visible=!1},t.prototype.timerFunc=function(){},t.prototype.timerComFunc=function(){},t}(BaseUI);__reflect(SecretShopBtn.prototype,"SecretShopBtn");var SendToDeBtn=function(e){function t(){return e.call(this,"SendToDeBtnSkin")||this}return __extends(t,e),t.prototype.showTip=function(){this.tip.visible=!0},t.prototype.hideTip=function(){this.tip.visible=!1},t}(BaseView);__reflect(SendToDeBtn.prototype,"SendToDeBtn");var SetBtn=function(e){function t(){return e.call(this,"setBtnSkin")||this}return __extends(t,e),t.prototype.showRedPoint=function(e){e?(this.red.visible=!0,egret.Tween.removeTweens(this.red),egret.Tween.get(this.red,{loop:!0}).set({scaleX:.9,scaleY:.9}).to({scaleX:1.1,scaleY:1.1},800).to({scaleX:.9,scaleY:.9},800)):(egret.Tween.removeTweens(this.red),this.red.visible=!1)},t}(BaseView);__reflect(SetBtn.prototype,"SetBtn");var ShangchengBtn=function(e){function t(){return e.call(this,"shangchengBtnSkin")||this}return __extends(t,e),t.prototype.show=function(t){e.prototype.show.call(this,t),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this,this),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this,this),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this,this),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchout,this,this)},t.prototype.onTouch=function(){App.sound.playSoundSwitchClient1(SoundManager.button),App.dispatcher.dispatchEvent(G2_GameSceneEvent.HIDE_SCENE_ANIMATION,EnumPanelID.G2_ShopGiftToolPanel)},t.prototype.onTouchBegin=function(){this.scaleX=1.1,this.scaleY=1.1},t.prototype.onTouchEnd=function(){this.scaleX=1,this.scaleY=1},t.prototype.onTouchout=function(){this.scaleX=1,this.scaleY=1},t.prototype.showRedPoint=function(e){e?(this.red.visible=!0,egret.Tween.get(this.red,{loop:!0}).set({scaleX:.9,scaleY:.9}).to({scaleX:1.1,scaleY:1.1},800).to({scaleX:.9,scaleY:.9},800)):(egret.Tween.removeTweens(this.red),this.red.visible=!1)},t}(BaseView);__reflect(ShangchengBtn.prototype,"ShangchengBtn");var ShareBtn=function(e){function t(){return e.call(this,"ShareBtnSkin")||this}return __extends(t,e),t.prototype.showTip=function(){this.tip.visible=!0},t.prototype.hideTip=function(){this.tip.visible=!1},t}(BaseView);__reflect(ShareBtn.prototype,"ShareBtn");var ShouChongBtn=function(e){function t(){return e.call(this,"ShouChongBtnSkin")||this}return __extends(t,e),t.prototype.showRedPoint=function(e){e?(this.red.visible=!0,egret.Tween.removeTweens(this.red),egret.Tween.get(this.red,{loop:!0}).set({scaleX:.9,scaleY:.9}).to({scaleX:1.1,scaleY:1.1},800).to({scaleX:.9,scaleY:.9},800)):(egret.Tween.removeTweens(this.red),this.red.visible=!1)},t}(BaseView);__reflect(ShouChongBtn.prototype,"ShouChongBtn");var WeiboBtn=function(e){function t(){return e.call(this,"weiboBtnSkin")||this}return __extends(t,e),t.prototype.show=function(t){e.prototype.show.call(this,t),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this,this),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this,this),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this,this),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchout,this,this)},t.prototype.onTouch=function(){App.sound.playSoundSwitchClient1(SoundManager.button),App.dispatcher.dispatchEvent(G2_GameSceneEvent.HIDE_SCENE_ANIMATION,EnumPanelID.G2_WeiboPanel)},t.prototype.onTouchBegin=function(){this.scaleX=1.1,this.scaleY=1.1},t.prototype.onTouchEnd=function(){this.scaleX=1,this.scaleY=1},t.prototype.onTouchout=function(){this.scaleX=1,this.scaleY=1},t.prototype.showRedPoint=function(e){e?(this.red.visible=!0,egret.Tween.get(this.red,{loop:!0}).set({scaleX:.9,scaleY:.9}).to({scaleX:1.1,scaleY:1.1},800).to({scaleX:.9,scaleY:.9},800)):(egret.Tween.removeTweens(this.red),this.red.visible=!1)},t}(BaseView);__reflect(WeiboBtn.prototype,"WeiboBtn");var WeixinBtn=function(e){function t(){return e.call(this,"weixinBtnSkin")||this}return __extends(t,e),t.prototype.show=function(t){e.prototype.show.call(this,t),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this,this),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this,this),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this,this),this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchout,this,this)},t.prototype.onTouch=function(){App.sound.playSoundSwitchClient1(SoundManager.button),App.dispatcher.dispatchEvent(G2_GameSceneEvent.HIDE_SCENE_ANIMATION,EnumPanelID.G2_WeixinPanel)},t.prototype.onTouchBegin=function(){this.scaleX=1.1,this.scaleY=1.1},t.prototype.onTouchEnd=function(){this.scaleX=1,this.scaleY=1},t.prototype.onTouchout=function(){this.scaleX=1,this.scaleY=1},t.prototype.showRedPoint=function(e){e?(this.red.visible=!0,egret.Tween.get(this.red,{loop:!0}).set({scaleX:.9,scaleY:.9}).to({scaleX:1.1,scaleY:1.1},800).to({scaleX:.9,scaleY:.9},800)):(egret.Tween.removeTweens(this.red),this.red.visible=!1)},t}(BaseView);__reflect(WeixinBtn.prototype,"WeixinBtn");var GameSceneCenter=function(){function e(){}return e.prototype.checkGitFun=function(){WanBaSDK.getIntance().wanBaData&&WanBaSDK.getIntance().gift&&ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.userInviteGain,{Authorization:App.data.game2Center.DataCenter.skey,code:WanBaSDK.getIntance().gift},new FunctionVO(this.revGit,this))},e.prototype.revGit=function(e){if(GameLog.log("礼包领取-->"+e),200==e.code){for(var t=new NoticeDialog,i="恭喜你获得:",n=e.data.gifts,o=0,a=n.length;a>o;o++)i+=n[o].cname+"X"+n[o].num,a-1>o&&(i+=" ");t.setContent(i),t.setTitle("礼包"),t.setNoticeTitle("收到玩吧礼包:"),t.setWx(null,null),t.setOk(function(){},this),t.show()}},e.prototype.sendUpGrade=function(){ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.upgrade,{},new FunctionVO(this.upgradeBack,this))},e.prototype.checkUpGrade=function(){GameLog.log("GameScene >> 询问是否可以升级"),ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.prepare,{},new FunctionVO(this.prepareBack,this))},e.prototype.prepareBack=function(e){if(200==e.code){if(1==App.data.game2Center.DataCenter.UserInfo.days)return App.dispatcher.dispatchEvent(G2_GameSceneEvent.LevelUpGuide),void App.data.game2Center.LoadingLock.unLockScreen();GameLog.log("GameScene >> 请求升级"),this.sendUpGrade()}else 911==e.code?(null==this.gameOverDialog&&(this.gameOverDialog=new GameOverDialog,this.gameOverDialog.show()),App.data.game2Center.LoadingLock.unLockScreen()):(App.data.game2Center.LoadingLock.unLockScreen(),Notice.showBottomCenterMessage(""+e.info))},e.prototype.upgradeBack=function(e){200==e.code?(App.data.game2Center.DataCenter.readGameInfo(e),this.playUpgradeAnim(),App.dispatcher.dispatchEvent(EventConst.UPDATE_RED_TIP)):(App.data.game2Center.LoadingLock.unLockScreen(),Notice.showBottomCenterMessage(""+e.info))},e.prototype.playUpgradeAnim=function(){GameLog.log("GameScene >> 播放升级动画");var e=new UpgradeAnim;App.layer.effectLayer.addChild(e);var t=0==App.layer.rotation?App.data.game2Center.StageUtils.stageWidth:App.data.game2Center.StageUtils.stageHeight,i=0==App.layer.rotation?App.data.game2Center.StageUtils.stageHeight:App.data.game2Center.StageUtils.stageWidth;e.x=(t-590)/2,e.y=(i-534)/2,e.play(),e.once(egret.Event.COMPLETE,this.onUpgradeAnimComplete,this),App.sound.playSoundSwitchClient1(SoundManager.levelup)},e.prototype.onUpgradeAnimComplete=function(e){var t=e.target;t.destoryMe();var i={ossvid:App.data.game2Center.DataCenter.ConfigInfo.video};this.sendPlayVideo2(i)},e.prototype.upgradeActiveView=function(){App.timer.doTimeOnce(this,1e3,this.delaySetGameConfig)},e.prototype.delaySetGameConfig=function(){App.data.game2Center.LoadingLock.unLockScreen(),App.data.game2Center.LoadingLock.unlock(),App.dispatcher.dispatchEvent(G2_GameSceneEvent.SETGAMECONFIG)},e.prototype.sendPlayVideo=function(e){ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.videoUrl,e,new FunctionVO(this.videoUrlBack,this))},e.prototype.sendPlayVideo2=function(e){ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.videoUrl,e,new FunctionVO(this.videoUrlBack,this))},e.prototype.videoUrlBack=function(e){var t=this;if(200==e.code)if(DeviceUtil.IsWeb){var i=new PlayVideoDialog;i.setContent("快去看看小野在干什么"),i.setOk(function(){t.upgradeActiveView(),App.dispatcher.dispatchEvent(EventConst.PLAY_WEB_VIDEO,e.data.url,new FunctionVO(t.onPlayVideoComplete,t),EnumVideoType.XIN_DONG1)},this),i.show(!1)}else this.upgradeActiveView(),App.dispatcher.dispatchEvent(EventConst.PLAY_WEB_VIDEO,e.data.url,new FunctionVO(this.onPlayVideoComplete,this),EnumVideoType.XIN_DONG1);else App.data.game2Center.LoadingLock.unLockScreen(),Notice.showBottomCenterMessage(""+e.info)},e.prototype.onPlayVideoComplete=function(){Video.instance().dispose(),App.data.game2Center.SoundManager.playBGM(SoundManager.bgm)},e}();__reflect(GameSceneCenter.prototype,"GameSceneCenter");var DiamondUI=function(e){function t(){var t=e.call(this)||this;return t.skinName="DiamondUISkin",t}return __extends(t,e),t.prototype.setDiamond=function(e){this.diamondLabel.text=e+""},t}(eui.Component);__reflect(DiamondUI.prototype,"DiamondUI");var GameSceneUI=function(e){function t(){return e.call(this,"GameSceneSkin")||this}return __extends(t,e),t}(BaseUI);__reflect(GameSceneUI.prototype,"GameSceneUI");var GoldUI=function(e){function t(){var t=e.call(this)||this;return t.skinName="GoldUISkin",t}return __extends(t,e),t.prototype.setGold=function(e){this.goldLabel.text=e+""},t}(eui.Component);__reflect(GoldUI.prototype,"GoldUI");var HeartsPlugins=function(e){function t(){return e.call(this,"HeartsPluginSkin")||this}return __extends(t,e),t.prototype.createComplete=function(){this.maxImg.alpha=0,this.jinduImg.mask=this.maskImg},t.prototype.onRemove=function(){},t.prototype.setJindu=function(e,t){t&&""!=t&&(e>9999?this.uHeartLabel.text="9999":this.uHeartLabel.text=e,this.upHeartLabel.text=t,e/t>=1?(this.jinduImg.width=this.jinduBg.width,this.showMax(!0)):(this.jinduImg.width=e/t*this.jinduBg.width,this.showMax(!1)),0>e&&(this.jinduImg.width=0,this.showMax(!1)))},t.prototype.showMax=function(e){e?(this.maxImg.visible=!0,egret.Tween.get(this.maxImg,{loop:!0}).set({scaleX:.8,scaleY:.8}).to({scaleX:1.2,scaleY:1.2},800).to({scaleX:.8,scaleY:.8},800)):(this.maxImg.visible=!1,egret.Tween.removeTweens(this.maxImg))},t}(BaseUI);__reflect(HeartsPlugins.prototype,"HeartsPlugins");var PowerUI=function(e){function t(){var t=e.call(this)||this;return t.skinName="PowerUISkin",t}return __extends(t,e),t.prototype.setPower=function(e){this.powerLabel.text=e+""},t}(eui.Component);__reflect(PowerUI.prototype,"PowerUI");var TaskTipUI=function(e){function t(){var t=e.call(this)||this;return t.skinName="TaskTipUISkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.setTip=function(e){this.tishiLabel.text=e},t}(eui.Component);__reflect(TaskTipUI.prototype,"TaskTipUI");var GlobalManager=function(){function e(){this.stageX=0,this.stageY=0,this.globalPoint=new egret.Point,this.userInfo=new UserInfoManager,this.storage=new LocalStorageManager,this.guide=new GuideManager}return Object.defineProperty(e.prototype,"canShare",{get:function(){return Config.isRelease&&DeviceUtil.IsWeb?!1:DeviceUtil.IsAndroid&&DeviceUtil.IsNative?this.userInfo.channelId==EnumChannel.C_DEFAULT:DeviceUtil.IsIos&&DeviceUtil.IsNative?!0:!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"needHideExit",{get:function(){return Config.U8Login&&(App.global.userInfo.channelId==EnumChannel.C_OPPO||App.global.userInfo.channelId==EnumChannel.C_VIVO||App.global.userInfo.channelId==EnumChannel.C_UC||App.global.userInfo.channelId==EnumChannel.C_UC1)},enumerable:!0,configurable:!0}),e.prototype.clearRoleData=function(){App.global.userInfo.uid=void 0,App.global.userInfo.skey="",App.data.game2Center.DataCenter.skey="",App.global.storage.getItem(EnumStorageType.PHONE)&&App.global.storage.setItem(EnumStorageType.PHONE2,App.global.storage.getItem(EnumStorageType.PHONE)),App.global.storage.removeItem(EnumStorageType.TOKEN),App.global.storage.removeItem(EnumStorageType.UID),App.global.storage.removeItem(EnumStorageType.PHONE),App.global.storage.removeItem(EnumStorageType.G2_TOKEN)},e}();__reflect(GlobalManager.prototype,"GlobalManager");var GameAdviceUI=function(e){function t(){var t=e.call(this)||this;return t.skinName="GameAdviceUISkin",t.percentWidth=100,t.percentHeight=100,t}return __extends(t,e),t}(eui.Component);__reflect(GameAdviceUI.prototype,"GameAdviceUI");var LogManager=function(){function e(){}return e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];App.data.logDataCenter.inputMsgByType(EnumLogType.INFO,e)},e.prototype.echo=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];App.data.logDataCenter.inputMsgByType(EnumLogType.ECHO,e)},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];App.data.logDataCenter.inputMsgByType(EnumLogType.DEBUG,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];App.data.logDataCenter.inputMsgByType(EnumLogType.ERROR,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];App.data.logDataCenter.inputMsgByType(EnumLogType.WARN,e)},e.prototype.xingneng=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];App.data.logDataCenter.inputMsgByType(EnumLogType.XINGNENG,e)},e.prototype.localLog=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];App.data.logDataCenter.inputMsgByType(EnumLogType.LOCAL_LOG,e)},e}();__reflect(LogManager.prototype,"LogManager");var LoginMediator=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.addEvent(EventConst.U8LOGIN,this.reqU8Login,this),this.addEvent(EventConst.REQ_IOS_ID_LOGIN,this.reqIosIDLogin,this),this.addEvent(EventConst.REQ_OFFICIAL_LOGIN,this.reqOfficialLogin,this)},t.prototype.reqU8Login=function(e){ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.u8_login,JSON.parse(e),new FunctionVO(this.revAccountLogin,this))},t.prototype.reqRegister=function(e,t){this.account=e,this.password=t;var i=ProtocolHttp.register;i.passwd=t,i.username=e,ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.register,i,new FunctionVO(this.revRegister,this))},t.prototype.revRegister=function(e){var t=ProtocolHttpData.register;t=e,200==t.code?(App.global.storage.setItem(EnumStorageType.G2_ACCOUNT,t.data.user),App.global.storage.setItem(EnumStorageType.G2_GUEST,GuestType.NO),this.reqGameInfo()):Notice.showBottomCenterMessage(e.info)},t.prototype.reqOfficialLogin=function(){this.reqGameInfo()},t.prototype.reqAccountLogin=function(e,t){this.account=e,this.password=t;var i=ProtocolHttp.login;i.username=e,i.passwd=this.password,ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.login,i,new FunctionVO(this.revAccountLogin,this))},t.prototype.req7k7kLogin=function(){GameLog.log("LoginMediator >> 7k7k登录");var e=window.auth_7k7k;return ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.k7k7_login,e,new FunctionVO(this.revAccountLogin,this)),!1},t.prototype.revAccountLogin=function(e){var t=ProtocolHttpData.login;t=e,200==t.code?(App.global.storage.setItem(EnumStorageType.G2_ACCOUNT,t.data.user),App.data.game2Center.DataCenter.skey=t.data.skey,App.data.game2Center.DataCenter.UserInfo.nickName=t.data.user,App.global.storage.setItem(EnumStorageType.G2_GUEST,GuestType.NO),this.reqGameInfo()):801==t.code?(Notice.showBottomCenterMessage(e.info),App.global.storage.setItem(EnumStorageType.G2_ACCOUNT,""),App.global.storage.setItem(EnumStorageType.G2_GUEST,GuestType.YES)):Notice.showBottomCenterMessage(e.info)},t.prototype.reqIosIDLogin=function(){var e=ProtocolHttp.guest;e.username=IOSConfig.iosID,e.channel=IOSConfig.channel,ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.guest,e,new FunctionVO(this.revGuestLogin,this))},t.prototype.reqGuestLogin=function(){GameLog.log("LoginMediator >> 游客登录");var e=ProtocolHttp.guest,t=App.data.gameHallCenter.getHeroniesData(EnumGameID.GAME2).account;t&&App.global.storage.setItem(EnumStorageType.G2_ACCOUNT,t),e.username=t,ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.guest,e,new FunctionVO(this.revGuestLogin,this))},t.prototype.revGuestLogin=function(e){var t=ProtocolHttpData.guest;if(t=e,200==t.code){App.data.game2Center.DataCenter.skey=t.data.skey,App.data.game2Center.DataCenter.UserInfo.nickName=t.data.user,App.global.storage.setItem(EnumStorageType.G2_ACCOUNT,t.data.user),App.global.storage.setItem(EnumStorageType.G2_GUEST,GuestType.YES);var i=App.data.gameHallCenter.getHeroniesData(EnumGameID.GAME2).account;i?this.reqGameInfo():(i=App.global.storage.getItem(EnumStorageType.G2_ACCOUNT),ProtocolGame2.instance().sendGame2NameBind(i,new FunctionVO(this.saveGame2NameBack,this)))}else 401==t.code||801==t.code?Notice.showBottomCenterMessage(e.info):Notice.showBottomCenterMessage(e.info)},t.prototype.saveGame2NameBack=function(e){ResponseUtil.checkResponseData(e)&&GameLog.log("绑定心动1用户名成功"),this.reqGameInfo()},t.prototype.reqGameInfo=function(){if(PanelManager.isShowing(PanelRegister.G2_GAME_LOGIN_SCENE)){var e={};ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.gameinfo,e,new FunctionVO(this.revGameInfo,this))}},t.prototype.revGameInfo=function(e){200==e.code?(App.data.game2Center.DataCenter.readGameInfo(e),PanelOpenManager.removePanel(EnumPanelID.G2_GAME_LOGIN_SCENE),this.reqGuide(),App.nativeBridge.submitGameData(e.data.userinfo),Config.soEasy&&SoEasySdk.reportRoleInfoH5()):Notice.showBottomCenterMessage(e.info)},t.prototype.reqGuide=function(){var e=App.data.game2Center.DataCenter.guide;e.emph_zone;if(e.fill_nick_name)PanelOpenManager.openPanel(EnumPanelID.G2_InputNamePanel);else if(e.video){var t={ossvid:e.video};ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.videoUrl,t,new FunctionVO(this.revVideoPlay,this))}else PanelOpenManager.removePanel(EnumPanelID.G2_InputNamePanel),PanelOpenManager.removePanel(EnumPanelID.G2_GAME_LOGIN_SCENE),PanelOpenManager.openPanel(EnumPanelID.G2_GAME_SCENE)},t.prototype.revVideoPlay=function(e){var t=this;if(200==e.code)if(DeviceUtil.IsWeb&&DeviceUtil.isMobile){var i=new PlayVideoDialog;i.setContent("我是一个普通的大学生，做梦也没想到校花竟然成为了我的女朋友，但是现实中的误会却让我们一次次伤害对方……"),i.setOk(function(){t.delayGuideBack(),App.dispatcher.dispatchEvent(EventConst.PLAY_WEB_VIDEO,e.data.url,new FunctionVO(t.onPlayVideoComplete,t),EnumVideoType.XIN_DONG1)},this),i.show()}else this.delayGuideBack(),App.dispatcher.dispatchEvent(EventConst.PLAY_WEB_VIDEO,e.data.url,new FunctionVO(this.onPlayVideoComplete,this),EnumVideoType.XIN_DONG1);else Notice.showBottomCenterMessage(e.info)},t.prototype.onPlayVideoComplete=function(){Video.instance().dispose(),App.data.game2Center.SoundManager.playBGM(SoundManager.bgm)},t.prototype.delayGuideBack=function(){App.timer.doTimeOnce(this,1e3,this.guideBack)},t.prototype.guideBack=function(){App.data.game2Center.DataCenter.guide.video&&this.reqGuideDone()},t.prototype.reqGuideDone=function(){var e={};ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.guideDone,e,new FunctionVO(this.revGuideDone,this))},t.prototype.revGuideDone=function(e){200==e.code?(App.data.game2Center.DataCenter.dianhuaGuide=!1,App.data.game2Center.DataCenter.guide.fill_nick_name=e.data.fill_nick_name,App.data.game2Center.DataCenter.guide.emph_zone=e.data.emph_zone,App.data.game2Center.DataCenter.guide.video=e.data.video,this.reqGuide()):Notice.showBottomCenterMessage(""+e.info)},t.NAME="LoginMediator",t}(Mediator);__reflect(LoginMediator.prototype,"LoginMediator");var NativeBridge=function(){function e(){}return e.prototype.init=function(){this.addCallback("viedoFinishPlay",App.nativeBridge.videoFinish),this.addCallback("videoPrepared",App.nativeBridge.videoPrepared),this.addCallback("payFinish",App.nativeBridge.iosPayFinish),this.addCallback("u8Login",App.nativeBridge.revU8Login),this.addCallback("pay",App.nativeBridge.revU8Pay),this.addCallback("logout",App.nativeBridge.revU8Logout),this.addCallback("keyExit",App.nativeBridge.revKeyExit),this.addCallback("u8LoginFail",App.nativeBridge.revU8LoginFail),this.addCallback("getIosID",App.nativeBridge.revGetIosID),this.addCallback("pushQQGroup",App.nativeBridge.revPushQQGroup),this.addCallback("pushOfficialNetwork",App.nativeBridge.revPushOfficialNetwork),this.addCallback("U8Share",App.nativeBridge.shareBack),this.addCallback("getIMEI",App.nativeBridge.getDeviceCodeBack),this.addCallback("getChannelId",App.nativeBridge.getChannelIdBack),this.addCallback("switchAccount",App.nativeBridge.revU8ReLogin),this.addCallback("changeText",InputTextUtil.updateNativeText)},e.prototype.addCallback=function(e,t){Config.isIosHybird?window.ExternalInterface.addCallback(e,t):egret.ExternalInterface.addCallback(e,t)},e.prototype.call=function(e,t){Config.isIosHybird?window.ExternalInterface.call(e,t):egret.ExternalInterface.call(e,t)},e.prototype.sendLogOut=function(){this.call("u8Logout","")},e.prototype.sendGetIosID=function(){App.data.game2Center.LoadingLock.lockScreen(),this.call("getIosID","")},e.prototype.delayGetIOSID=function(){App.data.game2Center.LoadingLock.unLockScreen()},e.prototype.revGetIosID=function(e){GameLog.log("NativeBridge >> revGetIosID:",e),App.data.game2Center.LoadingLock.unLockScreen();var t=JSON.parse(e);IOSConfig.channel=t.channel,IOSConfig.iosID=t.iosID,App.global.userInfo.channelId="2"},e.prototype.revKeyExit=function(e){if(0==GameManager.isPlaying)Alert.show("是否退出游戏","确定|取消",new FunctionVO(function(e){e.type==Alert.OK&&App.nativeBridge.requestExit()},this));else{if(PanelManager.isShowing(PanelRegister.LOADING_RESVIEW)||PanelManager.isShowing(PanelRegister.G2_GAME_LOAD_SCENE))return void GameLog.log("资源加载中无法返回大厅");Alert.show("是否返回游戏大厅","确定|取消",new FunctionVO(function(e){e.type==Alert.OK&&(PanelManager.removeAllPanel(),GameManager.exitGame(),Video.instance().dispose(!0),Config.isLandscape&&App.setOrientation(egret.OrientationMode.LANDSCAPE),PanelOpenManager.openPanel(EnumPanelID.GAME_HALL))},this))}},e.prototype.requestExit=function(){this.call("keyExit","")},e.prototype.sendU8Login=function(e){GameLog.log("EgeretU8 >> egret调用u8Login接口:"+e),App.nativeBridge.log("request u8 data"),this.call("u8Login",e)},e.prototype.revU8Login=function(e){GameLog.log("EgretU8 >> 返回u8Login接口:"+e),App.nativeBridge.log("get u8 data back"),Config.startPlaySoundEffect?App.dispatcher.dispatchEvent(EventConst.U8LOGIN,e):App.global.userInfo.loginData=e},e.prototype.revU8ReLogin=function(e){App.dispatcher.dispatchEvent(LoginEvent.RELOGIN,e)},e.prototype.revU8LoginFail=function(e){App.nativeBridge.log("u8 login failed"),App.dispatcher.dispatchEvent(EventConst.U8LoginFail)},e.prototype.revU8Logout=function(){App.nativeBridge.log("u8 login out"),App.dispatcher.dispatchEvent(LoginEvent.RELOGIN)},e.prototype.sendPlayVideo=function(e,t,i,n){App.data.game2Center.DataCenter.isVideoPlaying=!0;var o={auth:e,isCirclePlay:i,isMuteMode:t,isLandscapePlay:n};App.nativeBridge.log("request play video "+e),this.call("videoStartPlay",JSON.stringify(o))},e.prototype.videoPrepared=function(){Video.instance().hideMaskSp()},e.prototype.sendVideoPause=function(){this.call("videoPause","")},e.prototype.sendVideoResume=function(){this.call("videoResume","")},e.prototype.sendVideoStop=function(){this.call("videoStop","")},e.prototype.videoFinish=function(e){App.data.game2Center.DataCenter.isVideoPlaying=!1,App.nativeBridge.log("video play complete"),Video.instance().execCompleteHandler()},e.prototype.pushQQGroup=function(e,t){var i={type:"",data:{key:"",group:""}};i.type=e,i.data=t,GameLog.log(i),this.call("joinQQGroup",JSON.stringify(i))},e.prototype.revPushQQGroup=function(e){},e.prototype.pushOfficialNetwork=function(e,t){var i={type:"",data:{url:""}};i.type=e,i.data=t,this.call("callNative",JSON.stringify(i))},e.prototype.revPushOfficialNetwork=function(e){},e.prototype.sendPay=function(e){if(DeviceUtil.IsWeb){if(WanBaSDK.getIntance().wanBaData&&200==e.code){var t=WanBaSDK.getIntance().wanBaData,i={openid:t.openid,openkey:t.openkey,zoneid:t.platform,channel:"wanba",Authorization:App.data.game2Center.DataCenter.skey,gid:e.data.pid,order_id:e.data.order_id,product_id:e.data.product_id};return ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.paymentWanbaDo,i,new FunctionVO(function(e){200==e.code&&App.dispatcher.dispatchEvent(EventConst.REQ_GAME_INFO)},this)),Notice.showBottomCenterMessage(e.info),void App.data.game2Center.LoadingLock.unlock()}if(WanBaSDK.getIntance().wanBaData&&981==e.code){GameLog.log("初始支付数据->>>>"+JSON.stringify(e));var n=window,o={version:"v2",defaultScore:e.data.amount,appid:parseInt(e.data.appid)};return GameLog.log("支付数据->>>>"+JSON.stringify(o)),n.popPayTips(o),n.__paySuccess=function(){GameLog.log("支付成功执行");var t=WanBaSDK.getIntance().wanBaData,i={openid:t.openid,openkey:t.openkey,zoneid:t.platform,channel:"wanba",Authorization:App.data.game2Center.DataCenter.skey,gid:e.data.pid,order_id:e.data.order_id,product_id:e.data.product_id};ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.paymentWanbaDo,i,new FunctionVO(function(e){200==e.code&&App.dispatcher.dispatchEvent(EventConst.REQ_GAME_INFO)},this))},n.__payError=function(){GameLog.log("支付失败执行"),Notice.showBottomCenterMessage("支付失败")},void(n.__payClose=function(){GameLog.log("关闭对话框执行,IOS下无效"),Notice.showBottomCenterMessage("支付取消")})}if(MilletSDK.getInstance().millet&&200==e.code)return MilletSDK.getInstance().order_id=e.data.cp_order_id,GameLog.log("调取小米支付-->"+JSON.stringify(e.data)),MilletSDK.getInstance().pay(e.data.cp_order_id,e.data.cp_user_info,e.data.product_code,e.data.count,App.nativeBridge.H5_Millet_payBack,this),void GameLog.log("小米支付");if(H5_Vivo_SDK.getInstance().vivoData&&200==e.code){H5_Vivo_SDK.getInstance().order_id=e.data.order_id,GameLog.log("调取vivo支付-->"+JSON.stringify(e.data));var a={productName:e.data.payinfo.productName,productDes:e.data.payinfo.productDes,productPrice:e.data.payinfo.productPrice+"",vivoSignature:e.data.payinfo.vivoSignature,appId:H5_Vivo_SDK.getInstance().appid,transNo:e.data.payinfo.transNo+"",uid:H5_Vivo_SDK.getInstance().gameInfo.openid};return void H5_Vivo_SDK.getInstance().Vivo_pay(a,App.nativeBridge.H5_vivo_payBack,App.nativeBridge)}App.nativeBridge.webChanelPay(e.data.order_id,e.data.product_id,e.data.safeCode)}else DeviceUtil.IsIos&&DeviceUtil.IsNative?App.nativeBridge.sendIOSPay(e.data.order_id,e.data.product_id):DeviceUtil.IsAndroid&&DeviceUtil.IsNative},e.prototype.H5_Millet_payBack=function(){var e=MilletSDK.getInstance().order_id;GameLog.log("millet支付订单号"+e);var t={order_id:e};App.timer.clearTimer(App.nativeBridge,App.nativeBridge.checkAndroidPayFinish),ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.payStatusH5,t,new FunctionVO(function(e){200==e.code?(Notice.showBottomCenterMessage("支付成功"),App.dispatcher.dispatchEvent(EventConst.REQ_GAME_INFO),App.data.game2Center.LoadingLock.unlock()):App.timer.serverTimeEnd(App.nativeBridge,App.nativeBridge.checkAndroidPayFinish,ServerTime.serverTime+20,[t])},this))},e.prototype.H5_vivo_payBack=function(){var e=H5_Vivo_SDK.getInstance().order_id;GameLog.log("vivo支付订单号"+e);var t={order_id:e};App.timer.clearTimer(App.nativeBridge,App.nativeBridge.checkAndroidPayFinish),ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.payStatusH5,t,new FunctionVO(function(e){200==e.code?(Notice.showBottomCenterMessage("支付成功"),App.dispatcher.dispatchEvent(EventConst.REQ_GAME_INFO),App.data.game2Center.LoadingLock.unlock()):App.timer.serverTimeEnd(App.nativeBridge,App.nativeBridge.checkAndroidPayFinish,ServerTime.serverTime+60,[t])},this))},e.prototype.webChanelPay=function(e,t,i){App.data.game2Center.LoadingLock.lock(null,null,!1);var n=window.auth_7k7k;if(n){var o=window.K7_SDK;o.Pay({safeCode:i});var a={order_id:e};return App.timer.serverTimeEnd(App.nativeBridge,App.nativeBridge.checkAndroidPayFinish,ServerTime.serverTime+300,[a]),!1}},e.prototype.sendIOSPay=function(e,t){App.data.game2Center.LoadingLock.lock(null,null,!1);var i={order_id:"",payId:"",authorization:"",url:"",channel:""};i.order_id=""+e,i.payId=""+t,i.authorization=""+App.data.game2Center.DataCenter.skey,i.url=""+ProtocolHttpUrlGame2.giftForUser,DeviceUtil.IsNative&&DeviceUtil.IsIos&&(i.channel=IOSConfig.channel),this.call("iosPay",JSON.stringify(i))},e.prototype.sendIOSPayNew=function(e,t){var i=this;ProtocolCommon.instance().send_shop_please_pay(e,t,new FunctionVO(function(e){if(ResponseUtil.checkResponseData(e)){var t=e.data.order_id,n=e.data.code,o={order_id:"",payId:"",authorization:"",url:"",channel:""};o.order_id=""+t,o.payId=""+n,DeviceUtil.IsNative&&DeviceUtil.IsIos&&(o.channel=IOSConfig.channel),i.call("iosPay",JSON.stringify(o))}},this))},e.prototype.iosPayFinish=function(e){if(App.data.game2Center.LoadingLock.unlock(),GameManager.isPlaying&&GameManager.lasetGameId==EnumGameID.GAME2)App.dispatcher.dispatchEvent(EventConst.GIFTFORUSER,e);else{var t=JSON.parse(e);200==t.code?ProtocolCommon.sendBack(ProtocolHttpUrl.ios_is_bought,{order_id:t.data.order_id,receipt:t.data.receipt},new FunctionVO(App.nativeBridge.checkIosPayFinish,App.nativeBridge,t.data.order_id,t.data.receipt,20)):Notice.showBottomCenterMessage(""+t.info)}},e.prototype.checkIosPayFinish=function(e,t,i,n){ResponseUtil.checkResponseData(e)&&e.data&&e.data.type?App.dispatcher.dispatchEvent(EventType.BUY_SUCCESS,e.data.pid,e):n>0?App.timer.doTimeOnce(ProtocolCommon,3e3,ProtocolCommon.sendBack,[ProtocolHttpUrl.ios_is_bought,{order_id:t,receipt:i},new FunctionVO(App.nativeBridge.checkIosPayFinish,App.nativeBridge,t,i,n-1)]):Notice.showBottomCenterMessage("支付失败")
},e.prototype.sendAndroidPay=function(e,t){var i={gid:e,token:App.data.game2Center.DataCenter.skey,goodsDes:t};this.call("pay",JSON.stringify(i))},e.prototype.sendU8PayOld=function(e,t){var i=this,n=ProtocolHttp.giftBuy;n.gid=t.id,n.channel="u8",ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.giftBuy,n,new FunctionVO(function(n){if(200==n.code){var o=n.data.order_id,a=n.data.product_id,s=App.data.game2Center.DataCenter.UserInfo.diamond,r={};if("libao"==e){var h=t["package"],p=t.price,l="解锁"+h[0].cname+"功能";h.length>1&&(l+=",加送"+h[1].num+h[1].cname),r={buyNum:1,productName:h[0].cname,price:p,productDesc:l,orderID:o,productId:a,diamonds:s,ratio:"",serverID:"",serverName:"赵小野",gameType:0}}else{if("diamond"!=e)return!1;var c=t["package"][0],p=t.price;r={buyNum:1,productName:c.num+c.cname,price:p,productDesc:"只需"+p+"元即可获得"+c.num+c.cname,orderID:o,productId:a,diamonds:s,ratio:"",serverID:"",serverName:"赵小野",gameType:0}}i.call("pay",JSON.stringify(r))}},this))},e.prototype.sendU8PayNew=function(e,t){var i=this;App.nativeBridge.log("盒子下单:"+JSON.stringify(t)),ProtocolCommon.instance().send_shop_please_pay(e,t.productId,new FunctionVO(function(n){if(ResponseUtil.checkResponseData(n)){var o=n.data.order_id,a=n.data.code;if(t.gameType=1,t.orderID=o,t.productId=a,1!=e)return!1;GameLog.log(t),App.nativeBridge.log(JSON.stringify(t)),i.call("pay",JSON.stringify(t))}},this))},e.prototype.revU8Pay=function(e){var t=JSON.parse(e);if(App.nativeBridge.log("u8 pay back:"+e),t&&"0"!=t.orderID){var i=t.orderID,n={order_id:i};0==t.gameType?ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.payStatusH5,n,new FunctionVO(function(e){200==e.code?(App.dispatcher.dispatchEvent(EventConst.REQ_GAME_INFO),App.data.game2Center.LoadingLock.unlock()):App.timer.serverTimeEnd(App.nativeBridge,App.nativeBridge.checkAndroidPayFinish,ServerTime.serverTime+60,[n])},this)):1==t.gameType&&ProtocolCommon.sendBack(ProtocolHttpUrl.shop_is_shop,{order_id:i},new FunctionVO(App.nativeBridge.checkAndroidPayFinishNew,App.nativeBridge,i,20))}},e.prototype.checkAndroidPayFinish=function(e){e.spuleTime<=0?App.timer.clearTimer(App.nativeBridge,App.nativeBridge.checkAndroidPayFinish):e.spuleTime%2==1&&ProtocolGame2.sendCommom(ProtocolHttpUrlGame2.payStatusH5,e.args[0],new FunctionVO(function(e){200==e.code&&(App.timer.clearTimer(App.nativeBridge,App.nativeBridge.checkAndroidPayFinish),App.dispatcher.dispatchEvent(EventConst.REQ_GAME_INFO),App.data.game2Center.LoadingLock.unlock())},this))},e.prototype.checkAndroidPayFinishNew=function(e,t,i){ResponseUtil.checkResponseData(e)&&e.data&&e.data.type?App.dispatcher.dispatchEvent(EventType.BUY_SUCCESS,e.data.pid,e):i>0?App.timer.doTimeOnce(ProtocolCommon,3e3,ProtocolCommon.sendBack,[ProtocolHttpUrl.shop_is_shop,{order_id:t},new FunctionVO(App.nativeBridge.checkAndroidPayFinishNew,App.nativeBridge,t,i-1)]):Notice.showBottomCenterMessage("支付失败")},e.prototype.share=function(e,t,i,n,o,a,s,r,h,p){var l={title:e,titleUrl:t,site:a,siteUrl:s,content:i,url:o,imgUrl:n,channelID:r,type:h,scene:p};this.call("U8Share",JSON.stringify(l))},e.prototype.shareBack=function(e){GameLog.log("分享返回数据：",e),App.nativeBridge.log("分享返回数据："+e),Notice.showBottomCenterMessage(e),PanelOpenManager.removePanel(EnumPanelID.GAME_SHARE2)},e.prototype.stopSplash=function(){this.call("stopSplash","")},e.prototype.submitGameData=function(e){this.call("submitGameData",JSON.stringify(e))},e.prototype.customLoadingFlag=function(){if(DeviceUtil.IsNative){var e={current:10,total:10},t=JSON.stringify(e);this.call("customLoadingFlag",t)}},e.prototype.getDeviceCode=function(){this.call("getIMEI","")},e.prototype.getDeviceCodeBack=function(e){App.global.userInfo.deviceCode=e,App.dispatcher.dispatchEvent(LoginEvent.GET_DEVICE_CODE_BACK)},e.prototype.setOrientation=function(e){this.call("isLandscape",e)},e.prototype.getChannelId=function(){this.call("getChannelId","")},e.prototype.getChannelIdBack=function(e){App.global.userInfo.channelId=e,App.nativeBridge.log("渠道ID为:"+e+"==>"+App.global.userInfo.channelId)},e.prototype.log=function(e){this.call("testLog","egert => "+e)},e}();__reflect(NativeBridge.prototype,"NativeBridge"),egret.DisplayObject.prototype.$getConcatenatedVisible=function(){if(this.$parent){var e=this.$parent.$getConcatenatedVisible();return e&&this.$visible}return this.$visible};var mouse;!function(e){var t,i,n,o=function(o,a,s,r){if(o!=e.MouseEvent.ROLL_OVER||!t.isRollOver){if(o==e.MouseEvent.ROLL_OVER?t.isRollOver=!0:o==e.MouseEvent.ROLL_OUT&&delete t.isRollOver,n&&t.buttonModeForMouse)try{var h=i.$displayList.renderBuffer.surface;o==e.MouseEvent.ROLL_OVER?h.style.cursor="pointer":o==e.MouseEvent.ROLL_OUT&&(h.style.cursor="auto")}catch(p){}egret.TouchEvent.dispatchTouchEvent(t,o,a,!1,s,r,null)}};e.enable=function(r){n="Windows PC"==egret.Capabilities.os||"Mac OS"==egret.Capabilities.os,i=r,n&&s();var h=function(i,n){t&&!t.$stage&&(o(e.MouseEvent.MOUSE_OUT,!0,i,n),o(e.MouseEvent.ROLL_OUT,!1,i,n),t=null);var a=r.$hitTest(i,n);null!=a&&a!=r?t?a!=t&&(o(e.MouseEvent.MOUSE_OUT,!0,i,n),t.$getConcatenatedVisible()&&t.hitTestPoint(i,n,!0)||o(e.MouseEvent.ROLL_OUT,!1,i,n),t=a,o(e.MouseEvent.ROLL_OVER,!1,i,n),o(e.MouseEvent.MOUSE_OVER,!0,i,n)):(t=a,o(e.MouseEvent.ROLL_OVER,!1,i,n),o(e.MouseEvent.MOUSE_OVER,!0,i,n)):t&&(o(e.MouseEvent.MOUSE_OUT,!0,i,n),o(e.MouseEvent.ROLL_OUT,!1,i,n),t=null)},p=0/0,l=0/0,c=egret.sys.TouchHandler.prototype.onTouchMove;egret.sys.TouchHandler.prototype.onTouchMove=function(t,n,o){if(p=t,l=n,c.call(this,t,n,o),a){var s=i.$hitTest(t,n);s||(s=i),egret.TouchEvent.dispatchTouchEvent(s,e.MouseEvent.MOUSE_MOVE,!0,!0,t,n,o,!0)}h(t,n)};var d=egret.sys.TouchHandler.prototype.onTouchBegin;egret.sys.TouchHandler.prototype.onTouchBegin=function(e,t,i){d.call(this,e,t,i),h(e,t)};var u=egret.sys.TouchHandler.prototype.onTouchEnd;egret.sys.TouchHandler.prototype.onTouchEnd=function(e,t,i){u.call(this,e,t,i),h(e,t)},r.addEventListener(egret.Event.ENTER_FRAME,function(){0/0!=p&&0/0!=l&&h(p,l)},null)},e.setButtonMode=function(e,t){e.buttonModeForMouse=t};var a=!1;e.setMouseMoveEnabled=function(e){a=e};var s=function(){var t="mousewheel",n=function(t){var n=t.type;("DOMMouseScroll"==n||"mousewheel"==n)&&(t.delta=t.wheelDelta?t.wheelDelta:-(t.detail||0),i.dispatchEventWith(e.MouseEvent.MOUSE_WHEEL,!1,t.delta))};window.addEventListener?("mousewheel"===t&&void 0!==document.mozFullScreen&&(t="DOMMouseScroll"),window.addEventListener(t,function(e){n(e)},!1)):window.attachEvent&&window.attachEvent("on"+t,function(e){e=e||window.event,n(e)})}}(mouse||(mouse={}));var mouse;!function(e){var t=function(){function e(){}return e.MOUSE_MOVE="mouseMove",e.MOUSE_OVER="mouseOver",e.MOUSE_OUT="mouseOut",e.ROLL_OVER="rollOver",e.ROLL_OUT="rollOut",e.MOUSE_WHEEL="mouseWheel",e}();e.MouseEvent=t,__reflect(t.prototype,"mouse.MouseEvent")}(mouse||(mouse={}));var Combox=function(e){function t(){return e.call(this,"ComboxSkin")||this}return __extends(t,e),t.prototype.show=function(i){if(e.prototype.show.call(this,i),i){this._type=i.type,this._dispatcher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this,this.groupBox),this._dispatcher.addEventListener(egret.FocusEvent.FOCUS_OUT,this.onFocusOut,this,this),this.clearItems(),this._items=[];for(var n,o=i.data,a=30,s=0;s<o.length;s++)n=t.getLabel(),n.text=o[s]+"",n.y=a*s,n.name=o[s]+"",n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSelectItem,this),this.groupItems.addChild(n),this._items.push(n);this.groupItems.y=40-this.groupItems.height,this.itemBg.height=o.length*a,null==this._mask&&(this._mask=new egret.Shape,this._mask.y=40,this.addChildAt(this._mask,0),this.groupItems.mask=this._mask),this._mask.graphics.clear(),this._mask.graphics.beginFill(0),this._mask.graphics.drawRect(0,0,this.groupItems.width,this.groupItems.height),this._mask.graphics.endFill(),this.txtSelected.text="请选择",this.selectNum=-1,this._state=0}},t.prototype.onSelectItem=function(e){this.txtSelected.text=e.target.name,this.selectNum=Number(e.target.name),this.onClick(),0==this._type&&App.dispatcher.dispatchEvent(GmCenter.SELECT_CHAPTER,this.selectNum)},t.prototype.onFocusOut=function(e){1==this._state&&(this._state=0,egret.Tween.get(this.groupItems).to({y:40-this.groupItems.height},500))},t.prototype.onClick=function(e){0==this._state?(this._state=1,egret.Tween.get(this.groupItems).to({y:40},200)):(this._state=0,egret.Tween.get(this.groupItems).to({y:40-this.groupItems.height},200))},t.prototype.hide=function(){e.prototype.hide.call(this),this.txtSelected.text="请选择",this.clearItems()},t.prototype.clearItems=function(){if(this._items){for(var e=0;e<this._items.length;e++)this._items[e]&&this._items[e].parent.removeChild(this._items[e]),this._items[e]&&this._items[e].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onSelectItem,this),t._pool.push(this._items[e]);this._items=void 0}},t.getLabel=function(){if(this._pool.length>0)return this._pool.pop();var e=new eui.Label;return e.width=100,e.textColor=0,e.size=30,e},t._pool=[],t}(BaseView);__reflect(Combox.prototype,"Combox");var h5_engine;!function(e){var t=function(e){function t(t){var i=e.call(this,t)||this;return i._isDispose=!1,i}return __extends(t,e),Object.defineProperty(t.prototype,"isDispose",{get:function(){return this._isDispose},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._isDispose=!0},t}(egret.Bitmap);e.GBitmap=t,__reflect(t.prototype,"h5_engine.GBitmap",["IDispose"])}(h5_engine||(h5_engine={}));var h5_engine;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t._isDispose=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"isDispose",{get:function(){return this._isDispose},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._isDispose=!0},t}(egret.DisplayObject);e.GDisplayObject=t,__reflect(t.prototype,"h5_engine.GDisplayObject",["IDispose"])}(h5_engine||(h5_engine={}));var PanelOpenManager=function(){function e(){}return e.openPanel=function(e,t,i){void 0===t&&(t=null),void 0===i&&(i=!0);var n=PanelManager.getPanelName(e);return null==n?!1:(PanelManager.openPanel(n,t,i),!0)},e.removePanel=function(e){var t=PanelManager.getPanelName(e);return null==t?!1:(PanelManager.removePanelByName(t),!0)},e}();__reflect(PanelOpenManager.prototype,"PanelOpenManager");var PanelRegister=function(){function e(){}return e.init=function(){this.registerParent(),this.registerSound(),this.registerAlpha(),this.registerPanelOwner()},e.registerParent=function(){PanelManager.registerPanelParent(this.LOGIN,App.layer.mainLayer),PanelManager.registerPanelParent(this.START_VIDEO,App.layer.mainLayer),PanelManager.registerPanelParent(this.GAME_HALL,App.layer.mainLayer),PanelManager.registerPanelParent(this.HEROINES_DETAIL,App.layer.mainLayer),PanelManager.registerPanelParent(this.VIDEO_BUTTON,App.layer.videoLayer),PanelManager.registerPanelParent(this.FULL_SCREEN_IMAGE,App.layer.popLayer),PanelManager.registerPanelParent(this.GAME_SHARE2,App.layer.popLayer),PanelManager.registerPanelParent(this.GAME_SHARE,App.layer.popLayer),PanelManager.registerPanelParent(this.GAME_FANG_DONG_SELECT,App.layer.mainLayer),PanelManager.registerPanelParent(this.GAME_FANG_DONG_BENAME,App.layer.mainLayer),PanelManager.registerPanelParent(this.RETRY_CONNECT,App.layer.popLayer),PanelManager.registerPanelParent(this.ALERT,App.layer.popLayer),PanelManager.registerPanelParent(this.ALERT2,App.layer.popLayer),PanelManager.registerPanelParent(this.G2_GAME_LOAD_SCENE,App.layer.mainLayer),PanelManager.registerPanelParent(this.G2_GAME_LOGIN_SCENE,App.layer.mainLayer),PanelManager.registerPanelParent(this.G2_GAME_SCENE,App.layer.mainLayer)},e.registerSound=function(){PanelManager.registerPanelSound(this.USER_AGREEMENT,EnumSoundId.WRITE,EnumSoundId.SCROLL_PAPER),PanelManager.registerPanelSound(this.GAMEHALL_SETTING,null,EnumSoundId.PANEL_CLOSE),PanelManager.registerPanelSound(this.UNBIND_PHONE,EnumSoundId.BUBBLE,EnumSoundId.PANEL_CLOSE),PanelManager.registerPanelSound(this.BIND_NEW_PHONE,EnumSoundId.BUBBLE,EnumSoundId.PANEL_CLOSE),PanelManager.registerPanelSound(this.TOURIST_BIND_PHONE,EnumSoundId.BUBBLE,EnumSoundId.PANEL_CLOSE),PanelManager.registerPanelSound(this.FORCE_PHONE_BIND,EnumSoundId.NOTICE),PanelManager.registerPanelSound(this.HERONIES_SETTING,EnumSoundId.BUBBLE,EnumSoundId.PANEL_CLOSE),PanelManager.registerPanelSound(this.GAME_FANG_DONG_MENU,null,EnumSoundId.PANEL_CLOSE),PanelManager.registerPanelSound(this.ALERT,null,EnumSoundId.PANEL_CLOSE),PanelManager.registerPanelSound(this.GAME_FANG_DONG_REVIEW,null,EnumSoundId.PANEL_CLOSE)},e.registerAlpha=function(){PanelManager.registerModalAlpha(this.G2_FinishLovePanel,.8),PanelManager.registerModalAlpha(this.G2_FinishWorkPanel,.8),PanelManager.registerModalAlpha(this.GAME_SHARE2,.01)},e.registerPanelOwner=function(){PanelManager.registerPanelOwner(EnumGameID.FANG_DONG,[this.GAME_FANG_DONG_SELECT,this.GAME_FANG_DONG_BENAME,this.GAME_FANG_DONG_MENU,this.GAME_FANG_DONG_REVIEW]),PanelManager.registerPanelOwner(EnumGameID.GAME2,[this.G2_GAME_LOAD_SCENE,this.G2_GAME_LOGIN_SCENE,this.G2_GAME_SCENE,this.G2_DlcMainDoc,this.G2_DlcMainGame,this.G2_DlcMainGameOver,this.G2_WeixinPanel,this.G2_DianhuaPanel,this.G2_JietongPanel,this.G2_CallingPanel,this.G2_SetPanel,this.G2_LovePanel,this.G2_WorkPanel,this.G2_WorkProPanel,this.G2_LoveProPanel,this.G2_FinishLovePanel,this.G2_FinishWorkPanel,this.G2_CallHistoryPanel,this.G2_ShopPanel,this.G2_BagsPanel,this.G2_ShipinPanel,this.G2_WeiboPanel,this.G2_UseToolPanel,this.G2_BuyToolPanel,this.G2_LibaoFinishPanel,this.G2_MailPanel,this.G2_MailDataPanel,this.G2_LibaoCDPanel,this.G2_LibaomiaohuiPanel,this.G2_LibaoVideoPanel,this.G2_InputNamePanel,this.G2_ProtocolPanel,this.G2_SharePanel,this.G2_ActPanel,this.G2_RedPacketPanel,this.G2_NoticeDialogPanel,this.G2_RedPacketRemindPanel,this.G2_ShopDiamondPanel,this.G2_ShopGoldPanel,this.G2_ShopGiftToolPanel,this.G2_DlcMainPanel,this.G2_MysteriousShop,this.ALERT2])},e.ALERT=PanelManager.registerPanel("AlertPanel",AlertPanel,[],EnumPanelID.ALERT,!0,PanelManager.EFFECT_SCALE,!1),e.ALERT2=PanelManager.registerPanel("Alert2Panel",Alert2Panel,[],EnumPanelID.ALERT2,!0,PanelManager.EFFECT_SCALE,!1),e.GM=PanelManager.registerPanel("GmPanel",GmPanel,[],EnumPanelID.GM,!1,PanelManager.EFFECT_NONE,!1),e.LOGIN=PanelManager.registerPanel("GameLogin",GameLogin,[],EnumPanelID.LOGIN),e.OTHER_LOGIN=PanelManager.registerPanel("GameOtherLogin",GameOtherLogin,[],EnumPanelID.OTHER_LOGIN,!1,PanelManager.EFFECT_ALPHA),e.GAME_HALL=PanelManager.registerPanel("GameHallPanel",GameHallPanel,[],EnumPanelID.GAME_HALL),e.START_VIDEO=PanelManager.registerPanel("StartVideoPanel",StartVideoPanel,[],EnumPanelID.START_VIDEO),e.HEROINES_DETAIL=PanelManager.registerPanel("HEROINES_DETAIL",HeroinesDetailPanel,[],EnumPanelID.HEROINES_DETAIL),e.LOADING_RESVIEW=PanelManager.registerPanel("LoadingResView",LoadingResView,[],EnumPanelID.LOADING_RESVIEW,!1,PanelManager.EFFECT_NONE),e.FULL_SCREEN_IMAGE=PanelManager.registerPanel("FullScreenImagePanel",FullScreenImagePanel,[],EnumPanelID.FULL_SCREEN_IMAGE),e.MEMORY=PanelManager.registerPanel("MemoryPanel",MemoryPanel,[],EnumPanelID.MEMORY,!1,PanelManager.EFFECT_NONE),e.RECORD=PanelManager.registerPanel("RecordPanel",RecordPanel,[],EnumPanelID.RECORD,!1,PanelManager.EFFECT_NONE),e.VIDEO_BUTTON=PanelManager.registerPanel("VideoButtonView",VideoButtonView,[],EnumPanelID.VIDEO_BUTTON,!1,PanelManager.EFFECT_NONE),e.GAMEHALL_SETTING=PanelManager.registerPanel("GameHallSettingPanel",GameHallSettingPanel,[],EnumPanelID.GAMEHALL_SETTING,!0),e.USER_AGREEMENT=PanelManager.registerPanel("UserAgreement",UserAgreement,[],EnumPanelID.USER_AGREEMENT,!0),e.TOURISTLOGIN=PanelManager.registerPanel("Touristlogin",Touristlogin,[],EnumPanelID.TOURISTLOGIN,!0,PanelManager.EFFECT_SCALE,!1),e.HERONIES_BUY=PanelManager.registerPanel("HeroniesBuyPanel",HeroniesBuyPanel,[],EnumPanelID.HERONIES_BUY,!0,PanelManager.EFFECT_SCALE,!1),e.HERONIES_SETTING=PanelManager.registerPanel("HeroniesSettingPanel",HeroniesSettingPanel,[],EnumPanelID.HERONIES_SETTING,!0),e.UNBIND_PHONE=PanelManager.registerPanel("UnBindPhonePanel",UnBindPhonePanel,[],EnumPanelID.UNBIND_PHONE,!0),e.BIND_NEW_PHONE=PanelManager.registerPanel("ToBindNewPhonePanel",ToBindNewPhonePanel,[],EnumPanelID.BIND_NEW_PHONE,!0),e.TOURIST_BIND_PHONE=PanelManager.registerPanel("TouristBindPhonePanel",TouristBindPhonePanel,[],EnumPanelID.TOURIST_BIND_PHONE,!0),e.FORCE_PHONE_BIND=PanelManager.registerPanel("ForcePhoneBindPanel",ForcePhoneBindPanel,[],EnumPanelID.FORCE_PHONE_BIND,!0,PanelManager.EFFECT_SCALE),e.GAME_SHARE=PanelManager.registerPanel("GameSharePanel",GameSharePanel,[],EnumPanelID.GAME_SHARE,!0),e.RETRY_CONNECT=PanelManager.registerPanel("RetryConnectPanel",RetryConnectPanel,[],EnumPanelID.RETRY_CONNECT,!0,PanelManager.EFFECT_SCALE,!1),e.ENDING=PanelManager.registerPanel("EndingPanel",EndingPanel,[],EnumPanelID.ENDING,!1,PanelManager.EFFECT_NONE),e.GAME_SHARE2=PanelManager.registerPanel("GameShare2Panel",GameShare2Panel,[],EnumPanelID.GAME_SHARE2,!0,PanelManager.EFFECT_NONE,!1),e.GAME_FANG_DONG_SELECT=PanelManager.registerPanel("GameFangDongSelectPanel",GameFangDongSelectPanel,[],EnumPanelID.GAME_FANG_DONG_SELECT,!0,PanelManager.EFFECT_NONE,!1),e.GAME_FANG_DONG_BENAME=PanelManager.registerPanel("GameFangDongBenamePanel",GameFangDongBenamePanel,[],EnumPanelID.GAME_FANG_DONG_BENAME,!0,PanelManager.EFFECT_SCALE,!1),e.GAME_FANG_DONG_MENU=PanelManager.registerPanel("GameFangDongMenuPanel",GameFangDongMenuPanel,[],EnumPanelID.GAME_FANG_DONG_MENU,!0,PanelManager.EFFECT_ALPHA,!1),e.GAME_FANG_DONG_REVIEW=PanelManager.registerPanel("GameFangDongReviewPanel",GameFangDongReviewPanel,[],EnumPanelID.GAME_FANG_DONG_REVIEW,!0,PanelManager.EFFECT_ALPHA,!0),e.GAME_FANG_DONG_BUY=PanelManager.registerPanel("GameFangDongBuyPanel",GameFangDongBuyPanel,[],EnumPanelID.GAME_FANG_DONG_BUY,!0,PanelManager.EFFECT_ALPHA,!0),e.G2_GAME_LOAD_SCENE=PanelManager.registerPanel("LoadScene",LoadScene,[],EnumPanelID.G2_GAME_LOAD_SCENE),e.G2_GAME_LOGIN_SCENE=PanelManager.registerPanel("LoginScene",LoginScene,[],EnumPanelID.G2_GAME_LOGIN_SCENE),e.G2_GAME_SCENE=PanelManager.registerPanel("GameScene",GameScene,[],EnumPanelID.G2_GAME_SCENE,!1,PanelManager.EFFECT_NONE,!1),e.G2_DlcMainDoc=PanelManager.registerPanel("DlcMainDoc",DlcMainDoc,[],EnumPanelID.G2_DlcMainDoc,!1,PanelManager.EFFECT_ALPHA,!1),e.G2_DlcMainGame=PanelManager.registerPanel("DlcMainGame",DlcMainGame,[],EnumPanelID.G2_DlcMainGame,!1,PanelManager.EFFECT_ALPHA,!1),e.G2_DlcMainGameOver=PanelManager.registerPanel("DlcMainGameOver",DlcMainGameOver,[],EnumPanelID.G2_DlcMainGameOver,!1,PanelManager.EFFECT_SCALE,!1),e.G2_WeixinPanel=PanelManager.registerPanel("WeixinPanel",WeixinPanel,[],EnumPanelID.G2_WeixinPanel,!0,PanelManager.EFFECT_ALPHA,!1),e.G2_DianhuaPanel=PanelManager.registerPanel("DianhuaPanel",DianhuaPanel,[],EnumPanelID.G2_DianhuaPanel,!0,PanelManager.EFFECT_ALPHA,!1),e.G2_JietongPanel=PanelManager.registerPanel("JietongPanel",JietongPanel,[],EnumPanelID.G2_JietongPanel,!0,PanelManager.EFFECT_ALPHA,!1),e.G2_CallingPanel=PanelManager.registerPanel("CallingPanel",CallingPanel,[],EnumPanelID.G2_CallingPanel,!0,PanelManager.EFFECT_ALPHA,!1),e.G2_SetPanel=PanelManager.registerPanel("SetPanel",SetPanel,[],EnumPanelID.G2_SetPanel,!0,PanelManager.EFFECT_ALPHA,!1),e.G2_LovePanel=PanelManager.registerPanel("LovePanel",LovePanel,[],EnumPanelID.G2_LovePanel,!0,PanelManager.EFFECT_ALPHA,!1),e.G2_WorkPanel=PanelManager.registerPanel("WorkPanel",WorkPanel,[],EnumPanelID.G2_WorkPanel,!0,PanelManager.EFFECT_ALPHA,!1),e.G2_WorkProPanel=PanelManager.registerPanel("WorkProPanel",WorkProPanel,[],EnumPanelID.G2_WorkProPanel,!0,PanelManager.EFFECT_ALPHA,!1),e.G2_LoveProPanel=PanelManager.registerPanel("LoveProPanel",LoveProPanel,[],EnumPanelID.G2_LoveProPanel,!0,PanelManager.EFFECT_ALPHA,!1),e.G2_FinishLovePanel=PanelManager.registerPanel("FinishLovePanel",FinishLovePanel,[],EnumPanelID.G2_FinishLovePanel,!0,PanelManager.EFFECT_SCALE,!1),e.G2_FinishWorkPanel=PanelManager.registerPanel("FinishWorkPanel",FinishWorkPanel,[],EnumPanelID.G2_FinishWorkPanel,!0,PanelManager.EFFECT_SCALE,!1),e.G2_CallHistoryPanel=PanelManager.registerPanel("CallHistoryPanel",CallHistoryPanel,[],EnumPanelID.G2_CallHistoryPanel,!0,PanelManager.EFFECT_ALPHA,!1),e.G2_ShopPanel=PanelManager.registerPanel("ShopPanel",ShopPanel,[],EnumPanelID.G2_ShopPanel,!0,PanelManager.EFFECT_ALPHA,!1),e.G2_BagsPanel=PanelManager.registerPanel("BagsPanel",BagsPanel,[],EnumPanelID.G2_BagsPanel,!0,PanelManager.EFFECT_ALPHA,!1),e.G2_ShipinPanel=PanelManager.registerPanel("ShipinPanel",ShipinPanel,[],EnumPanelID.G2_ShipinPanel,!0,PanelManager.EFFECT_ALPHA,!1),e.G2_WeiboPanel=PanelManager.registerPanel("WeiboPanel",WeiboPanel,[],EnumPanelID.G2_WeiboPanel,!0,PanelManager.EFFECT_ALPHA,!1),e.G2_UseToolPanel=PanelManager.registerPanel("UseToolPanel",UseToolPanel,[],EnumPanelID.G2_UseToolPanel,!0,PanelManager.EFFECT_ALPHA,!1),e.G2_BuyToolPanel=PanelManager.registerPanel("BuyToolPanel",BuyToolPanel,[],EnumPanelID.G2_BuyToolPanel,!0,PanelManager.EFFECT_ALPHA,!1),e.G2_LibaoFinishPanel=PanelManager.registerPanel("LibaoFinishPanel",LibaoFinishPanel,[],EnumPanelID.G2_LibaoFinishPanel,!0,PanelManager.EFFECT_ALPHA,!1),e.G2_MailPanel=PanelManager.registerPanel("MailPanel",MailPanel,[],EnumPanelID.G2_MailPanel,!0,PanelManager.EFFECT_SCALE,!1),e.G2_MailDataPanel=PanelManager.registerPanel("MailDataPanel",MailDataPanel,[],EnumPanelID.G2_MailDataPanel,!0,PanelManager.EFFECT_SCALE,!1),e.G2_LibaoCDPanel=PanelManager.registerPanel("LibaoCDPanel",LibaoCDPanel,[],EnumPanelID.G2_LibaoCDPanel,!0,PanelManager.EFFECT_SCALE,!1),e.G2_LibaomiaohuiPanel=PanelManager.registerPanel("LibaomiaohuiPanel",LibaomiaohuiPanel,[],EnumPanelID.G2_LibaomiaohuiPanel,!0,PanelManager.EFFECT_SCALE,!1),e.G2_LibaoVideoPanel=PanelManager.registerPanel("LibaoVideoPanel",LibaoVideoPanel,[],EnumPanelID.G2_LibaoVideoPanel,!0,PanelManager.EFFECT_ALPHA,!1),e.G2_InputNamePanel=PanelManager.registerPanel("InputNamePanel",InputNamePanel,[],EnumPanelID.G2_InputNamePanel,!0,PanelManager.EFFECT_NONE,!1),e.G2_ProtocolPanel=PanelManager.registerPanel("ProtocolPanel",ProtocolPanel,[],EnumPanelID.G2_ProtocolPanel,!0,PanelManager.EFFECT_SCALE,!1),e.G2_SharePanel=PanelManager.registerPanel("SharePanel",SharePanel,[],EnumPanelID.G2_SharePanel,!0,PanelManager.EFFECT_SCALE,!1),e.G2_ActPanel=PanelManager.registerPanel("ActPanel",ActPanel,[],EnumPanelID.G2_ActPanel,!0,PanelManager.EFFECT_SCALE,!1),e.G2_RedPacketPanel=PanelManager.registerPanel("RedPacketPanel",RedPacketPanel,[],EnumPanelID.G2_RedPacketPanel,!0,PanelManager.EFFECT_SCALE,!1),e.G2_NoticeDialogPanel=PanelManager.registerPanel("NoticeDialogPanel",NoticeDialogPanel,[],EnumPanelID.G2_NoticeDialogPanel,!0,PanelManager.EFFECT_SCALE,!1),e.G2_RedPacketRemindPanel=PanelManager.registerPanel("RedPacketRemindPanel",RedPacketRemindPanel,[],EnumPanelID.G2_RedPacketRemindPanel,!0,PanelManager.EFFECT_SCALE,!1),e.G2_ShopDiamondPanel=PanelManager.registerPanel("ShopDiamondPanel",ShopDiamondPanel,[],EnumPanelID.G2_ShopDiamondPanel,!0,PanelManager.EFFECT_ALPHA,!1),e.G2_ShopGoldPanel=PanelManager.registerPanel("ShopGoldPanel",ShopGoldPanel,[],EnumPanelID.G2_ShopGoldPanel,!0,PanelManager.EFFECT_ALPHA,!1),e.G2_ShopGiftToolPanel=PanelManager.registerPanel("ShopGiftToolPanel",ShopGiftToolPanel,[],EnumPanelID.G2_ShopGiftToolPanel,!0,PanelManager.EFFECT_ALPHA,!1),e.G2_DlcMainPanel=PanelManager.registerPanel("DlcMainPanel",DlcMainPanel,[],EnumPanelID.G2_DlcMainPanel,!0,PanelManager.EFFECT_ALPHA,!1),e.G2_MysteriousShop=PanelManager.registerPanel("MysteriousShop",MysteriousShop,[],EnumPanelID.G2_MysteriousShop,!0,PanelManager.EFFECT_SCALE,!1),e}();__reflect(PanelRegister.prototype,"PanelRegister");var h5_engine;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t._isDispose=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"isDispose",{get:function(){return this._isDispose},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._isDispose=!0},t.prototype.remove=function(){this.parent&&this.parent.removeChild(this)},t}(egret.Shape);e.GShape=t,__reflect(t.prototype,"h5_engine.GShape",["IDispose"])}(h5_engine||(h5_engine={}));var EffectImage=function(e){function t(){var t=e.call(this)||this;return t._isShake=!1,t._shakeNum=0,t._rect=new egret.Rectangle,t._isShow=!1,t._addStaticEffect=!1,t._baseScale=1,t._baseX=0,t._baseY=0,t.init(),t}return __extends(t,e),t.prototype.init=function(){this._image=new eui.Image,this.addChild(this._image)},t.prototype.dispose=function(){this._image&&(this._image.source=null,this._image.parent&&this._image.parent.removeChild(this._image),this._image=null),this._spImageMask&&(this._spImageMask.graphics.clear(),this._spImageMask.parent&&this._spImageMask.parent.removeChild(this._spImageMask),this._spImageMask=null),this._tempImage0&&(this._tempImage0.source=null,this._tempImage0.parent&&this._tempImage0.parent.removeChild(this._tempImage0),this._tempImage0=null),this._tempTexture0&&(this._tempTexture0.dispose(),this._tempTexture0=null),this._tempTexture1&&(this._tempTexture1.dispose(),this._tempTexture1=null),this._tempImage1&&(this._tempImage1.texture&&(this._tempImage1.texture.dispose(),this._tempImage1.texture=null),this._tempImage1.parent&&this._tempImage1.parent.removeChild(this._tempImage0),this._tempImage1=null),this._offsetXYArray=null,this._rect=null,this._matrix=null,this.remove()},t.prototype.remove=function(){this.parent&&this.parent.removeChild(this)},t.prototype.showEffect=function(e,t,i,n){var o=this;void 0===t&&(t=1e3),void 0===i&&(i=0),this._lastEffectType=e,this._addStaticEffect=!1;var a,s=Config.MAIN_WIDTH,r=Config.MAIN_HEIGHT;switch(e){case EnumImageEffect.FADE_IN:this._image.alpha=0,egret.Tween.get(this._image).wait(i).to({alpha:1},t).call(this.onTweenFinish,this,[this._image]);break;case EnumImageEffect.FADE_OUT:this._image.alpha=1,egret.Tween.get(this._image).wait(i).to({alpha:0},t).call(this.onTweenFinish,this,[this._image]);break;case EnumImageEffect.FADE_IN_BLACK:this._image.alpha=1,this.initMask(),egret.Tween.get(this._spImageMask).wait(i).to({alpha:0},t).call(this.onTweenFinish,this,[this._spImageMask]);break;case EnumImageEffect.CHANGE_SCALE:this._image.alpha=1,a={},n.hasOwnProperty("to_scale")&&(a.scaleY=a.scaleX=Number(n.to_scale)),n.hasOwnProperty("to_x")&&(a.x=Number(n.to_x)),n.hasOwnProperty("to_y")&&(a.y=Number(n.to_y)),n.hasOwnProperty("x")&&(this._image.x=Number(n.x)),n.hasOwnProperty("y")&&(this._image.y=Number(n.y)),n.hasOwnProperty("scale")&&(this._image.scaleY=this._image.scaleX=Number(n.scale)),egret.Tween.get(this._image).wait(i).to(a,t).call(this.onTweenFinish,this,[this._image]);break;case EnumImageEffect.MOVE:this._image.alpha=1,this._image.scaleX=this._image.scaleY=this._baseScale,a={},n.hasOwnProperty("x")&&(this._image.x=Number(n.x)),n.hasOwnProperty("y")&&(this._image.y=Number(n.y)),n.hasOwnProperty("to_x")&&(a.x=Number(n.to_x)),n.hasOwnProperty("to_y")&&(a.y=Number(n.to_y)),egret.Tween.get(this._image).wait(i).to(a,t,egret.Ease.sineIn).call(this.onTweenFinish,this,[this._image]);break;case EnumImageEffect.LOOP_MOVE:this._image.alpha=1;var h=n.num?Number(n.num):1,p=n.end?n.end:EnumMoveEnd.MIDDLE;t/=p==EnumMoveEnd.MIDDLE?2*h-.5+.25*(2*h-1):p==EnumMoveEnd.RIGHT?2*h-1+.25*(2*h-2):2*h+.25*(2*h-1),this.onCheckLoop(t,h,p);break;case EnumImageEffect.MOVE_IN:this._image.alpha=1,a={},null==n||"0"==n.dir?(this._image.y=-r,a={y:this._baseY}):"1"==n.dir?(this._image.x=s,a={x:this._baseX}):"2"==n.dir?(this._image.y=r,a={y:this._baseY}):(this._image.x=-s,a={x:-this._baseX}),egret.Tween.get(this._image).wait(i).to(a,t).call(this.onTweenFinish,this,[this._image]);break;case EnumImageEffect.MOVE_OUT:this._image.alpha=1,a={},a=null==n||"0"==n.dir?{y:-r}:"1"==n.dir?{x:s}:"2"==n.dir?{y:r}:{x:-s},egret.Tween.get(this._image).wait(i).to(a,t).call(this.onTweenFinish,this,[this._image]);break;case EnumImageEffect.MOVE_BLACK_MASK_IN:this._image.alpha=1,this.initMask(0,!1,1),a={},null==n||"0"==n.dir?(this._spImageMask.y=0,a.y=-r):"1"==n.dir?(this._spImageMask.x=0,a.x=s):"2"==n.dir?(this._spImageMask.y=0,a.y=r):(this._spImageMask.x=0,a.x=-s),egret.Tween.get(this._spImageMask).wait(i).to(a,t).call(this.onTweenFinish,this,[this._spImageMask]);break;case EnumImageEffect.MOVE_BLACK_MASK_OUT:this._image.alpha=1,this.initMask(0,!1,1),a={},null==n||"0"==n.dir?(this._spImageMask.y=r,a.y=0):"1"==n.dir?(this._spImageMask.x=-s,a.x=0):"2"==n.dir?(this._spImageMask.y=-r,a.y=0):(this._spImageMask.x=s,a.x=0),egret.Tween.get(this._spImageMask).wait(i).to(a,t).call(this.onTweenFinish,this,[this._spImageMask]);break;case EnumImageEffect.FLASH_OUT:this.initMask(16777215),this._spImageMask.alpha=0,egret.Tween.get(this._spImageMask).wait(i).to({alpha:1},t).call(this.onTweenFinish,this,[this._spImageMask]);break;case EnumImageEffect.FLASH_IN:this.initMask(16777215),this._image.alpha=1,egret.Tween.get(this._spImageMask).wait(i).to({alpha:0},t).call(this.onTweenFinish,this,[this._spImageMask]);break;case EnumImageEffect.CUT_TWO_IMAGE_OUT:this._rect.setTo(0,0,s,r>>1),this.tempImage0.texture.drawToTexture(this._image,this._rect),this.addChild(this.tempImage0),this._rect.setTo(0,r>>1,s,r>>1),this.tempImage1.texture.drawToTexture(this._image,this._rect),this.addChild(this.tempImage1),this.tempImage0.y=0,this.tempImage1.y=r>>1,this._image.alpha=0,egret.Tween.get(this.tempImage0).wait(i).to({y:-r>>1},t).call(this.onTweenFinish,this,[this.tempImage0]),egret.Tween.get(this.tempImage1).wait(i).to({y:r},t).call(this.onTweenFinish,this,[this.tempImage1,!1]);break;case EnumImageEffect.CUT_TWO_IMAGE_IN:App.timer.doTimeOnce(this,10,function(){o._rect.setTo(0,0,s,r>>1),o.tempImage0.texture.drawToTexture(o._image,o._rect),o.addChild(o.tempImage0),o._rect.setTo(0,r>>1,s,r>>1),o.tempImage1.texture.drawToTexture(o._image,o._rect),o.addChild(o.tempImage1)}),this.tempImage0.y=-r>>1,this.tempImage1.y=r,this._image.alpha=0,egret.Tween.get(this.tempImage0).wait(i).to({y:0},t).call(this.onTweenFinish,this,[this.tempImage0]),egret.Tween.get(this.tempImage1).wait(i).to({y:r>>1},t).call(this.onTweenFinish,this,[this.tempImage1,!1]);break;case EnumImageEffect.CUT_IMAGE_OUT:a={},this._image.alpha=1,this.initMask(0,!0,1),null==n||"0"==n.dir?(a.scaleY=0,a.y=r>>1):(a.scaleX=0,a.x=s>>1),egret.Tween.get(this._spImageMask).wait(i).to(a,t,egret.Ease.sineIn).call(this.onTweenFinish,this,[this._spImageMask]);break;case EnumImageEffect.CUT_IMAGE_IN:a={},this._image.alpha=1,this.initMask(0,!0,1),null==n||"0"==n.dir?(this._spImageMask.scaleY=0,this._spImageMask.y=r>>1,a.y=0,a.scaleY=1):(this._spImageMask.scaleX=0,this._spImageMask.x=s>>1,a.x=0,a.scaleX=1),egret.Tween.get(this._spImageMask).wait(i).to(a,t,egret.Ease.sineIn).call(this.onTweenFinish,this,[this._spImageMask]);break;case EnumImageEffect.SHAKE:this._image.alpha=1,this.shakeTween(this,n&&n.times?Number(n.times):2,n&&n.offset?Number(n.offset):4,n&&n.speed?Number(n.speed):32);break;case EnumImageEffect.BLACK_MOVE_OUT:this._image.alpha=1,this.tempImage0.source="img_black_mask_png",this.addChild(this.tempImage0),null==n||null==n.dir||"0"==n.dir?(this.tempImage0.scaleY=1.5,this.tempImage0.y=r,egret.Tween.get(this.tempImage0).wait(i).to({y:-r>>1},t).call(this.onTweenFinish,this,[this.tempImage0])):(this.tempImage0.scaleY=-1.5,this.tempImage0.y=0,egret.Tween.get(this.tempImage0).wait(i).to({y:r+(r>>1)},t).call(this.onTweenFinish,this,[this.tempImage0]));break;case EnumImageEffect.BLACK_MOVE_IN:this._image.alpha=1,this.tempImage0.source="img_black_mask_png",this.addChild(this.tempImage0),null==n||null==n.dir||"0"==n.dir?(this.tempImage0.scaleY=1.5,this.tempImage0.y=-r>>1,egret.Tween.get(this.tempImage0).wait(i).to({y:r},t).call(this.onTweenFinish,this,[this.tempImage0])):(this.tempImage0.scaleY=1.5,this.tempImage0.y=r+(r>>1),egret.Tween.get(this.tempImage0).wait(i).to({y:0},t).call(this.onTweenFinish,this,[this.tempImage0]));break;case EnumImageEffect.CLOCK_IN:this._image.alpha=1,null==this._tempObj&&(this._tempObj={}),this.initMask(-1,!1,1),this._spImageMask.x=s>>1,this._spImageMask.y=r>>1,this._tempObj.angle=359,this._tempObj.isRightDir=!1,this._tempObj.radius=Math.ceil(Math.sqrt(s*s+r*r))>>1,egret.Tween.get(this._tempObj,{onChange:this.onChangeClock,onChangeObj:this}).wait(i).to({angle:1},t,egret.Ease.sineIn).call(this.onTweenFinish,this,[this._tempObj]);
break;case EnumImageEffect.CLOCK_OUT:this._image.alpha=1,null==this._tempObj&&(this._tempObj={}),this.initMask(-1,!1,1),this._spImageMask.x=s>>1,this._spImageMask.y=r>>1,this._tempObj.angle=0,this._tempObj.isRightDir=!0,this._tempObj.radius=Math.ceil(Math.sqrt(s*s+r*r))>>1,egret.Tween.get(this._tempObj,{onChange:this.onChangeClock,onChangeObj:this}).wait(i).to({angle:359},t,egret.Ease.sineIn).call(this.onTweenFinish,this,[this._tempObj]);break;case EnumImageEffect.CLOCK_IN_OUT:this._image.alpha=1,null==this._tempObj&&(this._tempObj={}),this.initMask(-1,!0,1),this._spImageMask.x=s>>1,this._spImageMask.y=r>>1,this._tempObj.angle=359,this._tempObj.isRightDir=!1,this._tempObj.radius=Math.ceil(Math.sqrt(this._image.width*this._image.width+this._image.height*this._image.height))>>1,egret.Tween.get(this._tempObj,{onChange:this.onChangeClock,onChangeObj:this}).wait(i).to({angle:1},t,egret.Ease.sineIn).call(this.onTweenFinish,this,[this._tempObj]);break;case EnumImageEffect.CLOCK_IN_MASK:this._image.alpha=1,null==this._tempObj&&(this._tempObj={}),this.initMask(-1,!0,1),this._spImageMask.x=s>>1,this._spImageMask.y=r>>1,this._tempObj.angle=1,this._tempObj.isRightDir=!0,this._tempObj.radius=Math.ceil(Math.sqrt(this._image.width*this._image.width+this._image.height*this._image.height))>>1,egret.Tween.get(this._tempObj,{onChange:this.onChangeClock,onChangeObj:this}).wait(i).to({angle:359},t,egret.Ease.sineIn).call(this.onTweenFinish,this,[this._tempObj]);break;case EnumImageEffect.BRUSH_IN:this._image.alpha=1,this.tempImage0.source="brush_mask_tex_png",this.addChild(this.tempImage0),this.tempImage0.width=s,this.tempImage0.height=r,this.tempImage0.scaleX=-2,this.tempImage0.scaleY=-2,this.tempImage0.x=s,this.tempImage0.y=2*r,egret.Tween.get(this.tempImage0).wait(i).to({y:r,x:3*s},t,egret.Ease.sineIn).call(this.onTweenFinish,this,[this.tempImage0]);break;case EnumImageEffect.BRUSH_OUT:this._image.alpha=1,this.tempImage0.source="brush_mask_tex_png",this.addChild(this.tempImage0),this.tempImage0.width=s,this.tempImage0.height=r,this.tempImage0.scaleX=this.tempImage0.scaleY=2,this.tempImage0.x=2*-s,this.tempImage0.y=0,egret.Tween.get(this.tempImage0).wait(i).to({y:-r,x:0},t,egret.Ease.sineIn).call(this.onTweenFinish,this,[this.tempImage0]);break;case EnumImageEffect.SPREAD_OUT:this._image.alpha=1,n&&"1"==n.isblur?(this.tempImage0.source="img_circle_blur_mask_png",this.tempImage0.width=1700,this.tempImage0.height=1700,this.tempImage0.x=s-1700>>1,this.tempImage0.y=r-1700>>1):(this.tempImage0.source="img_circle_mask_png",this.tempImage0.width=1470,this.tempImage0.height=1470,this.tempImage0.x=s-1470>>1,this.tempImage0.y=r-1470>>1),this.addChild(this.tempImage0),this._image.mask=this.tempImage0,egret.Tween.get(this.tempImage0).wait(i).to({width:10,height:10,x:s-10>>1,y:r-10>>1},t).call(this.onTweenFinish,this,[this.tempImage0]);break;case EnumImageEffect.SPREAD_IN:this._image.alpha=1,n&&"1"==n.isblur?(this.tempImage0.source="img_circle_blur_mask_png",a={width:1700,height:1700,x:s-1700>>1,y:r-1700>>1}):(this.tempImage0.source="img_circle_mask_png",a={width:1470,height:1470,x:s-1470>>1,y:r-1470>>1}),this.tempImage0.width=this.tempImage0.height=10,this.tempImage0.x=s-10>>1,this.tempImage0.y=r-10>>1,this._image.mask=this.tempImage0,this.addChild(this.tempImage0),egret.Tween.get(this.tempImage0).wait(i).to(a,t).call(this.onTweenFinish,this,[this.tempImage0]);break;case EnumImageEffect.SHADE_OUT:this._image.alpha=1,this.tempImage0.source="img_shade_mask_png",this.addChild(this.tempImage0),this._image.mask=this._tempImage0,null==n||null==n.dir||"0"==n.dir?(this.tempImage0.scaleX=2,this.tempImage0.scaleY=2,this.tempImage0.x=-s,this.tempImage0.y=-r,a={x:0,y:0}):"1"==n.dir?(this.tempImage0.scaleX=-2,this.tempImage0.scaleY=2,this.tempImage0.x=2*s,this.tempImage0.y=-r,a={x:s,y:0}):"2"==n.dir?(this.tempImage0.scaleX=-2,this.tempImage0.scaleY=-2,this.tempImage0.x=2*s,this.tempImage0.y=2*r,a={x:s,y:r}):"3"==n.dir&&(this.tempImage0.scaleX=2,this.tempImage0.scaleY=-2,this.tempImage0.x=-s,this.tempImage0.y=2*r,a={x:0,y:r}),egret.Tween.get(this.tempImage0).to(a,t).call(this.onTweenFinish,this,[this.tempImage0]);break;case EnumImageEffect.SHADE_IN:this._image.alpha=1,this.tempImage0.source="img_shade_mask_png",this.addChild(this.tempImage0),null==n||null==n.dir||"0"==n.dir?(this.tempImage0.scaleX=2,this.tempImage0.scaleY=2,this.tempImage0.x=-s,this.tempImage0.y=-r,a={x:0,y:0}):"1"==n.dir?(this.tempImage0.scaleX=-2,this.tempImage0.scaleY=2,this.tempImage0.x=2*s,this.tempImage0.y=-r,a={x:s,y:0}):"2"==n.dir?(this.tempImage0.scaleX=-2,this.tempImage0.scaleY=-2,this.tempImage0.x=2*s,this.tempImage0.y=2*r,a={x:s,y:r}):"3"==n.dir&&(this.tempImage0.scaleX=2,this.tempImage0.scaleY=-2,this.tempImage0.x=-s,this.tempImage0.y=2*r,a={x:0,y:r}),egret.Tween.get(this.tempImage0).to(a,t).call(this.onTweenFinish,this,[this.tempImage0]);break;case EnumImageEffect.NONE_IN:this._image.alpha=1;break;case EnumImageEffect.NONE_OUT:this._image.alpha=0,this._image.source=null;break;case EnumImageEffect.FLASH_WHITE_LIGHT:this._image.alpha=1,this.initMask(16777215,!1,1),this._spImageMask.alpha=0,this.onLoopFlashWhite(n&&n.num?Number(n.num):1);break;case EnumImageEffect.FLASH_BLACK_LIGHT:this._image.alpha=1,this.initMask(0,!1,1),this._spImageMask.alpha=0,this.onLoopFlashBlack(n&&n.num?Number(n.num):1,n&&n.time?Number(n.time):200,250);break;case EnumImageEffect.MEMORY:case EnumImageEffect.WHITE_IMAGINATION:case EnumImageEffect.DARK:case EnumImageEffect.SHAKE_BLUR:case EnumImageEffect.APART_SHAKE:this.addStaticEffect(e,n);break;case EnumImageEffect.CLEAR:this._image.alpha=1,this._isShow=!0,this.removeStaticEffect()}this._isShow=-1==EnumImageEffect.HIDE_EFFECT_LIST.indexOf(e)},t.prototype.addStaticEffect=function(e,t){void 0===t&&(t=null),this._lastEffectType=e,this._addStaticEffect=!0;var i=Config.MAIN_WIDTH,n=Config.MAIN_HEIGHT;switch(e){case EnumImageEffect.MEMORY:this._image.alpha=1,this.tempImage0.source="memory_mask_tex_png",this.addChild(this.tempImage0);break;case EnumImageEffect.WHITE_IMAGINATION:this._image.alpha=1,this.tempImage0.source="memory_mask_tex_png",this.addChild(this.tempImage0),this.tempImage1.source="memory_mask_tex_png",this.addChild(this.tempImage1);break;case EnumImageEffect.DARK:this._image.alpha=1,null==this._staticMaskSp&&(this._staticMaskSp=new egret.Shape),this._staticMaskSp.x=0,this._staticMaskSp.y=0,this.drawRectMask(this._staticMaskSp,0),this._staticMaskSp.alpha=0,this.addChild(this._staticMaskSp),egret.Tween.get(this._staticMaskSp).to({alpha:.6},400).call(this.onTweenFinish,this,[this._staticMaskSp,!1]);break;case EnumImageEffect.SHAKE_BLUR:this._image.alpha=1,this._image.filters=[FilterUtil.getBlurFilterByQuality(t&&t.quality?Number(t.quality):0)],egret.Tween.get(this._image,{loop:!0}).to({scaleX:1.1,scaleY:1.1,x:.1*-this._image.texture.textureWidth>>1,y:.1*-this._image.texture.textureHeight>>1},2400,egret.Ease.sineIn).to({scaleX:1,scaleY:1,x:0,y:0},1200,egret.Ease.sineIn);break;case EnumImageEffect.APART_SHAKE:this._image.alpha=1,this._rect.setTo(0,0,i,n),this.tempImage0.texture.drawToTexture(this._image,this._rect,this._baseScale),this.addChild(this.tempImage0),this._rect.setTo(0,0,i,n),this.tempImage1.texture.drawToTexture(this._image,this._rect,this._baseScale),this.addChild(this.tempImage1),this.tempImage0.alpha=.5,this.tempImage1.alpha=.5,egret.Tween.get(this.tempImage0,{loop:!0}).to({x:-30,y:-15},1e3).wait(50).to({x:0,y:0},800).wait(50).to({x:-30,y:15},1e3).wait(50).to({x:0,y:0},800).wait(50),egret.Tween.get(this.tempImage1,{loop:!0}).to({x:30,y:15},1e3).wait(50).to({x:0,y:0},800).wait(50).to({x:30,y:-15},1e3).wait(50).to({x:0,y:0},800).wait(50)}},t.prototype.removeStaticEffect=function(){this._addStaticEffect=!1,this.resetEffect()},t.prototype.onLoopFlashBlack=function(e,t,i){void 0===t&&(t=200),egret.Tween.removeTweens(this._spImageMask),e>=1?egret.Tween.get(this._spImageMask).to({alpha:1},100,egret.Ease.quartOut).wait(i).to({alpha:0},100,egret.Ease.quadOut).wait(t).call(this.onLoopFlashBlack,this,[e-1,t,i]):0==e?egret.Tween.get(this._spImageMask).to({alpha:1},100,egret.Ease.quartOut).wait(i+1e3).to({alpha:0},1e3).call(this.onLoopFlashBlack,this,[e-1,t,i]):this.resetEffect()},t.prototype.onLoopFlashWhite=function(e){egret.Tween.removeTweens(this._spImageMask),e>=1?egret.Tween.get(this._spImageMask).to({alpha:1},100,egret.Ease.quartOut).wait(50).to({alpha:0},100,egret.Ease.quadOut).wait(200).call(this.onLoopFlashWhite,this,[e-1]):this.resetEffect()},t.prototype.onChangeDrawCircle=function(){this.drawCircleMask(0,Number(this._tempObj.angle))},t.prototype.onChangeClock=function(){this.drawSectorMask(this._tempObj.radius,this._tempObj.isRightDir,this._tempObj.angle?Math.floor(this._tempObj.angle):0)},t.prototype.onTweenNext=function(e,t,i,n){egret.Tween.removeTweens(e),egret.Tween.get(t).to(i,n).call(this.onTweenFinish,this,[t])},t.prototype.shakeTween=function(e,t,i,n){void 0===t&&(t=2),void 0===i&&(i=4),void 0===n&&(n=32),this._isShake||(this._isShake=!0,null==this._offsetXYArray&&(this._offsetXYArray=[0,0]),App.timer.doTimeLoop(this,n,this.onUpdateShake,[e,e.x,e.y,i,t]))},t.prototype.onUpdateShake=function(e,t,i,n,o){this._offsetXYArray[this._shakeNum%2]=this._shakeNum++%4<2?0:n,this._shakeNum>4*o+1&&(App.timer.clearTimer(this,this.onUpdateShake),this._shakeNum=0,this._isShake=!1,this._offsetXYArray[0]=0,this._offsetXYArray[1]=0),e.x=this._offsetXYArray[0]+t,e.y=this._offsetXYArray[1]+i},t.prototype.initMask=function(e,t,i){void 0===e&&(e=0),void 0===t&&(t=!1),void 0===i&&(i=1),null==this._spImageMask&&(this._spImageMask=new egret.Shape),this._spImageMask.x=0,this._spImageMask.y=0,this._spImageMask.alpha=1,e>=0&&this.drawRectMask(this._spImageMask,e),i>=1?this.addChild(this._spImageMask):this.addChildAt(this._spImageMask,0),t&&(this._image.mask=this._spImageMask)},t.prototype.drawRectMask=function(e,t){void 0===t&&(t=0),e.graphics.clear(),e.graphics.beginFill(t),e.graphics.drawRect(0,0,Config.MAIN_WIDTH,Config.MAIN_HEIGHT),e.graphics.endFill()},t.prototype.drawCircleMask=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this._spImageMask.graphics.clear(),this._spImageMask.graphics.beginFill(e),this._spImageMask.graphics.drawCircle(0,0,t),this._spImageMask.graphics.endFill()},t.prototype.createGradientMatrix=function(e,t,i,n,o){null==this._matrix&&(this._matrix=new egret.Matrix),this._matrix.createGradientBox(e,t,i,n,o)},t.prototype.drawSectorMask=function(e,t,i,n,o,a,s){void 0===n&&(n=0),void 0===o&&(o=0),void 0===a&&(a=270),void 0===s&&(s=0),this._spImageMask.graphics.clear(),this._spImageMask.graphics.lineStyle(0,s),this._spImageMask.graphics.beginFill(s),this._spImageMask.graphics.moveTo(n,o),i=Math.abs(i)>360?360:i;var r=Math.ceil(Math.abs(i)/45),h=i/r;h=h*Math.PI/180,a=a*Math.PI/180,this._spImageMask.graphics.lineTo(n+e*Math.cos(a),o+e*Math.sin(a));for(var p,l,c,d,u,g=1;r>=g;g++)a=t?a+h:a-h,p=t?a-h/2:a+h/2,l=n+e/Math.cos(h/2)*Math.cos(p),c=o+e/Math.cos(h/2)*Math.sin(p),d=n+e*Math.cos(a),u=o+e*Math.sin(a),this._spImageMask.graphics.curveTo(l,c,d,u);360!=i&&this._spImageMask.graphics.lineTo(n,o),this._spImageMask.graphics.endFill()},t.prototype.onCheckLoop=function(e,t,i){var n=Config.MAIN_WIDTH;Config.MAIN_HEIGHT;0==t?egret.Tween.removeTweens(this._image):1==t?i==EnumMoveEnd.MIDDLE?egret.Tween.get(this._image).to({x:n-this._image.width},e).wait(.25*e).to({x:n-this._image.width>>1},e>>1).call(this.onCheckLoop,this,[e,t-1,i]):i==EnumMoveEnd.RIGHT?egret.Tween.get(this._image).to({x:n-this._image.width},e).call(this.onCheckLoop,this,[e,t-1,i]):egret.Tween.get(this._image).to({x:n-this._image.width},e).wait(.25*e).to({x:0},e).call(this.onCheckLoop,this,[e,t-1,i]):egret.Tween.get(this._image).to({x:n-this._image.width},e).wait(.25*e).to({x:0},e).wait(.25*e).call(this.onCheckLoop,this,[e,t-1,i])},t.prototype.onTweenFinish=function(e,t){void 0===t&&(t=!0),egret.Tween.removeTweens(e),t&&this.resetEffect()},t.prototype.resetEffect=function(){this._lastEffectType!=EnumImageEffect.LOOP_MOVE&&this._lastEffectType!=EnumImageEffect.MOVE&&this._lastEffectType!=EnumImageEffect.CHANGE_SCALE&&(this._image.x=this._baseX,this._image.y=this._baseY),this._lastEffectType!=EnumImageEffect.CHANGE_SCALE&&(this._image.scaleX=this._baseScale,this._image.scaleY=this._baseScale),this._lastEffectType!=EnumImageEffect.SHAKE_BLUR&&this._lastEffectType!=EnumImageEffect.APART_SHAKE&&egret.Tween.removeTweens(this._image),this._spImageMask&&(egret.Tween.removeTweens(this._spImageMask),this._spImageMask.parent&&this._spImageMask.parent.removeChild(this._spImageMask),this._spImageMask.graphics.clear(),this._spImageMask.alpha=1,this._spImageMask.scaleX=this._spImageMask.scaleY=1),this._tempObj&&this._tempObj.hasOwnProperty("angle")&&(egret.Tween.removeTweens(this._tempObj),delete this._tempObj.angle),0==this._addStaticEffect&&(this._tempImage0&&this._tempImage0.parent&&(this._tempImage0.parent.removeChild(this._tempImage0),this._tempImage0.source=this._tempTexture0,this._tempImage0.x=this._tempImage0.y=0,this._tempImage0.scaleX=1,this._tempImage0.scaleY=1,this._tempImage0.alpha=1),this._tempImage1&&this._tempImage1.parent&&(this._tempImage1.parent.removeChild(this._tempImage1),this._tempImage1.source=this._tempTexture1,this._tempImage1.x=this._tempImage1.y=0,this._tempImage1.alpha=1),this._image.filters&&(this._image.filters=null),this.removeStaticMaskSp()),this._image.mask=null,this._image.alpha=this._isShow?1:0,this._isShow||(this._image.source=null),this._isShake&&(this._isShake=!1,App.timer.clearTimer(this,this.onUpdateShake))},t.prototype.removeStaticMaskSp=function(){var e=this;this._staticMaskSp&&this._staticMaskSp.parent&&egret.Tween.get(this._staticMaskSp).to({alpha:0},400).call(function(){e._staticMaskSp.parent&&(e._staticMaskSp.parent.removeChild(e._staticMaskSp),e._staticMaskSp.graphics.clear(),e._staticMaskSp.alpha=1,egret.Tween.removeTweens(e._staticMaskSp))},this)},Object.defineProperty(t.prototype,"source",{get:function(){return this._image.source},set:function(e){this._image.source=e},enumerable:!0,configurable:!0}),t.prototype.resetBaseData=function(){this._baseX=0,this._baseY=0,this._baseScale=1,this._image.x=0,this._image.y=0,this._image.scaleX=1,this._image.scaleY=1},t.prototype.setBaseX=function(e,t){void 0===t&&(t=!1),this._baseX=e,t&&(this._image.x=e)},t.prototype.setBaseY=function(e,t){void 0===t&&(t=!1),this._baseY=e,t&&(this._image.y=e)},t.prototype.setBaseScale=function(e,t){void 0===t&&(t=!1),this._baseScale=e,t&&(this._image.scaleX=this._image.scaleY=e)},Object.defineProperty(t.prototype,"tempImage0",{get:function(){return null==this._tempImage0&&(this._tempImage0=new eui.Image,this._tempTexture0=new egret.RenderTexture,this._tempImage0.texture=this._tempTexture0),this._tempImage0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tempImage1",{get:function(){return null==this._tempImage1&&(this._tempImage1=new eui.Image,this._tempImage1.texture=new egret.RenderTexture),this._tempImage1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"image",{get:function(){return this._image},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastEffectType",{set:function(e){this._lastEffectType=e},enumerable:!0,configurable:!0}),t}(eui.Group);__reflect(EffectImage.prototype,"EffectImage");var h5_engine;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t._isDispose=!1,t.touchEnabled=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"htmlText",{get:function(){return this._htmlText?this._htmlText:this.text},set:function(e){this.textFlow=HtmlUtil.getHtmlStr(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDispose",{get:function(){return this._isDispose},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._isDispose=!0},t}(egret.TextField);e.GTextField=t,__reflect(t.prototype,"h5_engine.GTextField",["IDispose"])}(h5_engine||(h5_engine={}));var HttpRequest=function(e){function t(){var t=e.call(this)||this;return t._responseType=egret.HttpResponseType.TEXT,t._httpHeader=["Content-Type","application/x-www-form-urlencoded"],t._httpMethod=egret.HttpMethod.POST,t._noticeError=!0,t}return __extends(t,e),t.prototype.send=function(e,t,i,n,o){return void 0===t&&(t=null),void 0===i&&(i=egret.HttpResponseType.TEXT),void 0===n&&(n=egret.HttpMethod.POST),void 0===o&&(o=["Content-Type","application/x-www-form-urlencoded"]),this._url=e,this._data=t,this.responseType=i,this.httpMethod=n,this.httpHeader=o,this._request=new egret.HttpRequest,this._request.addEventListener(egret.Event.COMPLETE,this.onRequestComplete,this),this._request.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onRequestIOError,this),this._request.addEventListener(egret.ProgressEvent.PROGRESS,this.onRequestProgress,this),this._request.addEventListener(egret.HTTPStatusEvent.HTTP_STATUS,this.onRequestHttpStatus,this),this._request.responseType=this.responseType,this._request.open((this._baseURL?this._baseURL:WebParams.ip)+this.url,this.httpMethod),this._request.withCredentials=!0,this._request.setRequestHeader(this.httpHeader[0],this.httpHeader[1]),this._requestStartTime=egret.getTimer(),this.httpMethod==egret.HttpMethod.GET?void this._request.send():(this._request.send(t),GameLog.log("############ POST ##############"),GameLog.log((this._baseURL?this._baseURL:WebParams.ip)+this._url),DeviceUtil.IsNative&&App.nativeBridge.log("request:"+(this._baseURL?this._baseURL:WebParams.ip)+this._url+"["+JSON.stringify(t)+"]"),GameLog.log("发送数据data:",t),void App.layer.showLoading())},t.prototype.onRequestComplete=function(e){var t=e.currentTarget;if(this._response=t.response,t.response){if(this._httpRequestCompFunc){var i=JSON.parse(t.response);GameLog.log("########## RESPONSE ############"),GameLog.log("数据返回data("+(egret.getTimer()-this._requestStartTime)+"ms):",i),DeviceUtil.IsNative&&App.nativeBridge.log("response:"+(this._baseURL?this._baseURL:WebParams.ip)+this._url+"["+JSON.stringify(this._response)+"]"),0==ResponseUtil.checkResponseData(i,!0)&&this._noticeError&&Notice.showBottomCenterMessage(i.data?i.data:i.info),this._httpRequestCompFunc.param&&this._httpRequestCompFunc.param.length>0?this._httpRequestCompFunc.param=[i].concat(this._httpRequestCompFunc.param):this._httpRequestCompFunc.param=[i],this._httpRequestCompFunc.exec()}PanelManager.isShowing(PanelRegister.RETRY_CONNECT)&&PanelOpenManager.removePanel(EnumPanelID.RETRY_CONNECT)}else PanelOpenManager.openPanel(EnumPanelID.RETRY_CONNECT,{url:this._url,data:this._data,callBack:this._httpRequestCompFunc,notice:this._noticeError,baseURL:this._baseURL,needAddToken:this.needAddToken},!1);this.destroy()},t.prototype.onRequestIOError=function(e){PanelOpenManager.openPanel(EnumPanelID.RETRY_CONNECT,{url:this._url,data:this._data,callBack:this._httpRequestCompFunc,notice:this._noticeError,baseURL:this._baseURL,needAddToken:this.needAddToken},!1),this.destroy();var t=e.currentTarget;GameLog.logError(t.response)},t.prototype.onRequestProgress=function(e){},t.prototype.onRequestHttpStatus=function(e){this.destroy(),GameLog.logError("HttpStatus code："+e.status+"msg："+HttpStatusInfo.getMessage(e.status))},Object.defineProperty(t.prototype,"responseType",{get:function(){return this._responseType},set:function(e){this._responseType=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"httpHeader",{get:function(){return this._httpHeader},set:function(e){this._httpHeader=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"httpMethod",{get:function(){return this._httpMethod},set:function(e){this._httpMethod=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"requestCompleteFun",{get:function(){return this._httpRequestCompFunc},set:function(e){this._httpRequestCompFunc=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return this._url},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"noticeError",{set:function(e){this._noticeError=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"response",{get:function(){return this._response},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"httpRequest",{get:function(){return this._request},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"baseURL",{set:function(e){this._baseURL=e},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){App.layer.hideLoading(),this._request&&(this._request.removeEventListener(egret.Event.COMPLETE,this.onRequestComplete,this),this._request.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onRequestIOError,this),this._request.removeEventListener(egret.ProgressEvent.PROGRESS,this.onRequestProgress,this),this._request.removeEventListener(egret.HTTPStatusEvent.HTTP_STATUS,this.onRequestHttpStatus,this)),this._response=null,this._data=null,this._request=null,this._url=null,this._httpHeader=null,this._httpRequestCompFunc=null},t}(egret.HashObject);__reflect(HttpRequest.prototype,"HttpRequest");var HttpStatusInfo=function(){function e(){}return e.getMessage=function(e){this.messageDict||this.initMessageDict();var t=this.messageDict.get(e);return t},e.initMessageDict=function(){this.messageDict=new HashMap,this.registerMessgae(100,"继续"),this.registerMessgae(101,"转换协议"),this.registerMessgae(200,"请求成功"),this.registerMessgae(201,"创建"),this.registerMessgae(202,"接受"),this.registerMessgae(203,"非权威信息"),this.registerMessgae(204,"无内容"),this.registerMessgae(205,"重置内容"),this.registerMessgae(206,"局部内容"),this.registerMessgae(300,"多样选择"),this.registerMessgae(301,"永久移动"),this.registerMessgae(302,"创立"),this.registerMessgae(303,"观察别的部分"),this.registerMessgae(304,"只读"),this.registerMessgae(306,"(没有用的)"),this.registerMessgae(307,"临时重发"),this.registerMessgae(400,"坏请求"),this.registerMessgae(401,"未授权的"),this.registerMessgae(402,"必需的支付"),this.registerMessgae(403,"禁用"),this.registerMessgae(404,"没有找到"),this.registerMessgae(405,"不被允许的方法"),this.registerMessgae(406,"不接受"),this.registerMessgae(407,"代理服务器认证所必需"),this.registerMessgae(408,"请求超时"),this.registerMessgae(409,"冲突"),this.registerMessgae(410,"停止"),this.registerMessgae(411,"必需的长度"),this.registerMessgae(412,"预处理失败"),this.registerMessgae(413,"请求实体太大"),this.registerMessgae(414,"请求的URI过长"),this.registerMessgae(415,"不被支持的媒体类型"),this.registerMessgae(416,"请求范围不满足"),this.registerMessgae(417,"期望失败"),this.registerMessgae(500,"服务器内部错误"),this.registerMessgae(501,"不能实现"),this.registerMessgae(502,"坏网关"),this.registerMessgae(503,"难以获得的服务"),this.registerMessgae(504,"网关超时"),this.registerMessgae(505,"HTTP版本不支持")},e.registerMessgae=function(e,t){this.messageDict.put(e,t)},e}();__reflect(HttpStatusInfo.prototype,"HttpStatusInfo");var UserInfoManager=function(){function e(){this.skey="",this.userAgreeInfo=new UserAgreeInfo,this.HeroinesData={},this.channelId="1"}return Object.defineProperty(e.prototype,"loginVideo",{get:function(){return this._loginVideo},set:function(e){DeviceUtil.IsNative&&0==e.indexOf("//")?this._loginVideo="https:"+e:this._loginVideo=e},enumerable:!0,configurable:!0}),e}();__reflect(UserInfoManager.prototype,"UserInfoManager");var BitmapDataUtil=function(){function e(){}return e.createColorTexture=function(e,t,i,n){void 0===n&&(n=1);var o=new egret.RenderTexture,a=new h5_engine.GShape;return a.graphics.beginFill(e,n),a.graphics.drawRect(0,0,t,i),a.graphics.endFill(),o.drawToTexture(a),o},e.createTextureByClass=function(e,t){var i=new egret.RenderTexture;return i.drawToTexture(e,t),i},e}();__reflect(BitmapDataUtil.prototype,"BitmapDataUtil");var ByteUtils=function(){function e(){}return e.hasKey=function(e,t){return(e&t)>0},e}();__reflect(ByteUtils.prototype,"ByteUtils");var FunctionUtil=function(){function e(){}return e.no=function(){},e}();__reflect(FunctionUtil.prototype,"FunctionUtil");var DispatcherRegister=function(){function e(){this._mouseEventHash=new HashMap,this._moduleEventHash=new HashMap}return e.prototype.addEventListener=function(e,t,i,n){if(n){var o=this._mouseEventHash.get(n),a=void 0;if(o||(o=new HashMap,this._mouseEventHash.put(n,o)),o.get(e)){if(!this.hasEventListener(e,t,i,n)){var s=o.get(e);a=new FunctionVO(t,i),s.push(a)}}else a=new FunctionVO(t,i),o.put(e,[a]),n.addEventListener(e,this.eventHandler,this)}else{var r=this._moduleEventHash.get(e);if(r||(r=[],this._moduleEventHash.put(e,r)),!this.hasEventListener(e,t,i)){var h=new FunctionVO(t,i);r.push(h),App.dispatcher.addEventListener(e,t,i)}}},e.prototype.dispatchEvent=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var n=this._moduleEventHash.get(e);n&&App.dispatcher.dispatchEvent(e,t)},e.prototype.hasEventListener=function(e,t,i,n){if(n){var o=this._mouseEventHash.get(n);if(!o)return!1;var a=o.get(e);if(!a||0==a.length)return!1;for(var s=void 0,r=void 0,h=0;h<a.length;h++)if(s=a[h].fun,r=a[h].thisObject,s==t&&r==i)return!0;return!1}var p=this._moduleEventHash.get(e);if(void 0==!p||0==p.length)return!1;if(!t)return!0;for(var l=p.length,c=0;l>c;c++)if(p[c].fun==t&&p[c].thisObject==i)return!0;return!1},e.prototype.removeEventListener=function(e,t,i,n){if(n){if(this.hasEventListener(e,t,i,n)){for(var o=this._mouseEventHash.get(n),a=o.get(e),s=0;s<a.length;s++)if(a[s].fun==t&&a[s].thisObject==i){a.splice(s,1);break}0==a.length&&(o.remove(e),n.removeEventListener(e,this.eventHandler,this)),0==o.size&&this._mouseEventHash.remove(n)}}else{var r=this._moduleEventHash.get(e);if(r)for(var h=r.length,p=void 0,l=void 0,c=0;h>c;c++)if(p=r[c].listener,l=r[c].thisObject,p==t&&i==l){r.splice(c,1),App.dispatcher.removeEventListener(e,p,l),0==r.length&&this._moduleEventHash.remove(e);break}}},e.prototype.eventHandler=function(e){var t=e.currentTarget,i=this._mouseEventHash.get(t);if(i){var n=i.get(e.type);if(!n||0==n.length)return;for(var o=void 0,a=void 0,s=void 0,r=0;r<n.length;r++)o=n[r],a=o.fun,s=o.thisObject,FunctionApply.doExecute(a,s,[e])}},e.prototype.removeAllListeners=function(){var e,t,i=this._moduleEventHash.keys,n=0,o=0;for(n=0;n<i.length;n++)for(t=i[n],e=this._moduleEventHash.get(i[n]),o=0;o<e.length;o++)App.dispatcher.removeEventListener(t,e[o].fun,e[o].thisObject);this._moduleEventHash.clear();var a,s,r,h=this._mouseEventHash.keys,p=h.length;for(n=0;p>n;n++)if(s=h[n],a=this._mouseEventHash.get(s),s&&a){r=a.keys;for(var l=0;l<r.length;l++)s.removeEventListener(r[n],this.eventHandler,this)}this._mouseEventHash.clear()},e}();__reflect(DispatcherRegister.prototype,"DispatcherRegister");var HtmlUtil=function(){function e(){}return e.getHtmlStr=function(e){var t=/br|<br>/gi,i="\n",n=e.replace(t,i),o=new egret.HtmlTextParser,a=o.parser(n);return a},e.getColorStr=function(e,t){var i=e.substring(e.indexOf("{")+1,e.indexOf("}")),n=this.replaceStr(this.HTML_FORMAT,t,i);return e=e.replace("{"+i+"}",n),this.getHtmlStr(e)},e.getLinkStr=function(e,t){return e=this.replaceStr(this.HTML_U,e),t&&(e=this.replaceStr(this.HTML_FORMAT,t,e)),this.getHtmlStr(e)},e.replaceStr=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];for(var n=t.length,o=0;n>o;o++)e=e.replace("{"+o+"}",t[o]);return e},e.HTML_U="<u>{0}</u>",e.HTML_FORMAT='<font color="{0}">{1}</font>',e}();__reflect(HtmlUtil.prototype,"HtmlUtil");var TypeUtil=function(){function e(){}return e.isArray=function(e){return e&&"object"==typeof e&&Array==e.constructor},e.isString=function(e){return e&&"string"==typeof e&&e.constructor==String},e.isNumber=function(e){return e&&"number"==typeof e&&e.constructor==Number},e.isFunction=function(e){return e&&"function"==typeof e&&e.constructor==Function},e.isObject=function(e){return e&&"object"==typeof e&&e.constructor==Object},e}();__reflect(TypeUtil.prototype,"TypeUtil");var h5_engine;!function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),Object.defineProperty(i.prototype,"brightness",{set:function(t){null==this.m_brightnessMatrix&&(this.m_brightnessMatrix=new e.ColorMatrix),0!=t&&this.m_brightnessMatrix.SetBrightnessMatrix(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"contrast",{set:function(t){var n=t;n=0==t?127:t>0?127*i.s_arrayOfDeltaIndex[t>>0]+127:t/100*127+127,null==this.m_contrastMatrix&&(this.m_contrastMatrix=new e.ColorMatrix),this.m_contrastMatrix.SetContrastMatrix(n)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"saturation",{set:function(t){var i=t;i=0==t?1:t>0?1+3*t/100:t/100+1,null==this.m_saturationMatrix&&(this.m_saturationMatrix=new e.ColorMatrix),this.m_saturationMatrix.SetSaturationMatrix(i)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hue",{set:function(t){null==this.m_hueMatrix&&(this.m_hueMatrix=new e.ColorMatrix),0!=t&&this.m_hueMatrix.SetHueMatrix(t*Math.PI/180)},enumerable:!0,configurable:!0}),i.prototype.AllValuesAreSet=function(){return null!=this.m_brightnessMatrix&&null!=this.m_contrastMatrix&&null!=this.m_saturationMatrix&&null!=this.m_hueMatrix},i.prototype.CalculateFinalFlatArray=function(){return this.CalculateFinalMatrix()?this.m_finalMatrix.GetFlatArray():null},i.prototype.CalculateFinalMatrix=function(){return this.AllValuesAreSet()?(this.m_finalMatrix=new e.ColorMatrix,this.m_finalMatrix.Multiply(this.m_brightnessMatrix),this.m_finalMatrix.Multiply(this.m_contrastMatrix),this.m_finalMatrix.Multiply(this.m_saturationMatrix),this.m_finalMatrix.Multiply(this.m_hueMatrix),!0):!1},i.s_arrayOfDeltaIndex=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],i}(Dispose);e.AdjustColor=t,__reflect(t.prototype,"h5_engine.AdjustColor")}(h5_engine||(h5_engine={}));var h5_engine;!function(e){var t=function(t){function i(){var e=t.call(this,5,5)||this;return e.LoadIdentity(),e}return __extends(i,t),i.prototype.SetBrightnessMatrix=function(e){this.m_matrix&&(this.m_matrix[0][4]=e,this.m_matrix[1][4]=e,this.m_matrix[2][4]=e)},i.prototype.SetContrastMatrix=function(e){if(this.m_matrix){var t=.5*(127-e);e/=127,this.m_matrix[0][0]=e,this.m_matrix[1][1]=e,this.m_matrix[2][2]=e,this.m_matrix[0][4]=t,this.m_matrix[1][4]=t,this.m_matrix[2][4]=t}},i.prototype.SetSaturationMatrix=function(e){if(this.m_matrix){var t=1-e,n=t*i.LUMINANCER;this.m_matrix[0][0]=n+e,this.m_matrix[1][0]=n,this.m_matrix[2][0]=n,n=t*i.LUMINANCEG,this.m_matrix[0][1]=n,this.m_matrix[1][1]=n+e,this.m_matrix[2][1]=n,n=t*i.LUMINANCEB,this.m_matrix[0][2]=n,this.m_matrix[1][2]=n,this.m_matrix[2][2]=n+e}},i.prototype.SetHueMatrix=function(t){if(this.m_matrix){this.LoadIdentity();var i=new e.DynamicMatrix(3,3),n=new e.DynamicMatrix(3,3),o=new e.DynamicMatrix(3,3),a=Math.cos(t),s=Math.sin(t),r=.213,h=.715,p=.072;i.SetValue(0,0,r),i.SetValue(1,0,r),i.SetValue(2,0,r),i.SetValue(0,1,h),i.SetValue(1,1,h),i.SetValue(2,1,h),i.SetValue(0,2,p),i.SetValue(1,2,p),i.SetValue(2,2,p),n.SetValue(0,0,1-r),n.SetValue(1,0,-r),n.SetValue(2,0,-r),n.SetValue(0,1,-h),n.SetValue(1,1,1-h),n.SetValue(2,1,-h),n.SetValue(0,2,-p),n.SetValue(1,2,-p),n.SetValue(2,2,1-p),n.MultiplyNumber(a),o.SetValue(0,0,-r),o.SetValue(1,0,.143),o.SetValue(2,0,-(1-r)),o.SetValue(0,1,-h),o.SetValue(1,1,.14),o.SetValue(2,1,h),o.SetValue(0,2,1-p),o.SetValue(1,2,-.283),o.SetValue(2,2,p),o.MultiplyNumber(s),i.Add(n),i.Add(o);for(var l=0;3>l;l++)for(var c=0;3>c;c++)this.m_matrix[l][c]=i.GetValue(l,c)}},i.prototype.GetFlatArray=function(){if(!this.m_matrix)return null;for(var e=new Array,t=0,i=0;4>i;i++)for(var n=0;5>n;n++)e[t]=this.m_matrix[i][n],t++;return e},i.LUMINANCER=.3086,i.LUMINANCEG=.6094,i.LUMINANCEB=.082,i}(e.DynamicMatrix);e.ColorMatrix=t,__reflect(t.prototype,"h5_engine.ColorMatrix");var i=function(){function e(){this.ox=0,this.oy=0,this.oz=0}return e}();__reflect(i.prototype,"XFormData")}(h5_engine||(h5_engine={}));var EventManager=function(){function e(){this._eventHash=new HashMap}return e.prototype.dispatchEvent=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];
var n=this._eventHash.get(e);if(n){var o=n.concat(),a=o.length,s=void 0,r=void 0;if(a>0)for(var h=0;a>h;h++)s=n[h].listener,r=n[h].thisArg,s&&FunctionApply.doExecute(s,r,t)}},e.prototype.hasEventListener=function(e,t,i){var n=!1,o=this._eventHash.get(e);if(o&&0!=o.length)if(t){for(var a=o.length,s=void 0,r=void 0,h=0;a>h;h++)if(s=o[h].listener,r=o[h].thisArg,s==t&&i==r){n=!0;break}}else n=!0;else n=!1;return n},e.prototype.addEventListener=function(e,t,i){var n=this._eventHash.get(e);if(n||(n=[],this._eventHash.put(e,n)),!this.hasEventListener(e,t,i)){var o={listener:t,thisArg:i};n.push(o)}},e.prototype.removeEventListener=function(e,t,i){var n=this._eventHash.get(e);if(n)for(var o=n.length,a=void 0,s=void 0,r=0;o>r;r++)if(a=n[r].listener,s=n[r].thisArg,a==t&&s==i){n.splice(r,1),0==n.length&&this._eventHash.remove(e);break}},e.prototype.removeAllEventListener=function(){this._eventHash.clear()},e.prototype.removeEventListeners=function(e){e?this._eventHash.remove(e):this.removeAllEventListener()},e}();__reflect(EventManager.prototype,"EventManager");var FunctionApply=function(){function e(){}return e.doExecute=function(e,t,i){if(!this.OPEN_TRY_CATCH)return this.execute(e,t,i);try{return this.execute(e,t,i)}catch(n){GameLog.logError(n.stack)}},e.execute=function(e,t,i){return i&&0!=i.length?e.apply(t,i):e.apply(t)},e.OPEN_TRY_CATCH=!1,e}();__reflect(FunctionApply.prototype,"FunctionApply");var GameManager=function(){function e(){}return e.init=function(){this._gameHash=new HashMap,this.registerGame(EnumGameID.FANG_DONG,"",GameFangDong),this.registerGame(EnumGameID.GAME2,"",Game2)},e.registerGame=function(e,t,i){var n=new GameInfo(e,t,i);if(this._gameHash.has(e))throw"游戏ID重复注册";this._gameHash.put(e,n)},e.startGame=function(e,t){this.exitGame();var i=this._gameHash.get(e);i&&i.gameClass&&(this._lastGameId=e,null==i.gameControl&&(i.gameControl=new i.gameClass),this._currentGame=i.gameControl,App.layer.sceneLayer.addChild(this._currentGame.getView()),this._currentGame.show(t),this._isPlaying=!0)},e.exitGame=function(){this._currentGame&&(this._currentGame.getView().remove(),this._currentGame.hide(),this._currentGame=null,this._isPlaying=!1)},Object.defineProperty(e,"currentGame",{get:function(){return this._currentGame},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isPlaying",{get:function(){return this._isPlaying},enumerable:!0,configurable:!0}),Object.defineProperty(e,"lasetGameId",{get:function(){return this._lastGameId},enumerable:!0,configurable:!0}),e.isCurrentGame=function(e){return this._currentGame&&this._currentGame.gameId==e},e.disposeGame=function(e){if(this._gameHash.has(e)){var t=this._gameHash.get(e);t&&t.dispose()}},e._isPlaying=!1,e._lastGameId=0,e}();__reflect(GameManager.prototype,"GameManager");var GameInfo=function(){function e(e,t,i){this.id=e,this.name=t,this.gameClass=i}return e.prototype.dispose=function(){this.gameControl&&(this.gameControl.dispose(),this.gameControl=null)},e}();__reflect(GameInfo.prototype,"GameInfo");var GameLog=function(){function e(){}return e.codeTimeCal=function(t,i,n){for(var o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];var s=egret.getTimer(),r=i.apply(null,o),h=egret.getTimer()-s;return e.isTraceLog&&console.log(t,"代码耗时",h),h5_engine.LogicInterface.instance&&h5_engine.LogicInterface.instance.logInfo(t,"代码耗时",h),r},e.log=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.isTraceLog&&(t.length>1&&"string"==typeof t[t.length-1]&&0==t[t.length-1].indexOf("color:")?console.log("%c"+t.slice(0,t.length-1).join(" "),t[t.length-1]):console.log.apply(this,[">>>> [log]: "].concat(t))),h5_engine.LogicInterface.instance&&h5_engine.LogicInterface.instance.log.apply(this,t)},e.logDebug=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.isTraceLog&&console.debug.apply(this,[">>>> [debug]: "].concat(t)),h5_engine.LogicInterface.instance&&h5_engine.LogicInterface.instance.logDebug.apply(this,t)},e.logWarn=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.isTraceLog&&console.warn.apply(this,[">>>> [warn]: "].concat(t)),h5_engine.LogicInterface.instance&&h5_engine.LogicInterface.instance.logWarn.apply(this,t)},e.logInfo=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.isTraceLog&&console.info.apply(this,[">>>> [info]: "].concat(t)),h5_engine.LogicInterface.instance&&h5_engine.LogicInterface.instance.logInfo.apply(this,t)},e.logErrorStack=function(t,i){try{throw new Error(t)}catch(n){var o=n.stack;h5_engine.LogicInterface.instance&&h5_engine.LogicInterface.instance.logError(t,o),e.isTraceLog&&console.error(">>>> [error]: ",o)}},e.logError=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var n=t.join(" ");e.isTraceLog&&console.error(">>>> [error]: ",n);try{throw new Error(n)}catch(o){var a=o.stack;return h5_engine.LogicInterface.instance&&h5_engine.LogicInterface.instance.logError(n,a),e.isTraceLog&&console.error(">>>> [error]: ",a),a}},e.isTraceLog=!1,e.RED="color:red",e.GREEN="color:green",e.YELLOW="color:yellow",e.BLUE="color:blue",e}();__reflect(GameLog.prototype,"GameLog");var FunctionVO=function(){function e(e,t){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];this.fun=e,this.thisObject=t,this.param=i}return e.prototype.exec=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.fun){var i=void 0;return this.param?i=this.param.concat(e):e&&(i=e),FunctionApply.doExecute(this.fun,this.thisObject,i)}},e}();__reflect(FunctionVO.prototype,"FunctionVO");